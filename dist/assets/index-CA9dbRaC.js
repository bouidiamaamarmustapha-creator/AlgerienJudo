var zw=Object.defineProperty;var Ww=(t,e,r)=>e in t?zw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Lr=(t,e,r)=>Ww(t,typeof e!="symbol"?e+"":e,r);function Hw(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function My(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Gw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Uy={exports:{}},Bh={},$y={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),Yw=Symbol.for("react.portal"),Vw=Symbol.for("react.fragment"),Jw=Symbol.for("react.strict_mode"),Kw=Symbol.for("react.profiler"),Qw=Symbol.for("react.provider"),Xw=Symbol.for("react.context"),Zw=Symbol.for("react.forward_ref"),eS=Symbol.for("react.suspense"),tS=Symbol.for("react.memo"),rS=Symbol.for("react.lazy"),k1=Symbol.iterator;function nS(t){return t===null||typeof t!="object"?null:(t=k1&&t[k1]||t["@@iterator"],typeof t=="function"?t:null)}var qy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zy=Object.assign,Wy={};function ec(t,e,r){this.props=t,this.context=e,this.refs=Wy,this.updater=r||qy}ec.prototype.isReactComponent={};ec.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ec.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hy(){}Hy.prototype=ec.prototype;function L0(t,e,r){this.props=t,this.context=e,this.refs=Wy,this.updater=r||qy}var A0=L0.prototype=new Hy;A0.constructor=L0;zy(A0,ec.prototype);A0.isPureReactComponent=!0;var P1=Array.isArray,Gy=Object.prototype.hasOwnProperty,k0={current:null},Yy={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Gy.call(e,n)&&!Yy.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Du,type:t,key:a,ref:o,props:i,_owner:k0.current}}function iS(t,e){return{$$typeof:Du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Du}function aS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var E1=/\/+/g;function Hf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aS(""+t.key):e.toString(36)}function Ud(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Du:case Yw:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Hf(o,0):n,P1(i)?(r="",t!=null&&(r=t.replace(E1,"$&/")+"/"),Ud(i,e,r,"",function(u){return u})):i!=null&&(P0(i)&&(i=iS(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(E1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",P1(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+Hf(a,l);o+=Ud(a,e,r,c,i)}else if(c=nS(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+Hf(a,l++),o+=Ud(a,e,r,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ld(t,e,r){if(t==null)return t;var n=[],i=0;return Ud(t,n,"","",function(a){return e.call(r,a,i++)}),n}function sS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var di={current:null},$d={transition:null},oS={ReactCurrentDispatcher:di,ReactCurrentBatchConfig:$d,ReactCurrentOwner:k0};function Jy(){throw Error("act(...) is not supported in production builds of React.")}fr.Children={map:ld,forEach:function(t,e,r){ld(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ld(t,function(){e++}),e},toArray:function(t){return ld(t,function(e){return e})||[]},only:function(t){if(!P0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fr.Component=ec;fr.Fragment=Vw;fr.Profiler=Kw;fr.PureComponent=L0;fr.StrictMode=Jw;fr.Suspense=eS;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oS;fr.act=Jy;fr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=zy({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=k0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Gy.call(e,c)&&!Yy.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Du,type:t.type,key:i,ref:a,props:n,_owner:o}};fr.createContext=function(t){return t={$$typeof:Xw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Qw,_context:t},t.Consumer=t};fr.createElement=Vy;fr.createFactory=function(t){var e=Vy.bind(null,t);return e.type=t,e};fr.createRef=function(){return{current:null}};fr.forwardRef=function(t){return{$$typeof:Zw,render:t}};fr.isValidElement=P0;fr.lazy=function(t){return{$$typeof:rS,_payload:{_status:-1,_result:t},_init:sS}};fr.memo=function(t,e){return{$$typeof:tS,type:t,compare:e===void 0?null:e}};fr.startTransition=function(t){var e=$d.transition;$d.transition={};try{t()}finally{$d.transition=e}};fr.unstable_act=Jy;fr.useCallback=function(t,e){return di.current.useCallback(t,e)};fr.useContext=function(t){return di.current.useContext(t)};fr.useDebugValue=function(){};fr.useDeferredValue=function(t){return di.current.useDeferredValue(t)};fr.useEffect=function(t,e){return di.current.useEffect(t,e)};fr.useId=function(){return di.current.useId()};fr.useImperativeHandle=function(t,e,r){return di.current.useImperativeHandle(t,e,r)};fr.useInsertionEffect=function(t,e){return di.current.useInsertionEffect(t,e)};fr.useLayoutEffect=function(t,e){return di.current.useLayoutEffect(t,e)};fr.useMemo=function(t,e){return di.current.useMemo(t,e)};fr.useReducer=function(t,e,r){return di.current.useReducer(t,e,r)};fr.useRef=function(t){return di.current.useRef(t)};fr.useState=function(t){return di.current.useState(t)};fr.useSyncExternalStore=function(t,e,r){return di.current.useSyncExternalStore(t,e,r)};fr.useTransition=function(){return di.current.useTransition()};fr.version="18.3.1";$y.exports=fr;var b=$y.exports;const lS=My(b),cS=Hw({__proto__:null,default:lS},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS=b,dS=Symbol.for("react.element"),hS=Symbol.for("react.fragment"),fS=Object.prototype.hasOwnProperty,gS=uS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pS={key:!0,ref:!0,__self:!0,__source:!0};function Ky(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)fS.call(e,n)&&!pS.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:dS,type:t,key:a,ref:o,props:i,_owner:gS.current}}Bh.Fragment=hS;Bh.jsx=Ky;Bh.jsxs=Ky;Uy.exports=Bh;var s=Uy.exports,rp={},Qy={exports:{}},$i={},Xy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,ye){var ve=te.length;te.push(ye);e:for(;0<ve;){var fe=ve-1>>>1,P=te[fe];if(0<i(P,ye))te[fe]=ye,te[ve]=P,ve=fe;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ye=te[0],ve=te.pop();if(ve!==ye){te[0]=ve;e:for(var fe=0,P=te.length,q=P>>>1;fe<q;){var X=2*(fe+1)-1,ae=te[X],be=X+1,Ne=te[be];if(0>i(ae,ve))be<P&&0>i(Ne,ae)?(te[fe]=Ne,te[be]=ve,fe=be):(te[fe]=ae,te[X]=ve,fe=X);else if(be<P&&0>i(Ne,ve))te[fe]=Ne,te[be]=ve,fe=be;else break e}}return ye}function i(te,ye){var ve=te.sortIndex-ye.sortIndex;return ve!==0?ve:te.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,g=null,m=3,f=!1,x=!1,j=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(te){for(var ye=r(u);ye!==null;){if(ye.callback===null)n(u);else if(ye.startTime<=te)n(u),ye.sortIndex=ye.expirationTime,e(c,ye);else break;ye=r(u)}}function A(te){if(j=!1,N(te),!x)if(r(c)!==null)x=!0,he(O);else{var ye=r(u);ye!==null&&Le(A,ye.startTime-te)}}function O(te,ye){x=!1,j&&(j=!1,v(F),F=-1),f=!0;var ve=m;try{for(N(ye),g=r(c);g!==null&&(!(g.expirationTime>ye)||te&&!D());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,m=g.priorityLevel;var P=fe(g.expirationTime<=ye);ye=t.unstable_now(),typeof P=="function"?g.callback=P:g===r(c)&&n(c),N(ye)}else n(c);g=r(c)}if(g!==null)var q=!0;else{var X=r(u);X!==null&&Le(A,X.startTime-ye),q=!1}return q}finally{g=null,m=ve,f=!1}}var G=!1,V=null,F=-1,$=5,Z=-1;function D(){return!(t.unstable_now()-Z<$)}function Y(){if(V!==null){var te=t.unstable_now();Z=te;var ye=!0;try{ye=V(!0,te)}finally{ye?ce():(G=!1,V=null)}}else G=!1}var ce;if(typeof C=="function")ce=function(){C(Y)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=Y,ce=function(){H.postMessage(null)}}else ce=function(){_(Y,0)};function he(te){V=te,G||(G=!0,ce())}function Le(te,ye){F=_(function(){te(t.unstable_now())},ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){x||f||(x=!0,he(O))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(te){switch(m){case 1:case 2:case 3:var ye=3;break;default:ye=m}var ve=m;m=ye;try{return te()}finally{m=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,ye){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ve=m;m=te;try{return ye()}finally{m=ve}},t.unstable_scheduleCallback=function(te,ye,ve){var fe=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?fe+ve:fe):ve=fe,te){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ve+P,te={id:d++,callback:ye,priorityLevel:te,startTime:ve,expirationTime:P,sortIndex:-1},ve>fe?(te.sortIndex=ve,e(u,te),r(c)===null&&te===r(u)&&(j?(v(F),F=-1):j=!0,Le(A,ve-fe))):(te.sortIndex=P,e(c,te),x||f||(x=!0,he(O))),te},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(te){var ye=m;return function(){var ve=m;m=ye;try{return te.apply(this,arguments)}finally{m=ve}}}})(Zy);Xy.exports=Zy;var mS=Xy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vS=b,Ui=mS;function Nt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eb=new Set,du={};function Mo(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(du[t]=e,t=0;t<e.length;t++)eb.add(e[t])}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=Object.prototype.hasOwnProperty,yS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F1={},T1={};function bS(t){return np.call(T1,t)?!0:np.call(F1,t)?!1:yS.test(t)?T1[t]=!0:(F1[t]=!0,!1)}function xS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _S(t,e,r,n){if(e===null||typeof e>"u"||xS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hi(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new hi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new hi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new hi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new hi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new hi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new hi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new hi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new hi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new hi(t,5,!1,t.toLowerCase(),null,!1,!1)});var E0=/[\-:]([a-z])/g;function F0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(E0,F0);Wn[e]=new hi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(E0,F0);Wn[e]=new hi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(E0,F0);Wn[e]=new hi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new hi(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new hi(t,1,!1,t.toLowerCase(),null,!0,!0)});function T0(t,e,r,n){var i=Wn.hasOwnProperty(e)?Wn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_S(e,r,i,n)&&(r=null),n||i===null?bS(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var hs=vS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cd=Symbol.for("react.element"),yl=Symbol.for("react.portal"),bl=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),tb=Symbol.for("react.provider"),rb=Symbol.for("react.context"),I0=Symbol.for("react.forward_ref"),ap=Symbol.for("react.suspense"),sp=Symbol.for("react.suspense_list"),R0=Symbol.for("react.memo"),Es=Symbol.for("react.lazy"),nb=Symbol.for("react.offscreen"),D1=Symbol.iterator;function Tc(t){return t===null||typeof t!="object"?null:(t=D1&&t[D1]||t["@@iterator"],typeof t=="function"?t:null)}var Qr=Object.assign,Gf;function Wc(t){if(Gf===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Gf=e&&e[1]||""}return`
`+Gf+t}var Yf=!1;function Vf(t,e){if(!t||Yf)return"";Yf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Yf=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Wc(t):""}function wS(t){switch(t.tag){case 5:return Wc(t.type);case 16:return Wc("Lazy");case 13:return Wc("Suspense");case 19:return Wc("SuspenseList");case 0:case 2:case 15:return t=Vf(t.type,!1),t;case 11:return t=Vf(t.type.render,!1),t;case 1:return t=Vf(t.type,!0),t;default:return""}}function op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bl:return"Fragment";case yl:return"Portal";case ip:return"Profiler";case D0:return"StrictMode";case ap:return"Suspense";case sp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rb:return(t.displayName||"Context")+".Consumer";case tb:return(t._context.displayName||"Context")+".Provider";case I0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R0:return e=t.displayName||null,e!==null?e:op(t.type)||"Memo";case Es:e=t._payload,t=t._init;try{return op(t(e))}catch{}}return null}function SS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return op(e);case 8:return e===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ib(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jS(t){var e=ib(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ud(t){t._valueTracker||(t._valueTracker=jS(t))}function ab(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ib(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lp(t,e){var r=e.checked;return Qr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function I1(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Js(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sb(t,e){e=e.checked,e!=null&&T0(t,"checked",e,!1)}function cp(t,e){sb(t,e);var r=Js(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?up(t,e.type,r):e.hasOwnProperty("defaultValue")&&up(t,e.type,Js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function R1(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function up(t,e,r){(e!=="number"||ih(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Hc=Array.isArray;function El(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Js(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Nt(91));return Qr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O1(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Nt(92));if(Hc(r)){if(1<r.length)throw Error(Nt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Js(r)}}function ob(t,e){var r=Js(e.value),n=Js(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function B1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dd,cb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dd=dd||document.createElement("div"),dd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NS=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(t){NS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jc[e]=Jc[t]})});function ub(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Jc.hasOwnProperty(t)&&Jc[t]?(""+e).trim():e+"px"}function db(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=ub(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var CS=Qr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fp(t,e){if(e){if(CS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Nt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Nt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Nt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Nt(62))}}function gp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=null;function O0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mp=null,Fl=null,Tl=null;function M1(t){if(t=Ou(t)){if(typeof mp!="function")throw Error(Nt(280));var e=t.stateNode;e&&(e=zh(e),mp(t.stateNode,t.type,e))}}function hb(t){Fl?Tl?Tl.push(t):Tl=[t]:Fl=t}function fb(){if(Fl){var t=Fl,e=Tl;if(Tl=Fl=null,M1(t),e)for(t=0;t<e.length;t++)M1(e[t])}}function gb(t,e){return t(e)}function pb(){}var Jf=!1;function mb(t,e,r){if(Jf)return t(e,r);Jf=!0;try{return gb(t,e,r)}finally{Jf=!1,(Fl!==null||Tl!==null)&&(pb(),fb())}}function fu(t,e){var r=t.stateNode;if(r===null)return null;var n=zh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Nt(231,e,typeof r));return r}var vp=!1;if(os)try{var Dc={};Object.defineProperty(Dc,"passive",{get:function(){vp=!0}}),window.addEventListener("test",Dc,Dc),window.removeEventListener("test",Dc,Dc)}catch{vp=!1}function LS(t,e,r,n,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Kc=!1,ah=null,sh=!1,yp=null,AS={onError:function(t){Kc=!0,ah=t}};function kS(t,e,r,n,i,a,o,l,c){Kc=!1,ah=null,LS.apply(AS,arguments)}function PS(t,e,r,n,i,a,o,l,c){if(kS.apply(this,arguments),Kc){if(Kc){var u=ah;Kc=!1,ah=null}else throw Error(Nt(198));sh||(sh=!0,yp=u)}}function Uo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function vb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U1(t){if(Uo(t)!==t)throw Error(Nt(188))}function ES(t){var e=t.alternate;if(!e){if(e=Uo(t),e===null)throw Error(Nt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return U1(i),t;if(a===n)return U1(i),e;a=a.sibling}throw Error(Nt(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(Nt(189))}}if(r.alternate!==n)throw Error(Nt(190))}if(r.tag!==3)throw Error(Nt(188));return r.stateNode.current===r?t:e}function yb(t){return t=ES(t),t!==null?bb(t):null}function bb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bb(t);if(e!==null)return e;t=t.sibling}return null}var xb=Ui.unstable_scheduleCallback,$1=Ui.unstable_cancelCallback,FS=Ui.unstable_shouldYield,TS=Ui.unstable_requestPaint,un=Ui.unstable_now,DS=Ui.unstable_getCurrentPriorityLevel,B0=Ui.unstable_ImmediatePriority,_b=Ui.unstable_UserBlockingPriority,oh=Ui.unstable_NormalPriority,IS=Ui.unstable_LowPriority,wb=Ui.unstable_IdlePriority,Mh=null,Ra=null;function RS(t){if(Ra&&typeof Ra.onCommitFiberRoot=="function")try{Ra.onCommitFiberRoot(Mh,t,void 0,(t.current.flags&128)===128)}catch{}}var fa=Math.clz32?Math.clz32:MS,OS=Math.log,BS=Math.LN2;function MS(t){return t>>>=0,t===0?32:31-(OS(t)/BS|0)|0}var hd=64,fd=4194304;function Gc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=Gc(l):(a&=o,a!==0&&(n=Gc(a)))}else o=r&~i,o!==0?n=Gc(o):a!==0&&(n=Gc(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-fa(e),i=1<<r,n|=t[r],e&=~i;return n}function US(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $S(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-fa(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=US(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function bp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sb(){var t=hd;return hd<<=1,!(hd&4194240)&&(hd=64),t}function Kf(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Iu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fa(e),t[e]=r}function qS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-fa(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function M0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-fa(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var kr=0;function jb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nb,U0,Cb,Lb,Ab,xp=!1,gd=[],$s=null,qs=null,zs=null,gu=new Map,pu=new Map,Ts=[],zS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q1(t,e){switch(t){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":gu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pu.delete(e.pointerId)}}function Ic(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ou(e),e!==null&&U0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WS(t,e,r,n,i){switch(e){case"focusin":return $s=Ic($s,t,e,r,n,i),!0;case"dragenter":return qs=Ic(qs,t,e,r,n,i),!0;case"mouseover":return zs=Ic(zs,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return gu.set(a,Ic(gu.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,pu.set(a,Ic(pu.get(a)||null,t,e,r,n,i)),!0}return!1}function kb(t){var e=No(t.target);if(e!==null){var r=Uo(e);if(r!==null){if(e=r.tag,e===13){if(e=vb(r),e!==null){t.blockedOn=e,Ab(t.priority,function(){Cb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=_p(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);pp=n,r.target.dispatchEvent(n),pp=null}else return e=Ou(r),e!==null&&U0(e),t.blockedOn=r,!1;e.shift()}return!0}function z1(t,e,r){qd(t)&&r.delete(e)}function HS(){xp=!1,$s!==null&&qd($s)&&($s=null),qs!==null&&qd(qs)&&(qs=null),zs!==null&&qd(zs)&&(zs=null),gu.forEach(z1),pu.forEach(z1)}function Rc(t,e){t.blockedOn===e&&(t.blockedOn=null,xp||(xp=!0,Ui.unstable_scheduleCallback(Ui.unstable_NormalPriority,HS)))}function mu(t){function e(i){return Rc(i,t)}if(0<gd.length){Rc(gd[0],t);for(var r=1;r<gd.length;r++){var n=gd[r];n.blockedOn===t&&(n.blockedOn=null)}}for($s!==null&&Rc($s,t),qs!==null&&Rc(qs,t),zs!==null&&Rc(zs,t),gu.forEach(e),pu.forEach(e),r=0;r<Ts.length;r++)n=Ts[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ts.length&&(r=Ts[0],r.blockedOn===null);)kb(r),r.blockedOn===null&&Ts.shift()}var Dl=hs.ReactCurrentBatchConfig,ch=!0;function GS(t,e,r,n){var i=kr,a=Dl.transition;Dl.transition=null;try{kr=1,$0(t,e,r,n)}finally{kr=i,Dl.transition=a}}function YS(t,e,r,n){var i=kr,a=Dl.transition;Dl.transition=null;try{kr=4,$0(t,e,r,n)}finally{kr=i,Dl.transition=a}}function $0(t,e,r,n){if(ch){var i=_p(t,e,r,n);if(i===null)sg(t,e,n,uh,r),q1(t,n);else if(WS(i,t,e,r,n))n.stopPropagation();else if(q1(t,n),e&4&&-1<zS.indexOf(t)){for(;i!==null;){var a=Ou(i);if(a!==null&&Nb(a),a=_p(t,e,r,n),a===null&&sg(t,e,n,uh,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else sg(t,e,n,null,r)}}var uh=null;function _p(t,e,r,n){if(uh=null,t=O0(n),t=No(t),t!==null)if(e=Uo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=vb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uh=t,null}function Pb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DS()){case B0:return 1;case _b:return 4;case oh:case IS:return 16;case wb:return 536870912;default:return 16}default:return 16}}var Rs=null,q0=null,zd=null;function Eb(){if(zd)return zd;var t,e=q0,r=e.length,n,i="value"in Rs?Rs.value:Rs.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return zd=i.slice(t,1<n?1-n:void 0)}function Wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pd(){return!0}function W1(){return!1}function qi(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?pd:W1,this.isPropagationStopped=W1,this}return Qr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z0=qi(tc),Ru=Qr({},tc,{view:0,detail:0}),VS=qi(Ru),Qf,Xf,Oc,Uh=Qr({},Ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oc&&(Oc&&t.type==="mousemove"?(Qf=t.screenX-Oc.screenX,Xf=t.screenY-Oc.screenY):Xf=Qf=0,Oc=t),Qf)},movementY:function(t){return"movementY"in t?t.movementY:Xf}}),H1=qi(Uh),JS=Qr({},Uh,{dataTransfer:0}),KS=qi(JS),QS=Qr({},Ru,{relatedTarget:0}),Zf=qi(QS),XS=Qr({},tc,{animationName:0,elapsedTime:0,pseudoElement:0}),ZS=qi(XS),ej=Qr({},tc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tj=qi(ej),rj=Qr({},tc,{data:0}),G1=qi(rj),nj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ij={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aj[t])?!!e[t]:!1}function W0(){return sj}var oj=Qr({},Ru,{key:function(t){if(t.key){var e=nj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ij[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W0,charCode:function(t){return t.type==="keypress"?Wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lj=qi(oj),cj=Qr({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y1=qi(cj),uj=Qr({},Ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W0}),dj=qi(uj),hj=Qr({},tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),fj=qi(hj),gj=Qr({},Uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pj=qi(gj),mj=[9,13,27,32],H0=os&&"CompositionEvent"in window,Qc=null;os&&"documentMode"in document&&(Qc=document.documentMode);var vj=os&&"TextEvent"in window&&!Qc,Fb=os&&(!H0||Qc&&8<Qc&&11>=Qc),V1=" ",J1=!1;function Tb(t,e){switch(t){case"keyup":return mj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Db(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xl=!1;function yj(t,e){switch(t){case"compositionend":return Db(e);case"keypress":return e.which!==32?null:(J1=!0,V1);case"textInput":return t=e.data,t===V1&&J1?null:t;default:return null}}function bj(t,e){if(xl)return t==="compositionend"||!H0&&Tb(t,e)?(t=Eb(),zd=q0=Rs=null,xl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fb&&e.locale!=="ko"?null:e.data;default:return null}}var xj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xj[t.type]:e==="textarea"}function Ib(t,e,r,n){hb(n),e=dh(e,"onChange"),0<e.length&&(r=new z0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Xc=null,vu=null;function _j(t){Gb(t,0)}function $h(t){var e=Sl(t);if(ab(e))return t}function wj(t,e){if(t==="change")return e}var Rb=!1;if(os){var eg;if(os){var tg="oninput"in document;if(!tg){var Q1=document.createElement("div");Q1.setAttribute("oninput","return;"),tg=typeof Q1.oninput=="function"}eg=tg}else eg=!1;Rb=eg&&(!document.documentMode||9<document.documentMode)}function X1(){Xc&&(Xc.detachEvent("onpropertychange",Ob),vu=Xc=null)}function Ob(t){if(t.propertyName==="value"&&$h(vu)){var e=[];Ib(e,vu,t,O0(t)),mb(_j,e)}}function Sj(t,e,r){t==="focusin"?(X1(),Xc=e,vu=r,Xc.attachEvent("onpropertychange",Ob)):t==="focusout"&&X1()}function jj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $h(vu)}function Nj(t,e){if(t==="click")return $h(e)}function Cj(t,e){if(t==="input"||t==="change")return $h(e)}function Lj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ma=typeof Object.is=="function"?Object.is:Lj;function yu(t,e){if(ma(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!np.call(e,i)||!ma(t[i],e[i]))return!1}return!0}function Z1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e2(t,e){var r=Z1(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Z1(r)}}function Bb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mb(){for(var t=window,e=ih();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ih(t.document)}return e}function G0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Aj(t){var e=Mb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Bb(r.ownerDocument.documentElement,r)){if(n!==null&&G0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=e2(r,a);var o=e2(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kj=os&&"documentMode"in document&&11>=document.documentMode,_l=null,wp=null,Zc=null,Sp=!1;function t2(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sp||_l==null||_l!==ih(n)||(n=_l,"selectionStart"in n&&G0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zc&&yu(Zc,n)||(Zc=n,n=dh(wp,"onSelect"),0<n.length&&(e=new z0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=_l)))}function md(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wl={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},rg={},Ub={};os&&(Ub=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function qh(t){if(rg[t])return rg[t];if(!wl[t])return t;var e=wl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Ub)return rg[t]=e[r];return t}var $b=qh("animationend"),qb=qh("animationiteration"),zb=qh("animationstart"),Wb=qh("transitionend"),Hb=new Map,r2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(t,e){Hb.set(t,e),Mo(e,[t])}for(var ng=0;ng<r2.length;ng++){var ig=r2[ng],Pj=ig.toLowerCase(),Ej=ig[0].toUpperCase()+ig.slice(1);Xs(Pj,"on"+Ej)}Xs($b,"onAnimationEnd");Xs(qb,"onAnimationIteration");Xs(zb,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(Wb,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yc));function n2(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,PS(n,e,void 0,t),t.currentTarget=null}function Gb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;n2(i,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;n2(i,l,u),a=c}}}if(sh)throw t=yp,sh=!1,yp=null,t}function $r(t,e){var r=e[Ap];r===void 0&&(r=e[Ap]=new Set);var n=t+"__bubble";r.has(n)||(Yb(e,t,2,!1),r.add(n))}function ag(t,e,r){var n=0;e&&(n|=4),Yb(r,t,n,e)}var vd="_reactListening"+Math.random().toString(36).slice(2);function bu(t){if(!t[vd]){t[vd]=!0,eb.forEach(function(r){r!=="selectionchange"&&(Fj.has(r)||ag(r,!1,t),ag(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vd]||(e[vd]=!0,ag("selectionchange",!1,e))}}function Yb(t,e,r,n){switch(Pb(e)){case 1:var i=GS;break;case 4:i=YS;break;default:i=$0}r=i.bind(null,e,r,t),i=void 0,!vp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function sg(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=No(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}mb(function(){var u=a,d=O0(r),g=[];e:{var m=Hb.get(t);if(m!==void 0){var f=z0,x=t;switch(t){case"keypress":if(Wd(r)===0)break e;case"keydown":case"keyup":f=lj;break;case"focusin":x="focus",f=Zf;break;case"focusout":x="blur",f=Zf;break;case"beforeblur":case"afterblur":f=Zf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=H1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=KS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=dj;break;case $b:case qb:case zb:f=ZS;break;case Wb:f=fj;break;case"scroll":f=VS;break;case"wheel":f=pj;break;case"copy":case"cut":case"paste":f=tj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Y1}var j=(e&4)!==0,_=!j&&t==="scroll",v=j?m!==null?m+"Capture":null:m;j=[];for(var C=u,N;C!==null;){N=C;var A=N.stateNode;if(N.tag===5&&A!==null&&(N=A,v!==null&&(A=fu(C,v),A!=null&&j.push(xu(C,A,N)))),_)break;C=C.return}0<j.length&&(m=new f(m,x,null,r,d),g.push({event:m,listeners:j}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",m&&r!==pp&&(x=r.relatedTarget||r.fromElement)&&(No(x)||x[ls]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(x=r.relatedTarget||r.toElement,f=u,x=x?No(x):null,x!==null&&(_=Uo(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=u),f!==x)){if(j=H1,A="onMouseLeave",v="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(j=Y1,A="onPointerLeave",v="onPointerEnter",C="pointer"),_=f==null?m:Sl(f),N=x==null?m:Sl(x),m=new j(A,C+"leave",f,r,d),m.target=_,m.relatedTarget=N,A=null,No(d)===u&&(j=new j(v,C+"enter",x,r,d),j.target=N,j.relatedTarget=_,A=j),_=A,f&&x)t:{for(j=f,v=x,C=0,N=j;N;N=al(N))C++;for(N=0,A=v;A;A=al(A))N++;for(;0<C-N;)j=al(j),C--;for(;0<N-C;)v=al(v),N--;for(;C--;){if(j===v||v!==null&&j===v.alternate)break t;j=al(j),v=al(v)}j=null}else j=null;f!==null&&i2(g,m,f,j,!1),x!==null&&_!==null&&i2(g,_,x,j,!0)}}e:{if(m=u?Sl(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var O=wj;else if(K1(m))if(Rb)O=Cj;else{O=jj;var G=Sj}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=Nj);if(O&&(O=O(t,u))){Ib(g,O,r,d);break e}G&&G(t,m,u),t==="focusout"&&(G=m._wrapperState)&&G.controlled&&m.type==="number"&&up(m,"number",m.value)}switch(G=u?Sl(u):window,t){case"focusin":(K1(G)||G.contentEditable==="true")&&(_l=G,wp=u,Zc=null);break;case"focusout":Zc=wp=_l=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,t2(g,r,d);break;case"selectionchange":if(kj)break;case"keydown":case"keyup":t2(g,r,d)}var V;if(H0)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else xl?Tb(t,r)&&(F="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(F="onCompositionStart");F&&(Fb&&r.locale!=="ko"&&(xl||F!=="onCompositionStart"?F==="onCompositionEnd"&&xl&&(V=Eb()):(Rs=d,q0="value"in Rs?Rs.value:Rs.textContent,xl=!0)),G=dh(u,F),0<G.length&&(F=new G1(F,t,null,r,d),g.push({event:F,listeners:G}),V?F.data=V:(V=Db(r),V!==null&&(F.data=V)))),(V=vj?yj(t,r):bj(t,r))&&(u=dh(u,"onBeforeInput"),0<u.length&&(d=new G1("onBeforeInput","beforeinput",null,r,d),g.push({event:d,listeners:u}),d.data=V))}Gb(g,e)})}function xu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function dh(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=fu(t,r),a!=null&&n.unshift(xu(t,a,i)),a=fu(t,e),a!=null&&n.push(xu(t,a,i))),t=t.return}return n}function al(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i2(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=fu(r,a),c!=null&&o.unshift(xu(r,c,l))):i||(c=fu(r,a),c!=null&&o.push(xu(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Tj=/\r\n?/g,Dj=/\u0000|\uFFFD/g;function a2(t){return(typeof t=="string"?t:""+t).replace(Tj,`
`).replace(Dj,"")}function yd(t,e,r){if(e=a2(e),a2(t)!==e&&r)throw Error(Nt(425))}function hh(){}var jp=null,Np=null;function Cp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lp=typeof setTimeout=="function"?setTimeout:void 0,Ij=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,Rj=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(t){return s2.resolve(null).then(t).catch(Oj)}:Lp;function Oj(t){setTimeout(function(){throw t})}function og(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),mu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);mu(e)}function Ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function o2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var rc=Math.random().toString(36).slice(2),Da="__reactFiber$"+rc,_u="__reactProps$"+rc,ls="__reactContainer$"+rc,Ap="__reactEvents$"+rc,Bj="__reactListeners$"+rc,Mj="__reactHandles$"+rc;function No(t){var e=t[Da];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ls]||r[Da]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=o2(t);t!==null;){if(r=t[Da])return r;t=o2(t)}return e}t=r,r=t.parentNode}return null}function Ou(t){return t=t[Da]||t[ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Nt(33))}function zh(t){return t[_u]||null}var kp=[],jl=-1;function Zs(t){return{current:t}}function zr(t){0>jl||(t.current=kp[jl],kp[jl]=null,jl--)}function Br(t,e){jl++,kp[jl]=t.current,t.current=e}var Ks={},ei=Zs(Ks),_i=Zs(!1),Fo=Ks;function zl(t,e){var r=t.type.contextTypes;if(!r)return Ks;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wi(t){return t=t.childContextTypes,t!=null}function fh(){zr(_i),zr(ei)}function l2(t,e,r){if(ei.current!==Ks)throw Error(Nt(168));Br(ei,e),Br(_i,r)}function Vb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Nt(108,SS(t)||"Unknown",i));return Qr({},r,n)}function gh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,Fo=ei.current,Br(ei,t),Br(_i,_i.current),!0}function c2(t,e,r){var n=t.stateNode;if(!n)throw Error(Nt(169));r?(t=Vb(t,e,Fo),n.__reactInternalMemoizedMergedChildContext=t,zr(_i),zr(ei),Br(ei,t)):zr(_i),Br(_i,r)}var ts=null,Wh=!1,lg=!1;function Jb(t){ts===null?ts=[t]:ts.push(t)}function Uj(t){Wh=!0,Jb(t)}function eo(){if(!lg&&ts!==null){lg=!0;var t=0,e=kr;try{var r=ts;for(kr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ts=null,Wh=!1}catch(i){throw ts!==null&&(ts=ts.slice(t+1)),xb(B0,eo),i}finally{kr=e,lg=!1}}return null}var Nl=[],Cl=0,ph=null,mh=0,Yi=[],Vi=0,To=null,ns=1,is="";function bo(t,e){Nl[Cl++]=mh,Nl[Cl++]=ph,ph=t,mh=e}function Kb(t,e,r){Yi[Vi++]=ns,Yi[Vi++]=is,Yi[Vi++]=To,To=t;var n=ns;t=is;var i=32-fa(n)-1;n&=~(1<<i),r+=1;var a=32-fa(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ns=1<<32-fa(e)+i|r<<i|n,is=a+t}else ns=1<<a|r<<i|n,is=t}function Y0(t){t.return!==null&&(bo(t,1),Kb(t,1,0))}function V0(t){for(;t===ph;)ph=Nl[--Cl],Nl[Cl]=null,mh=Nl[--Cl],Nl[Cl]=null;for(;t===To;)To=Yi[--Vi],Yi[Vi]=null,is=Yi[--Vi],Yi[Vi]=null,ns=Yi[--Vi],Yi[Vi]=null}var Bi=null,Ri=null,Gr=!1,ha=null;function Qb(t,e){var r=Ji(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function u2(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bi=t,Ri=Ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bi=t,Ri=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=To!==null?{id:ns,overflow:is}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ji(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Bi=t,Ri=null,!0):!1;default:return!1}}function Pp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ep(t){if(Gr){var e=Ri;if(e){var r=e;if(!u2(t,e)){if(Pp(t))throw Error(Nt(418));e=Ws(r.nextSibling);var n=Bi;e&&u2(t,e)?Qb(n,r):(t.flags=t.flags&-4097|2,Gr=!1,Bi=t)}}else{if(Pp(t))throw Error(Nt(418));t.flags=t.flags&-4097|2,Gr=!1,Bi=t}}}function d2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bi=t}function bd(t){if(t!==Bi)return!1;if(!Gr)return d2(t),Gr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cp(t.type,t.memoizedProps)),e&&(e=Ri)){if(Pp(t))throw Xb(),Error(Nt(418));for(;e;)Qb(t,e),e=Ws(e.nextSibling)}if(d2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Nt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ri=Ws(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ri=null}}else Ri=Bi?Ws(t.stateNode.nextSibling):null;return!0}function Xb(){for(var t=Ri;t;)t=Ws(t.nextSibling)}function Wl(){Ri=Bi=null,Gr=!1}function J0(t){ha===null?ha=[t]:ha.push(t)}var $j=hs.ReactCurrentBatchConfig;function Bc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Nt(309));var n=r.stateNode}if(!n)throw Error(Nt(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Nt(284));if(!r._owner)throw Error(Nt(290,t))}return t}function xd(t,e){throw t=Object.prototype.toString.call(e),Error(Nt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function h2(t){var e=t._init;return e(t._payload)}function Zb(t){function e(v,C){if(t){var N=v.deletions;N===null?(v.deletions=[C],v.flags|=16):N.push(C)}}function r(v,C){if(!t)return null;for(;C!==null;)e(v,C),C=C.sibling;return null}function n(v,C){for(v=new Map;C!==null;)C.key!==null?v.set(C.key,C):v.set(C.index,C),C=C.sibling;return v}function i(v,C){return v=Vs(v,C),v.index=0,v.sibling=null,v}function a(v,C,N){return v.index=N,t?(N=v.alternate,N!==null?(N=N.index,N<C?(v.flags|=2,C):N):(v.flags|=2,C)):(v.flags|=1048576,C)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,C,N,A){return C===null||C.tag!==6?(C=pg(N,v.mode,A),C.return=v,C):(C=i(C,N),C.return=v,C)}function c(v,C,N,A){var O=N.type;return O===bl?d(v,C,N.props.children,A,N.key):C!==null&&(C.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Es&&h2(O)===C.type)?(A=i(C,N.props),A.ref=Bc(v,C,N),A.return=v,A):(A=Qd(N.type,N.key,N.props,null,v.mode,A),A.ref=Bc(v,C,N),A.return=v,A)}function u(v,C,N,A){return C===null||C.tag!==4||C.stateNode.containerInfo!==N.containerInfo||C.stateNode.implementation!==N.implementation?(C=mg(N,v.mode,A),C.return=v,C):(C=i(C,N.children||[]),C.return=v,C)}function d(v,C,N,A,O){return C===null||C.tag!==7?(C=ko(N,v.mode,A,O),C.return=v,C):(C=i(C,N),C.return=v,C)}function g(v,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return C=pg(""+C,v.mode,N),C.return=v,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case cd:return N=Qd(C.type,C.key,C.props,null,v.mode,N),N.ref=Bc(v,null,C),N.return=v,N;case yl:return C=mg(C,v.mode,N),C.return=v,C;case Es:var A=C._init;return g(v,A(C._payload),N)}if(Hc(C)||Tc(C))return C=ko(C,v.mode,N,null),C.return=v,C;xd(v,C)}return null}function m(v,C,N,A){var O=C!==null?C.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return O!==null?null:l(v,C,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case cd:return N.key===O?c(v,C,N,A):null;case yl:return N.key===O?u(v,C,N,A):null;case Es:return O=N._init,m(v,C,O(N._payload),A)}if(Hc(N)||Tc(N))return O!==null?null:d(v,C,N,A,null);xd(v,N)}return null}function f(v,C,N,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(N)||null,l(C,v,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case cd:return v=v.get(A.key===null?N:A.key)||null,c(C,v,A,O);case yl:return v=v.get(A.key===null?N:A.key)||null,u(C,v,A,O);case Es:var G=A._init;return f(v,C,N,G(A._payload),O)}if(Hc(A)||Tc(A))return v=v.get(N)||null,d(C,v,A,O,null);xd(C,A)}return null}function x(v,C,N,A){for(var O=null,G=null,V=C,F=C=0,$=null;V!==null&&F<N.length;F++){V.index>F?($=V,V=null):$=V.sibling;var Z=m(v,V,N[F],A);if(Z===null){V===null&&(V=$);break}t&&V&&Z.alternate===null&&e(v,V),C=a(Z,C,F),G===null?O=Z:G.sibling=Z,G=Z,V=$}if(F===N.length)return r(v,V),Gr&&bo(v,F),O;if(V===null){for(;F<N.length;F++)V=g(v,N[F],A),V!==null&&(C=a(V,C,F),G===null?O=V:G.sibling=V,G=V);return Gr&&bo(v,F),O}for(V=n(v,V);F<N.length;F++)$=f(V,v,F,N[F],A),$!==null&&(t&&$.alternate!==null&&V.delete($.key===null?F:$.key),C=a($,C,F),G===null?O=$:G.sibling=$,G=$);return t&&V.forEach(function(D){return e(v,D)}),Gr&&bo(v,F),O}function j(v,C,N,A){var O=Tc(N);if(typeof O!="function")throw Error(Nt(150));if(N=O.call(N),N==null)throw Error(Nt(151));for(var G=O=null,V=C,F=C=0,$=null,Z=N.next();V!==null&&!Z.done;F++,Z=N.next()){V.index>F?($=V,V=null):$=V.sibling;var D=m(v,V,Z.value,A);if(D===null){V===null&&(V=$);break}t&&V&&D.alternate===null&&e(v,V),C=a(D,C,F),G===null?O=D:G.sibling=D,G=D,V=$}if(Z.done)return r(v,V),Gr&&bo(v,F),O;if(V===null){for(;!Z.done;F++,Z=N.next())Z=g(v,Z.value,A),Z!==null&&(C=a(Z,C,F),G===null?O=Z:G.sibling=Z,G=Z);return Gr&&bo(v,F),O}for(V=n(v,V);!Z.done;F++,Z=N.next())Z=f(V,v,F,Z.value,A),Z!==null&&(t&&Z.alternate!==null&&V.delete(Z.key===null?F:Z.key),C=a(Z,C,F),G===null?O=Z:G.sibling=Z,G=Z);return t&&V.forEach(function(Y){return e(v,Y)}),Gr&&bo(v,F),O}function _(v,C,N,A){if(typeof N=="object"&&N!==null&&N.type===bl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case cd:e:{for(var O=N.key,G=C;G!==null;){if(G.key===O){if(O=N.type,O===bl){if(G.tag===7){r(v,G.sibling),C=i(G,N.props.children),C.return=v,v=C;break e}}else if(G.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Es&&h2(O)===G.type){r(v,G.sibling),C=i(G,N.props),C.ref=Bc(v,G,N),C.return=v,v=C;break e}r(v,G);break}else e(v,G);G=G.sibling}N.type===bl?(C=ko(N.props.children,v.mode,A,N.key),C.return=v,v=C):(A=Qd(N.type,N.key,N.props,null,v.mode,A),A.ref=Bc(v,C,N),A.return=v,v=A)}return o(v);case yl:e:{for(G=N.key;C!==null;){if(C.key===G)if(C.tag===4&&C.stateNode.containerInfo===N.containerInfo&&C.stateNode.implementation===N.implementation){r(v,C.sibling),C=i(C,N.children||[]),C.return=v,v=C;break e}else{r(v,C);break}else e(v,C);C=C.sibling}C=mg(N,v.mode,A),C.return=v,v=C}return o(v);case Es:return G=N._init,_(v,C,G(N._payload),A)}if(Hc(N))return x(v,C,N,A);if(Tc(N))return j(v,C,N,A);xd(v,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,C!==null&&C.tag===6?(r(v,C.sibling),C=i(C,N),C.return=v,v=C):(r(v,C),C=pg(N,v.mode,A),C.return=v,v=C),o(v)):r(v,C)}return _}var Hl=Zb(!0),e5=Zb(!1),vh=Zs(null),yh=null,Ll=null,K0=null;function Q0(){K0=Ll=yh=null}function X0(t){var e=vh.current;zr(vh),t._currentValue=e}function Fp(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Il(t,e){yh=t,K0=Ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xi=!0),t.firstContext=null)}function Qi(t){var e=t._currentValue;if(K0!==t)if(t={context:t,memoizedValue:e,next:null},Ll===null){if(yh===null)throw Error(Nt(308));Ll=t,yh.dependencies={lanes:0,firstContext:t}}else Ll=Ll.next=t;return e}var Co=null;function Z0(t){Co===null?Co=[t]:Co.push(t)}function t5(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Z0(e)):(r.next=i.next,i.next=r),e.interleaved=r,cs(t,n)}function cs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Fs=!1;function em(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,xr&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,cs(t,r)}return i=n.interleaved,i===null?(e.next=e,Z0(n)):(e.next=i.next,i.next=e),n.interleaved=e,cs(t,r)}function Hd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,M0(t,r)}}function f2(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bh(t,e,r,n){var i=t.updateQueue;Fs=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var g=i.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,f=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,j=l;switch(m=e,f=r,j.tag){case 1:if(x=j.payload,typeof x=="function"){g=x.call(f,g,m);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=j.payload,m=typeof x=="function"?x.call(f,g,m):x,m==null)break e;g=Qr({},g,m);break e;case 2:Fs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=g):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=g),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Io|=o,t.lanes=o,t.memoizedState=g}}function g2(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Nt(191,i));i.call(n)}}}var Bu={},Oa=Zs(Bu),wu=Zs(Bu),Su=Zs(Bu);function Lo(t){if(t===Bu)throw Error(Nt(174));return t}function tm(t,e){switch(Br(Su,e),Br(wu,t),Br(Oa,Bu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hp(e,t)}zr(Oa),Br(Oa,e)}function Gl(){zr(Oa),zr(wu),zr(Su)}function n5(t){Lo(Su.current);var e=Lo(Oa.current),r=hp(e,t.type);e!==r&&(Br(wu,t),Br(Oa,r))}function rm(t){wu.current===t&&(zr(Oa),zr(wu))}var Jr=Zs(0);function xh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cg=[];function nm(){for(var t=0;t<cg.length;t++)cg[t]._workInProgressVersionPrimary=null;cg.length=0}var Gd=hs.ReactCurrentDispatcher,ug=hs.ReactCurrentBatchConfig,Do=0,Kr=null,Cn=null,Tn=null,_h=!1,eu=!1,ju=0,qj=0;function Gn(){throw Error(Nt(321))}function im(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ma(t[r],e[r]))return!1;return!0}function am(t,e,r,n,i,a){if(Do=a,Kr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gd.current=t===null||t.memoizedState===null?Gj:Yj,t=r(n,i),eu){a=0;do{if(eu=!1,ju=0,25<=a)throw Error(Nt(301));a+=1,Tn=Cn=null,e.updateQueue=null,Gd.current=Vj,t=r(n,i)}while(eu)}if(Gd.current=wh,e=Cn!==null&&Cn.next!==null,Do=0,Tn=Cn=Kr=null,_h=!1,e)throw Error(Nt(300));return t}function sm(){var t=ju!==0;return ju=0,t}function Fa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Kr.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function Xi(){if(Cn===null){var t=Kr.alternate;t=t!==null?t.memoizedState:null}else t=Cn.next;var e=Tn===null?Kr.memoizedState:Tn.next;if(e!==null)Tn=e,Cn=t;else{if(t===null)throw Error(Nt(310));Cn=t,t={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},Tn===null?Kr.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function Nu(t,e){return typeof e=="function"?e(t):e}function dg(t){var e=Xi(),r=e.queue;if(r===null)throw Error(Nt(311));r.lastRenderedReducer=t;var n=Cn,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Do&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var g={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=g,o=n):c=c.next=g,Kr.lanes|=d,Io|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,ma(n,e.memoizedState)||(xi=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Kr.lanes|=a,Io|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function hg(t){var e=Xi(),r=e.queue;if(r===null)throw Error(Nt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);ma(a,e.memoizedState)||(xi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function i5(){}function a5(t,e){var r=Kr,n=Xi(),i=e(),a=!ma(n.memoizedState,i);if(a&&(n.memoizedState=i,xi=!0),n=n.queue,om(l5.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Tn!==null&&Tn.memoizedState.tag&1){if(r.flags|=2048,Cu(9,o5.bind(null,r,n,i,e),void 0,null),In===null)throw Error(Nt(349));Do&30||s5(r,e,i)}return i}function s5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Kr.updateQueue,e===null?(e={lastEffect:null,stores:null},Kr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function o5(t,e,r,n){e.value=r,e.getSnapshot=n,c5(e)&&u5(t)}function l5(t,e,r){return r(function(){c5(e)&&u5(t)})}function c5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ma(t,r)}catch{return!0}}function u5(t){var e=cs(t,1);e!==null&&ga(e,t,1,-1)}function p2(t){var e=Fa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:t},e.queue=t,t=t.dispatch=Hj.bind(null,Kr,t),[e.memoizedState,t]}function Cu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Kr.updateQueue,e===null?(e={lastEffect:null,stores:null},Kr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function d5(){return Xi().memoizedState}function Yd(t,e,r,n){var i=Fa();Kr.flags|=t,i.memoizedState=Cu(1|e,r,void 0,n===void 0?null:n)}function Hh(t,e,r,n){var i=Xi();n=n===void 0?null:n;var a=void 0;if(Cn!==null){var o=Cn.memoizedState;if(a=o.destroy,n!==null&&im(n,o.deps)){i.memoizedState=Cu(e,r,a,n);return}}Kr.flags|=t,i.memoizedState=Cu(1|e,r,a,n)}function m2(t,e){return Yd(8390656,8,t,e)}function om(t,e){return Hh(2048,8,t,e)}function h5(t,e){return Hh(4,2,t,e)}function f5(t,e){return Hh(4,4,t,e)}function g5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p5(t,e,r){return r=r!=null?r.concat([t]):null,Hh(4,4,g5.bind(null,e,t),r)}function lm(){}function m5(t,e){var r=Xi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&im(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function v5(t,e){var r=Xi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&im(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function y5(t,e,r){return Do&21?(ma(r,e)||(r=Sb(),Kr.lanes|=r,Io|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xi=!0),t.memoizedState=r)}function zj(t,e){var r=kr;kr=r!==0&&4>r?r:4,t(!0);var n=ug.transition;ug.transition={};try{t(!1),e()}finally{kr=r,ug.transition=n}}function b5(){return Xi().memoizedState}function Wj(t,e,r){var n=Ys(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},x5(t))_5(e,r);else if(r=t5(t,e,r,n),r!==null){var i=ci();ga(r,t,n,i),w5(r,e,n)}}function Hj(t,e,r){var n=Ys(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(x5(t))_5(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,ma(l,o)){var c=e.interleaved;c===null?(i.next=i,Z0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=t5(t,e,i,n),r!==null&&(i=ci(),ga(r,t,n,i),w5(r,e,n))}}function x5(t){var e=t.alternate;return t===Kr||e!==null&&e===Kr}function _5(t,e){eu=_h=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function w5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,M0(t,r)}}var wh={readContext:Qi,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},Gj={readContext:Qi,useCallback:function(t,e){return Fa().memoizedState=[t,e===void 0?null:e],t},useContext:Qi,useEffect:m2,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Yd(4194308,4,g5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Yd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yd(4,2,t,e)},useMemo:function(t,e){var r=Fa();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Fa();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Wj.bind(null,Kr,t),[n.memoizedState,t]},useRef:function(t){var e=Fa();return t={current:t},e.memoizedState=t},useState:p2,useDebugValue:lm,useDeferredValue:function(t){return Fa().memoizedState=t},useTransition:function(){var t=p2(!1),e=t[0];return t=zj.bind(null,t[1]),Fa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Kr,i=Fa();if(Gr){if(r===void 0)throw Error(Nt(407));r=r()}else{if(r=e(),In===null)throw Error(Nt(349));Do&30||s5(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,m2(l5.bind(null,n,a,t),[t]),n.flags|=2048,Cu(9,o5.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Fa(),e=In.identifierPrefix;if(Gr){var r=is,n=ns;r=(n&~(1<<32-fa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ju++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=qj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yj={readContext:Qi,useCallback:m5,useContext:Qi,useEffect:om,useImperativeHandle:p5,useInsertionEffect:h5,useLayoutEffect:f5,useMemo:v5,useReducer:dg,useRef:d5,useState:function(){return dg(Nu)},useDebugValue:lm,useDeferredValue:function(t){var e=Xi();return y5(e,Cn.memoizedState,t)},useTransition:function(){var t=dg(Nu)[0],e=Xi().memoizedState;return[t,e]},useMutableSource:i5,useSyncExternalStore:a5,useId:b5,unstable_isNewReconciler:!1},Vj={readContext:Qi,useCallback:m5,useContext:Qi,useEffect:om,useImperativeHandle:p5,useInsertionEffect:h5,useLayoutEffect:f5,useMemo:v5,useReducer:hg,useRef:d5,useState:function(){return hg(Nu)},useDebugValue:lm,useDeferredValue:function(t){var e=Xi();return Cn===null?e.memoizedState=t:y5(e,Cn.memoizedState,t)},useTransition:function(){var t=hg(Nu)[0],e=Xi().memoizedState;return[t,e]},useMutableSource:i5,useSyncExternalStore:a5,useId:b5,unstable_isNewReconciler:!1};function ca(t,e){if(t&&t.defaultProps){e=Qr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Tp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gh={isMounted:function(t){return(t=t._reactInternals)?Uo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ci(),i=Ys(t),a=ss(n,i);a.payload=e,r!=null&&(a.callback=r),e=Hs(t,a,i),e!==null&&(ga(e,t,i,n),Hd(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ci(),i=Ys(t),a=ss(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Hs(t,a,i),e!==null&&(ga(e,t,i,n),Hd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ci(),n=Ys(t),i=ss(r,n);i.tag=2,e!=null&&(i.callback=e),e=Hs(t,i,n),e!==null&&(ga(e,t,n,r),Hd(e,t,n))}};function v2(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!yu(r,n)||!yu(i,a):!0}function S5(t,e,r){var n=!1,i=Ks,a=e.contextType;return typeof a=="object"&&a!==null?a=Qi(a):(i=wi(e)?Fo:ei.current,n=e.contextTypes,a=(n=n!=null)?zl(t,i):Ks),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function y2(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Gh.enqueueReplaceState(e,e.state,null)}function Dp(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},em(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Qi(a):(a=wi(e)?Fo:ei.current,i.context=zl(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Tp(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gh.enqueueReplaceState(i,i.state,null),bh(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yl(t,e){try{var r="",n=e;do r+=wS(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function fg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ip(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Jj=typeof WeakMap=="function"?WeakMap:Map;function j5(t,e,r){r=ss(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jh||(jh=!0,Hp=n),Ip(t,e)},r}function N5(t,e,r){r=ss(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Ip(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ip(t,e),typeof n!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function b2(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Jj;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=c4.bind(null,t,e,r),e.then(t,t))}function x2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _2(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ss(-1,1),e.tag=2,Hs(r,e,1))),r.lanes|=1),t)}var Kj=hs.ReactCurrentOwner,xi=!1;function li(t,e,r,n){e.child=t===null?e5(e,null,r,n):Hl(e,t.child,r,n)}function w2(t,e,r,n,i){r=r.render;var a=e.ref;return Il(e,i),n=am(t,e,r,n,a,i),r=sm(),t!==null&&!xi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,us(t,e,i)):(Gr&&r&&Y0(e),e.flags|=1,li(t,e,n,i),e.child)}function S2(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!mm(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,C5(t,e,a,n,i)):(t=Qd(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:yu,r(o,n)&&t.ref===e.ref)return us(t,e,i)}return e.flags|=1,t=Vs(a,n),t.ref=e.ref,t.return=e,e.child=t}function C5(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(yu(a,n)&&t.ref===e.ref)if(xi=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(xi=!0);else return e.lanes=t.lanes,us(t,e,i)}return Rp(t,e,r,n,i)}function L5(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Br(kl,Ii),Ii|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Br(kl,Ii),Ii|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Br(kl,Ii),Ii|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Br(kl,Ii),Ii|=n;return li(t,e,i,r),e.child}function A5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rp(t,e,r,n,i){var a=wi(r)?Fo:ei.current;return a=zl(e,a),Il(e,i),r=am(t,e,r,n,a,i),n=sm(),t!==null&&!xi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,us(t,e,i)):(Gr&&n&&Y0(e),e.flags|=1,li(t,e,r,i),e.child)}function j2(t,e,r,n,i){if(wi(r)){var a=!0;gh(e)}else a=!1;if(Il(e,i),e.stateNode===null)Vd(t,e),S5(e,r,n),Dp(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Qi(u):(u=wi(r)?Fo:ei.current,u=zl(e,u));var d=r.getDerivedStateFromProps,g=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&y2(e,o,n,u),Fs=!1;var m=e.memoizedState;o.state=m,bh(e,n,o,i),c=e.memoizedState,l!==n||m!==c||_i.current||Fs?(typeof d=="function"&&(Tp(e,r,d,n),c=e.memoizedState),(l=Fs||v2(e,r,l,n,m,c,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,r5(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ca(e.type,l),o.props=u,g=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qi(c):(c=wi(r)?Fo:ei.current,c=zl(e,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==c)&&y2(e,o,n,c),Fs=!1,m=e.memoizedState,o.state=m,bh(e,n,o,i);var x=e.memoizedState;l!==g||m!==x||_i.current||Fs?(typeof f=="function"&&(Tp(e,r,f,n),x=e.memoizedState),(u=Fs||v2(e,r,u,n,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Op(t,e,r,n,a,i)}function Op(t,e,r,n,i,a){A5(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&c2(e,r,!1),us(t,e,a);n=e.stateNode,Kj.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Hl(e,t.child,null,a),e.child=Hl(e,null,l,a)):li(t,e,l,a),e.memoizedState=n.state,i&&c2(e,r,!0),e.child}function k5(t){var e=t.stateNode;e.pendingContext?l2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l2(t,e.context,!1),tm(t,e.containerInfo)}function N2(t,e,r,n,i){return Wl(),J0(i),e.flags|=256,li(t,e,r,n),e.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function Mp(t){return{baseLanes:t,cachePool:null,transitions:null}}function P5(t,e,r){var n=e.pendingProps,i=Jr.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Br(Jr,i&1),t===null)return Ep(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Jh(o,n,0,null),t=ko(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Mp(r),e.memoizedState=Bp,t):cm(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Qj(t,e,o,n,l,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Vs(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Vs(l,a):(a=ko(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Mp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Bp,n}return a=t.child,t=a.sibling,n=Vs(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function cm(t,e){return e=Jh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _d(t,e,r,n){return n!==null&&J0(n),Hl(e,t.child,null,r),t=cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qj(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=fg(Error(Nt(422))),_d(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Jh({mode:"visible",children:n.children},i,0,null),a=ko(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Hl(e,t.child,null,o),e.child.memoizedState=Mp(o),e.memoizedState=Bp,a);if(!(e.mode&1))return _d(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(Nt(419)),n=fg(a,n,void 0),_d(t,e,o,n)}if(l=(o&t.childLanes)!==0,xi||l){if(n=In,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,cs(t,i),ga(n,t,i,-1))}return pm(),n=fg(Error(Nt(421))),_d(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=u4.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Ri=Ws(i.nextSibling),Bi=e,Gr=!0,ha=null,t!==null&&(Yi[Vi++]=ns,Yi[Vi++]=is,Yi[Vi++]=To,ns=t.id,is=t.overflow,To=e),e=cm(e,n.children),e.flags|=4096,e)}function C2(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Fp(t.return,e,r)}function gg(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function E5(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(li(t,e,n.children,r),n=Jr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C2(t,r,e);else if(t.tag===19)C2(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Br(Jr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&xh(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),gg(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xh(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}gg(e,!0,r,null,a);break;case"together":gg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function us(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Io|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Nt(153));if(e.child!==null){for(t=e.child,r=Vs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Vs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Xj(t,e,r){switch(e.tag){case 3:k5(e),Wl();break;case 5:n5(e);break;case 1:wi(e.type)&&gh(e);break;case 4:tm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Br(vh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Br(Jr,Jr.current&1),e.flags|=128,null):r&e.child.childLanes?P5(t,e,r):(Br(Jr,Jr.current&1),t=us(t,e,r),t!==null?t.sibling:null);Br(Jr,Jr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return E5(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Br(Jr,Jr.current),n)break;return null;case 22:case 23:return e.lanes=0,L5(t,e,r)}return us(t,e,r)}var F5,Up,T5,D5;F5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Up=function(){};T5=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Lo(Oa.current);var a=null;switch(r){case"input":i=lp(t,i),n=lp(t,n),a=[];break;case"select":i=Qr({},i,{value:void 0}),n=Qr({},n,{value:void 0}),a=[];break;case"textarea":i=dp(t,i),n=dp(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hh)}fp(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(du.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(du.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$r("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};D5=function(t,e,r,n){r!==n&&(e.flags|=4)};function Mc(t,e){if(!Gr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Zj(t,e,r){var n=e.pendingProps;switch(V0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return wi(e.type)&&fh(),Yn(e),null;case 3:return n=e.stateNode,Gl(),zr(_i),zr(ei),nm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ha!==null&&(Vp(ha),ha=null))),Up(t,e),Yn(e),null;case 5:rm(e);var i=Lo(Su.current);if(r=e.type,t!==null&&e.stateNode!=null)T5(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Nt(166));return Yn(e),null}if(t=Lo(Oa.current),bd(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Da]=e,n[_u]=a,t=(e.mode&1)!==0,r){case"dialog":$r("cancel",n),$r("close",n);break;case"iframe":case"object":case"embed":$r("load",n);break;case"video":case"audio":for(i=0;i<Yc.length;i++)$r(Yc[i],n);break;case"source":$r("error",n);break;case"img":case"image":case"link":$r("error",n),$r("load",n);break;case"details":$r("toggle",n);break;case"input":I1(n,a),$r("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},$r("invalid",n);break;case"textarea":O1(n,a),$r("invalid",n)}fp(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&yd(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&yd(n.textContent,l,t),i=["children",""+l]):du.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$r("scroll",n)}switch(r){case"input":ud(n),R1(n,a,!0);break;case"textarea":ud(n),B1(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=hh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Da]=e,t[_u]=n,F5(t,e,!1,!1),e.stateNode=t;e:{switch(o=gp(r,n),r){case"dialog":$r("cancel",t),$r("close",t),i=n;break;case"iframe":case"object":case"embed":$r("load",t),i=n;break;case"video":case"audio":for(i=0;i<Yc.length;i++)$r(Yc[i],t);i=n;break;case"source":$r("error",t),i=n;break;case"img":case"image":case"link":$r("error",t),$r("load",t),i=n;break;case"details":$r("toggle",t),i=n;break;case"input":I1(t,n),i=lp(t,n),$r("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Qr({},n,{value:void 0}),$r("invalid",t);break;case"textarea":O1(t,n),i=dp(t,n),$r("invalid",t);break;default:i=n}fp(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?db(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cb(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hu(t,c):typeof c=="number"&&hu(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(du.hasOwnProperty(a)?c!=null&&a==="onScroll"&&$r("scroll",t):c!=null&&T0(t,a,c,o))}switch(r){case"input":ud(t),R1(t,n,!1);break;case"textarea":ud(t),B1(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Js(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?El(t,!!n.multiple,a,!1):n.defaultValue!=null&&El(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)D5(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Nt(166));if(r=Lo(Su.current),Lo(Oa.current),bd(e)){if(n=e.stateNode,r=e.memoizedProps,n[Da]=e,(a=n.nodeValue!==r)&&(t=Bi,t!==null))switch(t.tag){case 3:yd(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yd(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Da]=e,e.stateNode=n}return Yn(e),null;case 13:if(zr(Jr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gr&&Ri!==null&&e.mode&1&&!(e.flags&128))Xb(),Wl(),e.flags|=98560,a=!1;else if(a=bd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Nt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Nt(317));a[Da]=e}else Wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),a=!1}else ha!==null&&(Vp(ha),ha=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Jr.current&1?Ln===0&&(Ln=3):pm())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return Gl(),Up(t,e),t===null&&bu(e.stateNode.containerInfo),Yn(e),null;case 10:return X0(e.type._context),Yn(e),null;case 17:return wi(e.type)&&fh(),Yn(e),null;case 19:if(zr(Jr),a=e.memoizedState,a===null)return Yn(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Mc(a,!1);else{if(Ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xh(t),o!==null){for(e.flags|=128,Mc(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Br(Jr,Jr.current&1|2),e.child}t=t.sibling}a.tail!==null&&un()>Vl&&(e.flags|=128,n=!0,Mc(a,!1),e.lanes=4194304)}else{if(!n)if(t=xh(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Mc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Gr)return Yn(e),null}else 2*un()-a.renderingStartTime>Vl&&r!==1073741824&&(e.flags|=128,n=!0,Mc(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=un(),e.sibling=null,r=Jr.current,Br(Jr,n?r&1|2:r&1),e):(Yn(e),null);case 22:case 23:return gm(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ii&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(Nt(156,e.tag))}function e4(t,e){switch(V0(e),e.tag){case 1:return wi(e.type)&&fh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gl(),zr(_i),zr(ei),nm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rm(e),null;case 13:if(zr(Jr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Nt(340));Wl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zr(Jr),null;case 4:return Gl(),null;case 10:return X0(e.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var wd=!1,Xn=!1,t4=typeof WeakSet=="function"?WeakSet:Set,zt=null;function Al(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){rn(t,e,n)}else r.current=null}function $p(t,e,r){try{r()}catch(n){rn(t,e,n)}}var L2=!1;function r4(t,e){if(jp=ch,t=Mb(),G0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,g=t,m=null;t:for(;;){for(var f;g!==r||i!==0&&g.nodeType!==3||(l=o+i),g!==a||n!==0&&g.nodeType!==3||(c=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(f=g.firstChild)!==null;)m=g,g=f;for(;;){if(g===t)break t;if(m===r&&++u===i&&(l=o),m===a&&++d===n&&(c=o),(f=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Np={focusedElem:t,selectionRange:r},ch=!1,zt=e;zt!==null;)if(e=zt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,zt=t;else for(;zt!==null;){e=zt;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var j=x.memoizedProps,_=x.memoizedState,v=e.stateNode,C=v.getSnapshotBeforeUpdate(e.elementType===e.type?j:ca(e.type,j),_);v.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Nt(163))}}catch(A){rn(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,zt=t;break}zt=e.return}return x=L2,L2=!1,x}function tu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&$p(e,r,a)}i=i.next}while(i!==n)}}function Yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function qp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function I5(t){var e=t.alternate;e!==null&&(t.alternate=null,I5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Da],delete e[_u],delete e[Ap],delete e[Bj],delete e[Mj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R5(t){return t.tag===5||t.tag===3||t.tag===4}function A2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=hh));else if(n!==4&&(t=t.child,t!==null))for(zp(t,e,r),t=t.sibling;t!==null;)zp(t,e,r),t=t.sibling}function Wp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Wp(t,e,r),t=t.sibling;t!==null;)Wp(t,e,r),t=t.sibling}var $n=null,ua=!1;function Cs(t,e,r){for(r=r.child;r!==null;)O5(t,e,r),r=r.sibling}function O5(t,e,r){if(Ra&&typeof Ra.onCommitFiberUnmount=="function")try{Ra.onCommitFiberUnmount(Mh,r)}catch{}switch(r.tag){case 5:Xn||Al(r,e);case 6:var n=$n,i=ua;$n=null,Cs(t,e,r),$n=n,ua=i,$n!==null&&(ua?(t=$n,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$n.removeChild(r.stateNode));break;case 18:$n!==null&&(ua?(t=$n,r=r.stateNode,t.nodeType===8?og(t.parentNode,r):t.nodeType===1&&og(t,r),mu(t)):og($n,r.stateNode));break;case 4:n=$n,i=ua,$n=r.stateNode.containerInfo,ua=!0,Cs(t,e,r),$n=n,ua=i;break;case 0:case 11:case 14:case 15:if(!Xn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&$p(r,e,o),i=i.next}while(i!==n)}Cs(t,e,r);break;case 1:if(!Xn&&(Al(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){rn(r,e,l)}Cs(t,e,r);break;case 21:Cs(t,e,r);break;case 22:r.mode&1?(Xn=(n=Xn)||r.memoizedState!==null,Cs(t,e,r),Xn=n):Cs(t,e,r);break;default:Cs(t,e,r)}}function k2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new t4),e.forEach(function(n){var i=d4.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function sa(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:$n=l.stateNode,ua=!1;break e;case 3:$n=l.stateNode.containerInfo,ua=!0;break e;case 4:$n=l.stateNode.containerInfo,ua=!0;break e}l=l.return}if($n===null)throw Error(Nt(160));O5(a,o,i),$n=null,ua=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){rn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B5(e,t),e=e.sibling}function B5(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sa(e,t),ka(t),n&4){try{tu(3,t,t.return),Yh(3,t)}catch(j){rn(t,t.return,j)}try{tu(5,t,t.return)}catch(j){rn(t,t.return,j)}}break;case 1:sa(e,t),ka(t),n&512&&r!==null&&Al(r,r.return);break;case 5:if(sa(e,t),ka(t),n&512&&r!==null&&Al(r,r.return),t.flags&32){var i=t.stateNode;try{hu(i,"")}catch(j){rn(t,t.return,j)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&sb(i,a),gp(l,o);var u=gp(l,a);for(o=0;o<c.length;o+=2){var d=c[o],g=c[o+1];d==="style"?db(i,g):d==="dangerouslySetInnerHTML"?cb(i,g):d==="children"?hu(i,g):T0(i,d,g,u)}switch(l){case"input":cp(i,a);break;case"textarea":ob(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?El(i,!!a.multiple,f,!1):m!==!!a.multiple&&(a.defaultValue!=null?El(i,!!a.multiple,a.defaultValue,!0):El(i,!!a.multiple,a.multiple?[]:"",!1))}i[_u]=a}catch(j){rn(t,t.return,j)}}break;case 6:if(sa(e,t),ka(t),n&4){if(t.stateNode===null)throw Error(Nt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(j){rn(t,t.return,j)}}break;case 3:if(sa(e,t),ka(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mu(e.containerInfo)}catch(j){rn(t,t.return,j)}break;case 4:sa(e,t),ka(t);break;case 13:sa(e,t),ka(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(hm=un())),n&4&&k2(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Xn=(u=Xn)||d,sa(e,t),Xn=u):sa(e,t),ka(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(zt=t,d=t.child;d!==null;){for(g=zt=d;zt!==null;){switch(m=zt,f=m.child,m.tag){case 0:case 11:case 14:case 15:tu(4,m,m.return);break;case 1:Al(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(j){rn(n,r,j)}}break;case 5:Al(m,m.return);break;case 22:if(m.memoizedState!==null){E2(g);continue}}f!==null?(f.return=m,zt=f):E2(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ub("display",o))}catch(j){rn(t,t.return,j)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(j){rn(t,t.return,j)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:sa(e,t),ka(t),n&4&&k2(t);break;case 21:break;default:sa(e,t),ka(t)}}function ka(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(R5(r)){var n=r;break e}r=r.return}throw Error(Nt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(hu(i,""),n.flags&=-33);var a=A2(t);Wp(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=A2(t);zp(t,l,o);break;default:throw Error(Nt(161))}}catch(c){rn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function n4(t,e,r){zt=t,M5(t)}function M5(t,e,r){for(var n=(t.mode&1)!==0;zt!==null;){var i=zt,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||wd;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Xn;l=wd;var u=Xn;if(wd=o,(Xn=c)&&!u)for(zt=i;zt!==null;)o=zt,c=o.child,o.tag===22&&o.memoizedState!==null?F2(i):c!==null?(c.return=o,zt=c):F2(i);for(;a!==null;)zt=a,M5(a),a=a.sibling;zt=i,wd=l,Xn=u}P2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,zt=a):P2(t)}}function P2(t){for(;zt!==null;){var e=zt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xn||Yh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ca(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&g2(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}g2(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&mu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Nt(163))}Xn||e.flags&512&&qp(e)}catch(m){rn(e,e.return,m)}}if(e===t){zt=null;break}if(r=e.sibling,r!==null){r.return=e.return,zt=r;break}zt=e.return}}function E2(t){for(;zt!==null;){var e=zt;if(e===t){zt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,zt=r;break}zt=e.return}}function F2(t){for(;zt!==null;){var e=zt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Yh(4,e)}catch(c){rn(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){rn(e,i,c)}}var a=e.return;try{qp(e)}catch(c){rn(e,a,c)}break;case 5:var o=e.return;try{qp(e)}catch(c){rn(e,o,c)}}}catch(c){rn(e,e.return,c)}if(e===t){zt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,zt=l;break}zt=e.return}}var i4=Math.ceil,Sh=hs.ReactCurrentDispatcher,um=hs.ReactCurrentOwner,Ki=hs.ReactCurrentBatchConfig,xr=0,In=null,vn=null,zn=0,Ii=0,kl=Zs(0),Ln=0,Lu=null,Io=0,Vh=0,dm=0,ru=null,yi=null,hm=0,Vl=1/0,Za=null,jh=!1,Hp=null,Gs=null,Sd=!1,Os=null,Nh=0,nu=0,Gp=null,Jd=-1,Kd=0;function ci(){return xr&6?un():Jd!==-1?Jd:Jd=un()}function Ys(t){return t.mode&1?xr&2&&zn!==0?zn&-zn:$j.transition!==null?(Kd===0&&(Kd=Sb()),Kd):(t=kr,t!==0||(t=window.event,t=t===void 0?16:Pb(t.type)),t):1}function ga(t,e,r,n){if(50<nu)throw nu=0,Gp=null,Error(Nt(185));Iu(t,r,n),(!(xr&2)||t!==In)&&(t===In&&(!(xr&2)&&(Vh|=r),Ln===4&&Ds(t,zn)),Si(t,n),r===1&&xr===0&&!(e.mode&1)&&(Vl=un()+500,Wh&&eo()))}function Si(t,e){var r=t.callbackNode;$S(t,e);var n=lh(t,t===In?zn:0);if(n===0)r!==null&&$1(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&$1(r),e===1)t.tag===0?Uj(T2.bind(null,t)):Jb(T2.bind(null,t)),Rj(function(){!(xr&6)&&eo()}),r=null;else{switch(jb(n)){case 1:r=B0;break;case 4:r=_b;break;case 16:r=oh;break;case 536870912:r=wb;break;default:r=oh}r=Y5(r,U5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function U5(t,e){if(Jd=-1,Kd=0,xr&6)throw Error(Nt(327));var r=t.callbackNode;if(Rl()&&t.callbackNode!==r)return null;var n=lh(t,t===In?zn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ch(t,n);else{e=n;var i=xr;xr|=2;var a=q5();(In!==t||zn!==e)&&(Za=null,Vl=un()+500,Ao(t,e));do try{o4();break}catch(l){$5(t,l)}while(!0);Q0(),Sh.current=a,xr=i,vn!==null?e=0:(In=null,zn=0,e=Ln)}if(e!==0){if(e===2&&(i=bp(t),i!==0&&(n=i,e=Yp(t,i))),e===1)throw r=Lu,Ao(t,0),Ds(t,n),Si(t,un()),r;if(e===6)Ds(t,n);else{if(i=t.current.alternate,!(n&30)&&!a4(i)&&(e=Ch(t,n),e===2&&(a=bp(t),a!==0&&(n=a,e=Yp(t,a))),e===1))throw r=Lu,Ao(t,0),Ds(t,n),Si(t,un()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Nt(345));case 2:xo(t,yi,Za);break;case 3:if(Ds(t,n),(n&130023424)===n&&(e=hm+500-un(),10<e)){if(lh(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ci(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lp(xo.bind(null,t,yi,Za),e);break}xo(t,yi,Za);break;case 4:if(Ds(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-fa(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=un()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i4(n/1960))-n,10<n){t.timeoutHandle=Lp(xo.bind(null,t,yi,Za),n);break}xo(t,yi,Za);break;case 5:xo(t,yi,Za);break;default:throw Error(Nt(329))}}}return Si(t,un()),t.callbackNode===r?U5.bind(null,t):null}function Yp(t,e){var r=ru;return t.current.memoizedState.isDehydrated&&(Ao(t,e).flags|=256),t=Ch(t,e),t!==2&&(e=yi,yi=r,e!==null&&Vp(e)),t}function Vp(t){yi===null?yi=t:yi.push.apply(yi,t)}function a4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!ma(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ds(t,e){for(e&=~dm,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-fa(e),n=1<<r;t[r]=-1,e&=~n}}function T2(t){if(xr&6)throw Error(Nt(327));Rl();var e=lh(t,0);if(!(e&1))return Si(t,un()),null;var r=Ch(t,e);if(t.tag!==0&&r===2){var n=bp(t);n!==0&&(e=n,r=Yp(t,n))}if(r===1)throw r=Lu,Ao(t,0),Ds(t,e),Si(t,un()),r;if(r===6)throw Error(Nt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xo(t,yi,Za),Si(t,un()),null}function fm(t,e){var r=xr;xr|=1;try{return t(e)}finally{xr=r,xr===0&&(Vl=un()+500,Wh&&eo())}}function Ro(t){Os!==null&&Os.tag===0&&!(xr&6)&&Rl();var e=xr;xr|=1;var r=Ki.transition,n=kr;try{if(Ki.transition=null,kr=1,t)return t()}finally{kr=n,Ki.transition=r,xr=e,!(xr&6)&&eo()}}function gm(){Ii=kl.current,zr(kl)}function Ao(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Ij(r)),vn!==null)for(r=vn.return;r!==null;){var n=r;switch(V0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fh();break;case 3:Gl(),zr(_i),zr(ei),nm();break;case 5:rm(n);break;case 4:Gl();break;case 13:zr(Jr);break;case 19:zr(Jr);break;case 10:X0(n.type._context);break;case 22:case 23:gm()}r=r.return}if(In=t,vn=t=Vs(t.current,null),zn=Ii=e,Ln=0,Lu=null,dm=Vh=Io=0,yi=ru=null,Co!==null){for(e=0;e<Co.length;e++)if(r=Co[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}Co=null}return t}function $5(t,e){do{var r=vn;try{if(Q0(),Gd.current=wh,_h){for(var n=Kr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_h=!1}if(Do=0,Tn=Cn=Kr=null,eu=!1,ju=0,um.current=null,r===null||r.return===null){Ln=1,Lu=e,vn=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=zn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=x2(o);if(f!==null){f.flags&=-257,_2(f,o,l,a,e),f.mode&1&&b2(a,u,e),e=f,c=u;var x=e.updateQueue;if(x===null){var j=new Set;j.add(c),e.updateQueue=j}else x.add(c);break e}else{if(!(e&1)){b2(a,u,e),pm();break e}c=Error(Nt(426))}}else if(Gr&&l.mode&1){var _=x2(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),_2(_,o,l,a,e),J0(Yl(c,l));break e}}a=c=Yl(c,l),Ln!==4&&(Ln=2),ru===null?ru=[a]:ru.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=j5(a,c,e);f2(a,v);break e;case 1:l=c;var C=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof C.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Gs===null||!Gs.has(N)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=N5(a,l,e);f2(a,A);break e}}a=a.return}while(a!==null)}W5(r)}catch(O){e=O,vn===r&&r!==null&&(vn=r=r.return);continue}break}while(!0)}function q5(){var t=Sh.current;return Sh.current=wh,t===null?wh:t}function pm(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),In===null||!(Io&268435455)&&!(Vh&268435455)||Ds(In,zn)}function Ch(t,e){var r=xr;xr|=2;var n=q5();(In!==t||zn!==e)&&(Za=null,Ao(t,e));do try{s4();break}catch(i){$5(t,i)}while(!0);if(Q0(),xr=r,Sh.current=n,vn!==null)throw Error(Nt(261));return In=null,zn=0,Ln}function s4(){for(;vn!==null;)z5(vn)}function o4(){for(;vn!==null&&!FS();)z5(vn)}function z5(t){var e=G5(t.alternate,t,Ii);t.memoizedProps=t.pendingProps,e===null?W5(t):vn=e,um.current=null}function W5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=e4(r,e),r!==null){r.flags&=32767,vn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ln=6,vn=null;return}}else if(r=Zj(r,e,Ii),r!==null){vn=r;return}if(e=e.sibling,e!==null){vn=e;return}vn=e=t}while(e!==null);Ln===0&&(Ln=5)}function xo(t,e,r){var n=kr,i=Ki.transition;try{Ki.transition=null,kr=1,l4(t,e,r,n)}finally{Ki.transition=i,kr=n}return null}function l4(t,e,r,n){do Rl();while(Os!==null);if(xr&6)throw Error(Nt(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Nt(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(qS(t,a),t===In&&(vn=In=null,zn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sd||(Sd=!0,Y5(oh,function(){return Rl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ki.transition,Ki.transition=null;var o=kr;kr=1;var l=xr;xr|=4,um.current=null,r4(t,r),B5(r,t),Aj(Np),ch=!!jp,Np=jp=null,t.current=r,n4(r),TS(),xr=l,kr=o,Ki.transition=a}else t.current=r;if(Sd&&(Sd=!1,Os=t,Nh=i),a=t.pendingLanes,a===0&&(Gs=null),RS(r.stateNode),Si(t,un()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jh)throw jh=!1,t=Hp,Hp=null,t;return Nh&1&&t.tag!==0&&Rl(),a=t.pendingLanes,a&1?t===Gp?nu++:(nu=0,Gp=t):nu=0,eo(),null}function Rl(){if(Os!==null){var t=jb(Nh),e=Ki.transition,r=kr;try{if(Ki.transition=null,kr=16>t?16:t,Os===null)var n=!1;else{if(t=Os,Os=null,Nh=0,xr&6)throw Error(Nt(331));var i=xr;for(xr|=4,zt=t.current;zt!==null;){var a=zt,o=a.child;if(zt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(zt=u;zt!==null;){var d=zt;switch(d.tag){case 0:case 11:case 15:tu(8,d,a)}var g=d.child;if(g!==null)g.return=d,zt=g;else for(;zt!==null;){d=zt;var m=d.sibling,f=d.return;if(I5(d),d===u){zt=null;break}if(m!==null){m.return=f,zt=m;break}zt=f}}}var x=a.alternate;if(x!==null){var j=x.child;if(j!==null){x.child=null;do{var _=j.sibling;j.sibling=null,j=_}while(j!==null)}}zt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,zt=o;else e:for(;zt!==null;){if(a=zt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:tu(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,zt=v;break e}zt=a.return}}var C=t.current;for(zt=C;zt!==null;){o=zt;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,zt=N;else e:for(o=C;zt!==null;){if(l=zt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yh(9,l)}}catch(O){rn(l,l.return,O)}if(l===o){zt=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,zt=A;break e}zt=l.return}}if(xr=i,eo(),Ra&&typeof Ra.onPostCommitFiberRoot=="function")try{Ra.onPostCommitFiberRoot(Mh,t)}catch{}n=!0}return n}finally{kr=r,Ki.transition=e}}return!1}function D2(t,e,r){e=Yl(r,e),e=j5(t,e,1),t=Hs(t,e,1),e=ci(),t!==null&&(Iu(t,1,e),Si(t,e))}function rn(t,e,r){if(t.tag===3)D2(t,t,r);else for(;e!==null;){if(e.tag===3){D2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Gs===null||!Gs.has(n))){t=Yl(r,t),t=N5(e,t,1),e=Hs(e,t,1),t=ci(),e!==null&&(Iu(e,1,t),Si(e,t));break}}e=e.return}}function c4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ci(),t.pingedLanes|=t.suspendedLanes&r,In===t&&(zn&r)===r&&(Ln===4||Ln===3&&(zn&130023424)===zn&&500>un()-hm?Ao(t,0):dm|=r),Si(t,e)}function H5(t,e){e===0&&(t.mode&1?(e=fd,fd<<=1,!(fd&130023424)&&(fd=4194304)):e=1);var r=ci();t=cs(t,e),t!==null&&(Iu(t,e,r),Si(t,r))}function u4(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),H5(t,r)}function d4(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Nt(314))}n!==null&&n.delete(e),H5(t,r)}var G5;G5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||_i.current)xi=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return xi=!1,Xj(t,e,r);xi=!!(t.flags&131072)}else xi=!1,Gr&&e.flags&1048576&&Kb(e,mh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Vd(t,e),t=e.pendingProps;var i=zl(e,ei.current);Il(e,r),i=am(null,e,n,t,i,r);var a=sm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wi(n)?(a=!0,gh(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,em(e),i.updater=Gh,e.stateNode=i,i._reactInternals=e,Dp(e,n,t,r),e=Op(null,e,n,!0,a,r)):(e.tag=0,Gr&&a&&Y0(e),li(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Vd(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=f4(n),t=ca(n,t),i){case 0:e=Rp(null,e,n,t,r);break e;case 1:e=j2(null,e,n,t,r);break e;case 11:e=w2(null,e,n,t,r);break e;case 14:e=S2(null,e,n,ca(n.type,t),r);break e}throw Error(Nt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ca(n,i),Rp(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ca(n,i),j2(t,e,n,i,r);case 3:e:{if(k5(e),t===null)throw Error(Nt(387));n=e.pendingProps,a=e.memoizedState,i=a.element,r5(t,e),bh(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Yl(Error(Nt(423)),e),e=N2(t,e,n,r,i);break e}else if(n!==i){i=Yl(Error(Nt(424)),e),e=N2(t,e,n,r,i);break e}else for(Ri=Ws(e.stateNode.containerInfo.firstChild),Bi=e,Gr=!0,ha=null,r=e5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wl(),n===i){e=us(t,e,r);break e}li(t,e,n,r)}e=e.child}return e;case 5:return n5(e),t===null&&Ep(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Cp(n,i)?o=null:a!==null&&Cp(n,a)&&(e.flags|=32),A5(t,e),li(t,e,o,r),e.child;case 6:return t===null&&Ep(e),null;case 13:return P5(t,e,r);case 4:return tm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Hl(e,null,n,r):li(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ca(n,i),w2(t,e,n,i,r);case 7:return li(t,e,e.pendingProps,r),e.child;case 8:return li(t,e,e.pendingProps.children,r),e.child;case 12:return li(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Br(vh,n._currentValue),n._currentValue=o,a!==null)if(ma(a.value,o)){if(a.children===i.children&&!_i.current){e=us(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ss(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Fp(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Nt(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Fp(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}li(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Il(e,r),i=Qi(i),n=n(i),e.flags|=1,li(t,e,n,r),e.child;case 14:return n=e.type,i=ca(n,e.pendingProps),i=ca(n.type,i),S2(t,e,n,i,r);case 15:return C5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ca(n,i),Vd(t,e),e.tag=1,wi(n)?(t=!0,gh(e)):t=!1,Il(e,r),S5(e,n,i),Dp(e,n,i,r),Op(null,e,n,!0,t,r);case 19:return E5(t,e,r);case 22:return L5(t,e,r)}throw Error(Nt(156,e.tag))};function Y5(t,e){return xb(t,e)}function h4(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(t,e,r,n){return new h4(t,e,r,n)}function mm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function f4(t){if(typeof t=="function")return mm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I0)return 11;if(t===R0)return 14}return 2}function Vs(t,e){var r=t.alternate;return r===null?(r=Ji(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Qd(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")mm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bl:return ko(r.children,i,a,e);case D0:o=8,i|=8;break;case ip:return t=Ji(12,r,e,i|2),t.elementType=ip,t.lanes=a,t;case ap:return t=Ji(13,r,e,i),t.elementType=ap,t.lanes=a,t;case sp:return t=Ji(19,r,e,i),t.elementType=sp,t.lanes=a,t;case nb:return Jh(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tb:o=10;break e;case rb:o=9;break e;case I0:o=11;break e;case R0:o=14;break e;case Es:o=16,n=null;break e}throw Error(Nt(130,t==null?t:typeof t,""))}return e=Ji(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function ko(t,e,r,n){return t=Ji(7,t,n,e),t.lanes=r,t}function Jh(t,e,r,n){return t=Ji(22,t,n,e),t.elementType=nb,t.lanes=r,t.stateNode={isHidden:!1},t}function pg(t,e,r){return t=Ji(6,t,null,e),t.lanes=r,t}function mg(t,e,r){return e=Ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g4(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kf(0),this.expirationTimes=Kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kf(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vm(t,e,r,n,i,a,o,l,c){return t=new g4(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ji(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},em(a),t}function p4(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function V5(t){if(!t)return Ks;t=t._reactInternals;e:{if(Uo(t)!==t||t.tag!==1)throw Error(Nt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Nt(171))}if(t.tag===1){var r=t.type;if(wi(r))return Vb(t,r,e)}return e}function J5(t,e,r,n,i,a,o,l,c){return t=vm(r,n,!0,t,i,a,o,l,c),t.context=V5(null),r=t.current,n=ci(),i=Ys(r),a=ss(n,i),a.callback=e??null,Hs(r,a,i),t.current.lanes=i,Iu(t,i,n),Si(t,n),t}function Kh(t,e,r,n){var i=e.current,a=ci(),o=Ys(i);return r=V5(r),e.context===null?e.context=r:e.pendingContext=r,e=ss(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Hs(i,e,o),t!==null&&(ga(t,i,o,a),Hd(t,i,o)),o}function Lh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function I2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ym(t,e){I2(t,e),(t=t.alternate)&&I2(t,e)}function m4(){return null}var K5=typeof reportError=="function"?reportError:function(t){console.error(t)};function bm(t){this._internalRoot=t}Qh.prototype.render=bm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Nt(409));Kh(t,e,null,null)};Qh.prototype.unmount=bm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ro(function(){Kh(null,t,null,null)}),e[ls]=null}};function Qh(t){this._internalRoot=t}Qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ts.length&&e!==0&&e<Ts[r].priority;r++);Ts.splice(r,0,t),r===0&&kb(t)}};function xm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function R2(){}function v4(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Lh(o);a.call(u)}}var o=J5(e,n,t,0,null,!1,!1,"",R2);return t._reactRootContainer=o,t[ls]=o.current,bu(t.nodeType===8?t.parentNode:t),Ro(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Lh(c);l.call(u)}}var c=vm(t,0,!1,null,null,!1,!1,"",R2);return t._reactRootContainer=c,t[ls]=c.current,bu(t.nodeType===8?t.parentNode:t),Ro(function(){Kh(e,c,r,n)}),c}function Zh(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Lh(o);l.call(c)}}Kh(e,o,t,i)}else o=v4(r,e,t,i,n);return Lh(o)}Nb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Gc(e.pendingLanes);r!==0&&(M0(e,r|1),Si(e,un()),!(xr&6)&&(Vl=un()+500,eo()))}break;case 13:Ro(function(){var n=cs(t,1);if(n!==null){var i=ci();ga(n,t,1,i)}}),ym(t,1)}};U0=function(t){if(t.tag===13){var e=cs(t,134217728);if(e!==null){var r=ci();ga(e,t,134217728,r)}ym(t,134217728)}};Cb=function(t){if(t.tag===13){var e=Ys(t),r=cs(t,e);if(r!==null){var n=ci();ga(r,t,e,n)}ym(t,e)}};Lb=function(){return kr};Ab=function(t,e){var r=kr;try{return kr=t,e()}finally{kr=r}};mp=function(t,e,r){switch(e){case"input":if(cp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=zh(n);if(!i)throw Error(Nt(90));ab(n),cp(n,i)}}}break;case"textarea":ob(t,r);break;case"select":e=r.value,e!=null&&El(t,!!r.multiple,e,!1)}};gb=fm;pb=Ro;var y4={usingClientEntryPoint:!1,Events:[Ou,Sl,zh,hb,fb,fm]},Uc={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b4={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yb(t),t===null?null:t.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||m4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{Mh=jd.inject(b4),Ra=jd}catch{}}$i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y4;$i.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xm(e))throw Error(Nt(200));return p4(t,e,null,r)};$i.createRoot=function(t,e){if(!xm(t))throw Error(Nt(299));var r=!1,n="",i=K5;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vm(t,1,!1,null,null,r,!1,n,i),t[ls]=e.current,bu(t.nodeType===8?t.parentNode:t),new bm(e)};$i.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Nt(188)):(t=Object.keys(t).join(","),Error(Nt(268,t)));return t=yb(e),t=t===null?null:t.stateNode,t};$i.flushSync=function(t){return Ro(t)};$i.hydrate=function(t,e,r){if(!Xh(e))throw Error(Nt(200));return Zh(null,t,e,!0,r)};$i.hydrateRoot=function(t,e,r){if(!xm(t))throw Error(Nt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=K5;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=J5(e,null,t,1,r??null,i,!1,a,o),t[ls]=e.current,bu(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Qh(e)};$i.render=function(t,e,r){if(!Xh(e))throw Error(Nt(200));return Zh(null,t,e,!1,r)};$i.unmountComponentAtNode=function(t){if(!Xh(t))throw Error(Nt(40));return t._reactRootContainer?(Ro(function(){Zh(null,null,t,!1,function(){t._reactRootContainer=null,t[ls]=null})}),!0):!1};$i.unstable_batchedUpdates=fm;$i.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Xh(r))throw Error(Nt(200));if(t==null||t._reactInternals===void 0)throw Error(Nt(38));return Zh(t,e,r,!1,n)};$i.version="18.3.1-next-f1338f8080-20240426";function Q5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q5)}catch(t){console.error(t)}}Q5(),Qy.exports=$i;var x4=Qy.exports,O2=x4;rp.createRoot=O2.createRoot,rp.hydrateRoot=O2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Au.apply(this,arguments)}var Bs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Bs||(Bs={}));const B2="popstate";function _4(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:o,hash:l}=n.location;return Jp("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Z5(i)}return S4(e,r,null,t)}function kn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function X5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function w4(){return Math.random().toString(36).substr(2,8)}function M2(t,e){return{usr:t.state,key:t.key,idx:e}}function Jp(t,e,r,n){return r===void 0&&(r=null),Au({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nc(e):e,{state:r,key:e&&e.key||n||w4()})}function Z5(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function nc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function S4(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=Bs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Au({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function g(){l=Bs.Pop;let _=d(),v=_==null?null:_-u;u=_,c&&c({action:l,location:j.location,delta:v})}function m(_,v){l=Bs.Push;let C=Jp(j.location,_,v);u=d()+1;let N=M2(C,u),A=j.createHref(C);try{o.pushState(N,"",A)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(A)}a&&c&&c({action:l,location:j.location,delta:1})}function f(_,v){l=Bs.Replace;let C=Jp(j.location,_,v);u=d();let N=M2(C,u),A=j.createHref(C);o.replaceState(N,"",A),a&&c&&c({action:l,location:j.location,delta:0})}function x(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof _=="string"?_:Z5(_);return C=C.replace(/ $/,"%20"),kn(v,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,v)}let j={get action(){return l},get location(){return t(i,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(B2,g),c=_,()=>{i.removeEventListener(B2,g),c=null}},createHref(_){return e(i,_)},createURL:x,encodeLocation(_){let v=x(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:f,go(_){return o.go(_)}};return j}var U2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(U2||(U2={}));function j4(t,e,r){return r===void 0&&(r="/"),N4(t,e,r)}function N4(t,e,r,n){let i=typeof e=="string"?nc(e):e,a=rx(i.pathname||"/",r);if(a==null)return null;let o=ex(t);C4(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=B4(a);l=I4(o[c],u)}return l}function ex(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(kn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Po([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(kn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ex(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:T4(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of tx(a.path))i(a,o,c)}),e}function tx(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=tx(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function C4(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:D4(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const L4=/^:[\w-]+$/,A4=3,k4=2,P4=1,E4=10,F4=-2,$2=t=>t==="*";function T4(t,e){let r=t.split("/"),n=r.length;return r.some($2)&&(n+=F4),e&&(n+=k4),r.filter(i=>!$2(i)).reduce((i,a)=>i+(L4.test(a)?A4:a===""?P4:E4),n)}function D4(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function I4(t,e,r){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",g=R4({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Po([a,g.pathname]),pathnameBase:W4(Po([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=Po([a,g.pathnameBase]))}return o}function R4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=O4(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,d,g)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let j=l[g]||"";o=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const x=l[g];return f&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function O4(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),X5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function B4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return X5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function M4(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?nc(t):t;return{pathname:r?r.startsWith("/")?r:U4(r,e):e,search:H4(n),hash:G4(i)}}function U4(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function vg(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $4(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function q4(t,e){let r=$4(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function z4(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=nc(t):(i=Au({},t),kn(!i.pathname||!i.pathname.includes("?"),vg("?","pathname","search",i)),kn(!i.pathname||!i.pathname.includes("#"),vg("#","pathname","hash",i)),kn(!i.search||!i.search.includes("#"),vg("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let g=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}l=g>=0?e[g]:"/"}let c=M4(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Po=t=>t.join("/").replace(/\/\/+/g,"/"),W4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,G4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Y4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nx=["post","put","patch","delete"];new Set(nx);const V4=["get",...nx];new Set(V4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ku.apply(this,arguments)}const _m=b.createContext(null),J4=b.createContext(null),ef=b.createContext(null),tf=b.createContext(null),ic=b.createContext({outlet:null,matches:[],isDataRoute:!1}),ix=b.createContext(null);function rf(){return b.useContext(tf)!=null}function fi(){return rf()||kn(!1),b.useContext(tf).location}function ax(t){b.useContext(ef).static||b.useLayoutEffect(t)}function Mr(){let{isDataRoute:t}=b.useContext(ic);return t?lN():K4()}function K4(){rf()||kn(!1);let t=b.useContext(_m),{basename:e,future:r,navigator:n}=b.useContext(ef),{matches:i}=b.useContext(ic),{pathname:a}=fi(),o=JSON.stringify(q4(i,r.v7_relativeSplatPath)),l=b.useRef(!1);return ax(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let g=z4(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Po([e,g.pathname])),(d.replace?n.replace:n.push)(g,d.state,d)},[e,n,o,a,t])}function Q4(t,e){return X4(t,e)}function X4(t,e,r,n){rf()||kn(!1);let{navigator:i}=b.useContext(ef),{matches:a}=b.useContext(ic),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=fi(),d;if(e){var g;let _=typeof e=="string"?nc(e):e;c==="/"||(g=_.pathname)!=null&&g.startsWith(c)||kn(!1),d=_}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let _=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=j4(t,{pathname:f}),j=nN(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Po([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Po([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,r,n);return e&&j?b.createElement(tf.Provider,{value:{location:ku({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Bs.Pop}},j):j}function Z4(){let t=oN(),e=Y4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:i},r):null,null)}const eN=b.createElement(Z4,null);class tN extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?b.createElement(ic.Provider,{value:this.props.routeContext},b.createElement(ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rN(t){let{routeContext:e,match:r,children:n}=t,i=b.useContext(_m);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(ic.Provider,{value:e},n)}function nN(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);d>=0||kn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let g=o[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=d),g.route.id){let{loaderData:m,errors:f}=r,x=g.route.loader&&m[g.route.id]===void 0&&(!f||f[g.route.id]===void 0);if(g.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,g,m)=>{let f,x=!1,j=null,_=null;r&&(f=l&&g.route.id?l[g.route.id]:void 0,j=g.route.errorElement||eN,c&&(u<0&&m===0?(cN("route-fallback"),x=!0,_=null):u===m&&(x=!0,_=g.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),C=()=>{let N;return f?N=j:x?N=_:g.route.Component?N=b.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=d,b.createElement(rN,{match:g,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:N})};return r&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?b.createElement(tN,{location:r.location,revalidation:r.revalidation,component:j,error:f,children:C(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):C()},null)}var sx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sx||{}),ox=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ox||{});function iN(t){let e=b.useContext(_m);return e||kn(!1),e}function aN(t){let e=b.useContext(J4);return e||kn(!1),e}function sN(t){let e=b.useContext(ic);return e||kn(!1),e}function lx(t){let e=sN(),r=e.matches[e.matches.length-1];return r.route.id||kn(!1),r.route.id}function oN(){var t;let e=b.useContext(ix),r=aN(),n=lx();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function lN(){let{router:t}=iN(sx.UseNavigateStable),e=lx(ox.UseNavigateStable),r=b.useRef(!1);return ax(()=>{r.current=!0}),b.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ku({fromRouteId:e},a)))},[t,e])}const q2={};function cN(t,e,r){q2[t]||(q2[t]=!0)}function uN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vr(t){kn(!1)}function dN(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Bs.Pop,navigator:a,static:o=!1,future:l}=t;rf()&&kn(!1);let c=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:a,static:o,future:ku({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=nc(n));let{pathname:d="/",search:g="",hash:m="",state:f=null,key:x="default"}=n,j=b.useMemo(()=>{let _=rx(d,c);return _==null?null:{location:{pathname:_,search:g,hash:m,state:f,key:x},navigationType:i}},[c,d,g,m,f,x,i]);return j==null?null:b.createElement(ef.Provider,{value:u},b.createElement(tf.Provider,{children:r,value:j}))}function hN(t){let{children:e,location:r}=t;return Q4(Kp(e),r)}new Promise(()=>{});function Kp(t,e){e===void 0&&(e=[]);let r=[];return b.Children.forEach(t,(n,i)=>{if(!b.isValidElement(n))return;let a=[...e,i];if(n.type===b.Fragment){r.push.apply(r,Kp(n.props.children,a));return}n.type!==Vr&&kn(!1),!n.props.index||!n.props.children||kn(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Kp(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const fN="6";try{window.__reactRouterVersion=fN}catch{}const gN="startTransition",z2=cS[gN];function pN(t){let{basename:e,children:r,future:n,window:i}=t,a=b.useRef();a.current==null&&(a.current=_4({window:i,v5Compat:!0}));let o=a.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=b.useCallback(g=>{u&&z2?z2(()=>c(g)):c(g)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>uN(n),[n]),b.createElement(dN,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var W2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(W2||(W2={}));var H2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(H2||(H2={}));const mN="modulepreload",vN=function(t){return"/"+t},G2={},pa=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=vN(c),c in G2)return;G2[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":mN,u||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),u)return new Promise((m,f)=>{g.addEventListener("load",m),g.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},yN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>pa(async()=>{const{default:n}=await Promise.resolve().then(()=>ac);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class wm extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class bN extends wm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Y2 extends wm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class V2 extends wm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qp||(Qp={}));var xN=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class _N{constructor(e,{headers:r={},customFetch:n,region:i=Qp.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=yN(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return xN(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const g=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(j=>{throw new bN(j)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new Y2(g);if(!g.ok)throw new V2(g);let f=((n=g.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield g.json():f==="application/octet-stream"?x=yield g.blob():f==="text/event-stream"?x=g:f==="multipart/form-data"?x=yield g.formData():x=yield g.text(),{data:x,error:null,response:g}}catch(i){return{data:null,error:i,response:i instanceof V2||i instanceof Y2?i.context:void 0}}})}}var bi={},Sm={},nf={},Mu={},af={},sf={},wN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jl=wN();const SN=Jl.fetch,cx=Jl.fetch.bind(Jl),ux=Jl.Headers,jN=Jl.Request,NN=Jl.Response,ac=Object.freeze(Object.defineProperty({__proto__:null,Headers:ux,Request:jN,Response:NN,default:cx,fetch:SN},Symbol.toStringTag,{value:"Module"})),CN=Gw(ac);var of={};Object.defineProperty(of,"__esModule",{value:!0});let LN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};of.default=LN;var dx=Mi&&Mi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sf,"__esModule",{value:!0});const AN=dx(CN),kN=dx(of);let PN=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=AN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,u;let d=null,g=null,m=null,f=a.status,x=a.statusText;if(a.ok){if(this.method!=="HEAD"){const C=await a.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?g=C:g=JSON.parse(C))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&v&&v.length>1&&(m=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(d={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,f=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const _=await a.text();try{d=JSON.parse(_),Array.isArray(d)&&a.status===404&&(g=[],d=null,f=200,x="OK")}catch{a.status===404&&_===""?(f=204,x="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,x="OK"),d&&this.shouldThrowOnError)throw new kN.default(d)}return{error:d,data:g,count:m,status:f,statusText:x}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};sf.default=PN;var EN=Mi&&Mi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(af,"__esModule",{value:!0});const FN=EN(sf);let TN=class extends FN.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};af.default=TN;var DN=Mi&&Mi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mu,"__esModule",{value:!0});const IN=DN(af);let RN=class extends IN.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Mu.default=RN;var ON=Mi&&Mi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nf,"__esModule",{value:!0});const $c=ON(Mu);let BN=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new $c.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new $c.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new $c.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new $c.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new $c.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};nf.default=BN;var hx=Mi&&Mi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sm,"__esModule",{value:!0});const MN=hx(nf),UN=hx(Mu);let $N=class fx{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new MN.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new fx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;n||i?(l=n?"HEAD":"GET",Object.entries(r).filter(([g,m])=>m!==void 0).map(([g,m])=>[g,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([g,m])=>{c.searchParams.append(g,m)})):(l="POST",u=r);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new UN.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Sm.default=$N;var sc=Mi&&Mi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bi,"__esModule",{value:!0});bi.PostgrestError=bi.PostgrestBuilder=bi.PostgrestTransformBuilder=bi.PostgrestFilterBuilder=bi.PostgrestQueryBuilder=bi.PostgrestClient=void 0;const gx=sc(Sm);bi.PostgrestClient=gx.default;const px=sc(nf);bi.PostgrestQueryBuilder=px.default;const mx=sc(Mu);bi.PostgrestFilterBuilder=mx.default;const vx=sc(af);bi.PostgrestTransformBuilder=vx.default;const yx=sc(sf);bi.PostgrestBuilder=yx.default;const bx=sc(of);bi.PostgrestError=bx.default;var qN=bi.default={PostgrestClient:gx.default,PostgrestQueryBuilder:px.default,PostgrestFilterBuilder:mx.default,PostgrestTransformBuilder:vx.default,PostgrestBuilder:yx.default,PostgrestError:bx.default};const{PostgrestClient:zN,PostgrestQueryBuilder:v8,PostgrestFilterBuilder:y8,PostgrestTransformBuilder:b8,PostgrestBuilder:x8,PostgrestError:_8}=qN;class WN{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const HN="2.15.1",GN=`realtime-js/${HN}`,YN="1.0.0",Xp=1e4,VN=1e3,JN=100;var iu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(iu||(iu={}));var jn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(jn||(jn={}));var da;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(da||(da={}));var Zp;(function(t){t.websocket="websocket"})(Zp||(Zp={}));var So;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(So||(So={}));class KN{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+i));o=o+i;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class xx{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Or;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Or||(Or={}));const J2=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=QN(o,t,e,i),a),{})},QN=(t,e,r,n)=>{const i=e.find(l=>l.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?_x(a,o):e0(o)},_x=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return t3(e,r)}switch(t){case Or.bool:return XN(e);case Or.float4:case Or.float8:case Or.int2:case Or.int4:case Or.int8:case Or.numeric:case Or.oid:return ZN(e);case Or.json:case Or.jsonb:return e3(e);case Or.timestamp:return r3(e);case Or.abstime:case Or.date:case Or.daterange:case Or.int4range:case Or.int8range:case Or.money:case Or.reltime:case Or.text:case Or.time:case Or.timestamptz:case Or.timetz:case Or.tsrange:case Or.tstzrange:return e0(e);default:return e0(e)}},e0=t=>t,XN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ZN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},e3=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},t3=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>_x(e,l))}return t},r3=t=>typeof t=="string"?t.replace(" ","T"):t,wx=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class yg{constructor(e,r,n={},i=Xp){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var K2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(K2||(K2={}));class au{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=au.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=au.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=au.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const g=a[u];if(g){const m=d.map(_=>_.presence_ref),f=g.map(_=>_.presence_ref),x=d.filter(_=>f.indexOf(_.presence_ref)<0),j=g.filter(_=>m.indexOf(_.presence_ref)<0);x.length>0&&(l[u]=x),j.length>0&&(c[u]=j)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const g=e[l].map(f=>f.presence_ref),m=d.filter(f=>g.indexOf(f.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(g=>g.presence_ref);u=u.filter(g=>d.indexOf(g.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Q2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Q2||(Q2={}));var su;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(su||(su={}));var es;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(es||(es={}));class jm{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=jn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new yg(this,da.join,this.params,this.timeout),this.rejoinTimer=new xx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(da.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new au(this),this.broadcastEndpointURL=wx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==jn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[su.PRESENCE]&&this.bindings[su.PRESENCE].length>0,d={},g={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(es.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(es.CLOSED)),this.updateJoinPayload(Object.assign({config:g},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){e==null||e(es.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,j=(f=x==null?void 0:x.length)!==null&&f!==void 0?f:0,_=[];for(let v=0;v<j;v++){const C=x[v],{filter:{event:N,schema:A,table:O,filter:G}}=C,V=m&&m[v];if(V&&V.event===N&&V.schema===A&&V.table===O&&V.filter===G)_.push(Object.assign(Object.assign({},C),{id:V.id}));else{this.unsubscribe(),this.state=jn.errored,e==null||e(es.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(es.SUBSCRIBED);return}}).receive("error",m=>{this.state=jn.errored,e==null||e(es.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(es.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===jn.joined&&e===su.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(da.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new yg(this,da.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jn.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yg(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>JN){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=da;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var x,j,_;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(j=f.filter)===null||j===void 0?void 0:j.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var x,j,_,v,C,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const A=f.id,O=(x=f.filter)===null||x===void 0?void 0:x.event;return A&&((j=r.ids)===null||j===void 0?void 0:j.includes(A))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const A=(C=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return A==="*"||A===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:j,table:_,commit_timestamp:v,type:C,errors:N}=x;m=Object.assign(Object.assign({},{schema:j,table:_,commit_timestamp:v,eventType:C,new:{},old:{},errors:N}),this._getPayloadRecords(x))}f.callback(m,n)})}_isClosed(){return this.state===jn.closed}_isJoined(){return this.state===jn.joined}_isJoining(){return this.state===jn.joining}_isLeaving(){return this.state===jn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&jm.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(da.close,{},e)}_onError(e){this._on(da.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=J2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=J2(e.columns,e.old_record)),r}}const X2=()=>{},Nd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},n3=[1e3,2e3,5e3,1e4],i3=1e4,a3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class s3{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xp,this.transport=null,this.heartbeatIntervalMs=Nd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=X2,this.ref=0,this.reconnectTimer=null,this.logger=X2,this.conn=null,this.sendBuffer=[],this.serializer=new KN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>pa(async()=>{const{default:l}=await Promise.resolve().then(()=>ac);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Zp.websocket}`,this.httpEndpoint=wx(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:YN}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case iu.connecting:return So.Connecting;case iu.open:return So.Open;case iu.closing:return So.Closing;default:return So.Closed}}isConnected(){return this.connectionState()===So.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new jm(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(VN,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Nd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(da.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([a3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:GN};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(da.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new xx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Nd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,o,l,c,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Xp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Nd.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>n3[d-1]||i3,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,g)=>g(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Nm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class o3 extends Nm{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class t0 extends Nm{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var l3=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Sx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>pa(async()=>{const{default:n}=await Promise.resolve().then(()=>ac);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},c3=()=>l3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pa(()=>Promise.resolve().then(()=>ac),void 0)).Response:Response}),r0=t=>{if(Array.isArray(t))return t.map(r=>r0(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=r0(n)}),e},u3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var $o=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const bg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),d3=(t,e,r)=>$o(void 0,void 0,void 0,function*(){const n=yield c3();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new o3(bg(i),a,o))}).catch(i=>{e(new t0(bg(i),i))}):e(new t0(bg(t),t))}),h3=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(u3(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Uu(t,e,r,n,i,a){return $o(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,h3(e,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>d3(c,l,n))})})}function Ah(t,e,r,n){return $o(this,void 0,void 0,function*(){return Uu(t,"GET",e,r,n)})}function Ta(t,e,r,n,i){return $o(this,void 0,void 0,function*(){return Uu(t,"POST",e,n,i,r)})}function n0(t,e,r,n,i){return $o(this,void 0,void 0,function*(){return Uu(t,"PUT",e,n,i,r)})}function f3(t,e,r,n){return $o(this,void 0,void 0,function*(){return Uu(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function jx(t,e,r,n,i){return $o(this,void 0,void 0,function*(){return Uu(t,"DELETE",e,n,i,r)})}var oi=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const g3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Z2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class p3{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Sx(i)}uploadOrUpdate(e,r,n,i){return oi(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Z2),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),g=yield(e=="PUT"?n0:Ta)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(Nn(a))return{data:null,error:a};throw a}})}upload(e,r,n){return oi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return oi(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Z2.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const g=yield n0(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:g.Key},error:null}}catch(c){if(Nn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return oi(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Ta(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Nm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}update(e,r,n){return oi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return oi(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Nn(i))return{data:null,error:i};throw i}})}copy(e,r,n){return oi(this,void 0,void 0,function*(){try{return{data:{path:(yield Ta(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Nn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return oi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Ta(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(Nn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return oi(this,void 0,void 0,function*(){try{const i=yield Ta(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(Nn(i))return{data:null,error:i};throw i}})}download(e,r){return oi(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ah(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Nn(l))return{data:null,error:l};throw l}})}info(e){return oi(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ah(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:r0(n),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}exists(e){return oi(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield f3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Nn(n)&&n instanceof t0){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return oi(this,void 0,void 0,function*(){try{return{data:yield jx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}list(e,r,n){return oi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},g3),r),{prefix:e||""});return{data:yield Ta(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Nn(i))return{data:null,error:i};throw i}})}listV2(e,r){return oi(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ta(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const m3="2.11.0",v3={"X-Client-Info":`storage-js/${m3}`};var sl=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class y3{constructor(e,r={},n,i){const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},v3),r),this.fetch=Sx(n)}listBuckets(){return sl(this,void 0,void 0,function*(){try{return{data:yield Ah(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Nn(e))return{data:null,error:e};throw e}})}getBucket(e){return sl(this,void 0,void 0,function*(){try{return{data:yield Ah(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return sl(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return sl(this,void 0,void 0,function*(){try{return{data:yield n0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return sl(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return sl(this,void 0,void 0,function*(){try{return{data:yield jx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}}class b3 extends y3{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new p3(this.url,this.headers,e,this.fetch)}}const x3="2.56.0";let Vc="";typeof Deno<"u"?Vc="deno":typeof document<"u"?Vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vc="react-native":Vc="node";const _3={"X-Client-Info":`supabase-js-${Vc}/${x3}`},w3={headers:_3},S3={schema:"public"},j3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N3={};var C3=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const L3=t=>{let e;return t?e=t:typeof fetch>"u"?e=cx:e=fetch,(...r)=>e(...r)},A3=()=>typeof Headers>"u"?ux:Headers,k3=(t,e,r)=>{const n=L3(r),i=A3();return(a,o)=>C3(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var P3=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function E3(t){return t.endsWith("/")?t:t+"/"}function F3(t,e){var r,n;const{db:i,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:g}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},g),l),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>P3(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const Nx="2.71.1",gl=30*1e3,i0=3,xg=i0*gl,T3="http://localhost:9999",D3="supabase.auth.token",I3={"X-Client-Info":`gotrue-js/${Nx}`},a0="X-Supabase-Api-Version",Cx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},R3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O3=10*60*1e3;class Cm extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function lr(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class B3 extends Cm{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function M3(t){return lr(t)&&t.name==="AuthApiError"}class Lx extends Cm{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class to extends Cm{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Ps extends to{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function U3(t){return lr(t)&&t.name==="AuthSessionMissingError"}class Cd extends to{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ld extends to{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends to{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $3(t){return lr(t)&&t.name==="AuthImplicitGrantRedirectError"}class ev extends to{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class s0 extends to{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function _g(t){return lr(t)&&t.name==="AuthRetryableFetchError"}class tv extends to{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class o0 extends to{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rv=` 	
\r=`.split(""),q3=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<rv.length;e+=1)t[rv[e].charCodeAt(0)]=-2;for(let e=0;e<kh.length;e+=1)t[kh[e].charCodeAt(0)]=e;return t})();function nv(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(kh[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(kh[n]),e.queuedBits-=6}}function Ax(t,e,r){const n=q3[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function iv(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{H3(o,n,r)};for(let o=0;o<t.length;o+=1)Ax(t.charCodeAt(o),i,a);return e.join("")}function z3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function W3(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}z3(n,e)}}function H3(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function G3(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Ax(t.charCodeAt(i),r,n);return new Uint8Array(e)}function Y3(t){const e=[];return W3(t,r=>e.push(r)),new Uint8Array(e)}function V3(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>nv(i,r,n)),nv(null,r,n),e.join("")}function J3(t){return Math.round(Date.now()/1e3)+t}function K3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const la=()=>typeof window<"u"&&typeof document<"u",vo={tested:!1,writable:!1},kx=()=>{if(!la())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vo.tested)return vo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vo.tested=!0,vo.writable=!0}catch{vo.tested=!0,vo.writable=!1}return vo.writable};function Q3(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const Px=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>pa(async()=>{const{default:n}=await Promise.resolve().then(()=>ac);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},X3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},yo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ls=async(t,e)=>{await t.removeItem(e)};class lf{constructor(){this.promise=new lf.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}lf.promiseConstructor=Promise;function wg(t){const e=t.split(".");if(e.length!==3)throw new o0("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!R3.test(e[n]))throw new o0("JWT not in base64url format");return{header:JSON.parse(iv(e[0])),payload:JSON.parse(iv(e[1])),signature:G3(e[2]),raw:{header:e[0],payload:e[1]}}}async function Z3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function eC(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function tC(t){return("0"+t.toString(16)).substr(-2)}function rC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,tC).join("")}async function nC(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function iC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await nC(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ol(t,e,r=!1){const n=rC();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await pl(t,`${e}-code-verifier`,i);const a=await iC(n);return[a,n===a?"plain":"s256"]}const aC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sC(t){const e=t.headers.get(a0);if(!e||!e.match(aC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function oC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function lC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ll(t){if(!cC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sg(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function av(t){return JSON.parse(JSON.stringify(t))}var uC=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const _o=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dC=[502,503,504];async function sv(t){var e;if(!X3(t))throw new s0(_o(t),0);if(dC.includes(t.status))throw new s0(_o(t),t.status);let r;try{r=await t.json()}catch(a){throw new Lx(_o(a),a)}let n;const i=sC(t);if(i&&i.getTime()>=Cx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new tv(_o(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ps}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new tv(_o(r),t.status,r.weak_password.reasons);throw new B3(_o(r),t.status||500,n)}const hC=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function hr(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[a0]||(a[a0]=Cx["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await fC(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function fC(t,e,r,n,i,a){const o=hC(e,n,i,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new s0(_o(c),0)}if(l.ok||await sv(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await sv(c)}}function Xa(t){var e;let r=null;vC(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=J3(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function ov(t){const e=Xa(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Is(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gC(t){return{data:t,error:null}}function pC(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=uC(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function mC(t){return t}function vC(t){return t.access_token&&t.refresh_token&&t.expires_in}const jg=["global","local","others"];var yC=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class bC{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Px(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=jg[0]){if(jg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jg.join(", ")}`);try{return await hr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(lr(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await hr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Is})}catch(n){if(lr(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=yC(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await hr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:pC,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(lr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await hr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Is})}catch(r){if(lr(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await hr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:mC});if(d.error)throw d.error;const g=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const j=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);u[`${_}Page`]=j}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},g),u),error:null}}catch(u){if(lr(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ll(e);try{return await hr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Is})}catch(r){if(lr(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ll(e);try{return await hr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Is})}catch(n){if(lr(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ll(e);try{return await hr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Is})}catch(n){if(lr(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ll(e.userId);try{const{data:r,error:n}=await hr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(lr(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ll(e.userId),ll(e.id);try{return{data:await hr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(lr(r))return{data:null,error:r};throw r}}}function lv(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function xC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cl={debug:!!(globalThis&&kx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ex extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _C extends Ex{}async function wC(t,e,r){cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),cl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _C(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(cl.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}xC();const SC={url:T3,storageKey:D3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:I3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function cv(t,e,r){return await r()}const ul={};class Pu{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pu.nextInstanceID,Pu.nextInstanceID+=1,this.instanceID>0&&la()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},SC),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new bC({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Px(i.fetch),this.lock=i.lock||cv,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:la()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=wC:this.lock=cv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:kx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lv(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=lv(this.memoryStorage)),la()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=ul[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ul[this.storageKey]=Object.assign(Object.assign({},ul[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ul[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ul[this.storageKey]=Object.assign(Object.assign({},ul[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Nx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Q3(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),la()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),$3(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return lr(r)?{error:r}:{error:new Lx("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await hr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Xa}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(lr(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:d,password:g,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await ol(this.storage,this.storageKey)),a=await hr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:g,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:Xa})}else if("phone"in e){const{phone:d,password:g,options:m}=e;a=await hr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:g,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Xa})}else throw new Ld("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(lr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await hr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ov})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await hr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ov})}else throw new Ld("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Cd}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(lr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,i,a,o,l,c,u,d,g,m,f;let x,j;if("message"in e)x=e.message,j=e.signature;else{const{chain:_,wallet:v,statement:C,options:N}=e;let A;if(la())if(typeof v=="object")A=v;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))A=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=v}const O=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const G=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),C?{statement:C}:null));let V;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")V=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)V=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)x=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),j=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${O.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(n=N==null?void 0:N.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((g=(d=N==null?void 0:N.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||g===void 0)&&g.length?["Resources",...N.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const G=await A.signMessage(new TextEncoder().encode(x),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=G}}try{const{data:_,error:v}=await hr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:V3(j)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Xa});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Cd}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(lr(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const r=await yo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await hr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Xa});if(await Ls(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Cd}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(lr(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,l=await hr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Xa}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Cd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(lr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ol(this.storage,this.storageKey));const{error:g}=await hr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await hr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ld("You must provide either an email or phone number.")}catch(l){if(lr(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await hr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Xa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(lr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await ol(this.storage,this.storageKey)),await hr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:gC})}catch(a){if(lr(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ps;const{error:i}=await hr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(lr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await hr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:l}=await hr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ld("You must provide either an email or phone number and a type")}catch(r){if(lr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await yo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<xg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await yo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Sg()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await hr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Is}):await this._useSession(async r=>{var n,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ps}:await hr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Is})})}catch(r){if(lr(r))return U3(r)&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Ps;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ol(this.storage,this.storageKey));const{data:u,error:d}=await hr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Is});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(lr(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ps;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=wg(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(lr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ps;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(lr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!la())throw new Ad("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ad(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ev("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ev("No code detected.");const{data:C,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Ad("No session defined in URL");const d=Math.round(Date.now()/1e3),g=parseInt(l);let m=d+g;c&&(m=parseInt(c));const f=m-d;f*1e3<=gl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${g}s`);const x=m-g;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:j,error:_}=await this._getUser(a);if(_)throw _;const v={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:g,expires_at:m,refresh_token:o,token_type:u,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(lr(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await yo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(M3(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=K3(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await ol(this.storage,this.storageKey,!0));try{return await hr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(lr(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(lr(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,l,c,u,d;const{data:g,error:m}=a;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await hr(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=g.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return la()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(lr(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await hr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(lr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await eC(async i=>(i>0&&await Z3(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await hr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xa})),(i,a)=>{const o=200*Math.pow(2,i);return a&&_g(a)&&Date.now()+o-n<gl})}catch(n){if(this._debug(r,"error",n),lr(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),la()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await yo(this.storage,this.storageKey);if(i&&this.userStorage){let o=await yo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await pl(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Sg()}else if(i&&!i.user&&!i.user){const o=await yo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Ls(this.storage,this.storageKey+"-user"),await pl(this.storage,this.storageKey,i)):i.user=Sg()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xg;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${xg}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),_g(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new lf;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Ps;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),lr(a)){const o={session:null,error:a};return _g(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await pl(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=av(i);await pl(this.storage,this.storageKey,a)}else{const i=av(r);await pl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ls(this.storage,this.storageKey),await Ls(this.storage,this.storageKey+"-code-verifier"),await Ls(this.storage,this.storageKey+"-user"),this.userStorage&&await Ls(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&la()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/gl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${gl}ms, refresh threshold is ${i0} ticks`),i<=i0&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ex)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!la()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await ol(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await hr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(lr(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await hr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(lr(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await hr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(lr(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await hr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(lr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=wg(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+O3>i)return n;const{data:a,error:o}=await hr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};n=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=wg(n);r!=null&&r.allowExpired||oC(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const d=lC(i.alg),g=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,g,o,Y3(`${l}.${c}`)))throw new o0("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(lr(n))return{data:null,error:n};throw n}}}Pu.nextInstanceID=0;const jC=Pu;class NC extends jC{constructor(e){super(e)}}var CC=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class LC{constructor(e,r,n){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=E3(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:S3,realtime:N3,auth:Object.assign(Object.assign({},j3),{storageKey:u}),global:w3},g=F3(n??{},d);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=g.auth)!==null&&o!==void 0?o:{},this.headers,g.global.fetch),this.fetch=k3(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new zN(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new b3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new _N(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return CC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:a,flowType:o,lock:l,debug:c},u,d){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new NC({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new s3(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const AC=(t,e,r)=>new LC(t,e,r);function kC(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}kC()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PC="https://aolsbxfulbvpiobqqsao.supabase.co",EC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbHNieGZ1bGJ2cGlvYnFxc2FvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5Njc4MjIsImV4cCI6MjA3MTU0MzgyMn0.gyDU9a8AvdOjkqTAxw6-p2F4DO3BlswxDXGTe-C6NVM",ne=AC(PC,EC);function gn(){return s.jsx("nav",{className:"navigation",children:s.jsx("ul",{})})}/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TC=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),uv=t=>{const e=TC(t);return e.charAt(0).toUpperCase()+e.slice(1)},Fx=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),DC=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...IC,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Fx("lucide",i),...!a&&!DC(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=(t,e)=>{const r=b.forwardRef(({className:n,...i},a)=>b.createElement(RC,{ref:a,iconNode:e,className:Fx(`lucide-${FC(uv(t))}`,`lucide-${t}`,n),...i}));return r.displayName=uv(t),r};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],BC=Pn("arrow-left",OC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],UC=Pn("calendar",MC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qC=Pn("circle",$C);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],dv=Pn("download",zC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],hv=Pn("external-link",WC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],GC=Pn("file-down",HC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],VC=Pn("file-text",YC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],KC=Pn("heart",JC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],XC=Pn("link",QC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],eL=Pn("megaphone",ZC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rL=Pn("plus",tL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],fv=Pn("qr-code",nL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],aL=Pn("save",iL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ri=Pn("shield",sL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lL=Pn("square-pen",oL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uL=Pn("trash-2",cL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ng=Pn("trophy",dL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fL=Pn("upload",hL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gv=Pn("user",gL);function Pr(){const t=Mr();return s.jsx("button",{className:"secondary-btn",onClick:()=>t("/"),children:"Back to Home"})}const ti=()=>{const t=localStorage.getItem("activeButton");if(t){const e=document.querySelector(`.primary-btn[data-id="${t}"]`);e&&e.classList.add("active")}},pr=t=>{document.querySelectorAll(".primary-btn").forEach(n=>n.classList.remove("active")),t.classList.add("active");const r=t.dataset.id;r&&localStorage.setItem("activeButton",r)};typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ti):ti());function oc({onLoadingStart:t,...e}){const r=Mr(),n=i=>{i&&i.currentTarget&&pr(i.currentTarget),t&&t(),setTimeout(()=>{r("/photos-logo-publication")},1e3)};return s.jsx("button",{className:"primary-btn",...e,onClick:n,children:"Photos, Logo & Publications"})}const Zi="data:image/png;base64,Cg==",En=({error:t,onClose:e})=>t?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},onClick:e,children:s.jsxs("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",textAlign:"center",border:"3px solid #ff4444"},onClick:r=>r.stopPropagation(),children:[s.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#ff4444",marginBottom:"15px"},children:"❌ Error"}),s.jsx("div",{style:{fontSize:"16px",color:"#333",marginBottom:"20px",lineHeight:"1.4"},children:t}),s.jsx("button",{style:{backgroundColor:"#ff4444",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"},onClick:e,children:"OK"})]})}):null,Rn=({success:t,onClose:e})=>t?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:e,children:s.jsxs("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",textAlign:"center",border:"3px solid #00ff00"},onClick:r=>r.stopPropagation(),children:[s.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#00aa00",marginBottom:"15px"},children:"✅ Success"}),s.jsx("div",{style:{fontSize:"16px",color:"#333",marginBottom:"20px",lineHeight:"1.4"},children:t}),s.jsx("button",{style:{backgroundColor:"#00aa00",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"},onClick:e,children:"OK"})]})}):null,nn=({message:t="Loading..."})=>(b.useEffect(()=>{const e=document.createElement("style");return e.textContent=`
      @keyframes loadingBar {
        0% {
          transform: scaleX(0);
        }
        50% {
          transform: scaleX(0.7);
        }
        100% {
          transform: scaleX(1);
        }
      }
    `,document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(2px)"},children:s.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"2px solid #22c55e",borderRadius:"15px",padding:"30px 40px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",minWidth:"300px"},children:[s.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"4px",overflow:"hidden",position:"relative"},children:s.jsx("div",{style:{height:"100%",backgroundColor:"#22c55e",borderRadius:"4px",animation:"loadingBar 2s ease-in-out infinite",transformOrigin:"left"}})}),s.jsx("span",{style:{color:"#22c55e",fontWeight:"600",fontSize:"16px",textAlign:"center"},children:t})]})}));function pL(){const[t,e]=b.useState([]),[r,n]=b.useState(null),[i,a]=b.useState("Algerian Judo Federation"),[o,l]=b.useState(!1),[c,u]=b.useState(""),[d,g]=b.useState(""),m=Mr(),f=Zi;return b.useEffect(()=>{(async()=>{const{data:j,error:_}=await ne.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!_&&j&&e(j)})()},[]),b.useEffect(()=>{(async()=>{const{data:j,error:_}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!_&&j&&j.length>0&&n(j[0].logo_url)})()},[]),s.jsxs("div",{className:"app-container",children:[s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[r?s.jsx("img",{src:r,alt:"Logo Fédération",className:"federation-logo"}):s.jsx("img",{src:f,alt:"Logo Fédération",className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:i||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"content",children:[s.jsx("h2",{children:"Welcome to the Federation Account"}),s.jsx("p",{children:"This is the Federation Account page."}),s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx(oc,{onLoadingStart:()=>l(!0)}),s.jsx("button",{className:"primary-btn",onClick:()=>{l(!0),m("/MemberListPageP")},children:"The Member List Add"}),s.jsx("button",{className:"primary-btn",onClick:()=>{l(!0),m("/TheClubListAdd-Fed")},children:"The Club List Add"}),s.jsx("button",{className:"primary-btn",onClick:()=>{l(!0),m("/TheAthleteList-Add")},children:"The Athlete List Add"})]})]}),c&&s.jsx(En,{message:c,onClose:()=>u("")}),d&&s.jsx(Rn,{message:d,onClose:()=>g("")}),o&&s.jsx(nn,{}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function Ar(t){"@babel/helpers - typeof";return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(t)}var va=Uint8Array,Oi=Uint16Array,Lm=Int32Array,Am=new va([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),km=new va([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pv=new va([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tx=function(t,e){for(var r=new Oi(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new Lm(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},Dx=Tx(Am,2),mL=Dx.b,l0=Dx.r;mL[28]=258,l0[258]=28;var vL=Tx(km,0),mv=vL.r,c0=new Oi(32768);for(var qr=0;qr<32768;++qr){var As=(qr&43690)>>1|(qr&21845)<<1;As=(As&52428)>>2|(As&13107)<<2,As=(As&61680)>>4|(As&3855)<<4,c0[qr]=((As&65280)>>8|(As&255)<<8)>>1}var ou=function(t,e,r){for(var n=t.length,i=0,a=new Oi(e);i<n;++i)t[i]&&++a[t[i]-1];var o=new Oi(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(r){l=new Oi(1<<e);var c=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],g=o[t[i]-1]++<<d,m=g|(1<<d)-1;g<=m;++g)l[c0[g]>>c]=u}else for(l=new Oi(n),i=0;i<n;++i)t[i]&&(l[i]=c0[o[t[i]-1]++]>>15-t[i]);return l},Oo=new va(288);for(var qr=0;qr<144;++qr)Oo[qr]=8;for(var qr=144;qr<256;++qr)Oo[qr]=9;for(var qr=256;qr<280;++qr)Oo[qr]=7;for(var qr=280;qr<288;++qr)Oo[qr]=8;var Ph=new va(32);for(var qr=0;qr<32;++qr)Ph[qr]=5;var yL=ou(Oo,9,0),bL=ou(Ph,5,0),Ix=function(t){return(t+7)/8|0},xL=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new va(t.subarray(e,r))},Ka=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},qc=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Cg=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,a=r.slice();if(!i)return{t:Ox,l:0};if(i==1){var o=new va(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(O,G){return O.f-G.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,g=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=i-1;)l=r[r[u].f<r[g].f?u++:g++],c=r[u!=d&&r[u].f<r[g].f?u++:g++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var m=a[0].s,n=1;n<i;++n)a[n].s>m&&(m=a[n].s);var f=new Oi(m+1),x=u0(r[d-1],f,0);if(x>e){var n=0,j=0,_=x-e,v=1<<_;for(a.sort(function(G,V){return f[V.s]-f[G.s]||G.f-V.f});n<i;++n){var C=a[n].s;if(f[C]>e)j+=v-(1<<x-f[C]),f[C]=e;else break}for(j>>=_;j>0;){var N=a[n].s;f[N]<e?j-=1<<e-f[N]++-1:++n}for(;n>=0&&j;--n){var A=a[n].s;f[A]==e&&(--f[A],++j)}x=e}return{t:new va(f),l:x}},u0=function(t,e,r){return t.s==-1?Math.max(u0(t.l,e,r+1),u0(t.r,e,r+1)):e[t.s]=r},vv=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Oi(++e),n=0,i=t[0],a=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==i&&l!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[l]}return{c:r.subarray(0,n),n:e}},zc=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Rx=function(t,e,r){var n=r.length,i=Ix(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<n;++a)t[i+a+4]=r[a];return(i+4+n)*8},yv=function(t,e,r,n,i,a,o,l,c,u,d){Ka(e,d++,r),++i[256];for(var g=Cg(i,15),m=g.t,f=g.l,x=Cg(a,15),j=x.t,_=x.l,v=vv(m),C=v.c,N=v.n,A=vv(j),O=A.c,G=A.n,V=new Oi(19),F=0;F<C.length;++F)++V[C[F]&31];for(var F=0;F<O.length;++F)++V[O[F]&31];for(var $=Cg(V,7),Z=$.t,D=$.l,Y=19;Y>4&&!Z[pv[Y-1]];--Y);var ce=u+5<<3,B=zc(i,Oo)+zc(a,Ph)+o,H=zc(i,m)+zc(a,j)+o+14+3*Y+zc(V,Z)+2*V[16]+3*V[17]+7*V[18];if(c>=0&&ce<=B&&ce<=H)return Rx(e,d,t.subarray(c,c+u));var he,Le,te,ye;if(Ka(e,d,1+(H<B)),d+=2,H<B){he=ou(m,f,0),Le=m,te=ou(j,_,0),ye=j;var ve=ou(Z,D,0);Ka(e,d,N-257),Ka(e,d+5,G-1),Ka(e,d+10,Y-4),d+=14;for(var F=0;F<Y;++F)Ka(e,d+3*F,Z[pv[F]]);d+=3*Y;for(var fe=[C,O],P=0;P<2;++P)for(var q=fe[P],F=0;F<q.length;++F){var X=q[F]&31;Ka(e,d,ve[X]),d+=Z[X],X>15&&(Ka(e,d,q[F]>>5&127),d+=q[F]>>12)}}else he=yL,Le=Oo,te=bL,ye=Ph;for(var F=0;F<l;++F){var ae=n[F];if(ae>255){var X=ae>>18&31;qc(e,d,he[X+257]),d+=Le[X+257],X>7&&(Ka(e,d,ae>>23&31),d+=Am[X]);var be=ae&31;qc(e,d,te[be]),d+=ye[be],be>3&&(qc(e,d,ae>>5&8191),d+=km[be])}else qc(e,d,he[ae]),d+=Le[ae]}return qc(e,d,he[256]),d+Le[256]},_L=new Lm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ox=new va(0),wL=function(t,e,r,n,i,a){var o=a.z||t.length,l=new va(n+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(n,l.length-i),u=a.l,d=(a.r||0)&7;if(e){d&&(c[0]=a.r>>3);for(var g=_L[e-1],m=g>>13,f=g&8191,x=(1<<r)-1,j=a.p||new Oi(32768),_=a.h||new Oi(x+1),v=Math.ceil(r/3),C=2*v,N=function(Fe){return(t[Fe]^t[Fe+1]<<v^t[Fe+2]<<C)&x},A=new Lm(25e3),O=new Oi(288),G=new Oi(32),V=0,F=0,$=a.i||0,Z=0,D=a.w||0,Y=0;$+2<o;++$){var ce=N($),B=$&32767,H=_[ce];if(j[B]=H,_[ce]=B,D<=$){var he=o-$;if((V>7e3||Z>24576)&&(he>423||!u)){d=yv(t,c,0,A,O,G,F,Z,Y,$-Y,d),Z=V=F=0,Y=$;for(var Le=0;Le<286;++Le)O[Le]=0;for(var Le=0;Le<30;++Le)G[Le]=0}var te=2,ye=0,ve=f,fe=B-H&32767;if(he>2&&ce==N($-fe))for(var P=Math.min(m,he)-1,q=Math.min(32767,$),X=Math.min(258,he);fe<=q&&--ve&&B!=H;){if(t[$+te]==t[$+te-fe]){for(var ae=0;ae<X&&t[$+ae]==t[$+ae-fe];++ae);if(ae>te){if(te=ae,ye=fe,ae>P)break;for(var be=Math.min(fe,ae-2),Ne=0,Le=0;Le<be;++Le){var De=$-fe+Le&32767,ke=j[De],qe=De-ke&32767;qe>Ne&&(Ne=qe,H=De)}}}B=H,H=j[B],fe+=B-H&32767}if(ye){A[Z++]=268435456|l0[te]<<18|mv[ye];var Ke=l0[te]&31,dt=mv[ye]&31;F+=Am[Ke]+km[dt],++O[257+Ke],++G[dt],D=$+te,++V}else A[Z++]=t[$],++O[t[$]]}}for($=Math.max($,D);$<o;++$)A[Z++]=t[$],++O[t[$]];d=yv(t,c,u,A,O,G,F,Z,Y,$-Y,d),u||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=_,a.p=j,a.i=$,a.w=D)}else{for(var $=a.w||0;$<o+u;$+=65535){var He=$+65535;He>=o&&(c[d/8|0]=u,He=o),d=Rx(c,d+1,t.subarray($,He))}a.i=o}return xL(l,0,n+Ix(d)+i)},Bx=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,a=r.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},SL=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new va(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return wL(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},Mx=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},jL=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Bx();i.p(e.dictionary),Mx(t,2,i.d())}};function d0(t,e){e||(e={});var r=Bx();r.p(t);var n=SL(t,e,e.dictionary?6:2,4);return jL(n,e),Mx(n,n.length-4,r.d()),n}var NL=typeof TextDecoder<"u"&&new TextDecoder,CL=0;try{NL.decode(Ox,{stream:!0}),CL=1}catch{}function LL(t){if(Array.isArray(t))return t}function AL(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function bv(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function kL(t,e){if(t){if(typeof t=="string")return bv(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bv(t,e):void 0}}function PL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xv(t,e){return LL(t)||AL(t,e)||kL(t,e)||PL()}function _v(t,e="utf8"){return new TextDecoder(e).decode(t)}const EL=new TextEncoder;function FL(t){return EL.encode(t)}const TL=1024*8,DL=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Lg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Pm{constructor(e=TL,r={}){Lr(this,"buffer");Lr(this,"byteLength");Lr(this,"byteOffset");Lr(this,"length");Lr(this,"offset");Lr(this,"lastWrittenByte");Lr(this,"littleEndian");Lr(this,"_data");Lr(this,"_mark");Lr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,a=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof Pm)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=Lg[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===DL&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+n));l.reverse();const c=new Lg[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new Lg[r](a);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return _v(this.readBytes(e))}decodeText(e=1,r="utf8"){return _v(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(FL(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function lc(t){let e=t.length;for(;--e>=0;)t[e]=0}const IL=3,RL=258,Ux=29,OL=256,BL=OL+1+Ux,$x=30,ML=512,UL=new Array((BL+2)*2);lc(UL);const $L=new Array($x*2);lc($L);const qL=new Array(ML);lc(qL);const zL=new Array(RL-IL+1);lc(zL);const WL=new Array(Ux);lc(WL);const HL=new Array($x);lc(HL);const GL=(t,e,r,n)=>{let i=t&65535|0,a=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+e[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var h0=GL;const YL=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},VL=new Uint32Array(YL()),JL=(t,e,r,n)=>{const i=VL,a=n+r;t^=-1;for(let o=n;o<a;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var Pa=JL,f0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},qx={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const KL=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var QL=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)KL(r,n)&&(t[n]=r[n])}}return t},XL=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,a=t.length;n<a;n++){let o=t[n];r.set(o,i),i+=o.length}return r},zx={assign:QL,flattenChunks:XL};let Wx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Wx=!1}const Eu=new Uint8Array(256);for(let t=0;t<256;t++)Eu[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Eu[254]=Eu[254]=1;var ZL=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,a,o=t.length,l=0;for(i=0;i<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),a=0,i=0;a<l;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|r&63):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|r&63):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|r&63);return e};const eA=(t,e)=>{if(e<65534&&t.subarray&&Wx)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var tA=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const a=new Array(r*2);for(i=0,n=0;n<r;){let o=t[n++];if(o<128){a[i++]=o;continue}let l=Eu[o];if(l>4){a[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return eA(a,i)},rA=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Eu[t[r]]>e?r:e},g0={string2buf:ZL,buf2string:tA,utf8border:rA};function nA(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var iA=nA;const kd=16209,aA=16191;var sA=function(e,r){let n,i,a,o,l,c,u,d,g,m,f,x,j,_,v,C,N,A,O,G,V,F,$,Z;const D=e.state;n=e.next_in,$=e.input,i=n+(e.avail_in-5),a=e.next_out,Z=e.output,o=a-(r-e.avail_out),l=a+(e.avail_out-257),c=D.dmax,u=D.wsize,d=D.whave,g=D.wnext,m=D.window,f=D.hold,x=D.bits,j=D.lencode,_=D.distcode,v=(1<<D.lenbits)-1,C=(1<<D.distbits)-1;e:do{x<15&&(f+=$[n++]<<x,x+=8,f+=$[n++]<<x,x+=8),N=j[f&v];t:for(;;){if(A=N>>>24,f>>>=A,x-=A,A=N>>>16&255,A===0)Z[a++]=N&65535;else if(A&16){O=N&65535,A&=15,A&&(x<A&&(f+=$[n++]<<x,x+=8),O+=f&(1<<A)-1,f>>>=A,x-=A),x<15&&(f+=$[n++]<<x,x+=8,f+=$[n++]<<x,x+=8),N=_[f&C];r:for(;;){if(A=N>>>24,f>>>=A,x-=A,A=N>>>16&255,A&16){if(G=N&65535,A&=15,x<A&&(f+=$[n++]<<x,x+=8,x<A&&(f+=$[n++]<<x,x+=8)),G+=f&(1<<A)-1,G>c){e.msg="invalid distance too far back",D.mode=kd;break e}if(f>>>=A,x-=A,A=a-o,G>A){if(A=G-A,A>d&&D.sane){e.msg="invalid distance too far back",D.mode=kd;break e}if(V=0,F=m,g===0){if(V+=u-A,A<O){O-=A;do Z[a++]=m[V++];while(--A);V=a-G,F=Z}}else if(g<A){if(V+=u+g-A,A-=g,A<O){O-=A;do Z[a++]=m[V++];while(--A);if(V=0,g<O){A=g,O-=A;do Z[a++]=m[V++];while(--A);V=a-G,F=Z}}}else if(V+=g-A,A<O){O-=A;do Z[a++]=m[V++];while(--A);V=a-G,F=Z}for(;O>2;)Z[a++]=F[V++],Z[a++]=F[V++],Z[a++]=F[V++],O-=3;O&&(Z[a++]=F[V++],O>1&&(Z[a++]=F[V++]))}else{V=a-G;do Z[a++]=Z[V++],Z[a++]=Z[V++],Z[a++]=Z[V++],O-=3;while(O>2);O&&(Z[a++]=Z[V++],O>1&&(Z[a++]=Z[V++]))}}else if(A&64){e.msg="invalid distance code",D.mode=kd;break e}else{N=_[(N&65535)+(f&(1<<A)-1)];continue r}break}}else if(A&64)if(A&32){D.mode=aA;break e}else{e.msg="invalid literal/length code",D.mode=kd;break e}else{N=j[(N&65535)+(f&(1<<A)-1)];continue t}break}}while(n<i&&a<l);O=x>>3,n-=O,x-=O<<3,f&=(1<<x)-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=a<l?257+(l-a):257-(a-l),D.hold=f,D.bits=x};const dl=15,wv=852,Sv=592,jv=0,Ag=1,Nv=2,oA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),cA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),uA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dA=(t,e,r,n,i,a,o,l)=>{const c=l.bits;let u=0,d=0,g=0,m=0,f=0,x=0,j=0,_=0,v=0,C=0,N,A,O,G,V,F=null,$;const Z=new Uint16Array(dl+1),D=new Uint16Array(dl+1);let Y=null,ce,B,H;for(u=0;u<=dl;u++)Z[u]=0;for(d=0;d<n;d++)Z[e[r+d]]++;for(f=c,m=dl;m>=1&&Z[m]===0;m--);if(f>m&&(f=m),m===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,l.bits=1,0;for(g=1;g<m&&Z[g]===0;g++);for(f<g&&(f=g),_=1,u=1;u<=dl;u++)if(_<<=1,_-=Z[u],_<0)return-1;if(_>0&&(t===jv||m!==1))return-1;for(D[1]=0,u=1;u<dl;u++)D[u+1]=D[u]+Z[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[D[e[r+d]]++]=d);if(t===jv?(F=Y=o,$=20):t===Ag?(F=oA,Y=lA,$=257):(F=cA,Y=uA,$=0),C=0,d=0,u=g,V=a,x=f,j=0,O=-1,v=1<<f,G=v-1,t===Ag&&v>wv||t===Nv&&v>Sv)return 1;for(;;){ce=u-j,o[d]+1<$?(B=0,H=o[d]):o[d]>=$?(B=Y[o[d]-$],H=F[o[d]-$]):(B=96,H=0),N=1<<u-j,A=1<<x,g=A;do A-=N,i[V+(C>>j)+A]=ce<<24|B<<16|H|0;while(A!==0);for(N=1<<u-1;C&N;)N>>=1;if(N!==0?(C&=N-1,C+=N):C=0,d++,--Z[u]===0){if(u===m)break;u=e[r+o[d]]}if(u>f&&(C&G)!==O){for(j===0&&(j=f),V+=g,x=u-j,_=1<<x;x+j<m&&(_-=Z[x+j],!(_<=0));)x++,_<<=1;if(v+=1<<x,t===Ag&&v>wv||t===Nv&&v>Sv)return 1;O=C&G,i[O]=f<<24|x<<16|V-a|0}}return C!==0&&(i[V+C]=u-j<<24|64<<16|0),l.bits=f,0};var lu=dA;const hA=0,Hx=1,Gx=2,{Z_FINISH:Cv,Z_BLOCK:fA,Z_TREES:Pd,Z_OK:Bo,Z_STREAM_END:gA,Z_NEED_DICT:pA,Z_STREAM_ERROR:ea,Z_DATA_ERROR:Yx,Z_MEM_ERROR:Vx,Z_BUF_ERROR:mA,Z_DEFLATED:Lv}=qx,cf=16180,Av=16181,kv=16182,Pv=16183,Ev=16184,Fv=16185,Tv=16186,Dv=16187,Iv=16188,Rv=16189,Eh=16190,Qa=16191,kg=16192,Ov=16193,Pg=16194,Bv=16195,Mv=16196,Uv=16197,$v=16198,Ed=16199,Fd=16200,qv=16201,zv=16202,Wv=16203,Hv=16204,Gv=16205,Eg=16206,Yv=16207,Vv=16208,Hr=16209,Jx=16210,Kx=16211,vA=852,yA=592,bA=15,xA=bA,Jv=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function _A(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qo=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<cf||e.mode>Kx?1:0},Qx=t=>{if(qo(t))return ea;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=cf,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(vA),e.distcode=e.distdyn=new Int32Array(yA),e.sane=1,e.back=-1,Bo},Xx=t=>{if(qo(t))return ea;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Qx(t)},Zx=(t,e)=>{let r;if(qo(t))return ea;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ea:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Xx(t))},e_=(t,e)=>{if(!t)return ea;const r=new _A;t.state=r,r.strm=t,r.window=null,r.mode=cf;const n=Zx(t,e);return n!==Bo&&(t.state=null),n},wA=t=>e_(t,xA);let Kv=!0,Fg,Tg;const SA=t=>{if(Kv){Fg=new Int32Array(512),Tg=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(lu(Hx,t.lens,0,288,Fg,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;lu(Gx,t.lens,0,32,Tg,0,t.work,{bits:5}),Kv=!1}t.lencode=Fg,t.lenbits=9,t.distcode=Tg,t.distbits=5},t_=(t,e,r,n)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(e.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},jA=(t,e)=>{let r,n,i,a,o,l,c,u,d,g,m,f,x,j,_=0,v,C,N,A,O,G,V,F;const $=new Uint8Array(4);let Z,D;const Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qo(t)||!t.output||!t.input&&t.avail_in!==0)return ea;r=t.state,r.mode===Qa&&(r.mode=kg),o=t.next_out,i=t.output,c=t.avail_out,a=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,g=l,m=c,F=Bo;e:for(;;)switch(r.mode){case cf:if(r.wrap===0){r.mode=kg;break}for(;d<16;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,$[0]=u&255,$[1]=u>>>8&255,r.check=Pa(r.check,$,2,0),u=0,d=0,r.mode=Av;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Hr;break}if((u&15)!==Lv){t.msg="unknown compression method",r.mode=Hr;break}if(u>>>=4,d-=4,V=(u&15)+8,r.wbits===0&&(r.wbits=V),V>15||V>r.wbits){t.msg="invalid window size",r.mode=Hr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?Rv:Qa,u=0,d=0;break;case Av:for(;d<16;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==Lv){t.msg="unknown compression method",r.mode=Hr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Hr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,r.check=Pa(r.check,$,2,0)),u=0,d=0,r.mode=kv;case kv:for(;d<32;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,$[2]=u>>>16&255,$[3]=u>>>24&255,r.check=Pa(r.check,$,4,0)),u=0,d=0,r.mode=Pv;case Pv:for(;d<16;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,r.check=Pa(r.check,$,2,0)),u=0,d=0,r.mode=Ev;case Ev:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,r.check=Pa(r.check,$,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=Fv;case Fv:if(r.flags&1024&&(f=r.length,f>l&&(f=l),f&&(r.head&&(V=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+f),V)),r.flags&512&&r.wrap&4&&(r.check=Pa(r.check,n,f,a)),l-=f,a+=f,r.length-=f),r.length))break e;r.length=0,r.mode=Tv;case Tv:if(r.flags&2048){if(l===0)break e;f=0;do V=n[a+f++],r.head&&V&&r.length<65536&&(r.head.name+=String.fromCharCode(V));while(V&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Pa(r.check,n,f,a)),l-=f,a+=f,V)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Dv;case Dv:if(r.flags&4096){if(l===0)break e;f=0;do V=n[a+f++],r.head&&V&&r.length<65536&&(r.head.comment+=String.fromCharCode(V));while(V&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Pa(r.check,n,f,a)),l-=f,a+=f,V)break e}else r.head&&(r.head.comment=null);r.mode=Iv;case Iv:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Hr;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Qa;break;case Rv:for(;d<32;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}t.adler=r.check=Jv(u),u=0,d=0,r.mode=Eh;case Eh:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=a,t.avail_in=l,r.hold=u,r.bits=d,pA;t.adler=r.check=1,r.mode=Qa;case Qa:if(e===fA||e===Pd)break e;case kg:if(r.last){u>>>=d&7,d-=d&7,r.mode=Eg;break}for(;d<3;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=Ov;break;case 1:if(SA(r),r.mode=Ed,e===Pd){u>>>=2,d-=2;break e}break;case 2:r.mode=Mv;break;case 3:t.msg="invalid block type",r.mode=Hr}u>>>=2,d-=2;break;case Ov:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Hr;break}if(r.length=u&65535,u=0,d=0,r.mode=Pg,e===Pd)break e;case Pg:r.mode=Bv;case Bv:if(f=r.length,f){if(f>l&&(f=l),f>c&&(f=c),f===0)break e;i.set(n.subarray(a,a+f),o),l-=f,a+=f,c-=f,o+=f,r.length-=f;break}r.mode=Qa;break;case Mv:for(;d<14;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Hr;break}r.have=0,r.mode=Uv;case Uv:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}r.lens[Y[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[Y[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Z={bits:r.lenbits},F=lu(hA,r.lens,0,19,r.lencode,0,r.work,Z),r.lenbits=Z.bits,F){t.msg="invalid code lengths set",r.mode=Hr;break}r.have=0,r.mode=$v;case $v:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[u&(1<<r.lenbits)-1],v=_>>>24,C=_>>>16&255,N=_&65535,!(v<=d);){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(N<16)u>>>=v,d-=v,r.lens[r.have++]=N;else{if(N===16){for(D=v+2;d<D;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(u>>>=v,d-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=Hr;break}V=r.lens[r.have-1],f=3+(u&3),u>>>=2,d-=2}else if(N===17){for(D=v+3;d<D;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}u>>>=v,d-=v,V=0,f=3+(u&7),u>>>=3,d-=3}else{for(D=v+7;d<D;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}u>>>=v,d-=v,V=0,f=11+(u&127),u>>>=7,d-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Hr;break}for(;f--;)r.lens[r.have++]=V}}if(r.mode===Hr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Hr;break}if(r.lenbits=9,Z={bits:r.lenbits},F=lu(Hx,r.lens,0,r.nlen,r.lencode,0,r.work,Z),r.lenbits=Z.bits,F){t.msg="invalid literal/lengths set",r.mode=Hr;break}if(r.distbits=6,r.distcode=r.distdyn,Z={bits:r.distbits},F=lu(Gx,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Z),r.distbits=Z.bits,F){t.msg="invalid distances set",r.mode=Hr;break}if(r.mode=Ed,e===Pd)break e;case Ed:r.mode=Fd;case Fd:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=a,t.avail_in=l,r.hold=u,r.bits=d,sA(t,m),o=t.next_out,i=t.output,c=t.avail_out,a=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===Qa&&(r.back=-1);break}for(r.back=0;_=r.lencode[u&(1<<r.lenbits)-1],v=_>>>24,C=_>>>16&255,N=_&65535,!(v<=d);){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(C&&!(C&240)){for(A=v,O=C,G=N;_=r.lencode[G+((u&(1<<A+O)-1)>>A)],v=_>>>24,C=_>>>16&255,N=_&65535,!(A+v<=d);){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}u>>>=A,d-=A,r.back+=A}if(u>>>=v,d-=v,r.back+=v,r.length=N,C===0){r.mode=Gv;break}if(C&32){r.back=-1,r.mode=Qa;break}if(C&64){t.msg="invalid literal/length code",r.mode=Hr;break}r.extra=C&15,r.mode=qv;case qv:if(r.extra){for(D=r.extra;d<D;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=zv;case zv:for(;_=r.distcode[u&(1<<r.distbits)-1],v=_>>>24,C=_>>>16&255,N=_&65535,!(v<=d);){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(!(C&240)){for(A=v,O=C,G=N;_=r.distcode[G+((u&(1<<A+O)-1)>>A)],v=_>>>24,C=_>>>16&255,N=_&65535,!(A+v<=d);){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}u>>>=A,d-=A,r.back+=A}if(u>>>=v,d-=v,r.back+=v,C&64){t.msg="invalid distance code",r.mode=Hr;break}r.offset=N,r.extra=C&15,r.mode=Wv;case Wv:if(r.extra){for(D=r.extra;d<D;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Hr;break}r.mode=Hv;case Hv:if(c===0)break e;if(f=m-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Hr;break}f>r.wnext?(f-=r.wnext,x=r.wsize-f):x=r.wnext-f,f>r.length&&(f=r.length),j=r.window}else j=i,x=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do i[o++]=j[x++];while(--f);r.length===0&&(r.mode=Fd);break;case Gv:if(c===0)break e;i[o++]=r.length,c--,r.mode=Fd;break;case Eg:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[a++]<<d,d+=8}if(m-=c,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?Pa(r.check,i,m,o-m):h0(r.check,i,m,o-m)),m=c,r.wrap&4&&(r.flags?u:Jv(u))!==r.check){t.msg="incorrect data check",r.mode=Hr;break}u=0,d=0}r.mode=Yv;case Yv:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Hr;break}u=0,d=0}r.mode=Vv;case Vv:F=gA;break e;case Hr:F=Yx;break e;case Jx:return Vx;case Kx:default:return ea}return t.next_out=o,t.avail_out=c,t.next_in=a,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||m!==t.avail_out&&r.mode<Hr&&(r.mode<Eg||e!==Cv))&&t_(t,t.output,t.next_out,m-t.avail_out),g-=t.avail_in,m-=t.avail_out,t.total_in+=g,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?Pa(r.check,i,m,t.next_out-m):h0(r.check,i,m,t.next_out-m)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Qa?128:0)+(r.mode===Ed||r.mode===Pg?256:0),(g===0&&m===0||e===Cv)&&F===Bo&&(F=mA),F},NA=t=>{if(qo(t))return ea;let e=t.state;return e.window&&(e.window=null),t.state=null,Bo},CA=(t,e)=>{if(qo(t))return ea;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Bo):ea},LA=(t,e)=>{const r=e.length;let n,i,a;return qo(t)||(n=t.state,n.wrap!==0&&n.mode!==Eh)?ea:n.mode===Eh&&(i=1,i=h0(i,e,r,0),i!==n.check)?Yx:(a=t_(t,e,r,r),a?(n.mode=Jx,Vx):(n.havedict=1,Bo))};var AA=Xx,kA=Zx,PA=Qx,EA=wA,FA=e_,TA=jA,DA=NA,IA=CA,RA=LA,OA="pako inflate (from Nodeca project)",rs={inflateReset:AA,inflateReset2:kA,inflateResetKeep:PA,inflateInit:EA,inflateInit2:FA,inflate:TA,inflateEnd:DA,inflateGetHeader:IA,inflateSetDictionary:RA,inflateInfo:OA};function BA(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var MA=BA;const r_=Object.prototype.toString,{Z_NO_FLUSH:UA,Z_FINISH:$A,Z_OK:Fu,Z_STREAM_END:Dg,Z_NEED_DICT:Ig,Z_STREAM_ERROR:qA,Z_DATA_ERROR:Qv,Z_MEM_ERROR:zA}=qx;function $u(t){this.options=zx.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iA,this.strm.avail_out=0;let r=rs.inflateInit2(this.strm,e.windowBits);if(r!==Fu)throw new Error(f0[r]);if(this.header=new MA,rs.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=g0.string2buf(e.dictionary):r_.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=rs.inflateSetDictionary(this.strm,e.dictionary),r!==Fu)))throw new Error(f0[r])}$u.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?$A:UA,r_.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=rs.inflate(r,o),a===Ig&&i&&(a=rs.inflateSetDictionary(r,i),a===Fu?a=rs.inflate(r,o):a===Qv&&(a=Ig));r.avail_in>0&&a===Dg&&r.state.wrap>0&&t[r.next_in]!==0;)rs.inflateReset(r),a=rs.inflate(r,o);switch(a){case qA:case Qv:case Ig:case zA:return this.onEnd(a),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||a===Dg))if(this.options.to==="string"){let c=g0.utf8border(r.output,r.next_out),u=r.next_out-c,d=g0.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===Fu&&l===0)){if(a===Dg)return a=rs.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};$u.prototype.onData=function(t){this.chunks.push(t)};$u.prototype.onEnd=function(t){t===Fu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=zx.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function WA(t,e){const r=new $u(e);if(r.push(t),r.err)throw r.msg||f0[r.err];return r.result}var HA=$u,GA=WA,YA={Inflate:HA,inflate:GA};const{Inflate:VA,inflate:JA}=YA;var Xv=VA,KA=JA;const n_=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;n_[t]=e}const Zv=4294967295;function QA(t,e,r){let n=t;for(let i=0;i<r;i++)n=n_[(n^e[i])&255]^n>>>8;return n}function XA(t,e){return(QA(Zv,t,e)^Zv)>>>0}function ey(t,e,r){const n=t.readUint32(),i=XA(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function i_(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function a_(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function s_(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function o_(t,e,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(r[a]>>1)&255;for(;a<n;a++)e[a]=t[a]+(e[a-i]+r[a]>>1)&255}}function l_(t,e,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+r[a]&255;for(;a<n;a++)e[a]=t[a]+ZA(e[a-i],r[a],r[a-i])&255}}function ZA(t,e,r){const n=t+e-r,i=Math.abs(n-t),a=Math.abs(n-e),o=Math.abs(n-r);return i<=a&&i<=o?t:a<=o?e:r}function e6(t,e,r,n,i,a){switch(t){case 0:i_(e,r,i);break;case 1:a_(e,r,i,a);break;case 2:s_(e,r,n,i);break;case 3:o_(e,r,n,i,a);break;case 4:l_(e,r,n,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const t6=new Uint16Array([255]),r6=new Uint8Array(t6.buffer),n6=r6[0]===255;function i6(t){const{data:e,width:r,height:n,channels:i,depth:a}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(a/8)*i,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const g=o[d],m=Math.ceil((r-g.x)/g.xStep),f=Math.ceil((n-g.y)/g.yStep);if(m<=0||f<=0)continue;const x=m*l,j=new Uint8Array(x);for(let _=0;_<f;_++){const v=e[u++],C=e.subarray(u,u+x);u+=x;const N=new Uint8Array(x);e6(v,C,N,j,x,l),j.set(N);for(let A=0;A<m;A++){const O=g.x+A*g.xStep,G=g.y+_*g.yStep;if(!(O>=r||G>=n))for(let V=0;V<l;V++)c[(G*r+O)*l+V]=N[A*l+V]}}}if(a===16){const d=new Uint16Array(c.buffer);if(n6)for(let g=0;g<d.length;g++)d[g]=a6(d[g]);return d}else return c}function a6(t){return(t&255)<<8|t>>8&255}const s6=new Uint16Array([255]),o6=new Uint8Array(s6.buffer),l6=o6[0]===255,c6=new Uint8Array(0);function ty(t){const{data:e,width:r,height:n,channels:i,depth:a}=t,o=Math.ceil(a/8)*i,l=Math.ceil(a/8*i*r),c=new Uint8Array(n*l);let u=c6,d=0,g,m;for(let f=0;f<n;f++){switch(g=e.subarray(d+1,d+1+l),m=c.subarray(f*l,(f+1)*l),e[d]){case 0:i_(g,m,l);break;case 1:a_(g,m,l,o);break;case 2:s_(g,m,u,l);break;case 3:o_(g,m,u,l,o);break;case 4:l_(g,m,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=m,d+=l+1}if(a===16){const f=new Uint16Array(c.buffer);if(l6)for(let x=0;x<f.length;x++)f[x]=u6(f[x]);return f}else return c}function u6(t){return(t&255)<<8|t>>8&255}const Xd=Uint8Array.of(137,80,78,71,13,10,26,10);function ry(t){if(!d6(t.readBytes(Xd.length)))throw new Error("wrong PNG signature")}function d6(t){if(t.length<Xd.length)return!1;for(let e=0;e<Xd.length;e++)if(t[e]!==Xd[e])return!1;return!0}const h6="tEXt",f6=0,c_=new TextDecoder("latin1");function g6(t){if(m6(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const p6=/^[\u0000-\u00FF]*$/;function m6(t){if(!p6.test(t))throw new Error("invalid latin1 text")}function v6(t,e,r){const n=u_(e);t[n]=y6(e,r-n.length-1)}function u_(t){for(t.mark();t.readByte()!==f6;);const e=t.offset;t.reset();const r=c_.decode(t.readBytes(e-t.offset-1));return t.skip(1),g6(r),r}function y6(t,e){return c_.decode(t.readBytes(e))}const Di={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Rg={UNKNOWN:-1,DEFLATE:0},ny={UNKNOWN:-1,ADAPTIVE:0},Og={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Td={NONE:0,BACKGROUND:1,PREVIOUS:2},Bg={SOURCE:0,OVER:1};class b6 extends Pm{constructor(r,n={}){super(r);Lr(this,"_checkCrc");Lr(this,"_inflator");Lr(this,"_png");Lr(this,"_apng");Lr(this,"_end");Lr(this,"_hasPalette");Lr(this,"_palette");Lr(this,"_hasTransparency");Lr(this,"_transparency");Lr(this,"_compressionMethod");Lr(this,"_filterMethod");Lr(this,"_interlaceMethod");Lr(this,"_colorType");Lr(this,"_isAnimated");Lr(this,"_numberOfFrames");Lr(this,"_numberOfPlays");Lr(this,"_frames");Lr(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new Xv,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Rg.UNKNOWN,this._filterMethod=ny.UNKNOWN,this._interlaceMethod=Og.UNKNOWN,this._colorType=Di.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ry(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(ry(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case h6:v6(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?ey(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?ey(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=x6(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Di.GREYSCALE:i=1;break;case Di.TRUECOLOUR:i=3;break;case Di.INDEXED_COLOUR:i=1;break;case Di.GREYSCALE_ALPHA:i=2;break;case Di.TRUECOLOUR_ALPHA:i=4;break;case Di.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Rg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Di.GREYSCALE:case Di.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Di.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Di.UNKNOWN:case Di.GREYSCALE_ALPHA:case Di.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=u_(this),i=this.readUint8();if(i!==Rg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:KA(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=ty({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case Td.NONE:break;case Td.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const l=(a*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case Td.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,a=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case Bg.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=a(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case Bg.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=a(o,l);for(let d=0;d<this._png.channels;d++){const g=n.data[u+this._png.channels-1]/i,m=d%(this._png.channels-1)===0?1:n.data[u+d],f=Math.floor(g*m+(1-g)*r.data[c+d]);r.data[c+d]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==ny.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Og.NO_INTERLACE)this._png.data=ty({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Og.ADAM7)this._png.data=i6({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Td.NONE,blendOp:Bg.SOURCE,data:r}),this._inflator=new Xv,this._writingDataChunks=!1}}function x6(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var iy;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(iy||(iy={}));function _6(t,e){return new b6(t,e).decode()}var tr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Mg(){tr.console&&typeof tr.console.log=="function"&&tr.console.log.apply(tr.console,arguments)}var Tr={log:Mg,warn:function(t){tr.console&&(typeof tr.console.warn=="function"?tr.console.warn.apply(tr.console,arguments):Mg.call(null,arguments))},error:function(t){tr.console&&(typeof tr.console.error=="function"?tr.console.error.apply(tr.console,arguments):Mg(t))}};function Ug(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){wo(n.response,e,r)},n.onerror=function(){Tr.error("could not download file")},n.send()}function ay(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Dd(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var wo=tr.saveAs||((typeof window>"u"?"undefined":Ar(window))!=="object"||window!==tr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=tr.URL||tr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?ay(i.href)?Ug(t,e,r):Dd(i,i.target="_blank"):Dd(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Dd(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(ay(t))Ug(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Dd(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Ar(a)!=="object"&&(Tr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Ug(t,e,r);var i=t.type==="application/octet-stream",a=/constructor/i.test(tr.HTMLElement)||tr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":Ar(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=tr.URL||tr.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function d_(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var Zd=tr.atob.bind(tr),sy=tr.btoa.bind(tr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $g(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=Vn(r,n,i,a,e[0],7,-680876936),a=Vn(a,r,n,i,e[1],12,-389564586),i=Vn(i,a,r,n,e[2],17,606105819),n=Vn(n,i,a,r,e[3],22,-1044525330),r=Vn(r,n,i,a,e[4],7,-176418897),a=Vn(a,r,n,i,e[5],12,1200080426),i=Vn(i,a,r,n,e[6],17,-1473231341),n=Vn(n,i,a,r,e[7],22,-45705983),r=Vn(r,n,i,a,e[8],7,1770035416),a=Vn(a,r,n,i,e[9],12,-1958414417),i=Vn(i,a,r,n,e[10],17,-42063),n=Vn(n,i,a,r,e[11],22,-1990404162),r=Vn(r,n,i,a,e[12],7,1804603682),a=Vn(a,r,n,i,e[13],12,-40341101),i=Vn(i,a,r,n,e[14],17,-1502002290),r=Jn(r,n=Vn(n,i,a,r,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Jn(a,r,n,i,e[6],9,-1069501632),i=Jn(i,a,r,n,e[11],14,643717713),n=Jn(n,i,a,r,e[0],20,-373897302),r=Jn(r,n,i,a,e[5],5,-701558691),a=Jn(a,r,n,i,e[10],9,38016083),i=Jn(i,a,r,n,e[15],14,-660478335),n=Jn(n,i,a,r,e[4],20,-405537848),r=Jn(r,n,i,a,e[9],5,568446438),a=Jn(a,r,n,i,e[14],9,-1019803690),i=Jn(i,a,r,n,e[3],14,-187363961),n=Jn(n,i,a,r,e[8],20,1163531501),r=Jn(r,n,i,a,e[13],5,-1444681467),a=Jn(a,r,n,i,e[2],9,-51403784),i=Jn(i,a,r,n,e[7],14,1735328473),r=Kn(r,n=Jn(n,i,a,r,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Kn(a,r,n,i,e[8],11,-2022574463),i=Kn(i,a,r,n,e[11],16,1839030562),n=Kn(n,i,a,r,e[14],23,-35309556),r=Kn(r,n,i,a,e[1],4,-1530992060),a=Kn(a,r,n,i,e[4],11,1272893353),i=Kn(i,a,r,n,e[7],16,-155497632),n=Kn(n,i,a,r,e[10],23,-1094730640),r=Kn(r,n,i,a,e[13],4,681279174),a=Kn(a,r,n,i,e[0],11,-358537222),i=Kn(i,a,r,n,e[3],16,-722521979),n=Kn(n,i,a,r,e[6],23,76029189),r=Kn(r,n,i,a,e[9],4,-640364487),a=Kn(a,r,n,i,e[12],11,-421815835),i=Kn(i,a,r,n,e[15],16,530742520),r=Qn(r,n=Kn(n,i,a,r,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Qn(a,r,n,i,e[7],10,1126891415),i=Qn(i,a,r,n,e[14],15,-1416354905),n=Qn(n,i,a,r,e[5],21,-57434055),r=Qn(r,n,i,a,e[12],6,1700485571),a=Qn(a,r,n,i,e[3],10,-1894986606),i=Qn(i,a,r,n,e[10],15,-1051523),n=Qn(n,i,a,r,e[1],21,-2054922799),r=Qn(r,n,i,a,e[8],6,1873313359),a=Qn(a,r,n,i,e[15],10,-30611744),i=Qn(i,a,r,n,e[6],15,-1560198380),n=Qn(n,i,a,r,e[13],21,1309151649),r=Qn(r,n,i,a,e[4],6,-145523070),a=Qn(a,r,n,i,e[11],10,-1120210379),i=Qn(i,a,r,n,e[2],15,718787259),n=Qn(n,i,a,r,e[9],21,-343485551),t[0]=Ms(r,t[0]),t[1]=Ms(n,t[1]),t[2]=Ms(i,t[2]),t[3]=Ms(a,t[3])}function uf(t,e,r,n,i,a){return e=Ms(Ms(e,t),Ms(n,a)),Ms(e<<i|e>>>32-i,r)}function Vn(t,e,r,n,i,a,o){return uf(e&r|~e&n,t,e,i,a,o)}function Jn(t,e,r,n,i,a,o){return uf(e&n|r&~n,t,e,i,a,o)}function Kn(t,e,r,n,i,a,o){return uf(e^r^n,t,e,i,a,o)}function Qn(t,e,r,n,i,a,o){return uf(r^(e|~n),t,e,i,a,o)}function h_(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)$g(n,w6(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for($g(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,$g(n,i),n}function w6(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var oy="0123456789abcdef".split("");function S6(t){for(var e="",r=0;r<4;r++)e+=oy[t>>8*r+4&15]+oy[t>>8*r&15];return e}function j6(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function p0(t){return h_(t).map(j6).join("")}var N6=function(t){for(var e=0;e<t.length;e++)t[e]=S6(t[e]);return t.join("")}(h_("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ms(t,e){if(N6){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function m0(t,e){var r,n,i,a;if(t!==r){for(var o=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var g=e.length,m=0,f=0,x="";for(c=0;c<g;c++)f=(f+(d=l[m=(m+1)%256]))%256,l[m]=l[f],l[f]=d,o=l[(l[m]+l[f])%256],x+=String.fromCharCode(e.charCodeAt(c)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ly={print:4,modify:8,copy:16,"annot-forms":32};function ml(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(ly.perm!==void 0)throw new Error("Invalid permission: "+l);i+=ly[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=p0(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=m0(this.encryptionKey,this.padding)}function vl(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function cy(t){if(Ar(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[r]){var o=e[r][a];try{o[0].apply(t,n)}catch(l){tr.console&&Tr.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Fh(t){if(!(this instanceof Fh))return new Fh(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function f_(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function jo(t,e,r,n,i){if(!(this instanceof jo))return new jo(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,f_.call(this,n,i)}function Pl(t,e,r,n,i){if(!(this instanceof Pl))return new Pl(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,f_.call(this,n,i)}function Dt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,u="S",d=null;Ar(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=cy;var x="1.3",j=f.__private__.getPdfVersion=function(){return x};f.__private__.setPdfVersion=function(y){x=y};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return _};var v=f.__private__.getPageFormat=function(y){return _[y]};i=i||"a4";var C="compat",N="advanced",A=C;function O(){this.saveGraphicsState(),se(new Pt(yt,0,0,-yt,0,Ci()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),u="n",A=N}function G(){this.restoreGraphicsState(),u="S",A=C}var V=f.__private__.combineFontStyleAndFontWeight=function(y,R){if(y=="bold"&&R=="normal"||y=="bold"&&R==400||y=="normal"&&R=="italic"||y=="bold"&&R=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return R&&(y=R==400||R==="normal"?y==="italic"?"italic":"normal":R!=700&&R!=="bold"||y!=="normal"?(R==700?"bold":R)+""+y:"bold"),y};f.advancedAPI=function(y){var R=A===C;return R&&O.call(this),typeof y!="function"||(y(this),R&&G.call(this)),this},f.compatAPI=function(y){var R=A===N;return R&&G.call(this),typeof y!="function"||(y(this),R&&O.call(this)),this},f.isAdvancedAPI=function(){return A===N};var F,$=function(y){if(A!==N)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=f.roundToPrecision=f.__private__.roundToPrecision=function(y,R){var ue=e||R;if(isNaN(y)||isNaN(ue))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(ue).replace(/0+$/,"")};F=f.hpf=f.__private__.hpf=typeof c=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(y,c)}:c==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(y,16)};var D=f.f2=f.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return Z(y,2)},Y=f.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return Z(y,3)},ce=f.scale=f.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return A===C?y*yt:A===N?y:void 0},B=function(y){return ce(function(R){return A===C?Ci()-R:A===N?R:void 0}(y))};f.__private__.setPrecision=f.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var H,he="00000000000000000000000000000000",Le=f.__private__.getFileId=function(){return he},te=f.__private__.setFileId=function(y){return he=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(jr=new ml(d.userPermissions,d.userPassword,d.ownerPassword,he)),he};f.setFileId=function(y){return te(y),this},f.getFileId=function(){return Le()};var ye=f.__private__.convertDateToPDFDate=function(y){var R=y.getTimezoneOffset(),ue=R<0?"+":"-",we=Math.floor(Math.abs(R/60)),Re=Math.abs(R%60),st=[ue,X(we),"'",X(Re),"'"].join("");return["D:",y.getFullYear(),X(y.getMonth()+1),X(y.getDate()),X(y.getHours()),X(y.getMinutes()),X(y.getSeconds()),st].join("")},ve=f.__private__.convertPDFDateToDate=function(y){var R=parseInt(y.substr(2,4),10),ue=parseInt(y.substr(6,2),10)-1,we=parseInt(y.substr(8,2),10),Re=parseInt(y.substr(10,2),10),st=parseInt(y.substr(12,2),10),mt=parseInt(y.substr(14,2),10);return new Date(R,ue,we,Re,st,mt,0)},fe=f.__private__.setCreationDate=function(y){var R;if(y===void 0&&(y=new Date),y instanceof Date)R=ye(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");R=y}return H=R},P=f.__private__.getCreationDate=function(y){var R=H;return y==="jsDate"&&(R=ve(H)),R};f.setCreationDate=function(y){return fe(y),this},f.getCreationDate=function(y){return P(y)};var q,X=f.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},ae=f.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},be=0,Ne=[],De=[],ke=0,qe=[],Ke=[],dt=!1,He=De;f.__private__.setCustomOutputDestination=function(y){dt=!0,He=y};var Fe=function(y){dt||(He=y)};f.__private__.resetCustomOutputDestination=function(){dt=!1,He=De};var se=f.__private__.out=function(y){return y=y.toString(),ke+=y.length+1,He.push(y),He},Et=f.__private__.write=function(y){return se(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},At=f.__private__.getArrayBuffer=function(y){for(var R=y.length,ue=new ArrayBuffer(R),we=new Uint8Array(ue);R--;)we[R]=y.charCodeAt(R);return ue},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return We};var Oe=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(y){return Oe=A===N?y/yt:y,this};var ht,ot=f.__private__.getFontSize=f.getFontSize=function(){return A===C?Oe:Oe*yt},xt=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(y){return xt=y,this},f.__private__.getR2L=f.getR2L=function(){return xt};var Ft,Mt=f.__private__.setZoomMode=function(y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))ht=y;else if(isNaN(y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');ht=y}else ht=parseInt(y,10)};f.__private__.getZoomMode=function(){return ht};var tt,_t=f.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');Ft=y};f.__private__.getPageMode=function(){return Ft};var Bt=f.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');tt=y};f.__private__.getLayoutMode=function(){return tt},f.__private__.setDisplayMode=f.setDisplayMode=function(y,R,ue){return Mt(y),Bt(R),_t(ue),this};var vt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(y){if(Object.keys(vt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return vt[y]},f.__private__.getDocumentProperties=function(){return vt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(y){for(var R in vt)vt.hasOwnProperty(R)&&y[R]&&(vt[R]=y[R]);return this},f.__private__.setDocumentProperty=function(y,R){if(Object.keys(vt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return vt[y]=R};var kt,yt,It,rt,$t,$e={},me={},Be=[],at={},Je={},ze={},Gt={},qt=null,Qt=0,Ut=[],Pe=new cy(f),z=t.hotfixes||[],Te={},Qe={},Xe=[],Pt=function y(R,ue,we,Re,st,mt){if(!(this instanceof y))return new y(R,ue,we,Re,st,mt);isNaN(R)&&(R=1),isNaN(ue)&&(ue=0),isNaN(we)&&(we=0),isNaN(Re)&&(Re=1),isNaN(st)&&(st=0),isNaN(mt)&&(mt=0),this._matrix=[R,ue,we,Re,st,mt]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(y)},Pt.prototype.multiply=function(y){var R=y.sx*this.sx+y.shy*this.shx,ue=y.sx*this.shy+y.shy*this.sy,we=y.shx*this.sx+y.sy*this.shx,Re=y.shx*this.shy+y.sy*this.sy,st=y.tx*this.sx+y.ty*this.shx+this.tx,mt=y.tx*this.shy+y.ty*this.sy+this.ty;return new Pt(R,ue,we,Re,st,mt)},Pt.prototype.decompose=function(){var y=this.sx,R=this.shy,ue=this.shx,we=this.sy,Re=this.tx,st=this.ty,mt=Math.sqrt(y*y+R*R),Yt=(y/=mt)*ue+(R/=mt)*we;ue-=y*Yt,we-=R*Yt;var Kt=Math.sqrt(ue*ue+we*we);return Yt/=Kt,y*(we/=Kt)<R*(ue/=Kt)&&(y=-y,R=-R,Yt=-Yt,mt=-mt),{scale:new Pt(mt,0,0,Kt,0,0),translate:new Pt(1,0,0,1,Re,st),rotate:new Pt(y,R,-R,y,0,0),skew:new Pt(1,0,Yt,1,0,0)}},Pt.prototype.toString=function(y){return this.join(" ")},Pt.prototype.inversed=function(){var y=this.sx,R=this.shy,ue=this.shx,we=this.sy,Re=this.tx,st=this.ty,mt=1/(y*we-R*ue),Yt=we*mt,Kt=-R*mt,er=-ue*mt,or=y*mt;return new Pt(Yt,Kt,er,or,-Yt*Re-er*st,-Kt*Re-or*st)},Pt.prototype.applyToPoint=function(y){var R=y.x*this.sx+y.y*this.shx+this.tx,ue=y.x*this.shy+y.y*this.sy+this.ty;return new co(R,ue)},Pt.prototype.applyToRectangle=function(y){var R=this.applyToPoint(y),ue=this.applyToPoint(new co(y.x+y.w,y.y+y.h));return new pc(R.x,R.y,ue.x-R.x,ue.y-R.y)},Pt.prototype.clone=function(){var y=this.sx,R=this.shy,ue=this.shx,we=this.sy,Re=this.tx,st=this.ty;return new Pt(y,R,ue,we,Re,st)},f.Matrix=Pt;var Zt=f.matrixMult=function(y,R){return R.multiply(y)},re=new Pt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=re;var Ie=function(y,R){if(!Je[y]){var ue=(R instanceof jo?"Sh":"P")+(Object.keys(at).length+1).toString(10);R.id=ue,Je[y]=ue,at[ue]=R,Pe.publish("addPattern",R)}};f.ShadingPattern=jo,f.TilingPattern=Pl,f.addShadingPattern=function(y,R){return $("addShadingPattern()"),Ie(y,R),this},f.beginTilingPattern=function(y){$("beginTilingPattern()"),mc(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},f.endTilingPattern=function(y,R){$("endTilingPattern()"),R.stream=Ke[q].join(`
`),Ie(y,R),Pe.publish("endTilingPattern",R),Xe.pop().restore()};var ut,xe=f.__private__.newObject=function(){var y=Se();return Ze(y,!0),y},Se=f.__private__.newObjectDeferred=function(){return be++,Ne[be]=function(){return ke},be},Ze=function(y,R){return R=typeof R=="boolean"&&R,Ne[y]=ke,R&&se(y+" 0 obj"),y},lt=f.__private__.newAdditionalObject=function(){var y={objId:Se(),content:""};return qe.push(y),y},ar=Se(),gt=Se(),J=f.__private__.decodeColorString=function(y){var R=y.split(" ");if(R.length!==2||R[1]!=="g"&&R[1]!=="G")R.length!==5||R[4]!=="k"&&R[4]!=="K"||(R=[(1-R[0])*(1-R[3]),(1-R[1])*(1-R[3]),(1-R[2])*(1-R[3]),"r"]);else{var ue=parseFloat(R[0]);R=[ue,ue,ue,"r"]}for(var we="#",Re=0;Re<3;Re++)we+=("0"+Math.floor(255*parseFloat(R[Re])).toString(16)).slice(-2);return we},w=f.__private__.encodeColorString=function(y){var R;typeof y=="string"&&(y={ch1:y});var ue=y.ch1,we=y.ch2,Re=y.ch3,st=y.ch4,mt=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ue=="string"&&ue.charAt(0)!=="#"){var Yt=new d_(ue);if(Yt.ok)ue=Yt.toHex();else if(!/^\d*\.?\d*$/.test(ue))throw new Error('Invalid color "'+ue+'" passed to jsPDF.encodeColorString.')}if(typeof ue=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ue)&&(ue="#"+ue[1]+ue[1]+ue[2]+ue[2]+ue[3]+ue[3]),typeof ue=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ue)){var Kt=parseInt(ue.substr(1),16);ue=Kt>>16&255,we=Kt>>8&255,Re=255&Kt}if(we===void 0||st===void 0&&ue===we&&we===Re)R=typeof ue=="string"?ue+" "+mt[0]:y.precision===2?D(ue/255)+" "+mt[0]:Y(ue/255)+" "+mt[0];else if(st===void 0||Ar(st)==="object"){if(st&&!isNaN(st.a)&&st.a===0)return["1.","1.","1.",mt[1]].join(" ");R=typeof ue=="string"?[ue,we,Re,mt[1]].join(" "):y.precision===2?[D(ue/255),D(we/255),D(Re/255),mt[1]].join(" "):[Y(ue/255),Y(we/255),Y(Re/255),mt[1]].join(" ")}else R=typeof ue=="string"?[ue,we,Re,st,mt[2]].join(" "):y.precision===2?[D(ue),D(we),D(Re),D(st),mt[2]].join(" "):[Y(ue),Y(we),Y(Re),Y(st),mt[2]].join(" ");return R},L=f.__private__.getFilters=function(){return o},M=f.__private__.putStream=function(y){var R=(y=y||{}).data||"",ue=y.filters||L(),we=y.alreadyAppliedFilters||[],Re=y.addLength1||!1,st=R.length,mt=y.objectId,Yt=function(bn){return bn};if(d!==null&&mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Yt=jr.encryptor(mt,0));var Kt={};ue===!0&&(ue=["FlateEncode"]);var er=y.additionalKeyValues||[],or=(Kt=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(R,ue):{data:R,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(Kt.data.length!==0&&(er.push({key:"Length",value:Kt.data.length}),Re===!0&&er.push({key:"Length1",value:st})),or.length!=0)if(or.split("/").length-1==1)er.push({key:"Filter",value:or});else{er.push({key:"Filter",value:"["+or+"]"});for(var wr=0;wr<er.length;wr+=1)if(er[wr].key==="DecodeParms"){for(var Yr=[],pn=0;pn<Kt.reverseChain.split("/").length-1;pn+=1)Yr.push("null");Yr.push(er[wr].value),er[wr].value="["+Yr.join(" ")+"]"}}se("<<");for(var Er=0;Er<er.length;Er++)se("/"+er[Er].key+" "+er[Er].value);se(">>"),Kt.data.length!==0&&(se("stream"),se(Yt(Kt.data)),se("endstream"))},ie=f.__private__.putPage=function(y){var R=y.number,ue=y.data,we=y.objId,Re=y.contentsObjId;Ze(we,!0),se("<</Type /Page"),se("/Parent "+y.rootDictionaryObjId+" 0 R"),se("/Resources "+y.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(F(y.mediaBox.bottomLeftX))+" "+parseFloat(F(y.mediaBox.bottomLeftY))+" "+F(y.mediaBox.topRightX)+" "+F(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&se("/CropBox ["+F(y.cropBox.bottomLeftX)+" "+F(y.cropBox.bottomLeftY)+" "+F(y.cropBox.topRightX)+" "+F(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&se("/BleedBox ["+F(y.bleedBox.bottomLeftX)+" "+F(y.bleedBox.bottomLeftY)+" "+F(y.bleedBox.topRightX)+" "+F(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&se("/TrimBox ["+F(y.trimBox.bottomLeftX)+" "+F(y.trimBox.bottomLeftY)+" "+F(y.trimBox.topRightX)+" "+F(y.trimBox.topRightY)+"]"),y.artBox!==null&&se("/ArtBox ["+F(y.artBox.bottomLeftX)+" "+F(y.artBox.bottomLeftY)+" "+F(y.artBox.topRightX)+" "+F(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&se("/UserUnit "+y.userUnit),Pe.publish("putPage",{objId:we,pageContext:Ut[R],pageNumber:R,page:ue}),se("/Contents "+Re+" 0 R"),se(">>"),se("endobj");var st=ue.join(`
`);return A===N&&(st+=`
Q`),Ze(Re,!0),M({data:st,filters:L(),objectId:Re}),se("endobj"),we},_e=f.__private__.putPages=function(){var y,R,ue=[];for(y=1;y<=Qt;y++)Ut[y].objId=Se(),Ut[y].contentsObjId=Se();for(y=1;y<=Qt;y++)ue.push(ie({number:y,data:Ke[y],objId:Ut[y].objId,contentsObjId:Ut[y].contentsObjId,mediaBox:Ut[y].mediaBox,cropBox:Ut[y].cropBox,bleedBox:Ut[y].bleedBox,trimBox:Ut[y].trimBox,artBox:Ut[y].artBox,userUnit:Ut[y].userUnit,rootDictionaryObjId:ar,resourceDictionaryObjId:gt}));Ze(ar,!0),se("<</Type /Pages");var we="/Kids [";for(R=0;R<Qt;R++)we+=ue[R]+" 0 R ";se(we+"]"),se("/Count "+Qt),se(">>"),se("endobj"),Pe.publish("postPutPages")},T=function(y){Pe.publish("putFont",{font:y,out:se,newObject:xe,putStream:M}),y.isAlreadyPutted!==!0&&(y.objectNumber=xe(),se("<<"),se("/Type /Font"),se("/BaseFont /"+vl(y.postScriptName)),se("/Subtype /Type1"),typeof y.encoding=="string"&&se("/Encoding /"+y.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},Q=function(y){y.objectNumber=xe();var R=[];R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Form"}),R.push({key:"BBox",value:"["+[F(y.x),F(y.y),F(y.x+y.width),F(y.y+y.height)].join(" ")+"]"}),R.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var ue=y.pages[1].join(`
`);M({data:ue,additionalKeyValues:R,objectId:y.objectNumber}),se("endobj")},Ge=function(y,R){R||(R=21);var ue=xe(),we=function(mt,Yt){var Kt,er=[],or=1/(Yt-1);for(Kt=0;Kt<1;Kt+=or)er.push(Kt);if(er.push(1),mt[0].offset!=0){var wr={offset:0,color:mt[0].color};mt.unshift(wr)}if(mt[mt.length-1].offset!=1){var Yr={offset:1,color:mt[mt.length-1].color};mt.push(Yr)}for(var pn="",Er=0,bn=0;bn<er.length;bn++){for(Kt=er[bn];Kt>mt[Er+1].offset;)Er++;var mn=mt[Er].offset,On=(Kt-mn)/(mt[Er+1].offset-mn),qa=mt[Er].color,ps=mt[Er+1].color;pn+=ae(Math.round((1-On)*qa[0]+On*ps[0]).toString(16))+ae(Math.round((1-On)*qa[1]+On*ps[1]).toString(16))+ae(Math.round((1-On)*qa[2]+On*ps[2]).toString(16))}return pn.trim()}(y.colors,R),Re=[];Re.push({key:"FunctionType",value:"0"}),Re.push({key:"Domain",value:"[0.0 1.0]"}),Re.push({key:"Size",value:"["+R+"]"}),Re.push({key:"BitsPerSample",value:"8"}),Re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),M({data:we,additionalKeyValues:Re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ue}),se("endobj"),y.objectNumber=xe(),se("<< /ShadingType "+y.type),se("/ColorSpace /DeviceRGB");var st="/Coords ["+F(parseFloat(y.coords[0]))+" "+F(parseFloat(y.coords[1]))+" ";y.type===2?st+=F(parseFloat(y.coords[2]))+" "+F(parseFloat(y.coords[3])):st+=F(parseFloat(y.coords[2]))+" "+F(parseFloat(y.coords[3]))+" "+F(parseFloat(y.coords[4]))+" "+F(parseFloat(y.coords[5])),se(st+="]"),y.matrix&&se("/Matrix ["+y.matrix.toString()+"]"),se("/Function "+ue+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},de=function(y,R){var ue=Se(),we=xe();R.push({resourcesOid:ue,objectOid:we}),y.objectNumber=we;var Re=[];Re.push({key:"Type",value:"/Pattern"}),Re.push({key:"PatternType",value:"1"}),Re.push({key:"PaintType",value:"1"}),Re.push({key:"TilingType",value:"1"}),Re.push({key:"BBox",value:"["+y.boundingBox.map(F).join(" ")+"]"}),Re.push({key:"XStep",value:F(y.xStep)}),Re.push({key:"YStep",value:F(y.yStep)}),Re.push({key:"Resources",value:ue+" 0 R"}),y.matrix&&Re.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),M({data:y.stream,additionalKeyValues:Re,objectId:y.objectNumber}),se("endobj")},Ce=function(y){for(var R in y.objectNumber=xe(),se("<<"),y)switch(R){case"opacity":se("/ca "+D(y[R]));break;case"stroke-opacity":se("/CA "+D(y[R]))}se(">>"),se("endobj")},et=function(y){Ze(y.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var R in se("/Font <<"),$e)$e.hasOwnProperty(R)&&(g===!1||g===!0&&m.hasOwnProperty(R))&&se("/"+R+" "+$e[R].objectNumber+" 0 R");se(">>")}(),function(){if(Object.keys(at).length>0){for(var R in se("/Shading <<"),at)at.hasOwnProperty(R)&&at[R]instanceof jo&&at[R].objectNumber>=0&&se("/"+R+" "+at[R].objectNumber+" 0 R");Pe.publish("putShadingPatternDict"),se(">>")}}(),function(R){if(Object.keys(at).length>0){for(var ue in se("/Pattern <<"),at)at.hasOwnProperty(ue)&&at[ue]instanceof f.TilingPattern&&at[ue].objectNumber>=0&&at[ue].objectNumber<R&&se("/"+ue+" "+at[ue].objectNumber+" 0 R");Pe.publish("putTilingPatternDict"),se(">>")}}(y.objectOid),function(){if(Object.keys(ze).length>0){var R;for(R in se("/ExtGState <<"),ze)ze.hasOwnProperty(R)&&ze[R].objectNumber>=0&&se("/"+R+" "+ze[R].objectNumber+" 0 R");Pe.publish("putGStateDict"),se(">>")}}(),function(){for(var R in se("/XObject <<"),Te)Te.hasOwnProperty(R)&&Te[R].objectNumber>=0&&se("/"+R+" "+Te[R].objectNumber+" 0 R");Pe.publish("putXobjectDict"),se(">>")}(),se(">>"),se("endobj")},E=function(y){me[y.fontName]=me[y.fontName]||{},me[y.fontName][y.fontStyle]=y.id},pe=function(y,R,ue,we,Re){var st={id:"F"+(Object.keys($e).length+1).toString(10),postScriptName:y,fontName:R,fontStyle:ue,encoding:we,isStandardFont:Re||!1,metadata:{}};return Pe.publish("addFont",{font:st,instance:this}),$e[st.id]=st,E(st),st.id},ge=f.__private__.pdfEscape=f.pdfEscape=function(y,R){return function(ue,we){var Re,st,mt,Yt,Kt,er,or,wr,Yr;if(mt=(we=we||{}).sourceEncoding||"Unicode",Kt=we.outputEncoding,(we.autoencode||Kt)&&$e[kt].metadata&&$e[kt].metadata[mt]&&$e[kt].metadata[mt].encoding&&(Yt=$e[kt].metadata[mt].encoding,!Kt&&$e[kt].encoding&&(Kt=$e[kt].encoding),!Kt&&Yt.codePages&&(Kt=Yt.codePages[0]),typeof Kt=="string"&&(Kt=Yt[Kt]),Kt)){for(or=!1,er=[],Re=0,st=ue.length;Re<st;Re++)(wr=Kt[ue.charCodeAt(Re)])?er.push(String.fromCharCode(wr)):er.push(ue[Re]),er[Re].charCodeAt(0)>>8&&(or=!0);ue=er.join("")}for(Re=ue.length;or===void 0&&Re!==0;)ue.charCodeAt(Re-1)>>8&&(or=!0),Re--;if(!or)return ue;for(er=we.noBOM?[]:[254,255],Re=0,st=ue.length;Re<st;Re++){if((Yr=(wr=ue.charCodeAt(Re))>>8)>>8)throw new Error("Character at position "+Re+" of string '"+ue+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");er.push(Yr),er.push(wr-(Yr<<8))}return String.fromCharCode.apply(void 0,er)}(y,R).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},je=f.__private__.beginPage=function(y){Ke[++Qt]=[],Ut[Qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},Tt(Qt),Fe(Ke[q])},ft=function(y,R){var ue,we,Re;switch(r=R||r,typeof y=="string"&&(ue=v(y.toLowerCase()),Array.isArray(ue)&&(we=ue[0],Re=ue[1])),Array.isArray(y)&&(we=y[0]*yt,Re=y[1]*yt),isNaN(we)&&(we=i[0],Re=i[1]),(we>14400||Re>14400)&&(Tr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Re=Math.min(14400,Re)),i=[we,Re],r.substr(0,1)){case"l":Re>we&&(i=[Re,we]);break;case"p":we>Re&&(i=[Re,we])}je(i),xf(dc),se(Go),fc!==0&&se(fc+" J"),gc!==0&&se(gc+" j"),Pe.publish("addPage",{pageNumber:Qt})},Me=function(y){y>0&&y<=Qt&&(Ke.splice(y,1),Ut.splice(y,1),Qt--,q>Qt&&(q=Qt),this.setPage(q))},Tt=function(y){y>0&&y<=Qt&&(q=y)},wt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Ke.length-1},St=function(y,R,ue){var we,Re=void 0;return ue=ue||{},y=y!==void 0?y:$e[kt].fontName,R=R!==void 0?R:$e[kt].fontStyle,we=y.toLowerCase(),me[we]!==void 0&&me[we][R]!==void 0?Re=me[we][R]:me[y]!==void 0&&me[y][R]!==void 0?Re=me[y][R]:ue.disableWarning===!1&&Tr.warn("Unable to look up font label for font '"+y+"', '"+R+"'. Refer to getFontList() for available fonts."),Re||ue.noFallback||(Re=me.times[R])==null&&(Re=me.times.normal),Re},jt=f.__private__.putInfo=function(){var y=xe(),R=function(we){return we};for(var ue in d!==null&&(R=jr.encryptor(y,0)),se("<<"),se("/Producer ("+ge(R("jsPDF "+Dt.version))+")"),vt)vt.hasOwnProperty(ue)&&vt[ue]&&se("/"+ue.substr(0,1).toUpperCase()+ue.substr(1)+" ("+ge(R(vt[ue]))+")");se("/CreationDate ("+ge(R(H))+")"),se(">>"),se("endobj")},Ct=f.__private__.putCatalog=function(y){var R=(y=y||{}).rootDictionaryObjId||ar;switch(xe(),se("<<"),se("/Type /Catalog"),se("/Pages "+R+" 0 R"),ht||(ht="fullwidth"),ht){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ue=""+ht;ue.substr(ue.length-1)==="%"&&(ht=parseInt(ht)/100),typeof ht=="number"&&se("/OpenAction [3 0 R /XYZ null null "+D(ht)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}Ft&&se("/PageMode /"+Ft),Pe.publish("putCatalog"),se(">>"),se("endobj")},Ot=f.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(be+1)),se("/Root "+be+" 0 R"),se("/Info "+(be-1)+" 0 R"),d!==null&&se("/Encrypt "+jr.oid+" 0 R"),se("/ID [ <"+he+"> <"+he+"> ]"),se(">>")},Wr=f.__private__.putHeader=function(){se("%PDF-"+x),se("%ºß¬à")},_r=f.__private__.putXRef=function(){var y="0000000000";se("xref"),se("0 "+(be+1)),se("0000000000 65535 f ");for(var R=1;R<=be;R++)typeof Ne[R]=="function"?se((y+Ne[R]()).slice(-10)+" 00000 n "):Ne[R]!==void 0?se((y+Ne[R]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},gr=f.__private__.buildDocument=function(){var y;be=0,ke=0,De=[],Ne=[],qe=[],ar=Se(),gt=Se(),Fe(De),Pe.publish("buildDocument"),Wr(),_e(),function(){Pe.publish("putAdditionalObjects");for(var ue=0;ue<qe.length;ue++){var we=qe[ue];Ze(we.objId,!0),se(we.content),se("endobj")}Pe.publish("postPutAdditionalObjects")}(),y=[],function(){for(var ue in $e)$e.hasOwnProperty(ue)&&(g===!1||g===!0&&m.hasOwnProperty(ue))&&T($e[ue])}(),function(){var ue;for(ue in ze)ze.hasOwnProperty(ue)&&Ce(ze[ue])}(),function(){for(var ue in Te)Te.hasOwnProperty(ue)&&Q(Te[ue])}(),function(ue){var we;for(we in at)at.hasOwnProperty(we)&&(at[we]instanceof jo?Ge(at[we]):at[we]instanceof Pl&&de(at[we],ue))}(y),Pe.publish("putResources"),y.forEach(et),et({resourcesOid:gt,objectOid:Number.MAX_SAFE_INTEGER}),Pe.publish("postPutResources"),d!==null&&(jr.oid=xe(),se("<<"),se("/Filter /Standard"),se("/V "+jr.v),se("/R "+jr.r),se("/U <"+jr.toHexString(jr.U)+">"),se("/O <"+jr.toHexString(jr.O)+">"),se("/P "+jr.P),se(">>"),se("endobj")),jt(),Ct();var R=ke;return _r(),Ot(),se("startxref"),se(""+R),se("%%EOF"),Fe(Ke[q]),De.join(`
`)},Sr=f.__private__.getBlob=function(y){return new Blob([At(y)],{type:"application/pdf"})},sr=f.output=f.__private__.output=(ut=function(y,R){switch(typeof(R=R||{})=="string"?R={filename:R}:R.filename=R.filename||"generated.pdf",y){case void 0:return gr();case"save":f.save(R.filename);break;case"arraybuffer":return At(gr());case"blob":return Sr(gr());case"bloburi":case"bloburl":if(tr.URL!==void 0&&typeof tr.URL.createObjectURL=="function")return tr.URL&&tr.URL.createObjectURL(Sr(gr()))||void 0;Tr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ue="",we=gr();try{ue=sy(we)}catch{ue=sy(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+R.filename+";base64,"+ue;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tr)==="[object Window]"){var Re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",st=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';R.pdfObjectUrl&&(Re=R.pdfObjectUrl,st="");var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Re+'"'+st+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(R)+");<\/script></body></html>",Yt=tr.open();return Yt!==null&&Yt.document.write(mt),Yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tr)==="[object Window]"){var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(R.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+R.filename+'" width="500px" height="400px" /></body></html>',er=tr.open();if(er!==null){er.document.write(Kt);var or=this;er.document.documentElement.querySelector("#pdfViewer").onload=function(){er.document.title=R.filename,er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(or.output("bloburl"))}}return er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",R)+'"></iframe></body></html>',Yr=tr.open();if(Yr!==null&&(Yr.document.write(wr),Yr.document.title=R.filename),Yr||typeof safari>"u")return Yr;break;case"datauri":case"dataurl":return tr.document.location.href=this.output("datauristring",R);default:return null}},ut.foo=function(){try{return ut.apply(this,arguments)}catch(ue){var y=ue.stack||"";~y.indexOf(" at ")&&(y=y.split(" at ")[1]);var R="Error in function "+y.split(`
`)[0].split("<")[0]+": "+ue.message;if(!tr.console)throw new Error(R);tr.console.error(R,ue),tr.alert&&alert(R)}},ut.foo.bar=ut,ut.foo),yn=function(y){return Array.isArray(z)===!0&&z.indexOf(y)>-1};switch(n){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=yn("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);yt=n}var jr=null;fe(),te();var dr=f.__private__.getPageInfo=f.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ut[y].objId,pageNumber:y,pageContext:Ut[y]}},_a=f.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var R in Ut)if(Ut[R].objId===y)break;return dr(R)},ta=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ut[q].objId,pageNumber:q,pageContext:Ut[q]}};f.addPage=function(){return ft.apply(this,arguments),this},f.setPage=function(){return Tt.apply(this,arguments),Fe.call(this,Ke[q]),this},f.insertPage=function(y){return this.addPage(),this.movePage(q,y),this},f.movePage=function(y,R){var ue,we;if(y>R){ue=Ke[y],we=Ut[y];for(var Re=y;Re>R;Re--)Ke[Re]=Ke[Re-1],Ut[Re]=Ut[Re-1];Ke[R]=ue,Ut[R]=we,this.setPage(R)}else if(y<R){ue=Ke[y],we=Ut[y];for(var st=y;st<R;st++)Ke[st]=Ke[st+1],Ut[st]=Ut[st+1];Ke[R]=ue,Ut[R]=we,this.setPage(R)}return this},f.deletePage=function(){return Me.apply(this,arguments),this},f.__private__.text=f.text=function(y,R,ue,we,Re){var st,mt,Yt,Kt,er,or,wr,Yr,pn,Er=(we=we||{}).scope||this;if(typeof y=="number"&&typeof R=="number"&&(typeof ue=="string"||Array.isArray(ue))){var bn=ue;ue=R,R=y,y=bn}if(arguments[3]instanceof Pt==0?(Yt=arguments[4],Kt=arguments[5],Ar(wr=arguments[3])==="object"&&wr!==null||(typeof Yt=="string"&&(Kt=Yt,Yt=null),typeof wr=="string"&&(Kt=wr,wr=null),typeof wr=="number"&&(Yt=wr,wr=null),we={flags:wr,angle:Yt,align:Kt})):($("The transform parameter of text() with a Matrix value"),pn=Re),isNaN(R)||isNaN(ue)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Er;var mn,On="",qa=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:so,ps=Er.internal.scaleFactor;function Lf(Dr){return Dr=Dr.split("	").join(Array(we.TabLen||9).join(" ")),ge(Dr,wr)}function zu(Dr){for(var Ir,sn=Dr.concat(),on=[],Ga=sn.length;Ga--;)typeof(Ir=sn.shift())=="string"?on.push(Ir):Array.isArray(Dr)&&(Ir.length===1||Ir[1]===void 0&&Ir[2]===void 0)?on.push(Ir[0]):on.push([Ir[0],Ir[1],Ir[2]]);return on}function ho(Dr,Ir){var sn;if(typeof Dr=="string")sn=Ir(Dr)[0];else if(Array.isArray(Dr)){for(var on,Ga,nl=Dr.concat(),Aa=[],Cc=nl.length;Cc--;)typeof(on=nl.shift())=="string"?Aa.push(Ir(on)[0]):Array.isArray(on)&&typeof on[0]=="string"&&(Ga=Ir(on[0],on[1],on[2]),Aa.push([Ga[0],Ga[1],Ga[2]]));sn=Aa}return sn}var ra=!1,bc=!0;if(typeof y=="string")ra=!0;else if(Array.isArray(y)){var Ko=y.concat();mt=[];for(var ms,Fn=Ko.length;Fn--;)(typeof(ms=Ko.shift())!="string"||Array.isArray(ms)&&typeof ms[0]!="string")&&(bc=!1);ra=bc}if(ra===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var za=Oe/Er.internal.scaleFactor,Wa=za*(qa-1);switch(we.baseline){case"bottom":ue-=Wa;break;case"top":ue+=za-Wa;break;case"hanging":ue+=za-2*Wa;break;case"middle":ue+=za/2-Wa}if((or=we.maxWidth||0)>0&&(typeof y=="string"?y=Er.splitTextToSize(y,or):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(Dr,Ir){return Dr.concat(Er.splitTextToSize(Ir,or))},[]))),st={text:y,x:R,y:ue,options:we,mutex:{pdfEscape:ge,activeFontKey:kt,fonts:$e,activeFontSize:Oe}},Pe.publish("preProcessText",st),y=st.text,Yt=(we=st.options).angle,pn instanceof Pt==0&&Yt&&typeof Yt=="number"){Yt*=Math.PI/180,we.rotationDirection===0&&(Yt=-Yt),A===N&&(Yt=-Yt);var Qo=Math.cos(Yt),xc=Math.sin(Yt);pn=new Pt(Qo,xc,-xc,Qo,0,0)}else Yt&&Yt instanceof Pt&&(pn=Yt);A!==N||pn||(pn=re),(er=we.charSpace||Vo)!==void 0&&(On+=F(ce(er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yr=we.horizontalScale)!==void 0&&(On+=F(100*Yr)+` Tz
`),we.lang;var ni=-1,Wu=we.renderingMode!==void 0?we.renderingMode:we.stroke,Xo=Er.internal.getCurrentPageInfo().pageContext;switch(Wu){case 0:case!1:case"fill":ni=0;break;case 1:case!0:case"stroke":ni=1;break;case 2:case"fillThenStroke":ni=2;break;case 3:case"invisible":ni=3;break;case 4:case"fillAndAddForClipping":ni=4;break;case 5:case"strokeAndAddPathForClipping":ni=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ni=6;break;case 7:case"addToPathForClipping":ni=7}var Hu=Xo.usedRenderingMode!==void 0?Xo.usedRenderingMode:-1;ni!==-1?On+=ni+` Tr
`:Hu!==-1&&(On+=`0 Tr
`),ni!==-1&&(Xo.usedRenderingMode=ni),Kt=we.align||"left";var xn,Wi=Oe*qa,_c=Er.internal.pageSize.getWidth(),wc=$e[kt];er=we.charSpace||Vo,or=we.maxWidth||0,wr=Object.assign({autoencode:!0,noBOM:!0},we.flags);var vs=[],Zo=function(Dr){return Er.getStringUnitWidth(Dr,{font:wc,charSpace:er,fontSize:Oe,doKerning:!1})*Oe/ps};if(Object.prototype.toString.call(y)==="[object Array]"){var gi;mt=zu(y),Kt!=="left"&&(xn=mt.map(Zo));var pi,fo=0;if(Kt==="right"){R-=xn[0],y=[],Fn=mt.length;for(var ja=0;ja<Fn;ja++)ja===0?(pi=Ua(R),gi=$a(ue)):(pi=ce(fo-xn[ja]),gi=-Wi),y.push([mt[ja],pi,gi]),fo=xn[ja]}else if(Kt==="center"){R-=xn[0]/2,y=[],Fn=mt.length;for(var ys=0;ys<Fn;ys++)ys===0?(pi=Ua(R),gi=$a(ue)):(pi=ce((fo-xn[ys])/2),gi=-Wi),y.push([mt[ys],pi,gi]),fo=xn[ys]}else if(Kt==="left"){y=[],Fn=mt.length;for(var Sc=0;Sc<Fn;Sc++)y.push(mt[Sc])}else if(Kt==="justify"&&wc.encoding==="Identity-H"){y=[],Fn=mt.length,or=or!==0?or:_c;for(var bs=0,an=0;an<Fn;an++)if(gi=an===0?$a(ue):-Wi,pi=an===0?Ua(R):bs,an<Fn-1){var Af=ce((or-xn[an])/(mt[an].split(" ").length-1)),Na=mt[an].split(" ");y.push([Na[0]+" ",pi,gi]),bs=0;for(var Ca=1;Ca<Na.length;Ca++){var el=(Zo(Na[Ca-1]+" "+Na[Ca])-Zo(Na[Ca]))*ps+Af;Ca==Na.length-1?y.push([Na[Ca],el,0]):y.push([Na[Ca]+" ",el,0]),bs-=el}}else y.push([mt[an],pi,gi]);y.push(["",bs,0])}else{if(Kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],Fn=mt.length,or=or!==0?or:_c,an=0;an<Fn;an++)gi=an===0?$a(ue):-Wi,pi=an===0?Ua(R):0,an<Fn-1?vs.push(F(ce((or-xn[an])/(mt[an].split(" ").length-1)))):vs.push(0),y.push([mt[an],pi,gi])}}(typeof we.R2L=="boolean"?we.R2L:xt)===!0&&(y=ho(y,function(Dr,Ir,sn){return[Dr.split("").reverse().join(""),Ir,sn]})),st={text:y,x:R,y:ue,options:we,mutex:{pdfEscape:ge,activeFontKey:kt,fonts:$e,activeFontSize:Oe}},Pe.publish("postProcessText",st),y=st.text,mn=st.mutex.isHex||!1;var jc=$e[kt].encoding;jc!=="WinAnsiEncoding"&&jc!=="StandardEncoding"||(y=ho(y,function(Dr,Ir,sn){return[Lf(Dr),Ir,sn]})),mt=zu(y),y=[];for(var tl,rl,go,po=Array.isArray(mt[0])?1:0,Ha="",Nc=function(Dr,Ir,sn){var on="";return sn instanceof Pt?(sn=typeof we.angle=="number"?Zt(sn,new Pt(1,0,0,1,Dr,Ir)):Zt(new Pt(1,0,0,1,Dr,Ir),sn),A===N&&(sn=Zt(new Pt(1,0,0,-1,0,0),sn)),on=sn.join(" ")+` Tm
`):on=F(Dr)+" "+F(Ir)+` Td
`,on},Li=0;Li<mt.length;Li++){switch(Ha="",po){case 1:go=(mn?"<":"(")+mt[Li][0]+(mn?">":")"),tl=parseFloat(mt[Li][1]),rl=parseFloat(mt[Li][2]);break;case 0:go=(mn?"<":"(")+mt[Li]+(mn?">":")"),tl=Ua(R),rl=$a(ue)}vs!==void 0&&vs[Li]!==void 0&&(Ha=vs[Li]+` Tw
`),Li===0?y.push(Ha+Nc(tl,rl,pn)+go):po===0?y.push(Ha+go):po===1&&y.push(Ha+Nc(tl,rl,pn)+go)}y=po===0?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var La=`BT
/`;return La+=kt+" "+Oe+` Tf
`,La+=F(Oe*qa)+` TL
`,La+=oo+`
`,La+=On,La+=y,se(La+="ET"),m[kt]=!0,Er};var Wo=f.__private__.clip=f.clip=function(y){return se(y==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Wo("evenodd")},f.__private__.discardPath=f.discardPath=function(){return se("n"),this};var Ni=f.__private__.isValidStyle=function(y){var R=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(R=!0),R};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(y){return Ni(y)&&(u=y),this};var io=f.__private__.getStyle=f.getStyle=function(y){var R=u;switch(y){case"D":case"S":R="S";break;case"F":R="f";break;case"FD":case"DF":R="B";break;case"f":case"f*":case"B":case"B*":R=y}return R},Ho=f.close=function(){return se("h"),this};f.stroke=function(){return se("S"),this},f.fill=function(y){return wa("f",y),this},f.fillEvenOdd=function(y){return wa("f*",y),this},f.fillStroke=function(y){return wa("B",y),this},f.fillStrokeEvenOdd=function(y){return wa("B*",y),this};var wa=function(y,R){Ar(R)==="object"?vf(R,y):se(y)},cc=function(y){y===null||A===N&&y===void 0||(y=io(y),se(y))};function mf(y,R,ue,we,Re){var st=new Pl(R||this.boundingBox,ue||this.xStep,we||this.yStep,this.gState,Re||this.matrix);st.stream=this.stream;var mt=y+"$$"+this.cloneIndex+++"$$";return Ie(mt,st),st}var vf=function(y,R){var ue=Je[y.key],we=at[ue];if(we instanceof jo)se("q"),se(yf(R)),we.gState&&f.setGState(we.gState),se(y.matrix.toString()+" cm"),se("/"+ue+" sh"),se("Q");else if(we instanceof Pl){var Re=new Pt(1,0,0,-1,0,Ci());y.matrix&&(Re=Re.multiply(y.matrix||re),ue=mf.call(we,y.key,y.boundingBox,y.xStep,y.yStep,Re).id),se("q"),se("/Pattern cs"),se("/"+ue+" scn"),we.gState&&f.setGState(we.gState),se(R),se("Q")}},yf=function(y){switch(y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},uc=f.moveTo=function(y,R){return se(F(ce(y))+" "+F(B(R))+" m"),this},ao=f.lineTo=function(y,R){return se(F(ce(y))+" "+F(B(R))+" l"),this},gs=f.curveTo=function(y,R,ue,we,Re,st){return se([F(ce(y)),F(B(R)),F(ce(ue)),F(B(we)),F(ce(Re)),F(B(st)),"c"].join(" ")),this};f.__private__.line=f.line=function(y,R,ue,we,Re){if(isNaN(y)||isNaN(R)||isNaN(ue)||isNaN(we)||!Ni(Re))throw new Error("Invalid arguments passed to jsPDF.line");return A===C?this.lines([[ue-y,we-R]],y,R,[1,1],Re||"S"):this.lines([[ue-y,we-R]],y,R,[1,1]).stroke()},f.__private__.lines=f.lines=function(y,R,ue,we,Re,st){var mt,Yt,Kt,er,or,wr,Yr,pn,Er,bn,mn,On;if(typeof y=="number"&&(On=ue,ue=R,R=y,y=On),we=we||[1,1],st=st||!1,isNaN(R)||isNaN(ue)||!Array.isArray(y)||!Array.isArray(we)||!Ni(Re)||typeof st!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(uc(R,ue),mt=we[0],Yt=we[1],er=y.length,bn=R,mn=ue,Kt=0;Kt<er;Kt++)(or=y[Kt]).length===2?(bn=or[0]*mt+bn,mn=or[1]*Yt+mn,ao(bn,mn)):(wr=or[0]*mt+bn,Yr=or[1]*Yt+mn,pn=or[2]*mt+bn,Er=or[3]*Yt+mn,bn=or[4]*mt+bn,mn=or[5]*Yt+mn,gs(wr,Yr,pn,Er,bn,mn));return st&&Ho(),cc(Re),this},f.path=function(y){for(var R=0;R<y.length;R++){var ue=y[R],we=ue.c;switch(ue.op){case"m":uc(we[0],we[1]);break;case"l":ao(we[0],we[1]);break;case"c":gs.apply(this,we);break;case"h":Ho()}}return this},f.__private__.rect=f.rect=function(y,R,ue,we,Re){if(isNaN(y)||isNaN(R)||isNaN(ue)||isNaN(we)||!Ni(Re))throw new Error("Invalid arguments passed to jsPDF.rect");return A===C&&(we=-we),se([F(ce(y)),F(B(R)),F(ce(ue)),F(ce(we)),"re"].join(" ")),cc(Re),this},f.__private__.triangle=f.triangle=function(y,R,ue,we,Re,st,mt){if(isNaN(y)||isNaN(R)||isNaN(ue)||isNaN(we)||isNaN(Re)||isNaN(st)||!Ni(mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ue-y,we-R],[Re-ue,st-we],[y-Re,R-st]],y,R,[1,1],mt,!0),this},f.__private__.roundedRect=f.roundedRect=function(y,R,ue,we,Re,st,mt){if(isNaN(y)||isNaN(R)||isNaN(ue)||isNaN(we)||isNaN(Re)||isNaN(st)||!Ni(mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Yt=4/3*(Math.SQRT2-1);return Re=Math.min(Re,.5*ue),st=Math.min(st,.5*we),this.lines([[ue-2*Re,0],[Re*Yt,0,Re,st-st*Yt,Re,st],[0,we-2*st],[0,st*Yt,-Re*Yt,st,-Re,st],[2*Re-ue,0],[-Re*Yt,0,-Re,-st*Yt,-Re,-st],[0,2*st-we],[0,-st*Yt,Re*Yt,-st,Re,-st]],y+Re,R,[1,1],mt,!0),this},f.__private__.ellipse=f.ellipse=function(y,R,ue,we,Re){if(isNaN(y)||isNaN(R)||isNaN(ue)||isNaN(we)||!Ni(Re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var st=4/3*(Math.SQRT2-1)*ue,mt=4/3*(Math.SQRT2-1)*we;return uc(y+ue,R),gs(y+ue,R-mt,y+st,R-we,y,R-we),gs(y-st,R-we,y-ue,R-mt,y-ue,R),gs(y-ue,R+mt,y-st,R+we,y,R+we),gs(y+st,R+we,y+ue,R+mt,y+ue,R),cc(Re),this},f.__private__.circle=f.circle=function(y,R,ue,we){if(isNaN(y)||isNaN(R)||isNaN(ue)||!Ni(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,R,ue,ue,we)},f.setFont=function(y,R,ue){return ue&&(R=V(R,ue)),kt=St(y,R,{disableWarning:!1}),this};var bf=f.__private__.getFont=f.getFont=function(){return $e[St.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var y,R,ue={};for(y in me)if(me.hasOwnProperty(y))for(R in ue[y]=[],me[y])me[y].hasOwnProperty(R)&&ue[y].push(R);return ue},f.addFont=function(y,R,ue,we,Re){var st=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&st.indexOf(arguments[3])!==-1?Re=arguments[3]:arguments[3]&&st.indexOf(arguments[3])==-1&&(ue=V(ue,we)),pe.call(this,y,R,ue,Re=Re||"Identity-H")};var so,dc=t.lineWidth||.200025,rr=f.__private__.getLineWidth=f.getLineWidth=function(){return dc},xf=f.__private__.setLineWidth=f.setLineWidth=function(y){return dc=y,se(F(ce(y))+" w"),this};f.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(y,R){if(y=y||[],R=R||0,isNaN(R)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(ue){return F(ce(ue))}).join(" "),R=F(ce(R)),se("["+y+"] "+R+" d"),this};var _f=f.__private__.getLineHeight=f.getLineHeight=function(){return Oe*so};f.__private__.getLineHeight=f.getLineHeight=function(){return Oe*so};var wf=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(so=y),this},Sf=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return so};wf(t.lineHeight);var Ua=f.__private__.getHorizontalCoordinate=function(y){return ce(y)},$a=f.__private__.getVerticalCoordinate=function(y){return A===N?y:Ut[q].mediaBox.topRightY-Ut[q].mediaBox.bottomLeftY-ce(y)},jf=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(y){return F(Ua(y))},Nf=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(y){return F($a(y))},Go=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return J(Go)},f.__private__.setStrokeColor=f.setDrawColor=function(y,R,ue,we){return Go=w({ch1:y,ch2:R,ch3:ue,ch4:we,pdfColorType:"draw",precision:2}),se(Go),this};var hc=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return J(hc)},f.__private__.setFillColor=f.setFillColor=function(y,R,ue,we){return hc=w({ch1:y,ch2:R,ch3:ue,ch4:we,pdfColorType:"fill",precision:2}),se(hc),this};var oo=t.textColor||"0 g",Yo=f.__private__.getTextColor=f.getTextColor=function(){return J(oo)};f.__private__.setTextColor=f.setTextColor=function(y,R,ue,we){return oo=w({ch1:y,ch2:R,ch3:ue,ch4:we,pdfColorType:"text",precision:3}),this};var Vo=t.charSpace,Cf=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Vo||0)};f.__private__.setCharSpace=f.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vo=y,this};var fc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(y){var R=f.CapJoinStyles[y];if(R===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fc=R,se(R+" J"),this};var gc=0;f.__private__.setLineJoin=f.setLineJoin=function(y){var R=f.CapJoinStyles[y];if(R===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gc=R,se(R+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(F(ce(y))+" M"),this},f.GState=Fh,f.setGState=function(y){(y=typeof y=="string"?ze[Gt[y]]:lo(null,y)).equals(qt)||(se("/"+y.id+" gs"),qt=y)};var lo=function(y,R){if(!y||!Gt[y]){var ue=!1;for(var we in ze)if(ze.hasOwnProperty(we)&&ze[we].equals(R)){ue=!0;break}if(ue)R=ze[we];else{var Re="GS"+(Object.keys(ze).length+1).toString(10);ze[Re]=R,R.id=Re}return y&&(Gt[y]=R.id),Pe.publish("addGState",R),R}};f.addGState=function(y,R){return lo(y,R),this},f.saveGraphicsState=function(){return se("q"),Be.push({key:kt,size:Oe,color:oo}),this},f.restoreGraphicsState=function(){se("Q");var y=Be.pop();return kt=y.key,Oe=y.size,oo=y.color,qt=null,this},f.setCurrentTransformationMatrix=function(y){return se(y.toString()+" cm"),this},f.comment=function(y){return se("#"+y),this};var co=function(y,R){var ue=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ue},set:function(st){isNaN(st)||(ue=parseFloat(st))}});var we=R||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(st){isNaN(st)||(we=parseFloat(st))}});var Re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Re},set:function(st){Re=st.toString()}}),this},pc=function(y,R,ue,we){co.call(this,y,R),this.type="rect";var Re=ue||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Re},set:function(mt){isNaN(mt)||(Re=parseFloat(mt))}});var st=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return st},set:function(mt){isNaN(mt)||(st=parseFloat(mt))}}),this},Jo=function(){this.page=Qt,this.currentPage=q,this.pages=Ke.slice(0),this.pagesContext=Ut.slice(0),this.x=It,this.y=rt,this.matrix=$t,this.width=vc(q),this.height=Ci(q),this.outputDestination=He,this.id="",this.objectNumber=-1};Jo.prototype.restore=function(){Qt=this.page,q=this.currentPage,Ut=this.pagesContext,Ke=this.pages,It=this.x,rt=this.y,$t=this.matrix,yc(q,this.width),Sa(q,this.height),He=this.outputDestination};var mc=function(y,R,ue,we,Re){Xe.push(new Jo),Qt=q=0,Ke=[],It=y,rt=R,$t=Re,je([ue,we])};for(var uo in f.beginFormObject=function(y,R,ue,we,Re){return mc(y,R,ue,we,Re),this},f.endFormObject=function(y){return function(R){if(Qe[R])Xe.pop().restore();else{var ue=new Jo,we="Xo"+(Object.keys(Te).length+1).toString(10);ue.id=we,Qe[R]=we,Te[we]=ue,Pe.publish("addFormObject",ue),Xe.pop().restore()}}(y),this},f.doFormObject=function(y,R){var ue=Te[Qe[y]];return se("q"),se(R.toString()+" cm"),se("/"+ue.id+" Do"),se("Q"),this},f.getFormObject=function(y){var R=Te[Qe[y]];return{x:R.x,y:R.y,width:R.width,height:R.height,matrix:R.matrix}},f.save=function(y,R){return y=y||"generated.pdf",(R=R||{}).returnPromise=R.returnPromise||!1,R.returnPromise===!1?(wo(Sr(gr()),y),typeof wo.unload=="function"&&tr.setTimeout&&setTimeout(wo.unload,911),this):new Promise(function(ue,we){try{var Re=wo(Sr(gr()),y);typeof wo.unload=="function"&&tr.setTimeout&&setTimeout(wo.unload,911),ue(Re)}catch(st){we(st.message)}})},Dt.API)Dt.API.hasOwnProperty(uo)&&(uo==="events"&&Dt.API.events.length?function(y,R){var ue,we,Re;for(Re=R.length-1;Re!==-1;Re--)ue=R[Re][0],we=R[Re][1],y.subscribe.apply(y,[ue].concat(typeof we=="function"?[we]:we))}(Pe,Dt.API.events):f[uo]=Dt.API[uo]);var vc=f.getPageWidth=function(y){return(Ut[y=y||q].mediaBox.topRightX-Ut[y].mediaBox.bottomLeftX)/yt},yc=f.setPageWidth=function(y,R){Ut[y].mediaBox.topRightX=R*yt+Ut[y].mediaBox.bottomLeftX},Ci=f.getPageHeight=function(y){return(Ut[y=y||q].mediaBox.topRightY-Ut[y].mediaBox.bottomLeftY)/yt},Sa=f.setPageHeight=function(y,R){Ut[y].mediaBox.topRightY=R*yt+Ut[y].mediaBox.bottomLeftY};return f.internal={pdfEscape:ge,getStyle:io,getFont:bf,getFontSize:ot,getCharSpace:Cf,getTextColor:Yo,getLineHeight:_f,getLineHeightFactor:Sf,getLineWidth:rr,write:Et,getHorizontalCoordinate:Ua,getVerticalCoordinate:$a,getCoordinateString:jf,getVerticalCoordinateString:Nf,collections:{},newObject:xe,newAdditionalObject:lt,newObjectDeferred:Se,newObjectDeferredBegin:Ze,getFilters:L,putStream:M,events:Pe,scaleFactor:yt,pageSize:{getWidth:function(){return vc(q)},setWidth:function(y){yc(q,y)},getHeight:function(){return Ci(q)},setHeight:function(y){Sa(q,y)}},encryptionOptions:d,encryption:jr,getEncryptor:function(y){return d!==null?jr.encryptor(y,0):function(R){return R}},output:sr,getNumberOfPages:wt,pages:Ke,out:se,f2:D,f3:Y,getPageInfo:dr,getPageInfoByObjId:_a,getCurrentPageInfo:ta,getPDFVersion:j,Point:co,Rectangle:pc,Matrix:Pt,hasHotfix:yn},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return vc(q)},set:function(y){yc(q,y)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ci(q)},set:function(y){Sa(q,y)},enumerable:!0,configurable:!0}),(function(y){for(var R=0,ue=We.length;R<ue;R++){var we=pe.call(this,y[R][0],y[R][1],y[R][2],We[R][3],!0);g===!1&&(m[we]=!0);var Re=y[R][0].split("-");E({id:we,fontName:Re[0],fontStyle:Re[1]||""})}Pe.publish("addFonts",{fonts:$e,dictionary:me})}).call(f,We),kt="F1",ft(i,r),Pe.publish("initialized"),f}ml.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},ml.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ml.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},ml.prototype.processOwnerPassword=function(t,e){return m0(p0(e).substr(0,5),t)},ml.prototype.encryptor=function(t,e){var r=p0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return m0(r,n)}},Fh.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Ar(t)!==Ar(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Dt.API={events:[]},Dt.version="3.0.2";var tn=Dt.API,Em=1,zo=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hl=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nr=function(t){return t.toFixed(2)},ks=function(t){return t.toFixed(5)};tn.__acroform__={};var ji=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},uy=function(t){return t*Em},Ea=function(t){var e=new p_,r=Ht.internal.getHeight(t)||0,n=Ht.internal.getWidth(t)||0;return e.BBox=[0,0,Number(nr(n)),Number(nr(r))],e},C6=tn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},L6=tn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},A6=tn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},dn=tn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A6(t,e-1)},hn=tn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return C6(t,e-1)},fn=tn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return L6(t,e-1)},k6=tn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(a+l)||0,c.upperRight_X=r(i+o)||0,c.upperRight_Y=n(a)||0,[Number(nr(c.lowerLeft_X)),Number(nr(c.lowerLeft_Y)),Number(nr(c.upperRight_X)),Number(nr(c.upperRight_Y))]},P6=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=v0(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+nr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Ea(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},v0=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var a=r,o=Ht.internal.getHeight(t)||0;o=o<0?-o:o;var l=Ht.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(D,Y,ce){if(D+1<i.length){var B=Y+" "+i[D+1][0];return Id(B,t,ce).width<=l-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,g=Id("3",t,a).height,m=t.multiline?o-a:(o-g)/2,f=m+=2,x=0,j=0,_=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Id(e,t,a=12).width+", FieldWidth:"+l+`
`;break}for(var v="",C=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var A=!1;if(i[N].length!==1&&_!==i[N].length-1){if((g+2)*(C+2)+2>o)continue e;v+=i[N][_],A=!0,j=N,N--}else{v=(v+=i[N][_]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var O=parseInt(N),G=c(O,v,a),V=N>=i.length-1;if(G&&!V){v+=" ",_=0;continue}if(G||V){if(V)j=O;else if(t.multiline&&(g+2)*(C+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(C+2)+2>o)continue e;j=O}}for(var F="",$=x;$<=j;$++){var Z=i[$];if(t.multiline){if($===j){F+=Z[_]+" ",_=(_+1)%Z.length;continue}if($===x){F+=Z[Z.length-1]+" ";continue}}F+=Z[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,d=Id(F,t,a).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=nr(u)+" "+nr(f)+` Td
`,e+="("+zo(F)+`) Tj
`,e+=-nr(u)+` 0 Td
`,f=-(a+2),d=0,x=A?j:j+1,C++,v=""}break}return n.text=e,n.fontSize=a,n},Id=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},E6={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},F6=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},T6=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ba.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(E6)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Em=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new m_,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&F6(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=k6(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ht.createDefaultAppearanceStream(l),Ar(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=P6(l);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var g="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var f=l.appearanceStreamContent[m];if(g+="/"+m+" ",g+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var x=f[o];typeof x=="function"&&(x=x.call(i,l)),g+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=f)=="function"&&(x=x.call(i,l)),g+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}a&&function(j,_){for(var v in j)if(j.hasOwnProperty(v)){var C=v,N=j[v];_.internal.newObjectDeferredBegin(N.objId,!0),Ar(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete j[C]}}(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},g_=tn.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),Ar(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+zo(n(t[a].toString()))+")"):i+=t[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qg=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+zo(n(t))+")"},Ia=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ia.prototype.toString=function(){return this.objId+" 0 R"},Ia.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ia.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:g_(i,this.objId,this.scope)}):i instanceof Ia?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var p_=function(){Ia.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ji(p_,Ia);var m_=function(){Ia.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+zo(r(t))+")"}},set:function(r){t=r}})};ji(m_,Ia);var ba=function t(){Ia.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dn(e,3)},set:function(v){v?this.F=hn(e,3):this.F=fn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Th)return;a="FieldObject"+t.FieldNum++}var v=function(C){return C};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+zo(v(a))+")"},set:function(v){a=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(v){a=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Em:u},set:function(v){u=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Th||this instanceof Eo))return qg(g,this.objId,this.scope)},set:function(v){v=v.toString(),g=v}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Dn==0?qg(m,this.objId,this.scope):m},set:function(v){v=v.toString(),m=this instanceof Dn==0?v.substr(0,1)==="("?hl(v.substr(1,v.length-2)):hl(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn==1?hl(m.substr(1,m.length-1)):m},set:function(v){v=v.toString(),m=this instanceof Dn==1?"/"+v:v}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Dn==0?qg(f,this.objId,this.scope):f},set:function(v){v=v.toString(),f=this instanceof Dn==0?v.substr(0,1)==="("?hl(v.substr(1,v.length-2)):hl(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn==1?hl(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof Dn==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(v){v=!!v,j=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(v){x=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,1)},set:function(v){v?this.Ff=hn(this.Ff,1):this.Ff=fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,2)},set:function(v){v?this.Ff=hn(this.Ff,2):this.Ff=fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,3)},set:function(v){v?this.Ff=hn(this.Ff,3):this.Ff=fn(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');_=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(_){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};ji(ba,Ia);var Ol=function(){ba.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return g_(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,o,l){l||(l=1);for(var c,u=[];c=o.exec(a);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,18)},set:function(r){r?this.Ff=hn(this.Ff,18):this.Ff=fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=hn(this.Ff,19):this.Ff=fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,20)},set:function(r){r?(this.Ff=hn(this.Ff,20),e.sort()):this.Ff=fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,22)},set:function(r){r?this.Ff=hn(this.Ff,22):this.Ff=fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(r){r?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,27)},set:function(r){r?this.Ff=hn(this.Ff,27):this.Ff=fn(this.Ff,27)}}),this.hasAppearanceStream=!1};ji(Ol,ba);var Bl=function(){Ol.call(this),this.fontName="helvetica",this.combo=!1};ji(Bl,Ol);var Ml=function(){Bl.call(this),this.combo=!0};ji(Ml,Bl);var eh=function(){Ml.call(this),this.edit=!0};ji(eh,Ml);var Dn=function(){ba.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,15)},set:function(r){r?this.Ff=hn(this.Ff,15):this.Ff=fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,16)},set:function(r){r?this.Ff=hn(this.Ff,16):this.Ff=fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,17)},set:function(r){r?this.Ff=hn(this.Ff,17):this.Ff=fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(r){r?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+zo(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Ar(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ji(Dn,ba);var th=function(){Dn.call(this),this.pushButton=!0};ji(th,Dn);var Ul=function(){Dn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ji(Ul,Dn);var Th=function(){var t,e;ba.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+zo(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ar(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ht.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ji(Th,ba),Ul.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Ul.prototype.createOption=function(t){var e=new Th;return e.Parent=this,e.optionName=t,this.Kids.push(e),D6.call(this.scope,e),e};var rh=function(){Dn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ht.CheckBox.createAppearanceStream()};ji(rh,Dn);var Eo=function(){ba.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,13)},set:function(e){e?this.Ff=hn(this.Ff,13):this.Ff=fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,21)},set:function(e){e?this.Ff=hn(this.Ff,21):this.Ff=fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(e){e?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,24)},set:function(e){e?this.Ff=hn(this.Ff,24):this.Ff=fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,25)},set:function(e){e?this.Ff=hn(this.Ff,25):this.Ff=fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(e){e?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ji(Eo,ba);var nh=function(){Eo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,14)},set:function(t){t?this.Ff=hn(this.Ff,14):this.Ff=fn(this.Ff,14)}}),this.password=!0};ji(nh,Eo);var Ht={CheckBox:{createAppearanceStream:function(){return{N:{On:Ht.CheckBox.YesNormal},D:{On:Ht.CheckBox.YesPushDown,Off:Ht.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ea(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=v0(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+nr(Ht.internal.getWidth(t))+" "+nr(Ht.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+nr(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Ea(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],a=Ht.internal.getHeight(t),o=Ht.internal.getWidth(t),l=v0(t,t.caption);return i.push("1 g"),i.push("0 0 "+nr(o)+" "+nr(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nr(o-1)+" "+nr(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+nr(l.fontSize)+" Tf "+n),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ea(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nr(Ht.internal.getWidth(t))+" "+nr(Ht.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ht.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ht.RadioButton.Circle.YesNormal,e.D[t]=Ht.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ea(t);e.scope=t.scope;var r=[],n=Ht.internal.getWidth(t)<=Ht.internal.getHeight(t)?Ht.internal.getWidth(t)/4:Ht.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Ht.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ks(Ht.internal.getWidth(t)/2)+" "+ks(Ht.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ea(t);e.scope=t.scope;var r=[],n=Ht.internal.getWidth(t)<=Ht.internal.getHeight(t)?Ht.internal.getWidth(t)/4:Ht.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Ht.internal.Bezier_C).toFixed(5)),o=Number((n*Ht.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ks(Ht.internal.getWidth(t)/2)+" "+ks(Ht.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ks(Ht.internal.getWidth(t)/2)+" "+ks(Ht.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ea(t);e.scope=t.scope;var r=[],n=Ht.internal.getWidth(t)<=Ht.internal.getHeight(t)?Ht.internal.getWidth(t)/4:Ht.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Ht.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ks(Ht.internal.getWidth(t)/2)+" "+ks(Ht.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ht.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ht.RadioButton.Cross.YesNormal,e.D[t]=Ht.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ea(t);e.scope=t.scope;var r=[],n=Ht.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+nr(Ht.internal.getWidth(t)-2)+" "+nr(Ht.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(nr(n.x1.x)+" "+nr(n.x1.y)+" m"),r.push(nr(n.x2.x)+" "+nr(n.x2.y)+" l"),r.push(nr(n.x4.x)+" "+nr(n.x4.y)+" m"),r.push(nr(n.x3.x)+" "+nr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ea(t);e.scope=t.scope;var r=Ht.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+nr(Ht.internal.getWidth(t))+" "+nr(Ht.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nr(Ht.internal.getWidth(t)-2)+" "+nr(Ht.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(nr(r.x1.x)+" "+nr(r.x1.y)+" m"),n.push(nr(r.x2.x)+" "+nr(r.x2.y)+" l"),n.push(nr(r.x4.x)+" "+nr(r.x4.y)+" m"),n.push(nr(r.x3.x)+" "+nr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ea(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nr(Ht.internal.getWidth(t))+" "+nr(Ht.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Ht.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ht.internal.getWidth(t),r=Ht.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Ht.internal.getWidth=function(t){var e=0;return Ar(t)==="object"&&(e=uy(t.Rect[2])),e},Ht.internal.getHeight=function(t){var e=0;return Ar(t)==="object"&&(e=uy(t.Rect[3])),e};var D6=tn.addField=function(t){if(T6(this,t),!(t instanceof ba))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};tn.AcroFormChoiceField=Ol,tn.AcroFormListBox=Bl,tn.AcroFormComboBox=Ml,tn.AcroFormEditBox=eh,tn.AcroFormButton=Dn,tn.AcroFormPushButton=th,tn.AcroFormRadioButton=Ul,tn.AcroFormCheckBox=rh,tn.AcroFormTextField=Eo,tn.AcroFormPasswordField=nh,tn.AcroFormAppearance=Ht,tn.AcroForm={ChoiceField:Ol,ListBox:Bl,ComboBox:Ml,EditBox:eh,Button:Dn,PushButton:th,RadioButton:Ul,CheckBox:rh,TextField:Eo,PasswordField:nh,Appearance:Ht},Dt.AcroForm={ChoiceField:Ol,ListBox:Bl,ComboBox:Ml,EditBox:eh,Button:Dn,PushButton:th,RadioButton:Ul,CheckBox:rh,TextField:Eo,PasswordField:nh,Appearance:Ht};Dt.AcroForm;function v_(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(D,Y){var ce,B,H,he,Le,te=r;if((Y=Y||r)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(G(D))for(Le in n)for(H=n[Le],ce=0;ce<H.length;ce+=1){for(he=!0,B=0;B<H[ce].length;B+=1)if(H[ce][B]!==void 0&&H[ce][B]!==D[B]){he=!1;break}if(he===!0){te=Le;break}}else for(Le in n)for(H=n[Le],ce=0;ce<H.length;ce+=1){for(he=!0,B=0;B<H[ce].length;B+=1)if(H[ce][B]!==void 0&&H[ce][B]!==D.charCodeAt(B)){he=!1;break}if(he===!0){te=Le;break}}return te===r&&Y!==r&&(te=Y),te},a=function D(Y){for(var ce=this.internal.write,B=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);Y.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:Y.width}),he.push({key:"Height",value:Y.height}),Y.colorSpace===v.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Y.palette.length/3-1)+" "+("sMask"in Y&&Y.sMask!==void 0?Y.objectId+2:Y.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+Y.colorSpace}),Y.colorSpace===v.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:Y.bitsPerComponent}),"decodeParameters"in Y&&Y.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+Y.decodeParameters+">>"}),"transparency"in Y&&Array.isArray(Y.transparency)){for(var Le="",te=0,ye=Y.transparency.length;te<ye;te++)Le+=Y.transparency[te]+" "+Y.transparency[te]+" ";he.push({key:"Mask",value:"["+Le+"]"})}Y.sMask!==void 0&&he.push({key:"SMask",value:Y.objectId+1+" 0 R"});var ve=Y.filter!==void 0?["/"+Y.filter]:void 0;if(B({data:Y.data,additionalKeyValues:he,alreadyAppliedFilters:ve,objectId:Y.objectId}),ce("endobj"),"sMask"in Y&&Y.sMask!==void 0){var fe=(Y.predictor!=null?"/Predictor "+Y.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+Y.width,P={width:Y.width,height:Y.height,colorSpace:"DeviceGray",bitsPerComponent:Y.bitsPerComponent,decodeParameters:fe,data:Y.sMask};"filter"in Y&&(P.filter=Y.filter),D.call(this,P)}if(Y.colorSpace===v.INDEXED){var q=this.internal.newObject();B({data:F(new Uint8Array(Y.palette)),objectId:q}),ce("endobj")}},o=function(){var D=this.internal.collections[e+"images"];for(var Y in D)a.call(this,D[Y])},l=function(){var D,Y=this.internal.collections[e+"images"],ce=this.internal.write;for(var B in Y)ce("/I"+(D=Y[B]).index,D.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var D=this.internal.collections[e+"images"];return c.call(this),D},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(D){return typeof t["process"+D.toUpperCase()]=="function"},m=function(D){return Ar(D)==="object"&&D.nodeType===1},f=function(D,Y){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var ce=""+D.getAttribute("src");if(ce.indexOf("data:image/")===0)return Zd(unescape(ce).split("base64,").pop());var B=t.loadFile(ce,!0);if(B!==void 0)return B}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var H;switch(Y){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return Zd(D.toDataURL(H,1).split("base64,").pop())}},x=function(D){var Y=this.internal.collections[e+"images"];if(Y){for(var ce in Y)if(D===Y[ce].alias)return Y[ce]}},j=function(D,Y,ce){return D||Y||(D=-96,Y=-96),D<0&&(D=-1*ce.width*72/D/this.internal.scaleFactor),Y<0&&(Y=-1*ce.height*72/Y/this.internal.scaleFactor),D===0&&(D=Y*ce.width/ce.height),Y===0&&(Y=D*ce.height/ce.width),[D,Y]},_=function(D,Y,ce,B,H,he){var Le=j.call(this,ce,B,H),te=this.internal.getCoordinateString,ye=this.internal.getVerticalCoordinateString,ve=u.call(this);if(ce=Le[0],B=Le[1],ve[H.index]=H,he){he*=Math.PI/180;var fe=Math.cos(he),P=Math.sin(he),q=function(ae){return ae.toFixed(4)},X=[q(fe),q(P),q(-1*P),q(fe),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,te(D),ye(Y+B),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([te(ce),"0","0",te(B),"0","0","cm"].join(" "))):this.internal.write([te(ce),"0","0",te(B),te(D),ye(Y+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(D){var Y,ce,B=0;if(typeof D=="string")for(ce=D.length,Y=0;Y<ce;Y++)B=(B<<5)-B+D.charCodeAt(Y),B|=0;else if(G(D))for(ce=D.byteLength/2,Y=0;Y<ce;Y++)B=(B<<5)-B+D[Y],B|=0;return B},A=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var Y=!0;return D.length===0&&(Y=!1),D.length%4!=0&&(Y=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(Y=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(Y=!1),Y},O=t.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var Y=D.indexOf(",");return Y<0?null:D.substring(0,Y).trim().endsWith("base64")?D.substring(Y+1):null};t.__addimage__.isArrayBuffer=function(D){return D instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(D){return D instanceof Int8Array||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array},V=t.__addimage__.binaryStringToUint8Array=function(D){for(var Y=D.length,ce=new Uint8Array(Y),B=0;B<Y;B++)ce[B]=D.charCodeAt(B);return ce},F=t.__addimage__.arrayBufferToBinaryString=function(D){for(var Y="",ce=G(D)?D:new Uint8Array(D),B=0;B<ce.length;B+=8192)Y+=String.fromCharCode.apply(null,ce.subarray(B,B+8192));return Y};t.addImage=function(){var D,Y,ce,B,H,he,Le,te,ye;if(typeof arguments[1]=="number"?(Y=r,ce=arguments[1],B=arguments[2],H=arguments[3],he=arguments[4],Le=arguments[5],te=arguments[6],ye=arguments[7]):(Y=arguments[1],ce=arguments[2],B=arguments[3],H=arguments[4],he=arguments[5],Le=arguments[6],te=arguments[7],ye=arguments[8]),Ar(D=arguments[0])==="object"&&!m(D)&&"imageData"in D){var ve=D;D=ve.imageData,Y=ve.format||Y||r,ce=ve.x||ce||0,B=ve.y||B||0,H=ve.w||ve.width||H,he=ve.h||ve.height||he,Le=ve.alias||Le,te=ve.compression||te,ye=ve.rotation||ve.angle||ye}var fe=this.internal.getFilters();if(te===void 0&&fe.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(ce)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var P=$.call(this,D,Y,Le,te);return _.call(this,ce,B,H,he,P,ye),this};var $=function(D,Y,ce,B){var H,he,Le;if(typeof D=="string"&&i(D)===r){D=unescape(D);var te=Z(D,!1);(te!==""||(te=t.loadFile(D,!0))!==void 0)&&(D=te)}if(m(D)&&(D=f(D,Y)),Y=i(D,Y),!g(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(((Le=ce)==null||Le.length===0)&&(ce=function(ye){return typeof ye=="string"||G(ye)?N(ye):G(ye.data)?N(ye.data):null}(D)),(H=x.call(this,ce))||(D instanceof Uint8Array||Y==="RGBA"||(he=D,D=V(D)),H=this["process"+Y.toUpperCase()](D,d.call(this),ce,function(ye){return ye&&typeof ye=="string"&&(ye=ye.toUpperCase()),ye in t.image_compression?ye:C.NONE}(B),he)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},Z=t.__addimage__.convertBase64ToBinaryString=function(D,Y){Y=typeof Y!="boolean"||Y;var ce,B="";if(typeof D=="string"){var H;ce=(H=O(D))!==null&&H!==void 0?H:D;try{B=Zd(ce)}catch(he){if(Y)throw A(ce)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};t.getImageProperties=function(D){var Y,ce,B="";if(m(D)&&(D=f(D)),typeof D=="string"&&i(D)===r&&((B=Z(D,!1))===""&&(B=t.loadFile(D)||""),D=B),ce=i(D),!g(ce))throw new Error("addImage does not support files of type '"+ce+"', please ensure that a plugin for '"+ce+"' support is added.");if(D instanceof Uint8Array||(D=V(D)),!(Y=this["process"+ce.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return Y.fileType=ce,Y}})(Dt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Dt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,g=0;g<u.length&&!d;g++)switch((n=u[g]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var f=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(j.objId),C=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(v(n.contents))+")",a+=" /Popup "+_.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+f(v(C))+") >>",j.content=a;var N=j.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(a+=" /Open true"),a+=" >>",_.content=a,this.internal.write(j.objId,"0 R",_.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var A=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(x(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var O=this.annotations._nameMap[n.options.name];n.options.pageNumber=O.page,n.options.top=O.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var G=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+G+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+i),h:u(n+a)},options:o,type:"link"})},t.textWithLink=function(r,n,i,a){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,i,a),i+=.2*u,a.align==="center"&&(n-=c/2),a.align==="right"&&(n-=c),this.link(n,i-u,l,o,a),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Dt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},l=t.__arabicParser__.isArabicEndLetter=function(j){return o(j)&&a(j)&&e[j.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(j){return o(j)&&i.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return o(j)&&a(j)&&e[j.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return o(j)&&a(j)&&e[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return o(j)&&a(j)&&e[j.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return o(j)&&a(j)&&e[j.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(j){var _=0,v=r,C="",N=0;for(_=0;_<j.length;_+=1)v[j.charCodeAt(_)]!==void 0?(N++,typeof(v=v[j.charCodeAt(_)])=="number"&&(C+=String.fromCharCode(v),v=r,N=0),_===j.length-1&&(v=r,C+=j.charAt(_-(N-1)),_-=N-1,N=0)):(v=r,C+=j.charAt(_-N),_-=N,N=0);return C};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(j,_,v){return o(j)?a(j)===!1?-1:!u(j)||!o(_)&&!o(v)||!o(v)&&l(_)||l(j)&&!o(_)||l(j)&&c(_)||l(j)&&l(_)?0:d(j)&&o(_)&&!l(_)&&o(v)&&u(v)?3:l(j)||!o(v)?1:2:-1},f=function(j){var _=0,v=0,C=0,N="",A="",O="",G=(j=j||"").split("\\s+"),V=[];for(_=0;_<G.length;_+=1){for(V.push(""),v=0;v<G[_].length;v+=1)N=G[_][v],A=G[_][v-1],O=G[_][v+1],o(N)?(C=m(N,A,O),V[_]+=C!==-1?String.fromCharCode(e[N.charCodeAt(0)][C]):N):V[_]+=N;V[_]=g(V[_])}return V.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var j,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(_)){var C=0;for(v=[],C=0;C<_.length;C+=1)Array.isArray(_[C])?v.push([f(_[C][0]),_[C][1],_[C][2]]):v.push([f(_[C])]);j=v}else j=f(_);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",x])}(Dt.API),Dt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(j){c=j}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(j){d=j}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(j){x=j}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),g=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,f=0,x=0,j=0,_=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,A){return N.concat(_.splitTextToSize(A,v))},[])):c=Array.isArray(c)?c:[c];for(var C=0;C<c.length;C++)f<(j=this.getStringUnitWidth(c[C],{font:g})*d)&&(f=j);return f!==0&&(x=c.length),{w:f/=m,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,g,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var f,x,j,_,v=[],C=[],N=[],A={},O={},G=[],V=[],F=(m=m||{}).autoSize||!1,$=m.printHeaders!==!1,Z=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,D=m.margins||Object.assign({width:this.getPageWidth()},e),Y=typeof m.padding=="number"?m.padding:3,ce=m.headerBackgroundColor||"#c8c8c8",B=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=Y,this.internal.__cell__.headerBackgroundColor=ce,this.internal.__cell__.headerTextColor=B,this.setFontSize(Z),g==null)C=v=Object.keys(d[0]),N=v.map(function(){return"left"});else if(Array.isArray(g)&&Ar(g[0])==="object")for(v=g.map(function(ve){return ve.name}),C=g.map(function(ve){return ve.prompt||ve.name||""}),N=g.map(function(ve){return ve.align||"left"}),f=0;f<g.length;f+=1)O[g[f].name]=.7499990551181103*g[f].width;else Array.isArray(g)&&typeof g[0]=="string"&&(C=v=g,N=v.map(function(){return"left"}));if(F||Array.isArray(g)&&typeof g[0]=="string")for(f=0;f<v.length;f+=1){for(A[_=v[f]]=d.map(function(ve){return ve[_]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(C[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=A[_],this.setFont(void 0,"normal"),j=0;j<x.length;j+=1)G.push(this.getTextDimensions(x[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[_]=Math.max.apply(null,G)+Y+Y,G=[]}if($){var H={};for(f=0;f<v.length;f+=1)H[v[f]]={},H[v[f]].text=C[f],H[v[f]].align=N[f];var he=l.call(this,H,O);V=v.map(function(ve){return new a(c,u,O[ve],he,H[ve].text,void 0,H[ve].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var Le=g.reduce(function(ve,fe){return ve[fe.name]=fe.align,ve},{});for(f=0;f<d.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:d[f]},this);var te=l.call(this,d[f],O);for(j=0;j<v.length;j+=1){var ye=d[f][v[j]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:j,data:ye},this),o.call(this,new a(c,u,O[v[j]],te,ye,f+2,Le[v[j]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var x=c[f];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*g/m+d+d},this).reduce(function(f,x){return Math.max(f,x)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Dt.API);var y_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},b_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],y0=v_(b_),x_=[100,200,300,400,500,600,700,800,900],I6=v_(x_);function zg(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return y_[a=a||"normal"]?a:"normal"}(t.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),i=function(a){return typeof y0[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function dy(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var R6={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fy(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function gy(t){return t.trimLeft()}function O6(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function B6(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Rd,py,my,fl,Od,vy,yy,by,Wg=["times"];function xy(t,e,r,n){var i=4,a=wy;switch(n){case Dt.API.image_compression.FAST:i=1,a=_y;break;case Dt.API.image_compression.MEDIUM:i=6,a=Sy;break;case Dt.API.image_compression.SLOW:i=9,a=jy}t=function(l,c,u,d){for(var g,m=l.length/c,f=new Uint8Array(l.length+m),x=[M6,_y,wy,Sy,jy],j=0;j<m;j+=1){var _=j*c,v=l.subarray(_,_+c);if(d)f.set(d(v,u,g),_+j);else{for(var C=x.length,N=[],A=0;A<C;A+=1)N[A]=x[A](v,u,g);var O=$6(N.concat());f.set(N[O],_+j)}g=v}return f}(t,e,r,a);var o=d0(t,{level:i});return Dt.API.__addimage__.arrayBufferToBinaryString(o)}function M6(t){var e=Array.apply([],t);return e.unshift(0),e}function _y(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var a=t[i-e]||0;n[i+1]=t[i]-a+256&255}return n}function wy(t,e,r){var n=t.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var o=r&&r[a]||0;i[a+1]=t[a]-o+256&255}return i}function Sy(t,e,r){var n=t.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var o=t[a-e]||0,l=r&&r[a]||0;i[a+1]=t[a]+256-(o+l>>>1)&255}return i}function jy(t,e,r){var n=t.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var o=U6(t[a-e]||0,r&&r[a]||0,r&&r[a-e]||0);i[a+1]=t[a]-o+256&255}return i}function U6(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),a=Math.abs(t+e-r-r);return n<=i&&n<=a?t:i<=a?e:r}function $6(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Hg(t,e,r){var n=e*r,i=Math.floor(n/8),a=16-(n-8*i+r),o=(1<<r)-1;return __(t,i)>>a&o}function Ny(t,e,r,n){var i=r*n,a=Math.floor(i/8),o=16-(i-8*a+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,g){if(d+1<u.byteLength)u.setUint16(d,g,!1);else{var m=g>>8&255;u.setUint8(d,m)}})(t,a,__(t,a)&~(l<<o)&65535|c)}function __(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function q6(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<1+(7&i);t[e++],t[e++];var l=null,c=null;a&&(l=e,c=o,e+=3*o);var u=!0,d=[],g=0,m=null,f=0,x=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[e++];g=t[e++]|t[e++]<<8,m=t[e++],1&j||(m=null),f=j>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,A=t[e++],O=A>>6&1,G=1<<1+(7&A),V=l,F=c,$=!1;A>>7&&($=!0,V=e,F=G,e+=3*G);var Z=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}d.push({x:_,y:v,width:C,height:N,has_local_palette:$,palette_offset:V,palette_size:F,data_offset:Z,data_length:e-Z,transparent_index:m,interlaced:!!O,delay:g,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(Y){if(Y<0||Y>=d.length)throw new Error("Frame index out of range.");return d[Y]},this.decodeAndBlitFrameBGRA=function(Y,ce){var B=this.frameInfo(Y),H=B.width*B.height,he=new Uint8Array(H);Cy(t,B.data_offset,he,H);var Le=B.palette_offset,te=B.transparent_index;te===null&&(te=256);var ye=B.width,ve=r-ye,fe=ye,P=4*(B.y*r+B.x),q=4*((B.y+B.height)*r+B.x),X=P,ae=4*ve;B.interlaced===!0&&(ae+=4*r*7);for(var be=8,Ne=0,De=he.length;Ne<De;++Ne){var ke=he[Ne];if(fe===0&&(fe=ye,(X+=ae)>=q&&(ae=4*ve+4*r*(be-1),X=P+(ye+ve)*(be<<1),be>>=1)),ke===te)X+=4;else{var qe=t[Le+3*ke],Ke=t[Le+3*ke+1],dt=t[Le+3*ke+2];ce[X++]=dt,ce[X++]=Ke,ce[X++]=qe,ce[X++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(Y,ce){var B=this.frameInfo(Y),H=B.width*B.height,he=new Uint8Array(H);Cy(t,B.data_offset,he,H);var Le=B.palette_offset,te=B.transparent_index;te===null&&(te=256);var ye=B.width,ve=r-ye,fe=ye,P=4*(B.y*r+B.x),q=4*((B.y+B.height)*r+B.x),X=P,ae=4*ve;B.interlaced===!0&&(ae+=4*r*7);for(var be=8,Ne=0,De=he.length;Ne<De;++Ne){var ke=he[Ne];if(fe===0&&(fe=ye,(X+=ae)>=q&&(ae=4*ve+4*r*(be-1),X=P+(ye+ve)*(be<<1),be>>=1)),ke===te)X+=4;else{var qe=t[Le+3*ke],Ke=t[Le+3*ke+1],dt=t[Le+3*ke+2];ce[X++]=qe,ce[X++]=Ke,ce[X++]=dt,ce[X++]=255}--fe}}}function Cy(t,e,r,n){for(var i=t[e++],a=1<<i,o=a+1,l=o+1,c=i+1,u=(1<<c)-1,d=0,g=0,m=0,f=t[e++],x=new Int32Array(4096),j=null;;){for(;d<16&&f!==0;)g|=t[e++]<<d,d+=8,f===1?f=t[e++]:--f;if(d<c)break;var _=g&u;if(g>>=c,d-=c,_!==a){if(_===o)break;for(var v=_<l?_:j,C=0,N=v;N>a;)N=x[N]>>8,++C;var A=N;if(m+C+(v!==_?1:0)>n)return void Tr.log("Warning, gif stream longer than expected.");r[m++]=A;var O=m+=C;for(v!==_&&(r[m++]=A),N=v;C--;)N=x[N],r[--O]=255&N,N>>=8;j!==null&&l<4096&&(x[l++]=j<<8|A,l>=u+1&&c<12&&(++c,u=u<<1|1)),j=_}else l=o+1,u=(1<<(c=i+1))-1,j=null}return m!==n&&Tr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gg(t){var e,r,n,i,a,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),g=new Array(65535),m=new Array(65535),f=new Array(64),x=new Array(64),j=[],_=0,v=7,C=new Array(64),N=new Array(64),A=new Array(64),O=new Array(256),G=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(P,q){for(var X=0,ae=0,be=new Array,Ne=1;Ne<=16;Ne++){for(var De=1;De<=P[Ne];De++)be[q[ae]]=[],be[q[ae]][0]=X,be[q[ae]][1]=Ne,ae++,X++;X*=2}return be}function Le(P){for(var q=P[0],X=P[1]-1;X>=0;)q&1<<X&&(_|=1<<v),X--,--v<0&&(_==255?(te(255),te(0)):te(_),v=7,_=0)}function te(P){j.push(P)}function ye(P){te(P>>8&255),te(255&P)}function ve(P,q,X,ae,be){for(var Ne,De=be[0],ke=be[240],qe=function(Oe,ht){var ot,xt,Ft,Mt,tt,_t,Bt,vt,kt,yt,It=0;for(kt=0;kt<8;++kt){ot=Oe[It],xt=Oe[It+1],Ft=Oe[It+2],Mt=Oe[It+3],tt=Oe[It+4],_t=Oe[It+5],Bt=Oe[It+6];var rt=ot+(vt=Oe[It+7]),$t=ot-vt,$e=xt+Bt,me=xt-Bt,Be=Ft+_t,at=Ft-_t,Je=Mt+tt,ze=Mt-tt,Gt=rt+Je,qt=rt-Je,Qt=$e+Be,Ut=$e-Be;Oe[It]=Gt+Qt,Oe[It+4]=Gt-Qt;var Pe=.707106781*(Ut+qt);Oe[It+2]=qt+Pe,Oe[It+6]=qt-Pe;var z=.382683433*((Gt=ze+at)-(Ut=me+$t)),Te=.5411961*Gt+z,Qe=1.306562965*Ut+z,Xe=.707106781*(Qt=at+me),Pt=$t+Xe,Zt=$t-Xe;Oe[It+5]=Zt+Te,Oe[It+3]=Zt-Te,Oe[It+1]=Pt+Qe,Oe[It+7]=Pt-Qe,It+=8}for(It=0,kt=0;kt<8;++kt){ot=Oe[It],xt=Oe[It+8],Ft=Oe[It+16],Mt=Oe[It+24],tt=Oe[It+32],_t=Oe[It+40],Bt=Oe[It+48];var re=ot+(vt=Oe[It+56]),Ie=ot-vt,ut=xt+Bt,xe=xt-Bt,Se=Ft+_t,Ze=Ft-_t,lt=Mt+tt,ar=Mt-tt,gt=re+lt,J=re-lt,w=ut+Se,L=ut-Se;Oe[It]=gt+w,Oe[It+32]=gt-w;var M=.707106781*(L+J);Oe[It+16]=J+M,Oe[It+48]=J-M;var ie=.382683433*((gt=ar+Ze)-(L=xe+Ie)),_e=.5411961*gt+ie,T=1.306562965*L+ie,Q=.707106781*(w=Ze+xe),Ge=Ie+Q,de=Ie-Q;Oe[It+40]=de+_e,Oe[It+24]=de-_e,Oe[It+8]=Ge+T,Oe[It+56]=Ge-T,It++}for(kt=0;kt<64;++kt)yt=Oe[kt]*ht[kt],f[kt]=yt>0?yt+.5|0:yt-.5|0;return f}(P,q),Ke=0;Ke<64;++Ke)x[V[Ke]]=qe[Ke];var dt=x[0]-X;X=x[0],dt==0?Le(ae[0]):(Le(ae[m[Ne=32767+dt]]),Le(g[Ne]));for(var He=63;He>0&&x[He]==0;)He--;if(He==0)return Le(De),X;for(var Fe,se=1;se<=He;){for(var Et=se;x[se]==0&&se<=He;)++se;var At=se-Et;if(At>=16){Fe=At>>4;for(var We=1;We<=Fe;++We)Le(ke);At&=15}Ne=32767+x[se],Le(be[(At<<4)+m[Ne]]),Le(g[Ne]),se++}return He!=63&&Le(De),X}function fe(P){P=Math.min(Math.max(P,1),100),a!=P&&(function(q){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var be=o((X[ae]*q+50)/100);be=Math.min(Math.max(be,1),255),l[V[ae]]=be}for(var Ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],De=0;De<64;De++){var ke=o((Ne[De]*q+50)/100);ke=Math.min(Math.max(ke,1),255),c[V[De]]=ke}for(var qe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ke=0,dt=0;dt<8;dt++)for(var He=0;He<8;He++)u[Ke]=1/(l[V[Ke]]*qe[dt]*qe[He]*8),d[Ke]=1/(c[V[Ke]]*qe[dt]*qe[He]*8),Ke++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),a=P)}this.encode=function(P,q){q&&fe(q),j=new Array,_=0,v=7,ye(65496),ye(65504),ye(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),ye(1),ye(1),te(0),te(0),function(){ye(65499),ye(132),te(0);for(var xt=0;xt<64;xt++)te(l[xt]);te(1);for(var Ft=0;Ft<64;Ft++)te(c[Ft])}(),function(xt,Ft){ye(65472),ye(17),te(8),ye(Ft),ye(xt),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(P.width,P.height),function(){ye(65476),ye(418),te(0);for(var xt=0;xt<16;xt++)te(F[xt+1]);for(var Ft=0;Ft<=11;Ft++)te($[Ft]);te(16);for(var Mt=0;Mt<16;Mt++)te(Z[Mt+1]);for(var tt=0;tt<=161;tt++)te(D[tt]);te(1);for(var _t=0;_t<16;_t++)te(Y[_t+1]);for(var Bt=0;Bt<=11;Bt++)te(ce[Bt]);te(17);for(var vt=0;vt<16;vt++)te(B[vt+1]);for(var kt=0;kt<=161;kt++)te(H[kt])}(),ye(65498),ye(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var X=0,ae=0,be=0;_=0,v=7,this.encode.displayName="_encode_";for(var Ne,De,ke,qe,Ke,dt,He,Fe,se,Et=P.data,At=P.width,We=P.height,Oe=4*At,ht=0;ht<We;){for(Ne=0;Ne<Oe;){for(Ke=Oe*ht+Ne,He=-1,Fe=0,se=0;se<64;se++)dt=Ke+(Fe=se>>3)*Oe+(He=4*(7&se)),ht+Fe>=We&&(dt-=Oe*(ht+1+Fe-We)),Ne+He>=Oe&&(dt-=Ne+He-Oe+4),De=Et[dt++],ke=Et[dt++],qe=Et[dt++],C[se]=(G[De]+G[ke+256|0]+G[qe+512|0]>>16)-128,N[se]=(G[De+768|0]+G[ke+1024|0]+G[qe+1280|0]>>16)-128,A[se]=(G[De+1280|0]+G[ke+1536|0]+G[qe+1792|0]>>16)-128;X=ve(C,u,X,e,n),ae=ve(N,d,ae,r,i),be=ve(A,d,be,r,i),Ne+=32}ht+=8}if(v>=0){var ot=[];ot[1]=v+1,ot[0]=(1<<v+1)-1,Le(ot)}return ye(65497),new Uint8Array(j)},t=t||50,function(){for(var P=String.fromCharCode,q=0;q<256;q++)O[q]=P(q)}(),e=he(F,$),r=he(Y,ce),n=he(Z,D),i=he(B,H),function(){for(var P=1,q=2,X=1;X<=15;X++){for(var ae=P;ae<q;ae++)m[32767+ae]=X,g[32767+ae]=[],g[32767+ae][1]=X,g[32767+ae][0]=ae;for(var be=-(q-1);be<=-P;be++)m[32767+be]=X,g[32767+be]=[],g[32767+be][1]=X,g[32767+be][0]=q-1+be;P<<=1,q<<=1}}(),function(){for(var P=0;P<256;P++)G[P]=19595*P,G[P+256|0]=38470*P,G[P+512|0]=7471*P+32768,G[P+768|0]=-11059*P,G[P+1024|0]=-21709*P,G[P+1280|0]=32768*P+8421375,G[P+1536|0]=-27439*P,G[P+1792|0]=-5329*P}(),fe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function oa(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ly(t){function e($){if(!$)throw Error("assert :P")}function r($,Z,D){for(var Y=0;4>Y;Y++)if($[Z+Y]!=D.charCodeAt(Y))return!0;return!1}function n($,Z,D,Y,ce){for(var B=0;B<ce;B++)$[Z+B]=D[Y+B]}function i($,Z,D,Y){for(var ce=0;ce<Y;ce++)$[Z+ce]=D}function a($){return new Int32Array($)}function o($,Z){for(var D=[],Y=0;Y<$;Y++)D.push(new Z);return D}function l($,Z){var D=[];return function Y(ce,B,H){for(var he=H[B],Le=0;Le<he&&(ce.push(H.length>B+1?[]:new Z),!(H.length<B+1));Le++)Y(ce[Le],B+1,H)}(D,0,$),D}var c=function(){var $=this;function Z(h,p){for(var S=1<<p-1>>>0;h&S;)S>>>=1;return S?(h&S-1)+S:h}function D(h,p,S,k,I){e(!(k%S));do h[p+(k-=S)]=I;while(0<k)}function Y(h,p,S,k,I){if(e(2328>=I),512>=I)var U=a(512);else if((U=a(I))==null)return 0;return function(W,K,ee,oe,Ae,Ve){var le,Ee,Ue=K,nt=1<<ee,Ye=a(16),it=a(16);for(e(Ae!=0),e(oe!=null),e(W!=null),e(0<ee),Ee=0;Ee<Ae;++Ee){if(15<oe[Ee])return 0;++Ye[oe[Ee]]}if(Ye[0]==Ae)return 0;for(it[1]=0,le=1;15>le;++le){if(Ye[le]>1<<le)return 0;it[le+1]=it[le]+Ye[le]}for(Ee=0;Ee<Ae;++Ee)le=oe[Ee],0<oe[Ee]&&(Ve[it[le]++]=Ee);if(it[15]==1)return(oe=new ce).g=0,oe.value=Ve[0],D(W,Ue,1,nt,oe),nt;var ct,bt=-1,pt=nt-1,Xt=0,Wt=1,cr=1,Vt=1<<ee;for(Ee=0,le=1,Ae=2;le<=ee;++le,Ae<<=1){if(Wt+=cr<<=1,0>(cr-=Ye[le]))return 0;for(;0<Ye[le];--Ye[le])(oe=new ce).g=le,oe.value=Ve[Ee++],D(W,Ue+Xt,Ae,Vt,oe),Xt=Z(Xt,le)}for(le=ee+1,Ae=2;15>=le;++le,Ae<<=1){if(Wt+=cr<<=1,0>(cr-=Ye[le]))return 0;for(;0<Ye[le];--Ye[le]){if(oe=new ce,(Xt&pt)!=bt){for(Ue+=Vt,ct=1<<(bt=le)-ee;15>bt&&!(0>=(ct-=Ye[bt]));)++bt,ct<<=1;nt+=Vt=1<<(ct=bt-ee),W[K+(bt=Xt&pt)].g=ct+ee,W[K+bt].value=Ue-K-bt}oe.g=le-ee,oe.value=Ve[Ee++],D(W,Ue+(Xt>>ee),Ae,Vt,oe),Xt=Z(Xt,le)}}return Wt!=2*it[15]-1?0:nt}(h,p,S,k,I,U)}function ce(){this.value=this.g=0}function B(){this.value=this.g=0}function H(){this.G=o(5,ce),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ja,B)}function he(h,p,S,k){e(h!=null),e(p!=null),e(2147483648>k),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=p,h.pa=S,h.Jd=p,h.Yc=S+k,h.Zc=4<=k?S+k-4+1:S,De(h)}function Le(h,p){for(var S=0;0<p--;)S|=qe(h,128)<<p;return S}function te(h,p){var S=Le(h,p);return ke(h)?-S:S}function ye(h,p,S,k){var I,U=0;for(e(h!=null),e(p!=null),e(4294967288>k),h.Sb=k,h.Ra=0,h.u=0,h.h=0,4<k&&(k=4),I=0;I<k;++I)U+=p[S+I]<<8*I;h.Ra=U,h.bb=k,h.oa=p,h.pa=S}function ve(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<bs-8>>>0,++h.bb,h.u-=8;ae(h)&&(h.h=1,h.u=0)}function fe(h,p){if(e(0<=p),!h.h&&p<=Sc){var S=X(h)&ys[p];return h.u+=p,ve(h),S}return h.h=1,h.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(h){return h.Ra>>>(h.u&bs-1)>>>0}function ae(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>bs}function be(h,p){h.u=p,h.h=ae(h)}function Ne(h){h.u>=an&&(e(h.u>=an),ve(h))}function De(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ke(h){return Le(h,1)}function qe(h,p){var S=h.Ca;0>h.b&&De(h);var k=h.b,I=S*p>>>8,U=(h.I>>>k>I)+0;for(U?(S-=I,h.I-=I+1<<k>>>0):S=I+1,k=S,I=0;256<=k;)I+=8,k>>=8;return k=7^I+Af[k],h.b-=k,h.Ca=(S<<k)-1,U}function Ke(h,p,S){h[p+0]=S>>24&255,h[p+1]=S>>16&255,h[p+2]=S>>8&255,h[p+3]=255&S}function dt(h,p){return h[p+0]|h[p+1]<<8}function He(h,p){return dt(h,p)|h[p+2]<<16}function Fe(h,p){return dt(h,p)|dt(h,p+2)<<16}function se(h,p){var S=1<<p;return e(h!=null),e(0<p),h.X=a(S),h.X==null?0:(h.Mb=32-p,h.Xa=p,1)}function Et(h,p){e(h!=null),e(p!=null),e(h.Xa==p.Xa),n(p.X,0,h.X,0,1<<p.Xa)}function At(){this.X=[],this.Xa=this.Mb=0}function We(h,p,S,k){e(S!=null),e(k!=null);var I=S[0],U=k[0];return I==0&&(I=(h*U+p/2)/p),U==0&&(U=(p*I+h/2)/h),0>=I||0>=U?0:(S[0]=I,k[0]=U,1)}function Oe(h,p){return h+(1<<p)-1>>>p}function ht(h,p){return((4278255360&h)+(4278255360&p)>>>0&4278255360)+((16711935&h)+(16711935&p)>>>0&16711935)>>>0}function ot(h,p){$[p]=function(S,k,I,U,W,K,ee){var oe;for(oe=0;oe<W;++oe){var Ae=$[h](K[ee+oe-1],I,U+oe);K[ee+oe]=ht(S[k+oe],Ae)}}}function xt(){this.ud=this.hd=this.jd=0}function Ft(h,p){return((4278124286&(h^p))>>>1)+(h&p)>>>0}function Mt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function tt(h,p){return Mt(h+(h-p+.5>>1))}function _t(h,p,S){return Math.abs(p-S)-Math.abs(h-S)}function Bt(h,p,S,k,I,U,W){for(k=U[W-1],S=0;S<I;++S)U[W+S]=k=ht(h[p+S],k)}function vt(h,p,S,k,I){var U;for(U=0;U<S;++U){var W=h[p+U],K=W>>8&255,ee=16711935&(ee=(ee=16711935&W)+((K<<16)+K));k[I+U]=(4278255360&W)+ee>>>0}}function kt(h,p){p.jd=255&h,p.hd=h>>8&255,p.ud=h>>16&255}function yt(h,p,S,k,I,U){var W;for(W=0;W<k;++W){var K=p[S+W],ee=K>>>8,oe=K,Ae=255&(Ae=(Ae=K>>>16)+((h.jd<<24>>24)*(ee<<24>>24)>>>5));oe=255&(oe=(oe+=(h.hd<<24>>24)*(ee<<24>>24)>>>5)+((h.ud<<24>>24)*(Ae<<24>>24)>>>5)),I[U+W]=(4278255360&K)+(Ae<<16)+oe}}function It(h,p,S,k,I){$[p]=function(U,W,K,ee,oe,Ae,Ve,le,Ee){for(ee=Ve;ee<le;++ee)for(Ve=0;Ve<Ee;++Ve)oe[Ae++]=I(K[k(U[W++])])},$[h]=function(U,W,K,ee,oe,Ae,Ve){var le=8>>U.b,Ee=U.Ea,Ue=U.K[0],nt=U.w;if(8>le)for(U=(1<<U.b)-1,nt=(1<<le)-1;W<K;++W){var Ye,it=0;for(Ye=0;Ye<Ee;++Ye)Ye&U||(it=k(ee[oe++])),Ae[Ve++]=I(Ue[it&nt]),it>>=le}else $["VP8LMapColor"+S](ee,oe,Ue,nt,Ae,Ve,W,K,Ee)}}function rt(h,p,S,k,I){for(S=p+S;p<S;){var U=h[p++];k[I++]=U>>16&255,k[I++]=U>>8&255,k[I++]=255&U}}function $t(h,p,S,k,I){for(S=p+S;p<S;){var U=h[p++];k[I++]=U>>16&255,k[I++]=U>>8&255,k[I++]=255&U,k[I++]=U>>24&255}}function $e(h,p,S,k,I){for(S=p+S;p<S;){var U=(W=h[p++])>>16&240|W>>12&15,W=240&W|W>>28&15;k[I++]=U,k[I++]=W}}function me(h,p,S,k,I){for(S=p+S;p<S;){var U=(W=h[p++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;k[I++]=U,k[I++]=W}}function Be(h,p,S,k,I){for(S=p+S;p<S;){var U=h[p++];k[I++]=255&U,k[I++]=U>>8&255,k[I++]=U>>16&255}}function at(h,p,S,k,I,U){if(U==0)for(S=p+S;p<S;)Ke(k,((U=h[p++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),I+=32;else n(k,I,h,p,S)}function Je(h,p){$[p][0]=$[h+"0"],$[p][1]=$[h+"1"],$[p][2]=$[h+"2"],$[p][3]=$[h+"3"],$[p][4]=$[h+"4"],$[p][5]=$[h+"5"],$[p][6]=$[h+"6"],$[p][7]=$[h+"7"],$[p][8]=$[h+"8"],$[p][9]=$[h+"9"],$[p][10]=$[h+"10"],$[p][11]=$[h+"11"],$[p][12]=$[h+"12"],$[p][13]=$[h+"13"],$[p][14]=$[h+"0"],$[p][15]=$[h+"0"]}function ze(h){return h==Ef||h==Ff||h==Qu||h==Tf}function Gt(){this.eb=[],this.size=this.A=this.fb=0}function qt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Qt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gt,this.f.kb=new qt,this.sd=null}function Ut(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function z(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Te(h,p){var S=h.T,k=p.ba.f.RGBA,I=k.eb,U=k.fb+h.ka*k.A,W=Gi[p.ba.S],K=h.y,ee=h.O,oe=h.f,Ae=h.N,Ve=h.ea,le=h.W,Ee=p.cc,Ue=p.dc,nt=p.Mc,Ye=p.Nc,it=h.ka,ct=h.ka+h.T,bt=h.U,pt=bt+1>>1;for(it==0?W(K,ee,null,null,oe,Ae,Ve,le,oe,Ae,Ve,le,I,U,null,null,bt):(W(p.ec,p.fc,K,ee,Ee,Ue,nt,Ye,oe,Ae,Ve,le,I,U-k.A,I,U,bt),++S);it+2<ct;it+=2)Ee=oe,Ue=Ae,nt=Ve,Ye=le,Ae+=h.Rc,le+=h.Rc,U+=2*k.A,W(K,(ee+=2*h.fa)-h.fa,K,ee,Ee,Ue,nt,Ye,oe,Ae,Ve,le,I,U-k.A,I,U,bt);return ee+=h.fa,h.j+ct<h.o?(n(p.ec,p.fc,K,ee,bt),n(p.cc,p.dc,oe,Ae,pt),n(p.Mc,p.Nc,Ve,le,pt),S--):1&ct||W(K,ee,null,null,oe,Ae,Ve,le,oe,Ae,Ve,le,I,U+k.A,null,null,bt),S}function Qe(h,p,S){var k=h.F,I=[h.J];if(k!=null){var U=h.U,W=p.ba.S,K=W==Ku||W==Qu;p=p.ba.f.RGBA;var ee=[0],oe=h.ka;ee[0]=h.T,h.Kb&&(oe==0?--ee[0]:(--oe,I[0]-=h.width),h.j+h.ka+h.T==h.o&&(ee[0]=h.o-h.j-oe));var Ae=p.eb;oe=p.fb+oe*p.A,h=Zm(k,I[0],h.width,U,ee,Ae,oe+(K?0:3),p.A),e(S==ee),h&&ze(W)&&Lc(Ae,oe,K,U,ee,p.A)}return 0}function Xe(h){var p=h.ma,S=p.ba.S,k=11>S,I=S==Vu||S==Ju||S==Ku||S==Pf||S==12||ze(S);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!gi(p.Oa,h,I?11:12))return 0;if(I&&ze(S)&&bc(),h.da)alert("todo:use_scaling");else{if(k){if(p.Ib=z,h.Kb){if(S=h.U+1>>1,p.memory=a(h.U+2*S),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+h.U,p.Mc=p.cc,p.Nc=p.dc+S,p.Ib=Te,bc()}}else alert("todo:EmitYUV");I&&(p.Jb=Qe,k&&ho())}if(k&&!p1){for(h=0;256>h;++h)jw[h]=89858*(h-128)+Zu>>Xu,Lw[h]=-22014*(h-128)+Zu,Cw[h]=-45773*(h-128),Nw[h]=113618*(h-128)+Zu>>Xu;for(h=kc;h<Rf;++h)p=76283*(h-16)+Zu>>Xu,Aw[h-kc]=xn(p,255),kw[h-kc]=xn(p+8>>4,15);p1=1}return 1}function Pt(h){var p=h.ma,S=h.U,k=h.T;return e(!(1&h.ka)),0>=S||0>=k?0:(S=p.Ib(h,p),p.Jb!=null&&p.Jb(h,p,S),p.Dc+=S,1)}function Zt(h){h.ma.memory=null}function re(h,p,S,k){return fe(h,8)!=47?0:(p[0]=fe(h,14)+1,S[0]=fe(h,14)+1,k[0]=fe(h,1),fe(h,3)!=0?0:!h.h)}function Ie(h,p){if(4>h)return h+1;var S=h-2>>1;return(2+(1&h)<<S)+fe(p,S)+1}function ut(h,p){return 120<p?p-120:1<=(S=((S=uw[p-1])>>4)*h+(8-(15&S)))?S:1;var S}function xe(h,p,S){var k=X(S),I=h[p+=255&k].g-8;return 0<I&&(be(S,S.u+8),k=X(S),p+=h[p].value,p+=k&(1<<I)-1),be(S,S.u+h[p].g),h[p].value}function Se(h,p,S){return S.g+=h.g,S.value+=h.value<<p>>>0,e(8>=S.g),h.g}function Ze(h,p,S){var k=h.xc;return e((p=k==0?0:h.vc[h.md*(S>>k)+(p>>k)])<h.Wb),h.Ya[p]}function lt(h,p,S,k){var I=h.ab,U=h.c*p,W=h.C;p=W+p;var K=S,ee=k;for(k=h.Ta,S=h.Ua;0<I--;){var oe=h.gc[I],Ae=W,Ve=p,le=K,Ee=ee,Ue=(ee=k,K=S,oe.Ea);switch(e(Ae<Ve),e(Ve<=oe.nc),oe.hc){case 2:el(le,Ee,(Ve-Ae)*Ue,ee,K);break;case 0:var nt=Ae,Ye=Ve,it=ee,ct=K,bt=(Vt=oe).Ea;nt==0&&(Na(le,Ee,null,null,1,it,ct),Bt(le,Ee+1,0,0,bt-1,it,ct+1),Ee+=bt,ct+=bt,++nt);for(var pt=1<<Vt.b,Xt=pt-1,Wt=Oe(bt,Vt.b),cr=Vt.K,Vt=Vt.w+(nt>>Vt.b)*Wt;nt<Ye;){var mr=cr,_n=Vt,ur=1;for(Ca(le,Ee,it,ct-bt,1,it,ct);ur<bt;){var Jt=(ur&~Xt)+pt;Jt>bt&&(Jt=bt),(0,po[mr[_n++]>>8&15])(le,Ee+ +ur,it,ct+ur-bt,Jt-ur,it,ct+ur),ur=Jt}Ee+=bt,ct+=bt,++nt&Xt||(Vt+=Wt)}Ve!=oe.nc&&n(ee,K-Ue,ee,K+(Ve-Ae-1)*Ue,Ue);break;case 1:for(Ue=le,Ye=Ee,bt=(le=oe.Ea)-(ct=le&~(it=(Ee=1<<oe.b)-1)),nt=Oe(le,oe.b),pt=oe.K,oe=oe.w+(Ae>>oe.b)*nt;Ae<Ve;){for(Xt=pt,Wt=oe,cr=new xt,Vt=Ye+ct,mr=Ye+le;Ye<Vt;)kt(Xt[Wt++],cr),Ha(cr,Ue,Ye,Ee,ee,K),Ye+=Ee,K+=Ee;Ye<mr&&(kt(Xt[Wt++],cr),Ha(cr,Ue,Ye,bt,ee,K),Ye+=bt,K+=bt),++Ae&it||(oe+=nt)}break;case 3:if(le==ee&&Ee==K&&0<oe.b){for(Ye=ee,le=Ue=K+(Ve-Ae)*Ue-(ct=(Ve-Ae)*Oe(oe.Ea,oe.b)),Ee=ee,it=K,nt=[],ct=(bt=ct)-1;0<=ct;--ct)nt[ct]=Ee[it+ct];for(ct=bt-1;0<=ct;--ct)Ye[le+ct]=nt[ct];jc(oe,Ae,Ve,ee,Ue,ee,K)}else jc(oe,Ae,Ve,le,Ee,ee,K)}K=k,ee=S}ee!=S&&n(k,S,K,ee,U)}function ar(h,p){var S=h.V,k=h.Ba+h.c*h.C,I=p-h.C;if(e(p<=h.l.o),e(16>=I),0<I){var U=h.l,W=h.Ta,K=h.Ua,ee=U.width;if(lt(h,I,S,k),I=K=[K],e((S=h.C)<(k=p)),e(U.v<U.va),k>U.o&&(k=U.o),S<U.j){var oe=U.j-S;S=U.j,I[0]+=oe*ee}if(S>=k?S=0:(I[0]+=4*U.v,U.ka=S-U.j,U.U=U.va-U.v,U.T=k-S,S=1),S){if(K=K[0],11>(S=h.ca).S){var Ae=S.f.RGBA,Ve=(k=S.S,I=U.U,U=U.T,oe=Ae.eb,Ae.A),le=U;for(Ae=Ae.fb+h.Ma*Ae.A;0<le--;){var Ee=W,Ue=K,nt=I,Ye=oe,it=Ae;switch(k){case Yu:Nc(Ee,Ue,nt,Ye,it);break;case Vu:Li(Ee,Ue,nt,Ye,it);break;case Ef:Li(Ee,Ue,nt,Ye,it),Lc(Ye,it,0,nt,1,0);break;case s1:Ir(Ee,Ue,nt,Ye,it);break;case Ju:at(Ee,Ue,nt,Ye,it,1);break;case Ff:at(Ee,Ue,nt,Ye,it,1),Lc(Ye,it,0,nt,1,0);break;case Ku:at(Ee,Ue,nt,Ye,it,0);break;case Qu:at(Ee,Ue,nt,Ye,it,0),Lc(Ye,it,1,nt,1,0);break;case Pf:La(Ee,Ue,nt,Ye,it);break;case Tf:La(Ee,Ue,nt,Ye,it),Xm(Ye,it,nt,1,0);break;case o1:Dr(Ee,Ue,nt,Ye,it);break;default:e(0)}K+=ee,Ae+=Ve}h.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=S.height)}}h.C=p,e(h.C<=h.i)}function gt(h){var p;if(0<h.ua)return 0;for(p=0;p<h.Wb;++p){var S=h.Ya[p].G,k=h.Ya[p].H;if(0<S[1][k[1]+0].g||0<S[2][k[2]+0].g||0<S[3][k[3]+0].g)return 0}return 1}function J(h,p,S,k,I,U){if(h.Z!=0){var W=h.qd,K=h.rd;for(e(_s[h.Z]!=null);p<S;++p)_s[h.Z](W,K,k,I,k,I,U),W=k,K=I,I+=U;h.qd=W,h.rd=K}}function w(h,p){var S=h.l.ma,k=S.Z==0||S.Z==1?h.l.j:h.C;if(k=h.C<k?k:h.C,e(p<=h.l.o),p>k){var I=h.l.width,U=S.ca,W=S.tb+I*k,K=h.V,ee=h.Ba+h.c*k,oe=h.gc;e(h.ab==1),e(oe[0].hc==3),rl(oe[0],k,p,K,ee,U,W),J(S,k,p,U,W,I)}h.C=h.Ma=p}function L(h,p,S,k,I,U,W){var K=h.$/k,ee=h.$%k,oe=h.m,Ae=h.s,Ve=S+h.$,le=Ve;I=S+k*I;var Ee=S+k*U,Ue=280+Ae.ua,nt=h.Pb?K:16777216,Ye=0<Ae.ua?Ae.Wa:null,it=Ae.wc,ct=Ve<Ee?Ze(Ae,ee,K):null;e(h.C<U),e(Ee<=I);var bt=!1;e:for(;;){for(;bt||Ve<Ee;){var pt=0;if(K>=nt){var Xt=Ve-S;e((nt=h).Pb),nt.wd=nt.m,nt.xd=Xt,0<nt.s.ua&&Et(nt.s.Wa,nt.s.vb),nt=K+hw}if(ee&it||(ct=Ze(Ae,ee,K)),e(ct!=null),ct.Qb&&(p[Ve]=ct.qb,bt=!0),!bt)if(Ne(oe),ct.jc){pt=oe,Xt=p;var Wt=Ve,cr=ct.pd[X(pt)&ja-1];e(ct.jc),256>cr.g?(be(pt,pt.u+cr.g),Xt[Wt]=cr.value,pt=0):(be(pt,pt.u+cr.g-256),e(256<=cr.value),pt=cr.value),pt==0&&(bt=!0)}else pt=xe(ct.G[0],ct.H[0],oe);if(oe.h)break;if(bt||256>pt){if(!bt)if(ct.nd)p[Ve]=(ct.qb|pt<<8)>>>0;else{if(Ne(oe),bt=xe(ct.G[1],ct.H[1],oe),Ne(oe),Xt=xe(ct.G[2],ct.H[2],oe),Wt=xe(ct.G[3],ct.H[3],oe),oe.h)break;p[Ve]=(Wt<<24|bt<<16|pt<<8|Xt)>>>0}if(bt=!1,++Ve,++ee>=k&&(ee=0,++K,W!=null&&K<=U&&!(K%16)&&W(h,K),Ye!=null))for(;le<Ve;)pt=p[le++],Ye.X[(506832829*pt&4294967295)>>>Ye.Mb]=pt}else if(280>pt){if(pt=Ie(pt-256,oe),Xt=xe(ct.G[4],ct.H[4],oe),Ne(oe),Xt=ut(k,Xt=Ie(Xt,oe)),oe.h)break;if(Ve-S<Xt||I-Ve<pt)break e;for(Wt=0;Wt<pt;++Wt)p[Ve+Wt]=p[Ve+Wt-Xt];for(Ve+=pt,ee+=pt;ee>=k;)ee-=k,++K,W!=null&&K<=U&&!(K%16)&&W(h,K);if(e(Ve<=I),ee&it&&(ct=Ze(Ae,ee,K)),Ye!=null)for(;le<Ve;)pt=p[le++],Ye.X[(506832829*pt&4294967295)>>>Ye.Mb]=pt}else{if(!(pt<Ue))break e;for(bt=pt-280,e(Ye!=null);le<Ve;)pt=p[le++],Ye.X[(506832829*pt&4294967295)>>>Ye.Mb]=pt;pt=Ve,e(!(bt>>>(Xt=Ye).Xa)),p[pt]=Xt.X[bt],bt=!0}bt||e(oe.h==ae(oe))}if(h.Pb&&oe.h&&Ve<I)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Et(h.s.vb,h.s.Wa);else{if(oe.h)break e;W!=null&&W(h,K>U?U:K),h.a=0,h.$=Ve-S}return 1}return h.a=3,0}function M(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var p=h.Wa;p!=null&&(p.X=null),h.vb=null,e(h!=null)}function ie(){var h=new Yr;return h==null?null:(h.a=0,h.xb=u1,Je("Predictor","VP8LPredictors"),Je("Predictor","VP8LPredictors_C"),Je("PredictorAdd","VP8LPredictorsAdd"),Je("PredictorAdd","VP8LPredictorsAdd_C"),el=vt,Ha=yt,Nc=rt,Li=$t,La=$e,Dr=me,Ir=Be,$.VP8LMapColor32b=tl,$.VP8LMapColor8b=go,h)}function _e(h,p,S,k,I){var U=1,W=[h],K=[p],ee=k.m,oe=k.s,Ae=null,Ve=0;e:for(;;){if(S)for(;U&&fe(ee,1);){var le=W,Ee=K,Ue=k,nt=1,Ye=Ue.m,it=Ue.gc[Ue.ab],ct=fe(Ye,2);if(Ue.Oc&1<<ct)U=0;else{switch(Ue.Oc|=1<<ct,it.hc=ct,it.Ea=le[0],it.nc=Ee[0],it.K=[null],++Ue.ab,e(4>=Ue.ab),ct){case 0:case 1:it.b=fe(Ye,3)+2,nt=_e(Oe(it.Ea,it.b),Oe(it.nc,it.b),0,Ue,it.K),it.K=it.K[0];break;case 3:var bt,pt=fe(Ye,8)+1,Xt=16<pt?0:4<pt?1:2<pt?2:3;if(le[0]=Oe(it.Ea,Xt),it.b=Xt,bt=nt=_e(pt,1,0,Ue,it.K)){var Wt,cr=pt,Vt=it,mr=1<<(8>>Vt.b),_n=a(mr);if(_n==null)bt=0;else{var ur=Vt.K[0],Jt=Vt.w;for(_n[0]=Vt.K[0][0],Wt=1;Wt<1*cr;++Wt)_n[Wt]=ht(ur[Jt+Wt],_n[Wt-1]);for(;Wt<4*mr;++Wt)_n[Wt]=0;Vt.K[0]=null,Vt.K[0]=_n,bt=1}}nt=bt;break;case 2:break;default:e(0)}U=nt}}if(W=W[0],K=K[0],U&&fe(ee,1)&&!(U=1<=(Ve=fe(ee,4))&&11>=Ve)){k.a=3;break e}var Rt;if(Rt=U)t:{var ln,ir,yr,Ur=k,Bn=W,ii=K,Xr=Ve,Hn=S,ai=Ur.m,wn=Ur.s,br=[null],Nr=1,Zr=0,Cr=dw[Xr];r:for(;;){if(Hn&&fe(ai,1)){var Mn=fe(ai,3)+2,ia=Oe(Bn,Mn),cn=Oe(ii,Mn),mi=ia*cn;if(!_e(ia,cn,0,Ur,br))break r;for(br=br[0],wn.xc=Mn,ln=0;ln<mi;++ln){var Fr=br[ln]>>8&65535;br[ln]=Fr,Fr>=Nr&&(Nr=Fr+1)}}if(ai.h)break r;for(ir=0;5>ir;++ir){var Sn=l1[ir];!ir&&0<Xr&&(Sn+=1<<Xr),Zr<Sn&&(Zr=Sn)}var ki=o(Nr*Cr,ce),si=Nr,Pi=o(si,H);if(Pi==null)var Ei=null;else e(65536>=si),Ei=Pi;var vi=a(Zr);if(Ei==null||vi==null||ki==null){Ur.a=1;break r}var Fi=ki;for(ln=yr=0;ln<Nr;++ln){var Rr=Ei[ln],Ti=Rr.G,aa=Rr.H,mo=0,Va=1,Un=0;for(ir=0;5>ir;++ir){Sn=l1[ir],Ti[ir]=Fi,aa[ir]=yr,!ir&&0<Xr&&(Sn+=1<<Xr);i:{var td,Of=Sn,rd=Ur,Pc=vi,Fw=Fi,Tw=yr,Bf=0,ws=rd.m,Dw=fe(ws,1);if(i(Pc,0,0,Of),Dw){var Iw=fe(ws,1)+1,Rw=fe(ws,1),y1=fe(ws,Rw==0?1:8);Pc[y1]=1,Iw==2&&(Pc[y1=fe(ws,8)]=1);var nd=1}else{var b1=a(19),x1=fe(ws,4)+4;if(19<x1){rd.a=3;var id=0;break i}for(td=0;td<x1;++td)b1[cw[td]]=fe(ws,3);var Mf=void 0,Ec=void 0,_1=rd,Ow=b1,ad=Of,w1=Pc,Uf=0,Ss=_1.m,S1=8,j1=o(128,ce);n:for(;Y(j1,0,7,Ow,19);){if(fe(Ss,1)){var Bw=2+2*fe(Ss,3);if((Mf=2+fe(Ss,Bw))>ad)break n}else Mf=ad;for(Ec=0;Ec<ad&&Mf--;){Ne(Ss);var N1=j1[0+(127&X(Ss))];be(Ss,Ss.u+N1.g);var il=N1.value;if(16>il)w1[Ec++]=il,il!=0&&(S1=il);else{var Mw=il==16,C1=il-16,Uw=ow[C1],L1=fe(Ss,sw[C1])+Uw;if(Ec+L1>ad)break n;for(var $w=Mw?S1:0;0<L1--;)w1[Ec++]=$w}}Uf=1;break n}Uf||(_1.a=3),nd=Uf}(nd=nd&&!ws.h)&&(Bf=Y(Fw,Tw,8,Pc,Of)),nd&&Bf!=0?id=Bf:(rd.a=3,id=0)}if(id==0)break r;if(Va&&lw[ir]==1&&(Va=Fi[yr].g==0),mo+=Fi[yr].g,yr+=id,3>=ir){var Fc,$f=vi[0];for(Fc=1;Fc<Sn;++Fc)vi[Fc]>$f&&($f=vi[Fc]);Un+=$f}}if(Rr.nd=Va,Rr.Qb=0,Va&&(Rr.qb=(Ti[3][aa[3]+0].value<<24|Ti[1][aa[1]+0].value<<16|Ti[2][aa[2]+0].value)>>>0,mo==0&&256>Ti[0][aa[0]+0].value&&(Rr.Qb=1,Rr.qb+=Ti[0][aa[0]+0].value<<8)),Rr.jc=!Rr.Qb&&6>Un,Rr.jc){var sd,Ja=Rr;for(sd=0;sd<ja;++sd){var js=sd,Ns=Ja.pd[js],od=Ja.G[0][Ja.H[0]+js];256<=od.value?(Ns.g=od.g+256,Ns.value=od.value):(Ns.g=0,Ns.value=0,js>>=Se(od,8,Ns),js>>=Se(Ja.G[1][Ja.H[1]+js],16,Ns),js>>=Se(Ja.G[2][Ja.H[2]+js],0,Ns),Se(Ja.G[3][Ja.H[3]+js],24,Ns))}}}wn.vc=br,wn.Wb=Nr,wn.Ya=Ei,wn.yc=ki,Rt=1;break t}Rt=0}if(!(U=Rt)){k.a=3;break e}if(0<Ve){if(oe.ua=1<<Ve,!se(oe.Wa,Ve)){k.a=1,U=0;break e}}else oe.ua=0;var qf=k,A1=W,qw=K,zf=qf.s,Wf=zf.xc;if(qf.c=A1,qf.i=qw,zf.md=Oe(A1,Wf),zf.wc=Wf==0?-1:(1<<Wf)-1,S){k.xb=bw;break e}if((Ae=a(W*K))==null){k.a=1,U=0;break e}U=(U=L(k,Ae,0,W,K,K,null))&&!ee.h;break e}return U?(I!=null?I[0]=Ae:(e(Ae==null),e(S)),k.$=0,S||M(oe)):M(oe),U}function T(h,p){var S=h.c*h.i,k=S+p+16*p;return e(h.c<=p),h.V=a(k),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+S+p,1)}function Q(h,p){var S=h.C,k=p-S,I=h.V,U=h.Ba+h.c*S;for(e(p<=h.l.o);0<k;){var W=16<k?16:k,K=h.l.ma,ee=h.l.width,oe=ee*W,Ae=K.ca,Ve=K.tb+ee*S,le=h.Ta,Ee=h.Ua;lt(h,W,I,U),e1(le,Ee,Ae,Ve,oe),J(K,S,S+W,Ae,Ve,ee),k-=W,I+=W*h.c,S+=W}e(S==p),h.C=h.Ma=p}function Ge(){this.ub=this.yd=this.td=this.Rb=0}function de(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ce(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function et(){this.Yb=function(){var h=[];return function p(S,k,I){for(var U=I[k],W=0;W<U&&(S.push(I.length>k+1?[]:0),!(I.length<k+1));W++)p(S[W],k+1,I)}(h,0,[3,11]),h}()}function E(){this.jb=a(3),this.Wc=l([4,8],et),this.Xc=l([4,17],et)}function pe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function ge(){this.ld=this.La=this.dd=this.tc=0}function je(){this.Na=this.la=0}function ft(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Me(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Tt(){this.uc=this.M=this.Nb=0,this.wa=Array(new ge),this.Y=0,this.ya=Array(new Me),this.aa=0,this.l=new jt}function wt(){this.y=a(16),this.f=a(8),this.ea=a(8)}function St(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new Ge,this.Kc=new de,this.ed=new pe,this.Qa=new Ce,this.Ic=this.$c=this.Aa=0,this.D=new Tt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,P),this.ia=0,this.pb=o(4,ft),this.Pa=new E,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wt),this.Hd=0,this.rb=Array(new je),this.sb=0,this.wa=Array(new ge),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Me),this.L=this.aa=0,this.gd=l([4,2],ge),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function jt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ct(){var h=new St;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Ac||(Ac=gr)),h}function Ot(h,p,S){return h.a==0&&(h.a=p,h.sc=S,h.cb=0),0}function Wr(h,p,S){return 3<=S&&h[p+0]==157&&h[p+1]==1&&h[p+2]==42}function _r(h,p){if(h==null)return 0;if(h.a=0,h.sc="OK",p==null)return Ot(h,2,"null VP8Io passed to VP8GetHeaders()");var S=p.data,k=p.w,I=p.ha;if(4>I)return Ot(h,7,"Truncated header.");var U=S[k+0]|S[k+1]<<8|S[k+2]<<16,W=h.Od;if(W.Rb=!(1&U),W.td=U>>1&7,W.yd=U>>4&1,W.ub=U>>5,3<W.td)return Ot(h,3,"Incorrect keyframe parameters.");if(!W.yd)return Ot(h,4,"Frame not displayable.");k+=3,I-=3;var K=h.Kc;if(W.Rb){if(7>I)return Ot(h,7,"cannot parse picture header");if(!Wr(S,k,I))return Ot(h,3,"Bad code word");K.c=16383&(S[k+4]<<8|S[k+3]),K.Td=S[k+4]>>6,K.i=16383&(S[k+6]<<8|S[k+5]),K.Ud=S[k+6]>>6,k+=7,I-=7,h.za=K.c+15>>4,h.Ub=K.i+15>>4,p.width=K.c,p.height=K.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i((U=h.Pa).jb,0,255,U.jb.length),e((U=h.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,i(U.Zb,0,0,U.Zb.length),i(U.Lb,0,0,U.Lb)}if(W.ub>I)return Ot(h,7,"bad partition length");he(U=h.m,S,k,W.ub),k+=W.ub,I-=W.ub,W.Rb&&(K.Ld=ke(U),K.Kd=ke(U)),K=h.Qa;var ee,oe=h.Pa;if(e(U!=null),e(K!=null),K.Cb=ke(U),K.Cb){if(K.Bb=ke(U),ke(U)){for(K.Fb=ke(U),ee=0;4>ee;++ee)K.Zb[ee]=ke(U)?te(U,7):0;for(ee=0;4>ee;++ee)K.Lb[ee]=ke(U)?te(U,6):0}if(K.Bb)for(ee=0;3>ee;++ee)oe.jb[ee]=ke(U)?Le(U,8):255}else K.Bb=0;if(U.Ka)return Ot(h,3,"cannot parse segment header");if((K=h.ed).zd=ke(U),K.Tb=Le(U,6),K.wb=Le(U,3),K.Pc=ke(U),K.Pc&&ke(U)){for(oe=0;4>oe;++oe)ke(U)&&(K.vd[oe]=te(U,6));for(oe=0;4>oe;++oe)ke(U)&&(K.od[oe]=te(U,6))}if(h.L=K.Tb==0?0:K.zd?1:2,U.Ka)return Ot(h,3,"cannot parse filter header");var Ae=I;if(I=ee=k,k=ee+Ae,K=Ae,h.Xb=(1<<Le(h.m,2))-1,Ae<3*(oe=h.Xb))S=7;else{for(ee+=3*oe,K-=3*oe,Ae=0;Ae<oe;++Ae){var Ve=S[I+0]|S[I+1]<<8|S[I+2]<<16;Ve>K&&(Ve=K),he(h.Jc[+Ae],S,ee,Ve),ee+=Ve,K-=Ve,I+=3}he(h.Jc[+oe],S,ee,K),S=ee<k?0:5}if(S!=0)return Ot(h,S,"cannot parse partitions");for(S=Le(ee=h.m,7),I=ke(ee)?te(ee,4):0,k=ke(ee)?te(ee,4):0,K=ke(ee)?te(ee,4):0,oe=ke(ee)?te(ee,4):0,ee=ke(ee)?te(ee,4):0,Ae=h.Qa,Ve=0;4>Ve;++Ve){if(Ae.Cb){var le=Ae.Zb[Ve];Ae.Fb||(le+=S)}else{if(0<Ve){h.pb[Ve]=h.pb[0];continue}le=S}var Ee=h.pb[Ve];Ee.Sc[0]=Df[xn(le+I,127)],Ee.Sc[1]=If[xn(le+0,127)],Ee.Eb[0]=2*Df[xn(le+k,127)],Ee.Eb[1]=101581*If[xn(le+K,127)]>>16,8>Ee.Eb[1]&&(Ee.Eb[1]=8),Ee.Qc[0]=Df[xn(le+oe,117)],Ee.Qc[1]=If[xn(le+ee,127)],Ee.lc=le+ee}if(!W.Rb)return Ot(h,4,"Not a key frame.");for(ke(U),W=h.Pa,S=0;4>S;++S){for(I=0;8>I;++I)for(k=0;3>k;++k)for(K=0;11>K;++K)oe=qe(U,vw[S][I][k][K])?Le(U,8):pw[S][I][k][K],W.Wc[S][I].Yb[k][K]=oe;for(I=0;17>I;++I)W.Xc[S][I]=W.Wc[S][yw[I]]}return h.kc=ke(U),h.kc&&(h.Bd=Le(U,8)),h.cb=1}function gr(h,p,S,k,I,U,W){var K=p[I].Yb[S];for(S=0;16>I;++I){if(!qe(h,K[S+0]))return I;for(;!qe(h,K[S+1]);)if(K=p[++I].Yb[0],S=0,I==16)return 16;var ee=p[I+1].Yb;if(qe(h,K[S+2])){var oe=h,Ae=0;if(qe(oe,(le=K)[(Ve=S)+3]))if(qe(oe,le[Ve+6])){for(K=0,Ve=2*(Ae=qe(oe,le[Ve+8]))+(le=qe(oe,le[Ve+9+Ae])),Ae=0,le=fw[Ve];le[K];++K)Ae+=Ae+qe(oe,le[K]);Ae+=3+(8<<Ve)}else qe(oe,le[Ve+7])?(Ae=7+2*qe(oe,165),Ae+=qe(oe,145)):Ae=5+qe(oe,159);else Ae=qe(oe,le[Ve+4])?3+qe(oe,le[Ve+5]):2;K=ee[2]}else Ae=1,K=ee[1];ee=W+gw[I],0>(oe=h).b&&De(oe);var Ve,le=oe.b,Ee=(Ve=oe.Ca>>1)-(oe.I>>le)>>31;--oe.b,oe.Ca+=Ee,oe.Ca|=1,oe.I-=(Ve+1&Ee)<<le,U[ee]=((Ae^Ee)-Ee)*k[(0<I)+0]}return 16}function Sr(h){var p=h.rb[h.sb-1];p.la=0,p.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function sr(h,p,S,k,I){I=h[p+S+32*k]+(I>>3),h[p+S+32*k]=-256&I?0>I?0:255:I}function yn(h,p,S,k,I,U){sr(h,p,0,S,k+I),sr(h,p,1,S,k+U),sr(h,p,2,S,k-U),sr(h,p,3,S,k-I)}function jr(h){return(20091*h>>16)+h}function dr(h,p,S,k){var I,U=0,W=a(16);for(I=0;4>I;++I){var K=h[p+0]+h[p+8],ee=h[p+0]-h[p+8],oe=(35468*h[p+4]>>16)-jr(h[p+12]),Ae=jr(h[p+4])+(35468*h[p+12]>>16);W[U+0]=K+Ae,W[U+1]=ee+oe,W[U+2]=ee-oe,W[U+3]=K-Ae,U+=4,p++}for(I=U=0;4>I;++I)K=(h=W[U+0]+4)+W[U+8],ee=h-W[U+8],oe=(35468*W[U+4]>>16)-jr(W[U+12]),sr(S,k,0,0,K+(Ae=jr(W[U+4])+(35468*W[U+12]>>16))),sr(S,k,1,0,ee+oe),sr(S,k,2,0,ee-oe),sr(S,k,3,0,K-Ae),U++,k+=32}function _a(h,p,S,k){var I=h[p+0]+4,U=35468*h[p+4]>>16,W=jr(h[p+4]),K=35468*h[p+1]>>16;yn(S,k,0,I+W,h=jr(h[p+1]),K),yn(S,k,1,I+U,h,K),yn(S,k,2,I-U,h,K),yn(S,k,3,I-W,h,K)}function ta(h,p,S,k,I){dr(h,p,S,k),I&&dr(h,p+16,S,k+4)}function Wo(h,p,S,k){on(h,p+0,S,k,1),on(h,p+32,S,k+128,1)}function Ni(h,p,S,k){var I;for(h=h[p+0]+4,I=0;4>I;++I)for(p=0;4>p;++p)sr(S,k,p,I,h)}function io(h,p,S,k){h[p+0]&&Aa(h,p+0,S,k),h[p+16]&&Aa(h,p+16,S,k+4),h[p+32]&&Aa(h,p+32,S,k+128),h[p+48]&&Aa(h,p+48,S,k+128+4)}function Ho(h,p,S,k){var I,U=a(16);for(I=0;4>I;++I){var W=h[p+0+I]+h[p+12+I],K=h[p+4+I]+h[p+8+I],ee=h[p+4+I]-h[p+8+I],oe=h[p+0+I]-h[p+12+I];U[0+I]=W+K,U[8+I]=W-K,U[4+I]=oe+ee,U[12+I]=oe-ee}for(I=0;4>I;++I)W=(h=U[0+4*I]+3)+U[3+4*I],K=U[1+4*I]+U[2+4*I],ee=U[1+4*I]-U[2+4*I],oe=h-U[3+4*I],S[k+0]=W+K>>3,S[k+16]=oe+ee>>3,S[k+32]=W-K>>3,S[k+48]=oe-ee>>3,k+=64}function wa(h,p,S){var k,I=p-32,U=Ai,W=255-h[I-1];for(k=0;k<S;++k){var K,ee=U,oe=W+h[p-1];for(K=0;K<S;++K)h[p+K]=ee[oe+h[I+K]];p+=32}}function cc(h,p){wa(h,p,4)}function mf(h,p){wa(h,p,8)}function vf(h,p){wa(h,p,16)}function yf(h,p){var S;for(S=0;16>S;++S)n(h,p+32*S,h,p-32,16)}function uc(h,p){var S;for(S=16;0<S;--S)i(h,p,h[p-1],16),p+=32}function ao(h,p,S){var k;for(k=0;16>k;++k)i(p,S+32*k,h,16)}function gs(h,p){var S,k=16;for(S=0;16>S;++S)k+=h[p-1+32*S]+h[p+S-32];ao(k>>5,h,p)}function bf(h,p){var S,k=8;for(S=0;16>S;++S)k+=h[p-1+32*S];ao(k>>4,h,p)}function so(h,p){var S,k=8;for(S=0;16>S;++S)k+=h[p+S-32];ao(k>>4,h,p)}function dc(h,p){ao(128,h,p)}function rr(h,p,S){return h+2*p+S+2>>2}function xf(h,p){var S,k=p-32;for(k=new Uint8Array([rr(h[k-1],h[k+0],h[k+1]),rr(h[k+0],h[k+1],h[k+2]),rr(h[k+1],h[k+2],h[k+3]),rr(h[k+2],h[k+3],h[k+4])]),S=0;4>S;++S)n(h,p+32*S,k,0,k.length)}function _f(h,p){var S=h[p-1],k=h[p-1+32],I=h[p-1+64],U=h[p-1+96];Ke(h,p+0,16843009*rr(h[p-1-32],S,k)),Ke(h,p+32,16843009*rr(S,k,I)),Ke(h,p+64,16843009*rr(k,I,U)),Ke(h,p+96,16843009*rr(I,U,U))}function wf(h,p){var S,k=4;for(S=0;4>S;++S)k+=h[p+S-32]+h[p-1+32*S];for(k>>=3,S=0;4>S;++S)i(h,p+32*S,k,4)}function Sf(h,p){var S=h[p-1+0],k=h[p-1+32],I=h[p-1+64],U=h[p-1-32],W=h[p+0-32],K=h[p+1-32],ee=h[p+2-32],oe=h[p+3-32];h[p+0+96]=rr(k,I,h[p-1+96]),h[p+1+96]=h[p+0+64]=rr(S,k,I),h[p+2+96]=h[p+1+64]=h[p+0+32]=rr(U,S,k),h[p+3+96]=h[p+2+64]=h[p+1+32]=h[p+0+0]=rr(W,U,S),h[p+3+64]=h[p+2+32]=h[p+1+0]=rr(K,W,U),h[p+3+32]=h[p+2+0]=rr(ee,K,W),h[p+3+0]=rr(oe,ee,K)}function Ua(h,p){var S=h[p+1-32],k=h[p+2-32],I=h[p+3-32],U=h[p+4-32],W=h[p+5-32],K=h[p+6-32],ee=h[p+7-32];h[p+0+0]=rr(h[p+0-32],S,k),h[p+1+0]=h[p+0+32]=rr(S,k,I),h[p+2+0]=h[p+1+32]=h[p+0+64]=rr(k,I,U),h[p+3+0]=h[p+2+32]=h[p+1+64]=h[p+0+96]=rr(I,U,W),h[p+3+32]=h[p+2+64]=h[p+1+96]=rr(U,W,K),h[p+3+64]=h[p+2+96]=rr(W,K,ee),h[p+3+96]=rr(K,ee,ee)}function $a(h,p){var S=h[p-1+0],k=h[p-1+32],I=h[p-1+64],U=h[p-1-32],W=h[p+0-32],K=h[p+1-32],ee=h[p+2-32],oe=h[p+3-32];h[p+0+0]=h[p+1+64]=U+W+1>>1,h[p+1+0]=h[p+2+64]=W+K+1>>1,h[p+2+0]=h[p+3+64]=K+ee+1>>1,h[p+3+0]=ee+oe+1>>1,h[p+0+96]=rr(I,k,S),h[p+0+64]=rr(k,S,U),h[p+0+32]=h[p+1+96]=rr(S,U,W),h[p+1+32]=h[p+2+96]=rr(U,W,K),h[p+2+32]=h[p+3+96]=rr(W,K,ee),h[p+3+32]=rr(K,ee,oe)}function jf(h,p){var S=h[p+0-32],k=h[p+1-32],I=h[p+2-32],U=h[p+3-32],W=h[p+4-32],K=h[p+5-32],ee=h[p+6-32],oe=h[p+7-32];h[p+0+0]=S+k+1>>1,h[p+1+0]=h[p+0+64]=k+I+1>>1,h[p+2+0]=h[p+1+64]=I+U+1>>1,h[p+3+0]=h[p+2+64]=U+W+1>>1,h[p+0+32]=rr(S,k,I),h[p+1+32]=h[p+0+96]=rr(k,I,U),h[p+2+32]=h[p+1+96]=rr(I,U,W),h[p+3+32]=h[p+2+96]=rr(U,W,K),h[p+3+64]=rr(W,K,ee),h[p+3+96]=rr(K,ee,oe)}function Nf(h,p){var S=h[p-1+0],k=h[p-1+32],I=h[p-1+64],U=h[p-1+96];h[p+0+0]=S+k+1>>1,h[p+2+0]=h[p+0+32]=k+I+1>>1,h[p+2+32]=h[p+0+64]=I+U+1>>1,h[p+1+0]=rr(S,k,I),h[p+3+0]=h[p+1+32]=rr(k,I,U),h[p+3+32]=h[p+1+64]=rr(I,U,U),h[p+3+64]=h[p+2+64]=h[p+0+96]=h[p+1+96]=h[p+2+96]=h[p+3+96]=U}function Go(h,p){var S=h[p-1+0],k=h[p-1+32],I=h[p-1+64],U=h[p-1+96],W=h[p-1-32],K=h[p+0-32],ee=h[p+1-32],oe=h[p+2-32];h[p+0+0]=h[p+2+32]=S+W+1>>1,h[p+0+32]=h[p+2+64]=k+S+1>>1,h[p+0+64]=h[p+2+96]=I+k+1>>1,h[p+0+96]=U+I+1>>1,h[p+3+0]=rr(K,ee,oe),h[p+2+0]=rr(W,K,ee),h[p+1+0]=h[p+3+32]=rr(S,W,K),h[p+1+32]=h[p+3+64]=rr(k,S,W),h[p+1+64]=h[p+3+96]=rr(I,k,S),h[p+1+96]=rr(U,I,k)}function hc(h,p){var S;for(S=0;8>S;++S)n(h,p+32*S,h,p-32,8)}function oo(h,p){var S;for(S=0;8>S;++S)i(h,p,h[p-1],8),p+=32}function Yo(h,p,S){var k;for(k=0;8>k;++k)i(p,S+32*k,h,8)}function Vo(h,p){var S,k=8;for(S=0;8>S;++S)k+=h[p+S-32]+h[p-1+32*S];Yo(k>>4,h,p)}function Cf(h,p){var S,k=4;for(S=0;8>S;++S)k+=h[p+S-32];Yo(k>>3,h,p)}function fc(h,p){var S,k=4;for(S=0;8>S;++S)k+=h[p-1+32*S];Yo(k>>3,h,p)}function gc(h,p){Yo(128,h,p)}function lo(h,p,S){var k=h[p-S],I=h[p+0],U=3*(I-k)+kf[1020+h[p-2*S]-h[p+S]],W=Gu[112+(U+4>>3)];h[p-S]=Ai[255+k+Gu[112+(U+3>>3)]],h[p+0]=Ai[255+I-W]}function co(h,p,S,k){var I=h[p+0],U=h[p+S];return Hi[255+h[p-2*S]-h[p-S]]>k||Hi[255+U-I]>k}function pc(h,p,S,k){return 4*Hi[255+h[p-S]-h[p+0]]+Hi[255+h[p-2*S]-h[p+S]]<=k}function Jo(h,p,S,k,I){var U=h[p-3*S],W=h[p-2*S],K=h[p-S],ee=h[p+0],oe=h[p+S],Ae=h[p+2*S],Ve=h[p+3*S];return 4*Hi[255+K-ee]+Hi[255+W-oe]>k?0:Hi[255+h[p-4*S]-U]<=I&&Hi[255+U-W]<=I&&Hi[255+W-K]<=I&&Hi[255+Ve-Ae]<=I&&Hi[255+Ae-oe]<=I&&Hi[255+oe-ee]<=I}function mc(h,p,S,k){var I=2*k+1;for(k=0;16>k;++k)pc(h,p+k,S,I)&&lo(h,p+k,S)}function uo(h,p,S,k){var I=2*k+1;for(k=0;16>k;++k)pc(h,p+k*S,1,I)&&lo(h,p+k*S,1)}function vc(h,p,S,k){var I;for(I=3;0<I;--I)mc(h,p+=4*S,S,k)}function yc(h,p,S,k){var I;for(I=3;0<I;--I)uo(h,p+=4,S,k)}function Ci(h,p,S,k,I,U,W,K){for(U=2*U+1;0<I--;){if(Jo(h,p,S,U,W))if(co(h,p,S,K))lo(h,p,S);else{var ee=h,oe=p,Ae=S,Ve=ee[oe-2*Ae],le=ee[oe-Ae],Ee=ee[oe+0],Ue=ee[oe+Ae],nt=ee[oe+2*Ae],Ye=27*(ct=kf[1020+3*(Ee-le)+kf[1020+Ve-Ue]])+63>>7,it=18*ct+63>>7,ct=9*ct+63>>7;ee[oe-3*Ae]=Ai[255+ee[oe-3*Ae]+ct],ee[oe-2*Ae]=Ai[255+Ve+it],ee[oe-Ae]=Ai[255+le+Ye],ee[oe+0]=Ai[255+Ee-Ye],ee[oe+Ae]=Ai[255+Ue-it],ee[oe+2*Ae]=Ai[255+nt-ct]}p+=k}}function Sa(h,p,S,k,I,U,W,K){for(U=2*U+1;0<I--;){if(Jo(h,p,S,U,W))if(co(h,p,S,K))lo(h,p,S);else{var ee=h,oe=p,Ae=S,Ve=ee[oe-Ae],le=ee[oe+0],Ee=ee[oe+Ae],Ue=Gu[112+(4+(nt=3*(le-Ve))>>3)],nt=Gu[112+(nt+3>>3)],Ye=Ue+1>>1;ee[oe-2*Ae]=Ai[255+ee[oe-2*Ae]+Ye],ee[oe-Ae]=Ai[255+Ve+nt],ee[oe+0]=Ai[255+le-Ue],ee[oe+Ae]=Ai[255+Ee-Ye]}p+=k}}function y(h,p,S,k,I,U){Ci(h,p,S,1,16,k,I,U)}function R(h,p,S,k,I,U){Ci(h,p,1,S,16,k,I,U)}function ue(h,p,S,k,I,U){var W;for(W=3;0<W;--W)Sa(h,p+=4*S,S,1,16,k,I,U)}function we(h,p,S,k,I,U){var W;for(W=3;0<W;--W)Sa(h,p+=4,1,S,16,k,I,U)}function Re(h,p,S,k,I,U,W,K){Ci(h,p,I,1,8,U,W,K),Ci(S,k,I,1,8,U,W,K)}function st(h,p,S,k,I,U,W,K){Ci(h,p,1,I,8,U,W,K),Ci(S,k,1,I,8,U,W,K)}function mt(h,p,S,k,I,U,W,K){Sa(h,p+4*I,I,1,8,U,W,K),Sa(S,k+4*I,I,1,8,U,W,K)}function Yt(h,p,S,k,I,U,W,K){Sa(h,p+4,1,I,8,U,W,K),Sa(S,k+4,1,I,8,U,W,K)}function Kt(){this.ba=new Qt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function er(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function or(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function wr(){this.ua=0,this.Wa=new At,this.vb=new At,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new ce}function Yr(){this.xb=this.a=0,this.l=new jt,this.ca=new Qt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new wr,this.ab=0,this.gc=o(4,or),this.Oc=0}function pn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new jt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Er(h,p,S,k,I,U,W){for(h=h==null?0:h[p+0],p=0;p<W;++p)I[U+p]=h+S[k+p]&255,h=I[U+p]}function bn(h,p,S,k,I,U,W){var K;if(h==null)Er(null,null,S,k,I,U,W);else for(K=0;K<W;++K)I[U+K]=h[p+K]+S[k+K]&255}function mn(h,p,S,k,I,U,W){if(h==null)Er(null,null,S,k,I,U,W);else{var K,ee=h[p+0],oe=ee,Ae=ee;for(K=0;K<W;++K)oe=Ae+(ee=h[p+K])-oe,Ae=S[k+K]+(-256&oe?0>oe?0:255:oe)&255,oe=ee,I[U+K]=Ae}}function On(h,p,S,k){var I=p.width,U=p.o;if(e(h!=null&&p!=null),0>S||0>=k||S+k>U)return null;if(!h.Cc){if(h.ga==null){var W;if(h.ga=new pn,(W=h.ga==null)||(W=p.width*p.o,e(h.Gb.length==0),h.Gb=a(W),h.Uc=0,h.Gb==null?W=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,W=1),W=!W),!W){W=h.ga;var K=h.Fa,ee=h.P,oe=h.qc,Ae=h.mb,Ve=h.nb,le=ee+1,Ee=oe-1,Ue=W.l;if(e(K!=null&&Ae!=null&&p!=null),_s[0]=null,_s[1]=Er,_s[2]=bn,_s[3]=mn,W.ca=Ae,W.tb=Ve,W.c=p.width,W.i=p.height,e(0<W.c&&0<W.i),1>=oe)p=0;else if(W.$a=3&K[ee+0],W.Z=K[ee+0]>>2&3,W.Lc=K[ee+0]>>4&3,ee=K[ee+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||ee)p=0;else if(Ue.put=Pt,Ue.ac=Xe,Ue.bc=Zt,Ue.ma=W,Ue.width=p.width,Ue.height=p.height,Ue.Da=p.Da,Ue.v=p.v,Ue.va=p.va,Ue.j=p.j,Ue.o=p.o,W.$a)e:{e(W.$a==1),p=ie();t:for(;;){if(p==null){p=0;break e}if(e(W!=null),W.mc=p,p.c=W.c,p.i=W.i,p.l=W.l,p.l.ma=W,p.l.width=W.c,p.l.height=W.i,p.a=0,ye(p.m,K,le,Ee),!_e(W.c,W.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&gt(p.s)?(W.ic=1,K=p.c*p.i,p.Ta=null,p.Ua=0,p.V=a(K),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(W.ic=0,p=T(p,W.c)),!p))break t;p=1;break e}W.mc=null,p=0}else p=Ee>=W.c*W.i;W=!p}if(W)return null;h.ga.Lc!=1?h.Ga=0:k=U-S}e(h.ga!=null),e(S+k<=U);e:{if(p=(K=h.ga).c,U=K.l.o,K.$a==0){if(le=h.rc,Ee=h.Vc,Ue=h.Fa,ee=h.P+1+S*p,oe=h.mb,Ae=h.nb+S*p,e(ee<=h.P+h.qc),K.Z!=0)for(e(_s[K.Z]!=null),W=0;W<k;++W)_s[K.Z](le,Ee,Ue,ee,oe,Ae,p),le=oe,Ee=Ae,Ae+=p,ee+=p;else for(W=0;W<k;++W)n(oe,Ae,Ue,ee,p),le=oe,Ee=Ae,Ae+=p,ee+=p;h.rc=le,h.Vc=Ee}else{if(e(K.mc!=null),p=S+k,e((W=K.mc)!=null),e(p<=W.i),W.C>=p)p=1;else if(K.ic||ho(),K.ic){K=W.V,le=W.Ba,Ee=W.c;var nt=W.i,Ye=(Ue=1,ee=W.$/Ee,oe=W.$%Ee,Ae=W.m,Ve=W.s,W.$),it=Ee*nt,ct=Ee*p,bt=Ve.wc,pt=Ye<ct?Ze(Ve,oe,ee):null;e(Ye<=it),e(p<=nt),e(gt(Ve));t:for(;;){for(;!Ae.h&&Ye<ct;){if(oe&bt||(pt=Ze(Ve,oe,ee)),e(pt!=null),Ne(Ae),256>(nt=xe(pt.G[0],pt.H[0],Ae)))K[le+Ye]=nt,++Ye,++oe>=Ee&&(oe=0,++ee<=p&&!(ee%16)&&w(W,ee));else{if(!(280>nt)){Ue=0;break t}nt=Ie(nt-256,Ae);var Xt,Wt=xe(pt.G[4],pt.H[4],Ae);if(Ne(Ae),!(Ye>=(Wt=ut(Ee,Wt=Ie(Wt,Ae)))&&it-Ye>=nt)){Ue=0;break t}for(Xt=0;Xt<nt;++Xt)K[le+Ye+Xt]=K[le+Ye+Xt-Wt];for(Ye+=nt,oe+=nt;oe>=Ee;)oe-=Ee,++ee<=p&&!(ee%16)&&w(W,ee);Ye<ct&&oe&bt&&(pt=Ze(Ve,oe,ee))}e(Ae.h==ae(Ae))}w(W,ee>p?p:ee);break t}!Ue||Ae.h&&Ye<it?(Ue=0,W.a=Ae.h?5:3):W.$=Ye,p=Ue}else p=L(W,W.V,W.Ba,W.c,W.i,p,Q);if(!p){k=0;break e}}S+k>=U&&(h.Cc=1),k=1}if(!k)return null;if(h.Cc&&((k=h.ga)!=null&&(k.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+S*I}function qa(h,p,S,k,I,U){for(;0<I--;){var W,K=h,ee=p+(S?1:0),oe=h,Ae=p+(S?0:3);for(W=0;W<k;++W){var Ve=oe[Ae+4*W];Ve!=255&&(Ve*=32897,K[ee+4*W+0]=K[ee+4*W+0]*Ve>>23,K[ee+4*W+1]=K[ee+4*W+1]*Ve>>23,K[ee+4*W+2]=K[ee+4*W+2]*Ve>>23)}p+=U}}function ps(h,p,S,k,I){for(;0<k--;){var U;for(U=0;U<S;++U){var W=h[p+2*U+0],K=15&(oe=h[p+2*U+1]),ee=4369*K,oe=(240&oe|oe>>4)*ee>>16;h[p+2*U+0]=(240&W|W>>4)*ee>>16&240|(15&W|W<<4)*ee>>16>>4&15,h[p+2*U+1]=240&oe|K}p+=I}}function Lf(h,p,S,k,I,U,W,K){var ee,oe,Ae=255;for(oe=0;oe<I;++oe){for(ee=0;ee<k;++ee){var Ve=h[p+ee];U[W+4*ee]=Ve,Ae&=Ve}p+=S,W+=K}return Ae!=255}function zu(h,p,S,k,I){var U;for(U=0;U<I;++U)S[k+U]=h[p+U]>>8}function ho(){Lc=qa,Xm=ps,Zm=Lf,e1=zu}function ra(h,p,S){$[h]=function(k,I,U,W,K,ee,oe,Ae,Ve,le,Ee,Ue,nt,Ye,it,ct,bt){var pt,Xt=bt-1>>1,Wt=K[ee+0]|oe[Ae+0]<<16,cr=Ve[le+0]|Ee[Ue+0]<<16;e(k!=null);var Vt=3*Wt+cr+131074>>2;for(p(k[I+0],255&Vt,Vt>>16,nt,Ye),U!=null&&(Vt=3*cr+Wt+131074>>2,p(U[W+0],255&Vt,Vt>>16,it,ct)),pt=1;pt<=Xt;++pt){var mr=K[ee+pt]|oe[Ae+pt]<<16,_n=Ve[le+pt]|Ee[Ue+pt]<<16,ur=Wt+mr+cr+_n+524296,Jt=ur+2*(mr+cr)>>3;Vt=Jt+Wt>>1,Wt=(ur=ur+2*(Wt+_n)>>3)+mr>>1,p(k[I+2*pt-1],255&Vt,Vt>>16,nt,Ye+(2*pt-1)*S),p(k[I+2*pt-0],255&Wt,Wt>>16,nt,Ye+(2*pt-0)*S),U!=null&&(Vt=ur+cr>>1,Wt=Jt+_n>>1,p(U[W+2*pt-1],255&Vt,Vt>>16,it,ct+(2*pt-1)*S),p(U[W+2*pt+0],255&Wt,Wt>>16,it,ct+(2*pt+0)*S)),Wt=mr,cr=_n}1&bt||(Vt=3*Wt+cr+131074>>2,p(k[I+bt-1],255&Vt,Vt>>16,nt,Ye+(bt-1)*S),U!=null&&(Vt=3*cr+Wt+131074>>2,p(U[W+bt-1],255&Vt,Vt>>16,it,ct+(bt-1)*S)))}}function bc(){Gi[Yu]=xw,Gi[Vu]=d1,Gi[s1]=_w,Gi[Ju]=h1,Gi[Ku]=f1,Gi[Pf]=g1,Gi[o1]=ww,Gi[Ef]=d1,Gi[Ff]=h1,Gi[Qu]=f1,Gi[Tf]=g1}function Ko(h){return h&-16384?0>h?0:255:h>>Sw}function ms(h,p){return Ko((19077*h>>8)+(26149*p>>8)-14234)}function Fn(h,p,S){return Ko((19077*h>>8)-(6419*p>>8)-(13320*S>>8)+8708)}function za(h,p){return Ko((19077*h>>8)+(33050*p>>8)-17685)}function Wa(h,p,S,k,I){k[I+0]=ms(h,S),k[I+1]=Fn(h,p,S),k[I+2]=za(h,p)}function Qo(h,p,S,k,I){k[I+0]=za(h,p),k[I+1]=Fn(h,p,S),k[I+2]=ms(h,S)}function xc(h,p,S,k,I){var U=Fn(h,p,S);p=U<<3&224|za(h,p)>>3,k[I+0]=248&ms(h,S)|U>>5,k[I+1]=p}function ni(h,p,S,k,I){var U=240&za(h,p)|15;k[I+0]=240&ms(h,S)|Fn(h,p,S)>>4,k[I+1]=U}function Wu(h,p,S,k,I){k[I+0]=255,Wa(h,p,S,k,I+1)}function Xo(h,p,S,k,I){Qo(h,p,S,k,I),k[I+3]=255}function Hu(h,p,S,k,I){Wa(h,p,S,k,I),k[I+3]=255}function xn(h,p){return 0>h?0:h>p?p:h}function Wi(h,p,S){$[h]=function(k,I,U,W,K,ee,oe,Ae,Ve){for(var le=Ae+(-2&Ve)*S;Ae!=le;)p(k[I+0],U[W+0],K[ee+0],oe,Ae),p(k[I+1],U[W+0],K[ee+0],oe,Ae+S),I+=2,++W,++ee,Ae+=2*S;1&Ve&&p(k[I+0],U[W+0],K[ee+0],oe,Ae)}}function _c(h,p,S){return S==0?h==0?p==0?6:5:p==0?4:0:S}function wc(h,p,S,k,I){switch(h>>>30){case 3:on(p,S,k,I,0);break;case 2:Ga(p,S,k,I);break;case 1:Aa(p,S,k,I)}}function vs(h,p){var S,k,I=p.M,U=p.Nb,W=h.oc,K=h.pc+40,ee=h.oc,oe=h.pc+584,Ae=h.oc,Ve=h.pc+600;for(S=0;16>S;++S)W[K+32*S-1]=129;for(S=0;8>S;++S)ee[oe+32*S-1]=129,Ae[Ve+32*S-1]=129;for(0<I?W[K-1-32]=ee[oe-1-32]=Ae[Ve-1-32]=129:(i(W,K-32-1,127,21),i(ee,oe-32-1,127,9),i(Ae,Ve-32-1,127,9)),k=0;k<h.za;++k){var le=p.ya[p.aa+k];if(0<k){for(S=-1;16>S;++S)n(W,K+32*S-4,W,K+32*S+12,4);for(S=-1;8>S;++S)n(ee,oe+32*S-4,ee,oe+32*S+4,4),n(Ae,Ve+32*S-4,Ae,Ve+32*S+4,4)}var Ee=h.Gd,Ue=h.Hd+k,nt=le.ad,Ye=le.Hc;if(0<I&&(n(W,K-32,Ee[Ue].y,0,16),n(ee,oe-32,Ee[Ue].f,0,8),n(Ae,Ve-32,Ee[Ue].ea,0,8)),le.Za){var it=W,ct=K-32+16;for(0<I&&(k>=h.za-1?i(it,ct,Ee[Ue].y[15],4):n(it,ct,Ee[Ue+1].y,0,4)),S=0;4>S;S++)it[ct+128+S]=it[ct+256+S]=it[ct+384+S]=it[ct+0+S];for(S=0;16>S;++S,Ye<<=2)it=W,ct=K+m1[S],na[le.Ob[S]](it,ct),wc(Ye,nt,16*+S,it,ct)}else if(it=_c(k,I,le.Ob[0]),xs[it](W,K),Ye!=0)for(S=0;16>S;++S,Ye<<=2)wc(Ye,nt,16*+S,W,K+m1[S]);for(S=le.Gc,it=_c(k,I,le.Dd),Ya[it](ee,oe),Ya[it](Ae,Ve),Ye=nt,it=ee,ct=oe,255&(le=0|S)&&(170&le?nl(Ye,256,it,ct):Cc(Ye,256,it,ct)),le=Ae,Ye=Ve,255&(S>>=8)&&(170&S?nl(nt,320,le,Ye):Cc(nt,320,le,Ye)),I<h.Ub-1&&(n(Ee[Ue].y,0,W,K+480,16),n(Ee[Ue].f,0,ee,oe+224,8),n(Ee[Ue].ea,0,Ae,Ve+224,8)),S=8*U*h.B,Ee=h.sa,Ue=h.ta+16*k+16*U*h.R,nt=h.qa,le=h.ra+8*k+S,Ye=h.Ha,it=h.Ia+8*k+S,S=0;16>S;++S)n(Ee,Ue+S*h.R,W,K+32*S,16);for(S=0;8>S;++S)n(nt,le+S*h.B,ee,oe+32*S,8),n(Ye,it+S*h.B,Ae,Ve+32*S,8)}}function Zo(h,p,S,k,I,U,W,K,ee){var oe=[0],Ae=[0],Ve=0,le=ee!=null?ee.kd:0,Ee=ee??new er;if(h==null||12>S)return 7;Ee.data=h,Ee.w=p,Ee.ha=S,p=[p],S=[S],Ee.gb=[Ee.gb];e:{var Ue=p,nt=S,Ye=Ee.gb;if(e(h!=null),e(nt!=null),e(Ye!=null),Ye[0]=0,12<=nt[0]&&!r(h,Ue[0],"RIFF")){if(r(h,Ue[0]+8,"WEBP")){Ye=3;break e}var it=Fe(h,Ue[0]+4);if(12>it||4294967286<it){Ye=3;break e}if(le&&it>nt[0]-8){Ye=7;break e}Ye[0]=it,Ue[0]+=12,nt[0]-=12}Ye=0}if(Ye!=0)return Ye;for(it=0<Ee.gb[0],S=S[0];;){e:{var ct=h;nt=p,Ye=S;var bt=oe,pt=Ae,Xt=Ue=[0];if((Vt=Ve=[Ve])[0]=0,8>Ye[0])Ye=7;else{if(!r(ct,nt[0],"VP8X")){if(Fe(ct,nt[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var Wt=Fe(ct,nt[0]+8),cr=1+He(ct,nt[0]+12);if(2147483648<=cr*(ct=1+He(ct,nt[0]+15))){Ye=3;break e}Xt!=null&&(Xt[0]=Wt),bt!=null&&(bt[0]=cr),pt!=null&&(pt[0]=ct),nt[0]+=18,Ye[0]-=18,Vt[0]=1}Ye=0}}if(Ve=Ve[0],Ue=Ue[0],Ye!=0)return Ye;if(nt=!!(2&Ue),!it&&Ve)return 3;if(U!=null&&(U[0]=!!(16&Ue)),W!=null&&(W[0]=nt),K!=null&&(K[0]=0),W=oe[0],Ue=Ae[0],Ve&&nt&&ee==null){Ye=0;break}if(4>S){Ye=7;break}if(it&&Ve||!it&&!Ve&&!r(h,p[0],"ALPH")){S=[S],Ee.na=[Ee.na],Ee.P=[Ee.P],Ee.Sa=[Ee.Sa];e:{Wt=h,Ye=p,it=S;var Vt=Ee.gb;bt=Ee.na,pt=Ee.P,Xt=Ee.Sa,cr=22,e(Wt!=null),e(it!=null),ct=Ye[0];var mr=it[0];for(e(bt!=null),e(Xt!=null),bt[0]=null,pt[0]=null,Xt[0]=0;;){if(Ye[0]=ct,it[0]=mr,8>mr){Ye=7;break e}var _n=Fe(Wt,ct+4);if(4294967286<_n){Ye=3;break e}var ur=8+_n+1&-2;if(cr+=ur,0<Vt&&cr>Vt){Ye=3;break e}if(!r(Wt,ct,"VP8 ")||!r(Wt,ct,"VP8L")){Ye=0;break e}if(mr[0]<ur){Ye=7;break e}r(Wt,ct,"ALPH")||(bt[0]=Wt,pt[0]=ct+8,Xt[0]=_n),ct+=ur,mr-=ur}}if(S=S[0],Ee.na=Ee.na[0],Ee.P=Ee.P[0],Ee.Sa=Ee.Sa[0],Ye!=0)break}S=[S],Ee.Ja=[Ee.Ja],Ee.xa=[Ee.xa];e:if(Vt=h,Ye=p,it=S,bt=Ee.gb[0],pt=Ee.Ja,Xt=Ee.xa,Wt=Ye[0],ct=!r(Vt,Wt,"VP8 "),cr=!r(Vt,Wt,"VP8L"),e(Vt!=null),e(it!=null),e(pt!=null),e(Xt!=null),8>it[0])Ye=7;else{if(ct||cr){if(Vt=Fe(Vt,Wt+4),12<=bt&&Vt>bt-12){Ye=3;break e}if(le&&Vt>it[0]-8){Ye=7;break e}pt[0]=Vt,Ye[0]+=8,it[0]-=8,Xt[0]=cr}else Xt[0]=5<=it[0]&&Vt[Wt+0]==47&&!(Vt[Wt+4]>>5),pt[0]=it[0];Ye=0}if(S=S[0],Ee.Ja=Ee.Ja[0],Ee.xa=Ee.xa[0],p=p[0],Ye!=0)break;if(4294967286<Ee.Ja)return 3;if(K==null||nt||(K[0]=Ee.xa?2:1),W=[W],Ue=[Ue],Ee.xa){if(5>S){Ye=7;break}K=W,le=Ue,nt=U,h==null||5>S?h=0:5<=S&&h[p+0]==47&&!(h[p+4]>>5)?(it=[0],Vt=[0],bt=[0],ye(pt=new q,h,p,S),re(pt,it,Vt,bt)?(K!=null&&(K[0]=it[0]),le!=null&&(le[0]=Vt[0]),nt!=null&&(nt[0]=bt[0]),h=1):h=0):h=0}else{if(10>S){Ye=7;break}K=Ue,h==null||10>S||!Wr(h,p+3,S-3)?h=0:(le=h[p+0]|h[p+1]<<8|h[p+2]<<16,nt=16383&(h[p+7]<<8|h[p+6]),h=16383&(h[p+9]<<8|h[p+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=Ee.Ja||!nt||!h?h=0:(W&&(W[0]=nt),K&&(K[0]=h),h=1))}if(!h||(W=W[0],Ue=Ue[0],Ve&&(oe[0]!=W||Ae[0]!=Ue)))return 3;ee!=null&&(ee[0]=Ee,ee.offset=p-ee.w,e(4294967286>p-ee.w),e(ee.offset==ee.ha-S));break}return Ye==0||Ye==7&&Ve&&ee==null?(U!=null&&(U[0]|=Ee.na!=null&&0<Ee.na.length),k!=null&&(k[0]=W),I!=null&&(I[0]=Ue),0):Ye}function gi(h,p,S){var k=p.width,I=p.height,U=0,W=0,K=k,ee=I;if(p.Da=h!=null&&0<h.Da,p.Da&&(K=h.cd,ee=h.bd,U=h.v,W=h.j,11>S||(U&=-2,W&=-2),0>U||0>W||0>=K||0>=ee||U+K>k||W+ee>I))return 0;if(p.v=U,p.j=W,p.va=U+K,p.o=W+ee,p.U=K,p.T=ee,p.da=h!=null&&0<h.da,p.da){if(!We(K,ee,S=[h.ib],U=[h.hb]))return 0;p.ib=S[0],p.hb=U[0]}return p.ob=h!=null&&h.ob,p.Kb=h==null||!h.Sd,p.da&&(p.ob=p.ib<3*k/4&&p.hb<3*I/4,p.Kb=0),1}function pi(h){if(h==null)return 2;if(11>h.S){var p=h.f.RGBA;p.fb+=(h.height-1)*p.A,p.A=-p.A}else p=h.f.kb,h=h.height,p.O+=(h-1)*p.fa,p.fa=-p.fa,p.N+=(h-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(h-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(h-1)*p.lb,p.lb=-p.lb);return 0}function fo(h,p,S,k){if(k==null||0>=h||0>=p)return 2;if(S!=null){if(S.Da){var I=S.cd,U=S.bd,W=-2&S.v,K=-2&S.j;if(0>W||0>K||0>=I||0>=U||W+I>h||K+U>p)return 2;h=I,p=U}if(S.da){if(!We(h,p,I=[S.ib],U=[S.hb]))return 2;h=I[0],p=U[0]}}k.width=h,k.height=p;e:{var ee=k.width,oe=k.height;if(h=k.S,0>=ee||0>=oe||!(h>=Yu&&13>h))h=2;else{if(0>=k.Rd&&k.sd==null){W=U=I=p=0;var Ae=(K=ee*v1[h])*oe;if(11>h||(U=(oe+1)/2*(p=(ee+1)/2),h==12&&(W=(I=ee)*oe)),(oe=a(Ae+2*U+W))==null){h=1;break e}k.sd=oe,11>h?((ee=k.f.RGBA).eb=oe,ee.fb=0,ee.A=K,ee.size=Ae):((ee=k.f.kb).y=oe,ee.O=0,ee.fa=K,ee.Fd=Ae,ee.f=oe,ee.N=0+Ae,ee.Ab=p,ee.Cd=U,ee.ea=oe,ee.W=0+Ae+U,ee.Db=p,ee.Ed=U,h==12&&(ee.F=oe,ee.J=0+Ae+2*U),ee.Tc=W,ee.lb=I)}if(p=1,I=k.S,U=k.width,W=k.height,I>=Yu&&13>I)if(11>I)h=k.f.RGBA,p&=(K=Math.abs(h.A))*(W-1)+U<=h.size,p&=K>=U*v1[I],p&=h.eb!=null;else{h=k.f.kb,K=(U+1)/2,Ae=(W+1)/2,ee=Math.abs(h.fa),oe=Math.abs(h.Ab);var Ve=Math.abs(h.Db),le=Math.abs(h.lb),Ee=le*(W-1)+U;p&=ee*(W-1)+U<=h.Fd,p&=oe*(Ae-1)+K<=h.Cd,p=(p&=Ve*(Ae-1)+K<=h.Ed)&ee>=U&oe>=K&Ve>=K,p&=h.y!=null,p&=h.f!=null,p&=h.ea!=null,I==12&&(p&=le>=U,p&=Ee<=h.Tc,p&=h.F!=null)}else p=0;h=p?0:2}}return h!=0||S!=null&&S.fd&&(h=pi(k)),h}var ja=64,ys=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sc=24,bs=32,an=8,Af=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(h){return h},$.Predictor2=function(h,p,S){return p[S+0]},$.Predictor3=function(h,p,S){return p[S+1]},$.Predictor4=function(h,p,S){return p[S-1]},$.Predictor5=function(h,p,S){return Ft(Ft(h,p[S+1]),p[S+0])},$.Predictor6=function(h,p,S){return Ft(h,p[S-1])},$.Predictor7=function(h,p,S){return Ft(h,p[S+0])},$.Predictor8=function(h,p,S){return Ft(p[S-1],p[S+0])},$.Predictor9=function(h,p,S){return Ft(p[S+0],p[S+1])},$.Predictor10=function(h,p,S){return Ft(Ft(h,p[S-1]),Ft(p[S+0],p[S+1]))},$.Predictor11=function(h,p,S){var k=p[S+0];return 0>=_t(k>>24&255,h>>24&255,(p=p[S-1])>>24&255)+_t(k>>16&255,h>>16&255,p>>16&255)+_t(k>>8&255,h>>8&255,p>>8&255)+_t(255&k,255&h,255&p)?k:h},$.Predictor12=function(h,p,S){var k=p[S+0];return(Mt((h>>24&255)+(k>>24&255)-((p=p[S-1])>>24&255))<<24|Mt((h>>16&255)+(k>>16&255)-(p>>16&255))<<16|Mt((h>>8&255)+(k>>8&255)-(p>>8&255))<<8|Mt((255&h)+(255&k)-(255&p)))>>>0},$.Predictor13=function(h,p,S){var k=p[S-1];return(tt((h=Ft(h,p[S+0]))>>24&255,k>>24&255)<<24|tt(h>>16&255,k>>16&255)<<16|tt(h>>8&255,k>>8&255)<<8|tt(255&h,255&k))>>>0};var Na=$.PredictorAdd0;$.PredictorAdd1=Bt,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var Ca=$.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var el,jc=$.ColorIndexInverseTransform,tl=$.MapARGB,rl=$.VP8LColorIndexInverseTransformAlpha,go=$.MapAlpha,po=$.VP8LPredictorsAdd=[];po.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var Ha,Nc,Li,La,Dr,Ir,sn,on,Ga,nl,Aa,Cc,Um,$m,qm,zm,Wm,Hm,Gm,Ym,Vm,Jm,Km,Qm,Lc,Xm,Zm,e1,t1=a(511),r1=a(2041),n1=a(225),i1=a(767),a1=0,kf=r1,Gu=n1,Ai=i1,Hi=t1,Yu=0,Vu=1,s1=2,Ju=3,Ku=4,Pf=5,o1=6,Ef=7,Ff=8,Qu=9,Tf=10,sw=[2,3,7],ow=[3,3,11],l1=[280,256,256,256,40],lw=[0,1,1,1,0],cw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uw=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],dw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hw=8,Df=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],If=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ac=null,fw=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],gw=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],c1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],pw=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mw=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vw=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yw=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xs=[],na=[],Ya=[],bw=1,u1=2,_s=[],Gi=[];ra("UpsampleRgbLinePair",Wa,3),ra("UpsampleBgrLinePair",Qo,3),ra("UpsampleRgbaLinePair",Hu,4),ra("UpsampleBgraLinePair",Xo,4),ra("UpsampleArgbLinePair",Wu,4),ra("UpsampleRgba4444LinePair",ni,2),ra("UpsampleRgb565LinePair",xc,2);var xw=$.UpsampleRgbLinePair,_w=$.UpsampleBgrLinePair,d1=$.UpsampleRgbaLinePair,h1=$.UpsampleBgraLinePair,f1=$.UpsampleArgbLinePair,g1=$.UpsampleRgba4444LinePair,ww=$.UpsampleRgb565LinePair,Xu=16,Zu=1<<Xu-1,kc=-227,Rf=482,Sw=6,p1=0,jw=a(256),Nw=a(256),Cw=a(256),Lw=a(256),Aw=a(Rf-kc),kw=a(Rf-kc);Wi("YuvToRgbRow",Wa,3),Wi("YuvToBgrRow",Qo,3),Wi("YuvToRgbaRow",Hu,4),Wi("YuvToBgraRow",Xo,4),Wi("YuvToArgbRow",Wu,4),Wi("YuvToRgba4444Row",ni,2),Wi("YuvToRgb565Row",xc,2);var m1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ed=[0,2,8],Pw=[8,7,6,4,4,2,2,2,1,1,1,1],Ew=1;this.WebPDecodeRGBA=function(h,p,S,k,I){var U=Vu,W=new Kt,K=new Qt;W.ba=K,K.S=U,K.width=[K.width],K.height=[K.height];var ee=K.width,oe=K.height,Ae=new Ut;if(Ae==null||h==null)var Ve=2;else e(Ae!=null),Ve=Zo(h,p,S,Ae.width,Ae.height,Ae.Pd,Ae.Qd,Ae.format,null);if(Ve!=0?ee=0:(ee!=null&&(ee[0]=Ae.width[0]),oe!=null&&(oe[0]=Ae.height[0]),ee=1),ee){K.width=K.width[0],K.height=K.height[0],k!=null&&(k[0]=K.width),I!=null&&(I[0]=K.height);e:{if(k=new jt,(I=new er).data=h,I.w=p,I.ha=S,I.kd=1,p=[0],e(I!=null),((h=Zo(I.data,I.w,I.ha,null,null,null,p,null,I))==0||h==7)&&p[0]&&(h=4),(p=h)==0){if(e(W!=null),k.data=I.data,k.w=I.w+I.offset,k.ha=I.ha-I.offset,k.put=Pt,k.ac=Xe,k.bc=Zt,k.ma=W,I.xa){if((h=ie())==null){W=1;break e}if(function(le,Ee){var Ue=[0],nt=[0],Ye=[0];t:for(;;){if(le==null)return 0;if(Ee==null)return le.a=2,0;if(le.l=Ee,le.a=0,ye(le.m,Ee.data,Ee.w,Ee.ha),!re(le.m,Ue,nt,Ye)){le.a=3;break t}if(le.xb=u1,Ee.width=Ue[0],Ee.height=nt[0],!_e(Ue[0],nt[0],1,le,null))break t;return 1}return e(le.a!=0),0}(h,k)){if(k=(p=fo(k.width,k.height,W.Oa,W.ba))==0){t:{k=h;r:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((S=k.l)!=null),e((I=S.ma)!=null),k.xb!=0){if(k.ca=I.ba,k.tb=I.tb,e(k.ca!=null),!gi(I.Oa,S,Ju)){k.a=2;break r}if(!T(k,S.width)||S.da)break r;if((S.da||ze(k.ca.S))&&ho(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&ho()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!se(k.s.vb,k.s.Wa.Xa)){k.a=1;break r}k.xb=0}if(!L(k,k.V,k.Ba,k.c,k.i,S.o,ar))break r;I.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(p=h.a)}else p=h.a}else{if((h=new Ct)==null){W=1;break e}if(h.Fa=I.na,h.P=I.P,h.qc=I.Sa,_r(h,k)){if((p=fo(k.width,k.height,W.Oa,W.ba))==0){if(h.Aa=0,S=W.Oa,e((I=h)!=null),S!=null){if(0<(ee=0>(ee=S.Md)?0:100<ee?255:255*ee/100)){for(oe=Ae=0;4>oe;++oe)12>(Ve=I.pb[oe]).lc&&(Ve.ia=ee*Pw[0>Ve.lc?0:Ve.lc]>>3),Ae|=Ve.ia;Ae&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=S.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function(le,Ee){if(le==null)return 0;if(Ee==null)return Ot(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!_r(le,Ee))return 0;if(e(le.cb),Ee.ac==null||Ee.ac(Ee)){Ee.ob&&(le.L=0);var Ue=ed[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=Ee.v-Ue>>4,le.zb=Ee.j-Ue>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=Ee.o+15+Ue>>4,le.Hb=Ee.va+15+Ue>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var nt=le.ed;for(Ue=0;4>Ue;++Ue){var Ye;if(le.Qa.Cb){var it=le.Qa.Lb[Ue];le.Qa.Fb||(it+=nt.Tb)}else it=nt.Tb;for(Ye=0;1>=Ye;++Ye){var ct=le.gd[Ue][Ye],bt=it;if(nt.Pc&&(bt+=nt.vd[0],Ye&&(bt+=nt.od[0])),0<(bt=0>bt?0:63<bt?63:bt)){var pt=bt;0<nt.wb&&(pt=4<nt.wb?pt>>2:pt>>1)>9-nt.wb&&(pt=9-nt.wb),1>pt&&(pt=1),ct.dd=pt,ct.tc=2*bt+pt,ct.ld=40<=bt?2:15<=bt?1:0}else ct.tc=0;ct.La=Ye}}}Ue=0}else Ot(le,6,"Frame setup failed"),Ue=le.a;if(Ue=Ue==0){if(Ue){le.$c=0,0<le.Aa||(le.Ic=Ew);t:{Ue=le.Ic,nt=4*(pt=le.za);var Xt=32*pt,Wt=pt+1,cr=0<le.L?pt*(0<le.Aa?2:1):0,Vt=(le.Aa==2?2:1)*pt;if((ct=nt+832+(Ye=3*(16*Ue+ed[le.L])/2*Xt)+(it=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=ct)Ue=0;else{if(ct>le.Vb){if(le.Vb=0,le.Ec=a(ct),le.Fc=0,le.Ec==null){Ue=Ot(le,1,"no memory during frame initialization.");break t}le.Vb=ct}ct=le.Ec,bt=le.Fc,le.Ac=ct,le.Bc=bt,bt+=nt,le.Gd=o(Xt,wt),le.Hd=0,le.rb=o(Wt+1,je),le.sb=1,le.wa=cr?o(cr,ge):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=pt),e(!0),le.oc=ct,le.pc=bt,bt+=832,le.ya=o(Vt,Me),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=pt),le.R=16*pt,le.B=8*pt,pt=(Xt=ed[le.L])*le.R,Xt=Xt/2*le.B,le.sa=ct,le.ta=bt+pt,le.qa=le.sa,le.ra=le.ta+16*Ue*le.R+Xt,le.Ha=le.qa,le.Ia=le.ra+8*Ue*le.B+Xt,le.$c=0,bt+=Ye,le.mb=it?ct:null,le.nb=it?bt:null,e(bt+it<=le.Fc+le.Vb),Sr(le),i(le.Ac,le.Bc,0,nt),Ue=1}}if(Ue){if(Ee.ka=0,Ee.y=le.sa,Ee.O=le.ta,Ee.f=le.qa,Ee.N=le.ra,Ee.ea=le.Ha,Ee.Vd=le.Ia,Ee.fa=le.R,Ee.Rc=le.B,Ee.F=null,Ee.J=0,!a1){for(Ue=-255;255>=Ue;++Ue)t1[255+Ue]=0>Ue?-Ue:Ue;for(Ue=-1020;1020>=Ue;++Ue)r1[1020+Ue]=-128>Ue?-128:127<Ue?127:Ue;for(Ue=-112;112>=Ue;++Ue)n1[112+Ue]=-16>Ue?-16:15<Ue?15:Ue;for(Ue=-255;510>=Ue;++Ue)i1[255+Ue]=0>Ue?0:255<Ue?255:Ue;a1=1}sn=Ho,on=ta,nl=Wo,Aa=Ni,Cc=io,Ga=_a,Um=y,$m=R,qm=Re,zm=st,Wm=ue,Hm=we,Gm=mt,Ym=Yt,Vm=mc,Jm=uo,Km=vc,Qm=yc,na[0]=wf,na[1]=cc,na[2]=xf,na[3]=_f,na[4]=Sf,na[5]=$a,na[6]=Ua,na[7]=jf,na[8]=Go,na[9]=Nf,xs[0]=gs,xs[1]=vf,xs[2]=yf,xs[3]=uc,xs[4]=bf,xs[5]=so,xs[6]=dc,Ya[0]=Vo,Ya[1]=mf,Ya[2]=hc,Ya[3]=oo,Ya[4]=fc,Ya[5]=Cf,Ya[6]=gc,Ue=1}else Ue=0}Ue&&(Ue=function(mr,_n){for(mr.M=0;mr.M<mr.Va;++mr.M){var ur,Jt=mr.Jc[mr.M&mr.Xb],Rt=mr.m,ln=mr;for(ur=0;ur<ln.za;++ur){var ir=Rt,yr=ln,Ur=yr.Ac,Bn=yr.Bc+4*ur,ii=yr.zc,Xr=yr.ya[yr.aa+ur];if(yr.Qa.Bb?Xr.$b=qe(ir,yr.Pa.jb[0])?2+qe(ir,yr.Pa.jb[2]):qe(ir,yr.Pa.jb[1]):Xr.$b=0,yr.kc&&(Xr.Ad=qe(ir,yr.Bd)),Xr.Za=!qe(ir,145)+0,Xr.Za){var Hn=Xr.Ob,ai=0;for(yr=0;4>yr;++yr){var wn,br=ii[0+yr];for(wn=0;4>wn;++wn){br=mw[Ur[Bn+wn]][br];for(var Nr=c1[qe(ir,br[0])];0<Nr;)Nr=c1[2*Nr+qe(ir,br[Nr])];br=-Nr,Ur[Bn+wn]=br}n(Hn,ai,Ur,Bn,4),ai+=4,ii[0+yr]=br}}else br=qe(ir,156)?qe(ir,128)?1:3:qe(ir,163)?2:0,Xr.Ob[0]=br,i(Ur,Bn,br,4),i(ii,0,br,4);Xr.Dd=qe(ir,142)?qe(ir,114)?qe(ir,183)?1:3:2:0}if(ln.m.Ka)return Ot(mr,7,"Premature end-of-partition0 encountered.");for(;mr.ja<mr.za;++mr.ja){if(ln=Jt,ir=(Rt=mr).rb[Rt.sb-1],Ur=Rt.rb[Rt.sb+Rt.ja],ur=Rt.ya[Rt.aa+Rt.ja],Bn=Rt.kc?ur.Ad:0)ir.la=Ur.la=0,ur.Za||(ir.Na=Ur.Na=0),ur.Hc=0,ur.Gc=0,ur.ia=0;else{var Zr,Cr;if(ir=Ur,Ur=ln,Bn=Rt.Pa.Xc,ii=Rt.ya[Rt.aa+Rt.ja],Xr=Rt.pb[ii.$b],yr=ii.ad,Hn=0,ai=Rt.rb[Rt.sb-1],br=wn=0,i(yr,Hn,0,384),ii.Za)var Mn=0,ia=Bn[3];else{Nr=a(16);var cn=ir.Na+ai.Na;if(cn=Ac(Ur,Bn[1],cn,Xr.Eb,0,Nr,0),ir.Na=ai.Na=(0<cn)+0,1<cn)sn(Nr,0,yr,Hn);else{var mi=Nr[0]+3>>3;for(Nr=0;256>Nr;Nr+=16)yr[Hn+Nr]=mi}Mn=1,ia=Bn[0]}var Fr=15&ir.la,Sn=15&ai.la;for(Nr=0;4>Nr;++Nr){var ki=1&Sn;for(mi=Cr=0;4>mi;++mi)Fr=Fr>>1|(ki=(cn=Ac(Ur,ia,cn=ki+(1&Fr),Xr.Sc,Mn,yr,Hn))>Mn)<<7,Cr=Cr<<2|(3<cn?3:1<cn?2:yr[Hn+0]!=0),Hn+=16;Fr>>=4,Sn=Sn>>1|ki<<7,wn=(wn<<8|Cr)>>>0}for(ia=Fr,Mn=Sn>>4,Zr=0;4>Zr;Zr+=2){for(Cr=0,Fr=ir.la>>4+Zr,Sn=ai.la>>4+Zr,Nr=0;2>Nr;++Nr){for(ki=1&Sn,mi=0;2>mi;++mi)cn=ki+(1&Fr),Fr=Fr>>1|(ki=0<(cn=Ac(Ur,Bn[2],cn,Xr.Qc,0,yr,Hn)))<<3,Cr=Cr<<2|(3<cn?3:1<cn?2:yr[Hn+0]!=0),Hn+=16;Fr>>=2,Sn=Sn>>1|ki<<5}br|=Cr<<4*Zr,ia|=Fr<<4<<Zr,Mn|=(240&Sn)<<Zr}ir.la=ia,ai.la=Mn,ii.Hc=wn,ii.Gc=br,ii.ia=43690&br?0:Xr.ia,Bn=!(wn|br)}if(0<Rt.L&&(Rt.wa[Rt.Y+Rt.ja]=Rt.gd[ur.$b][ur.Za],Rt.wa[Rt.Y+Rt.ja].La|=!Bn),ln.Ka)return Ot(mr,7,"Premature end-of-file encountered.")}if(Sr(mr),Rt=_n,ln=1,ur=(Jt=mr).D,ir=0<Jt.L&&Jt.M>=Jt.zb&&Jt.M<=Jt.Va,Jt.Aa==0)t:{if(ur.M=Jt.M,ur.uc=ir,vs(Jt,ur),ln=1,ur=(Cr=Jt.D).Nb,ir=(br=ed[Jt.L])*Jt.R,Ur=br/2*Jt.B,Nr=16*ur*Jt.R,mi=8*ur*Jt.B,Bn=Jt.sa,ii=Jt.ta-ir+Nr,Xr=Jt.qa,yr=Jt.ra-Ur+mi,Hn=Jt.Ha,ai=Jt.Ia-Ur+mi,Sn=(Fr=Cr.M)==0,wn=Fr>=Jt.Va-1,Jt.Aa==2&&vs(Jt,Cr),Cr.uc)for(ki=(cn=Jt).D.M,e(cn.D.uc),Cr=cn.yb;Cr<cn.Hb;++Cr){Mn=Cr,ia=ki;var si=(Pi=(Un=cn).D).Nb;Zr=Un.R;var Pi=Pi.wa[Pi.Y+Mn],Ei=Un.sa,vi=Un.ta+16*si*Zr+16*Mn,Fi=Pi.dd,Rr=Pi.tc;if(Rr!=0)if(e(3<=Rr),Un.L==1)0<Mn&&Jm(Ei,vi,Zr,Rr+4),Pi.La&&Qm(Ei,vi,Zr,Rr),0<ia&&Vm(Ei,vi,Zr,Rr+4),Pi.La&&Km(Ei,vi,Zr,Rr);else{var Ti=Un.B,aa=Un.qa,mo=Un.ra+8*si*Ti+8*Mn,Va=Un.Ha,Un=Un.Ia+8*si*Ti+8*Mn;si=Pi.ld,0<Mn&&($m(Ei,vi,Zr,Rr+4,Fi,si),zm(aa,mo,Va,Un,Ti,Rr+4,Fi,si)),Pi.La&&(Hm(Ei,vi,Zr,Rr,Fi,si),Ym(aa,mo,Va,Un,Ti,Rr,Fi,si)),0<ia&&(Um(Ei,vi,Zr,Rr+4,Fi,si),qm(aa,mo,Va,Un,Ti,Rr+4,Fi,si)),Pi.La&&(Wm(Ei,vi,Zr,Rr,Fi,si),Gm(aa,mo,Va,Un,Ti,Rr,Fi,si))}}if(Jt.ia&&alert("todo:DitherRow"),Rt.put!=null){if(Cr=16*Fr,Fr=16*(Fr+1),Sn?(Rt.y=Jt.sa,Rt.O=Jt.ta+Nr,Rt.f=Jt.qa,Rt.N=Jt.ra+mi,Rt.ea=Jt.Ha,Rt.W=Jt.Ia+mi):(Cr-=br,Rt.y=Bn,Rt.O=ii,Rt.f=Xr,Rt.N=yr,Rt.ea=Hn,Rt.W=ai),wn||(Fr-=br),Fr>Rt.o&&(Fr=Rt.o),Rt.F=null,Rt.J=null,Jt.Fa!=null&&0<Jt.Fa.length&&Cr<Fr&&(Rt.J=On(Jt,Rt,Cr,Fr-Cr),Rt.F=Jt.mb,Rt.F==null&&Rt.F.length==0)){ln=Ot(Jt,3,"Could not decode alpha data.");break t}Cr<Rt.j&&(br=Rt.j-Cr,Cr=Rt.j,e(!(1&br)),Rt.O+=Jt.R*br,Rt.N+=Jt.B*(br>>1),Rt.W+=Jt.B*(br>>1),Rt.F!=null&&(Rt.J+=Rt.width*br)),Cr<Fr&&(Rt.O+=Rt.v,Rt.N+=Rt.v>>1,Rt.W+=Rt.v>>1,Rt.F!=null&&(Rt.J+=Rt.v),Rt.ka=Cr-Rt.j,Rt.U=Rt.va-Rt.v,Rt.T=Fr-Cr,ln=Rt.put(Rt))}ur+1!=Jt.Ic||wn||(n(Jt.sa,Jt.ta-ir,Bn,ii+16*Jt.R,ir),n(Jt.qa,Jt.ra-Ur,Xr,yr+8*Jt.B,Ur),n(Jt.Ha,Jt.Ia-Ur,Hn,ai+8*Jt.B,Ur))}if(!ln)return Ot(mr,6,"Output aborted.")}return 1}(le,Ee)),Ee.bc!=null&&Ee.bc(Ee),Ue&=1}return Ue?(le.cb=0,Ue):0})(h,k)||(p=h.a)}}else p=h.a}p==0&&W.Oa!=null&&W.Oa.fd&&(p=pi(W.ba))}W=p}U=W!=0?null:11>U?K.f.RGBA.eb:K.f.kb.y}else U=null;return U};var v1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u($,Z){for(var D="",Y=0;Y<4;Y++)D+=String.fromCharCode($[Z++]);return D}function d($,Z){return $[Z+0]|$[Z+1]<<8}function g($,Z){return($[Z+0]|$[Z+1]<<8|$[Z+2]<<16)>>>0}function m($,Z){return($[Z+0]|$[Z+1]<<8|$[Z+2]<<16|$[Z+3]<<24)>>>0}new c;var f=[0],x=[0],j=[],_=new c,v=t,C=function($,Z){var D={},Y=0,ce=!1,B=0,H=0;if(D.frames=[],!function(P,q){for(var X=0;X<4;X++)if(P[q+X]!="RIFF".charCodeAt(X))return!0;return!1}($,Z)){for(m($,Z+=4),Z+=8;Z<$.length;){var he=u($,Z),Le=m($,Z+=4);Z+=4;var te=Le+(1&Le);switch(he){case"VP8 ":case"VP8L":D.frames[Y]===void 0&&(D.frames[Y]={}),(fe=D.frames[Y]).src_off=ce?H:Z-8,fe.src_size=B+Le+8,Y++,ce&&(ce=!1,B=0,H=0);break;case"VP8X":(fe=D.header={}).feature_flags=$[Z];var ye=Z+4;fe.canvas_width=1+g($,ye),ye+=3,fe.canvas_height=1+g($,ye),ye+=3;break;case"ALPH":ce=!0,B=te+8,H=Z-8;break;case"ANIM":(fe=D.header).bgcolor=m($,Z),ye=Z+4,fe.loop_count=d($,ye),ye+=2;break;case"ANMF":var ve,fe;(fe=D.frames[Y]={}).offset_x=2*g($,Z),Z+=3,fe.offset_y=2*g($,Z),Z+=3,fe.width=1+g($,Z),Z+=3,fe.height=1+g($,Z),Z+=3,fe.duration=g($,Z),Z+=3,ve=$[Z++],fe.dispose=1&ve,fe.blend=ve>>1&1}he!="ANMF"&&(Z+=te)}return D}}(v,0);C.response=v,C.rgbaoutput=!0,C.dataurl=!1;var N=C.header?C.header:null,A=C.frames?C.frames:null;if(N){N.loop_counter=N.loop_count,f=[N.canvas_height],x=[N.canvas_width];for(var O=0;O<A.length&&A[O].blend!=0;O++);}var G=A[0],V=_.WebPDecodeRGBA(v,G.src_off,G.src_size,x,f);G.rgba=V,G.imgwidth=x[0],G.imgheight=f[0];for(var F=0;F<x[0]*f[0]*4;F++)j[F]=V[F];return this.width=x,this.height=f,this.data=j,this}(function(t){var e,r,n,i,a,o,l,c,u,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var g=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=P;Object.defineProperty(this,"pdf",{get:function(){return q}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Fe){X=!!Fe}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(Fe){ae=!!Fe}});var be=0;Object.defineProperty(this,"posX",{get:function(){return be},set:function(Fe){isNaN(Fe)||(be=Fe)}});var Ne=0;Object.defineProperty(this,"posY",{get:function(){return Ne},set:function(Fe){isNaN(Fe)||(Ne=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Fe){var se;typeof Fe=="number"?se=[Fe,Fe,Fe,Fe]:((se=new Array(4))[0]=Fe[0],se[1]=Fe.length>=2?Fe[1]:se[0],se[2]=Fe.length>=3?Fe[2]:se[0],se[3]=Fe.length>=4?Fe[3]:se[1]),u.margin=se}});var De=!1;Object.defineProperty(this,"autoPaging",{get:function(){return De},set:function(Fe){De=Fe}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(Fe){ke=Fe}});var qe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return qe},set:function(Fe){qe=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Fe){Fe instanceof d&&(u=Fe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Fe){u.path=Fe}});var Ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ke},set:function(Fe){Ke=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var se;se=m(Fe),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var se=m(Fe);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var dt=null,He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(Fe){dt=null,He=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var se;if(this.ctx.font=Fe,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var Et=se[1];se[2];var At=se[3],We=se[4];se[5];var Oe=se[6],ht=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(ht==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:ht==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var ot=function(yt){var It,rt,$t=[],$e=yt.trim();if($e==="")return Wg;if($e in hy)return[hy[$e]];for(;$e!=="";){switch(rt=null,It=($e=gy($e)).charAt(0)){case'"':case"'":rt=O6($e.substring(1),It);break;default:rt=B6($e)}if(rt===null||($t.push(rt[0]),($e=gy(rt[1]))!==""&&$e.charAt(0)!==","))return Wg;$e=$e.replace(/^,/,"")}return $t}(Oe);if(this.fontFaces){var xt=function(yt,It){if(dt===null){var rt=function($t){var $e=[];return Object.keys($t).forEach(function(me){$t[me].forEach(function(Be){var at=null;switch(Be){case"bold":at={family:me,weight:"bold"};break;case"italic":at={family:me,style:"italic"};break;case"bolditalic":at={family:me,weight:"bold",style:"italic"};break;case"":case"normal":at={family:me}}at!==null&&(at.ref={name:me,style:Be},$e.push(at))})}),$e}(yt.getFontList());dt=function($t){for(var $e={},me=0;me<$t.length;++me){var Be=zg($t[me]),at=Be.family,Je=Be.stretch,ze=Be.style,Gt=Be.weight;$e[at]=$e[at]||{},$e[at][Je]=$e[at][Je]||{},$e[at][Je][ze]=$e[at][Je][ze]||{},$e[at][Je][ze][Gt]=Be}return $e}(rt.concat(It))}return dt}(this.pdf,this.fontFaces),Ft=ot.map(function(yt){return{family:yt,stretch:"normal",weight:At,style:Et}}),Mt=function(yt,It,rt){for(var $t=(rt=rt||{}).defaultFontFamily||"times",$e=Object.assign({},R6,rt.genericFontFamilies||{}),me=null,Be=null,at=0;at<It.length;++at)if($e[(me=zg(It[at])).family]&&(me.family=$e[me.family]),yt.hasOwnProperty(me.family)){Be=yt[me.family];break}if(!(Be=Be||yt[$t]))throw new Error("Could not find a font-family for the rule '"+fy(me)+"' and default family '"+$t+"'.");if(Be=function(Je,ze){if(ze[Je])return ze[Je];var Gt=y0[Je],qt=Gt<=y0.normal?-1:1,Qt=dy(ze,b_,Gt,qt);if(!Qt)throw new Error("Could not find a matching font-stretch value for "+Je);return Qt}(me.stretch,Be),Be=function(Je,ze){if(ze[Je])return ze[Je];for(var Gt=y_[Je],qt=0;qt<Gt.length;++qt)if(ze[Gt[qt]])return ze[Gt[qt]];throw new Error("Could not find a matching font-style for "+Je)}(me.style,Be),!(Be=function(Je,ze){if(ze[Je])return ze[Je];if(Je===400&&ze[500])return ze[500];if(Je===500&&ze[400])return ze[400];var Gt=I6[Je],qt=dy(ze,x_,Gt,Je<400?-1:1);if(!qt)throw new Error("Could not find a matching font-weight for value "+Je);return qt}(me.weight,Be)))throw new Error("Failed to resolve a font for the rule '"+fy(me)+"'.");return Be}(xt,Ft);this.pdf.setFont(Mt.ref.name,Mt.ref.style)}else{var tt="";(At==="bold"||parseInt(At,10)>=700||Et==="bold")&&(tt="bold"),Et==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var _t="",Bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vt=0;vt<ot.length;vt++){if(this.pdf.internal.getFont(ot[vt],tt,{noFallback:!0,disableWarning:!0})!==void 0){_t=ot[vt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(ot[vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_t=ot[vt],tt="bold";else if(this.pdf.internal.getFont(ot[vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_t=ot[vt],tt="normal";break}}if(_t===""){for(var kt=0;kt<ot.length;kt++)if(Bt[ot[kt]]){_t=Bt[ot[kt]];break}}_t=_t===""?"Times":_t,this.pdf.setFont(_t,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};g.prototype.setLineDash=function(P){this.lineDash=P},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){A.call(this,"fill",!1)},g.prototype.stroke=function(){A.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(P,q){if(isNaN(P)||isNaN(q))throw Tr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(P,q)},g.prototype.closePath=function(){var P=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Ar(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){P=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},g.prototype.lineTo=function(P,q){if(isNaN(P)||isNaN(q))throw Tr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},g.prototype.quadraticCurveTo=function(P,q,X,ae){if(isNaN(X)||isNaN(ae)||isNaN(P)||isNaN(q))throw Tr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var be=this.ctx.transform.applyToPoint(new o(X,ae)),Ne=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"qct",x1:Ne.x,y1:Ne.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},g.prototype.bezierCurveTo=function(P,q,X,ae,be,Ne){if(isNaN(be)||isNaN(Ne)||isNaN(P)||isNaN(q)||isNaN(X)||isNaN(ae))throw Tr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var De=this.ctx.transform.applyToPoint(new o(be,Ne)),ke=this.ctx.transform.applyToPoint(new o(P,q)),qe=this.ctx.transform.applyToPoint(new o(X,ae));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:qe.x,y2:qe.y,x:De.x,y:De.y}),this.ctx.lastPoint=new o(De.x,De.y)},g.prototype.arc=function(P,q,X,ae,be,Ne){if(isNaN(P)||isNaN(q)||isNaN(X)||isNaN(ae)||isNaN(be))throw Tr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ne=!!Ne,!this.ctx.transform.isIdentity){var De=this.ctx.transform.applyToPoint(new o(P,q));P=De.x,q=De.y;var ke=this.ctx.transform.applyToPoint(new o(0,X)),qe=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(ke.x-qe.x,2)+Math.pow(ke.y-qe.y,2))}Math.abs(be-ae)>=2*Math.PI&&(ae=0,be=2*Math.PI),this.path.push({type:"arc",x:P,y:q,radius:X,startAngle:ae,endAngle:be,counterclockwise:Ne})},g.prototype.arcTo=function(P,q,X,ae,be){throw new Error("arcTo not implemented.")},g.prototype.rect=function(P,q,X,ae){if(isNaN(P)||isNaN(q)||isNaN(X)||isNaN(ae))throw Tr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,q),this.lineTo(P+X,q),this.lineTo(P+X,q+ae),this.lineTo(P,q+ae),this.lineTo(P,q),this.lineTo(P+X,q),this.lineTo(P,q)},g.prototype.fillRect=function(P,q,X,ae){if(isNaN(P)||isNaN(q)||isNaN(X)||isNaN(ae))throw Tr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var be={};this.lineCap!=="butt"&&(be.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(be.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,q,X,ae),this.fill(),be.hasOwnProperty("lineCap")&&(this.lineCap=be.lineCap),be.hasOwnProperty("lineJoin")&&(this.lineJoin=be.lineJoin)}},g.prototype.strokeRect=function(P,q,X,ae){if(isNaN(P)||isNaN(q)||isNaN(X)||isNaN(ae))throw Tr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(P,q,X,ae),this.stroke())},g.prototype.clearRect=function(P,q,X,ae){if(isNaN(P)||isNaN(q)||isNaN(X)||isNaN(ae))throw Tr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,q,X,ae))},g.prototype.save=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},g.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var q,X,ae,be;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))q=0,X=0,ae=0,be=0;else{var Ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Ne!==null)q=parseInt(Ne[1]),X=parseInt(Ne[2]),ae=parseInt(Ne[3]),be=1;else if((Ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)q=parseInt(Ne[1]),X=parseInt(Ne[2]),ae=parseInt(Ne[3]),be=parseFloat(Ne[4]);else{if(be=1,typeof P=="string"&&P.charAt(0)!=="#"){var De=new d_(P);P=De.ok?De.toHex():"#000000"}P.length===4?(q=P.substring(1,2),q+=q,X=P.substring(2,3),X+=X,ae=P.substring(3,4),ae+=ae):(q=P.substring(1,3),X=P.substring(3,5),ae=P.substring(5,7)),q=parseInt(q,16),X=parseInt(X,16),ae=parseInt(ae,16)}}return{r:q,g:X,b:ae,a:be,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(P,q,X,ae){if(isNaN(q)||isNaN(X)||typeof P!="string")throw Tr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!f.call(this)){var be=te(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;Y.call(this,{text:P,x:q,y:X,scale:Ne,angle:be,align:this.textAlign,maxWidth:ae})}},g.prototype.strokeText=function(P,q,X,ae){if(isNaN(q)||isNaN(X)||typeof P!="string")throw Tr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ae=isNaN(ae)?void 0:ae;var be=te(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;Y.call(this,{text:P,x:q,y:X,scale:Ne,renderingMode:"stroke",angle:be,align:this.textAlign,maxWidth:ae})}},g.prototype.measureText=function(P){if(typeof P!="string")throw Tr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,X=this.pdf.internal.scaleFactor,ae=q.internal.getFontSize(),be=q.getStringUnitWidth(P)*ae/q.internal.scaleFactor;return new function(Ne){var De=(Ne=Ne||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return De}}),this}({width:be*=Math.round(96*X/72*1e4)/1e4})},g.prototype.scale=function(P,q){if(isNaN(P)||isNaN(q))throw Tr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(P,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},g.prototype.rotate=function(P){if(isNaN(P))throw Tr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},g.prototype.translate=function(P,q){if(isNaN(P)||isNaN(q))throw Tr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,P,q);this.ctx.transform=this.ctx.transform.multiply(X)},g.prototype.transform=function(P,q,X,ae,be,Ne){if(isNaN(P)||isNaN(q)||isNaN(X)||isNaN(ae)||isNaN(be)||isNaN(Ne))throw Tr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var De=new c(P,q,X,ae,be,Ne);this.ctx.transform=this.ctx.transform.multiply(De)},g.prototype.setTransform=function(P,q,X,ae,be,Ne){P=isNaN(P)?1:P,q=isNaN(q)?0:q,X=isNaN(X)?0:X,ae=isNaN(ae)?1:ae,be=isNaN(be)?0:be,Ne=isNaN(Ne)?0:Ne,this.ctx.transform=new c(P,q,X,ae,be,Ne)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(P,q,X,ae,be,Ne,De,ke,qe){var Ke=this.pdf.getImageProperties(P),dt=1,He=1,Fe=1,se=1;ae!==void 0&&ke!==void 0&&(Fe=ke/ae,se=qe/be,dt=Ke.width/ae*ke/ae,He=Ke.height/be*qe/be),Ne===void 0&&(Ne=q,De=X,q=0,X=0),ae!==void 0&&ke===void 0&&(ke=ae,qe=be),ae===void 0&&ke===void 0&&(ke=Ke.width,qe=Ke.height);for(var Et,At=this.ctx.transform.decompose(),We=te(At.rotate.shx),Oe=new c,ht=(Oe=(Oe=(Oe=Oe.multiply(At.translate)).multiply(At.skew)).multiply(At.scale)).applyToRectangle(new l(Ne-q*Fe,De-X*se,ae*dt,be*He)),ot=_.call(this,ht),xt=[],Ft=0;Ft<ot.length;Ft+=1)xt.indexOf(ot[Ft])===-1&&xt.push(ot[Ft]);if(N(xt),this.autoPaging)for(var Mt=xt[0],tt=xt[xt.length-1],_t=Mt;_t<tt+1;_t++){this.pdf.setPage(_t);var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=_t===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=_t===1?0:kt+(_t-2)*yt;if(this.ctx.clip_path.length!==0){var rt=this.path;Et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Et,this.posX+this.margin[3],-It+vt+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=rt}var $t=JSON.parse(JSON.stringify(ht));$t=C([$t],this.posX+this.margin[3],-It+vt+this.ctx.prevPageLastElemOffset)[0];var $e=(_t>Mt||_t<tt)&&j.call(this);$e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,yt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",$t.x,$t.y,$t.w,$t.h,null,null,We),$e&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,We)};var _=function(P,q,X){var ae=[];q=q||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var be=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ae.push(Math.floor((P.y+be)/X)+1);break;case"arc":ae.push(Math.floor((P.y+be-P.radius)/X)+1),ae.push(Math.floor((P.y+be+P.radius)/X)+1);break;case"qct":var Ne=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ae.push(Math.floor((Ne.y+be)/X)+1),ae.push(Math.floor((Ne.y+Ne.h+be)/X)+1);break;case"bct":var De=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ae.push(Math.floor((De.y+be)/X)+1),ae.push(Math.floor((De.y+De.h+be)/X)+1);break;case"rect":ae.push(Math.floor((P.y+be)/X)+1),ae.push(Math.floor((P.y+P.h+be)/X)+1)}for(var ke=0;ke<ae.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<ae[ke];)v.call(this);return ae},v=function(){var P=this.fillStyle,q=this.strokeStyle,X=this.font,ae=this.lineCap,be=this.lineWidth,Ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=q,this.font=X,this.lineCap=ae,this.lineWidth=be,this.lineJoin=Ne},C=function(P,q,X){for(var ae=0;ae<P.length;ae++)switch(P[ae].type){case"bct":P[ae].x2+=q,P[ae].y2+=X;case"qct":P[ae].x1+=q,P[ae].y1+=X;default:P[ae].x+=q,P[ae].y+=X}return P},N=function(P){return P.sort(function(q,X){return q-X})},A=function(P,q){for(var X,ae,be=this.fillStyle,Ne=this.strokeStyle,De=this.lineCap,ke=this.lineWidth,qe=Math.abs(ke*this.ctx.transform.scaleX),Ke=this.lineJoin,dt=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Fe=[],se=0;se<He.length;se++)if(He[se].x!==void 0)for(var Et=_.call(this,He[se]),At=0;At<Et.length;At+=1)Fe.indexOf(Et[At])===-1&&Fe.push(Et[At]);for(var We=0;We<Fe.length;We++)for(;this.pdf.internal.getNumberOfPages()<Fe[We];)v.call(this);if(N(Fe),this.autoPaging)for(var Oe=Fe[0],ht=Fe[Fe.length-1],ot=Oe;ot<ht+1;ot++){this.pdf.setPage(ot),this.fillStyle=be,this.strokeStyle=Ne,this.lineCap=De,this.lineWidth=qe,this.lineJoin=Ke;var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=ot===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=ot===1?0:Mt+(ot-2)*tt;if(this.ctx.clip_path.length!==0){var Bt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(X,this.posX+this.margin[3],-_t+Ft+this.ctx.prevPageLastElemOffset),O.call(this,P,!0),this.path=Bt}if(ae=JSON.parse(JSON.stringify(dt)),this.path=C(ae,this.posX+this.margin[3],-_t+Ft+this.ctx.prevPageLastElemOffset),q===!1||ot===0){var vt=(ot>Oe||ot<ht)&&j.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,tt,null).clip().discardPath()),O.call(this,P,q),vt&&this.pdf.restoreGraphicsState()}this.lineWidth=ke}else this.lineWidth=qe,O.call(this,P,q),this.lineWidth=ke;this.path=dt},O=function(P,q){if((P!=="stroke"||q||!x.call(this))&&(P==="stroke"||q||!f.call(this))){for(var X,ae,be=[],Ne=this.path,De=0;De<Ne.length;De++){var ke=Ne[De];switch(ke.type){case"begin":be.push({begin:!0});break;case"close":be.push({close:!0});break;case"mt":be.push({start:ke,deltas:[],abs:[]});break;case"lt":var qe=be.length;if(Ne[De-1]&&!isNaN(Ne[De-1].x)&&(X=[ke.x-Ne[De-1].x,ke.y-Ne[De-1].y],qe>0)){for(;qe>=0;qe--)if(be[qe-1].close!==!0&&be[qe-1].begin!==!0){be[qe-1].deltas.push(X),be[qe-1].abs.push(ke);break}}break;case"bct":X=[ke.x1-Ne[De-1].x,ke.y1-Ne[De-1].y,ke.x2-Ne[De-1].x,ke.y2-Ne[De-1].y,ke.x-Ne[De-1].x,ke.y-Ne[De-1].y],be[be.length-1].deltas.push(X);break;case"qct":var Ke=Ne[De-1].x+2/3*(ke.x1-Ne[De-1].x),dt=Ne[De-1].y+2/3*(ke.y1-Ne[De-1].y),He=ke.x+2/3*(ke.x1-ke.x),Fe=ke.y+2/3*(ke.y1-ke.y),se=ke.x,Et=ke.y;X=[Ke-Ne[De-1].x,dt-Ne[De-1].y,He-Ne[De-1].x,Fe-Ne[De-1].y,se-Ne[De-1].x,Et-Ne[De-1].y],be[be.length-1].deltas.push(X);break;case"arc":be.push({deltas:[],abs:[],arc:!0}),Array.isArray(be[be.length-1].abs)&&be[be.length-1].abs.push(ke)}}ae=q?null:P==="stroke"?"stroke":"fill";for(var At=!1,We=0;We<be.length;We++)if(be[We].arc)for(var Oe=be[We].abs,ht=0;ht<Oe.length;ht++){var ot=Oe[ht];ot.type==="arc"?F.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,q,!At):ce.call(this,ot.x,ot.y),At=!0}else if(be[We].close===!0)this.pdf.internal.out("h"),At=!1;else if(be[We].begin!==!0){var xt=be[We].start.x,Ft=be[We].start.y;B.call(this,be[We].deltas,xt,Ft),At=!0}ae&&$.call(this,ae),q&&Z.call(this)}},G=function(P){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-X;case"top":return P+q-X;case"hanging":return P+q-2*X;case"middle":return P+q/2-X;default:return P}},V=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(q,X){this.colorStops.push([q,X])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(P,q,X,ae,be,Ne,De,ke,qe){for(var Ke=he.call(this,X,ae,be,Ne),dt=0;dt<Ke.length;dt++){var He=Ke[dt];dt===0&&(qe?D.call(this,He.x1+P,He.y1+q):ce.call(this,He.x1+P,He.y1+q)),H.call(this,P,q,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}ke?Z.call(this):$.call(this,De)},$=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,q){this.pdf.internal.out(r(P)+" "+n(q)+" m")},Y=function(P){var q;switch(P.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var X=this.pdf.getTextDimensions(P.text),ae=G.call(this,P.y),be=V.call(this,ae)-X.h,Ne=this.ctx.transform.applyToPoint(new o(P.x,ae)),De=this.ctx.transform.decompose(),ke=new c;ke=(ke=(ke=ke.multiply(De.translate)).multiply(De.skew)).multiply(De.scale);for(var qe,Ke,dt,He=this.ctx.transform.applyToRectangle(new l(P.x,ae,X.w,X.h)),Fe=ke.applyToRectangle(new l(P.x,be,X.w,X.h)),se=_.call(this,Fe),Et=[],At=0;At<se.length;At+=1)Et.indexOf(se[At])===-1&&Et.push(se[At]);if(N(Et),this.autoPaging)for(var We=Et[0],Oe=Et[Et.length-1],ht=We;ht<Oe+1;ht++){this.pdf.setPage(ht);var ot=ht===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[2],Mt=Ft-this.margin[0],tt=this.pdf.internal.pageSize.width-this.margin[1],_t=tt-this.margin[3],Bt=ht===1?0:xt+(ht-2)*Mt;if(this.ctx.clip_path.length!==0){var vt=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(qe,this.posX+this.margin[3],-1*Bt+ot),O.call(this,"fill",!0),this.path=vt}var kt=C([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Bt+ot+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ke*P.scale),dt=this.lineWidth,this.lineWidth=dt*P.scale);var yt=this.autoPaging!=="text";if(yt||kt.y+kt.h<=Ft){if(yt||kt.y>=ot&&kt.x<=tt){var It=yt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||tt-kt.x)[0],rt=C([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Bt+ot+this.ctx.prevPageLastElemOffset)[0],$t=yt&&(ht>We||ht<Oe)&&j.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Mt,null).clip().discardPath()),this.pdf.text(It,rt.x,rt.y,{angle:P.angle,align:q,renderingMode:P.renderingMode}),$t&&this.pdf.restoreGraphicsState()}}else kt.y<Ft&&(this.ctx.prevPageLastElemOffset+=Ft-kt.y);P.scale>=.01&&(this.pdf.setFontSize(Ke),this.lineWidth=dt)}else P.scale>=.01&&(Ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ke*P.scale),dt=this.lineWidth,this.lineWidth=dt*P.scale),this.pdf.text(P.text,Ne.x+this.posX,Ne.y+this.posY,{angle:P.angle,align:q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ke),this.lineWidth=dt)},ce=function(P,q,X,ae){X=X||0,ae=ae||0,this.pdf.internal.out(r(P+X)+" "+n(q+ae)+" l")},B=function(P,q,X){return this.pdf.lines(P,q,X,null,null)},H=function(P,q,X,ae,be,Ne,De,ke){this.pdf.internal.out([e(i(X+P)),e(a(ae+q)),e(i(be+P)),e(a(Ne+q)),e(i(De+P)),e(a(ke+q)),"c"].join(" "))},he=function(P,q,X,ae){for(var be=2*Math.PI,Ne=Math.PI/2;q>X;)q-=be;var De=Math.abs(X-q);De<be&&ae&&(De=be-De);for(var ke=[],qe=ae?-1:1,Ke=q;De>1e-5;){var dt=Ke+qe*Math.min(De,Ne);ke.push(Le.call(this,P,Ke,dt)),De-=Math.abs(dt-Ke),Ke=dt}return ke},Le=function(P,q,X){var ae=(X-q)/2,be=P*Math.cos(ae),Ne=P*Math.sin(ae),De=be,ke=-Ne,qe=De*De+ke*ke,Ke=qe+De*be+ke*Ne,dt=4/3*(Math.sqrt(2*qe*Ke)-Ke)/(De*Ne-ke*be),He=De-dt*ke,Fe=ke+dt*De,se=He,Et=-Fe,At=ae+q,We=Math.cos(At),Oe=Math.sin(At);return{x1:P*Math.cos(q),y1:P*Math.sin(q),x2:He*We-Fe*Oe,y2:He*Oe+Fe*We,x3:se*We-Et*Oe,y3:se*Oe+Et*We,x4:P*Math.cos(X),y4:P*Math.sin(X)}},te=function(P){return 180*P/Math.PI},ye=function(P,q,X,ae,be,Ne){var De=P+.5*(X-P),ke=q+.5*(ae-q),qe=be+.5*(X-be),Ke=Ne+.5*(ae-Ne),dt=Math.min(P,be,De,qe),He=Math.max(P,be,De,qe),Fe=Math.min(q,Ne,ke,Ke),se=Math.max(q,Ne,ke,Ke);return new l(dt,Fe,He-dt,se-Fe)},ve=function(P,q,X,ae,be,Ne,De,ke){var qe,Ke,dt,He,Fe,se,Et,At,We,Oe,ht,ot,xt,Ft,Mt=X-P,tt=ae-q,_t=be-X,Bt=Ne-ae,vt=De-be,kt=ke-Ne;for(Ke=0;Ke<41;Ke++)We=(Et=(dt=P+(qe=Ke/40)*Mt)+qe*((Fe=X+qe*_t)-dt))+qe*(Fe+qe*(be+qe*vt-Fe)-Et),Oe=(At=(He=q+qe*tt)+qe*((se=ae+qe*Bt)-He))+qe*(se+qe*(Ne+qe*kt-se)-At),Ke==0?(ht=We,ot=Oe,xt=We,Ft=Oe):(ht=Math.min(ht,We),ot=Math.min(ot,Oe),xt=Math.max(xt,We),Ft=Math.max(Ft,Oe));return new l(Math.round(ht),Math.round(ot),Math.round(xt-ht),Math.round(Ft-ot))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,q,X=(P=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:q}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(Dt.API),function(t){var e=function(o){var l,c,u,d,g,m,f,x,j,_;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(g=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(m=(g=((g=((g=((g=(g-(_=g%85))/85)-(j=g%85))/85)-(x=g%85))/85)-(f=g%85))/85)%85,c.push(m+33,f+33,x+33,j+33,_+33)):c.push(122);return function(v,C){for(var N=C;N>0;N--)v.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,g,m=String,f="length",x=255,j="charCodeAt",_="slice",v="replace";for(o[_](-2),o=o[_](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),u=[],d=0,g=(o+=l="uuuuu"[_](o[f]%5||5))[f];g>d;d+=5)c=52200625*(o[j](d)-33)+614125*(o[j](d+1)-33)+7225*(o[j](d+2)-33)+85*(o[j](d+3)-33)+(o[j](d+4)-33),u.push(x&c>>24,x&c>>16,x&c>>8,x&c);return function(C,N){for(var A=N;A>0;A--)C.pop()}(u,l[f]),m.fromCharCode.apply(m,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},a=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=d0(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Dt.API),function(t){t.loadFile=function(e,r,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var g=new XMLHttpRequest,m=0,f=function(x){var j=x.length,_=[],v=String.fromCharCode;for(m=0;m<j;m+=1)_.push(v(255&x.charCodeAt(m)));return _.join("")};if(g.open("GET",c,!u),g.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(g.onload=function(){g.status===200?d(f(this.responseText)):d(void 0)}),g.send(null),u&&g.status===200)return f(g.responseText)}(i,a,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Dt.API),function(t){function e(){return(tr.html2canvas?Promise.resolve(tr.html2canvas):pa(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(tr.DOMPurify?Promise.resolve(tr.DOMPurify):pa(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Ar(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},a=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(l(g,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var x=d[f],j=x.src.find(function(_){return _.format==="truetype"});j&&u.addFont(j.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,u.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,g){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return u.updateProgress(null,d),m}).then(d,g).then(function(m){return u.updateProgress(1),m})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),m=u.call(g,l,c);return o.convert(m,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Dt.getPageSize=function(l,c,u){if(Ar(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var g,m=(""+u).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+c}var x,j=0,_=0;if(f.hasOwnProperty(m))j=f[m][1]/g,_=f[m][0]/g;else try{j=u[1],_=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",_>j&&(x=_,_=j,j=x);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",j>_&&(x=_,_=j,j=x)}return{width:_,height:j,unit:c,k:g,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(zg):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Dt.API),Dt.API.addJS=function(t){return my=t,this.internal.events.subscribe("postPutResources",function(){Rd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),py=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+my+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Rd!==void 0&&py!==void 0&&this.internal.out("/Names <</JavaScript "+Rd+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var g=r.internal.newObject();d.push(g);var m=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(Dt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,a,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(g){for(var m,f=256*g.charCodeAt(4)+g.charCodeAt(5),x=g.length,j={width:0,height:0,numcomponents:1},_=4;_<x;_+=2){if(_+=f,e.indexOf(g.charCodeAt(_+1))!==-1){m=256*g.charCodeAt(_+5)+g.charCodeAt(_+6),j={width:256*g.charCodeAt(_+7)+g.charCodeAt(_+8),height:m,numcomponents:g.charCodeAt(_+9)};break}f=256*g.charCodeAt(_+2)+g.charCodeAt(_+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:i}}return d}}(Dt.API),Dt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=_6(t,{checkCrc:!0}),o=a.width,l=a.height,c=a.channels,u=a.palette,d=a.depth;i=u&&c===1?function(V){for(var F=V.width,$=V.height,Z=V.data,D=V.palette,Y=V.depth,ce=!1,B=[],H=[],he=void 0,Le=!1,te=0,ye=0;ye<D.length;ye++){var ve=xv(D[ye],4),fe=ve[0],P=ve[1],q=ve[2],X=ve[3];B.push(fe,P,q),X!=null&&(X===0?(te++,H.length<1&&H.push(ye)):X<255&&(Le=!0))}if(Le||te>1){ce=!0,H=void 0;var ae=F*$;he=new Uint8Array(ae);for(var be=new DataView(Z.buffer),Ne=0;Ne<ae;Ne++){var De=Hg(be,Ne,Y),ke=xv(D[De],4)[3];he[Ne]=ke}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:Z,alphaBytes:he,needSMask:ce,palette:B,mask:H}}(a):c===2||c===4?function(V){for(var F=V.data,$=V.width,Z=V.height,D=V.channels,Y=V.depth,ce=D===2?"DeviceGray":"DeviceRGB",B=D-1,H=$*Z,he=B,Le=H*he,te=1*H,ye=Math.ceil(Le*Y/8),ve=Math.ceil(te*Y/8),fe=new Uint8Array(ye),P=new Uint8Array(ve),q=new DataView(F.buffer),X=new DataView(fe.buffer),ae=new DataView(P.buffer),be=!1,Ne=0;Ne<H;Ne++){for(var De=Ne*D,ke=0;ke<he;ke++)Ny(X,Hg(q,De+ke,Y),Ne*he+ke,Y);var qe=Hg(q,De+he,Y);qe<(1<<Y)-1&&(be=!0),Ny(ae,qe,1*Ne,Y)}return{colorSpace:ce,colorsPerPixel:B,colorBytes:fe,alphaBytes:P,needSMask:be}}(a):function(V){var F=V.data,$=V.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:$,colorsPerPixel:$==="DeviceGray"?1:3,colorBytes:F instanceof Uint8Array?F:new Uint8Array(F.buffer),needSMask:!1}}(a);var g,m,f,x=i,j=x.colorSpace,_=x.colorsPerPixel,v=x.colorBytes,C=x.alphaBytes,N=x.needSMask,A=x.palette,O=x.mask,G=null;return n!==Dt.API.image_compression.NONE&&typeof d0=="function"?(G=function(V){var F;switch(V){case Dt.API.image_compression.FAST:F=11;break;case Dt.API.image_compression.MEDIUM:F=13;break;case Dt.API.image_compression.SLOW:F=14;break;default:F=12}return F}(n),g=this.decode.FLATE_DECODE,m="/Predictor ".concat(G," "),t=xy(v,o*_,_,n),N&&(f=xy(C,o,1,n))):(g=void 0,m="",t=v,N&&(f=C)),m+="/Colors ".concat(_," /BitsPerComponent ").concat(d," /Columns ").concat(o),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:g,decodeParameters:m,transparency:O,palette:A,sMask:f,predictor:G,width:o,height:l,bitsPerComponent:d,colorSpace:j}}},function(t){t.processGIF89A=function(e,r,n,i){var a=new q6(e),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new Gg(100).encode(u,100);return t.processJPEG.call(this,d,r,n,i)},t.processGIF87A=t.processGIF89A}(Dt.API),oa.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},oa.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Tr.log("bit decode error:"+r)}},oa.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},oa.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,l=a>>4,c=15&a,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},oa.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},oa.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,u=a>>15?255:0,d=n*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},oa.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},oa.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},oa.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=o}},oa.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var a=new oa(e,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},u=new Gg(100).encode(c,100);return t.processJPEG.call(this,u,r,n,i)}}(Dt.API),Ly.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var a=new Ly(e),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},u=new Gg(100).encode(c,100);return t.processJPEG.call(this,u,r,n,i)}}(Dt.API),Dt.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,u=0;u<i;u+=4){var d=n[u],g=n[u+1],m=n[u+2],f=n[u+3];a[l++]=d,a[l++]=g,a[l++]=m,o[c++]=f}var x=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Dt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fl=Dt.API,Od=fl.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,g=e.doKerning!==!1,m=0,f=t.length,x=0,j=l[0]||c,_=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?_.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(m=g&&Ar(u[n])==="object"&&!isNaN(parseInt(u[n][x],10))?u[n][x]/d:0,_.push((l[n]||j)/c+m)),x=n;return _},vy=fl.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return fl.processArabic&&(t=fl.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Od.apply(this,arguments).reduce(function(a,o){return a+o},0)},yy=function(t,e,r,n){for(var i=[],a=0,o=t.length,l=0;a!==o&&l+e[a]<r;)l+=e[a],a++;i.push(t.slice(0,a));var c=a;for(l=0;a!==o;)l+e[a]>n&&(i.push(t.slice(c,a)),l=0,c=a),l+=e[a],a++;return c!==a&&i.push(t.slice(c,a)),i},by=function(t,e,r){r||(r={});var n,i,a,o,l,c,u,d=[],g=[d],m=r.textIndent||0,f=0,x=0,j=t.split(" "),_=Od.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),C=[];j.map(function(A){(A=A.split(/\s*\n/)).length>1?C=C.concat(A.map(function(O,G){return(G&&O.length?`
`:"")+O})):C.push(A[0])}),j=C,c=vy.apply(this,[v,r])}for(a=0,o=j.length;a<o;a++){var N=0;if(n=j[a],c&&n[0]==`
`&&(n=n.substr(1),N=1),m+f+(x=(i=Od.apply(this,[n,r])).reduce(function(A,O){return A+O},0))>e||N){if(x>e){for(l=yy.apply(this,[n,i,e-(m+f),e]),d.push(l.shift()),d=[l.pop()];l.length;)g.push([l.shift()]);x=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(A,O){return A+O},0)}else d=[n];g.push(d),m=x+c,f=_}else d.push(n),m+=f+x,f=_}return u=c?function(A,O){return(O?v:"")+A.join(" ")}:function(A){return A.join(" ")},g.map(u)},fl.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var g=this.internal.getFont(d.fontName,d.fontStyle),m="Unicode";return g.metadata[m]?{widths:g.metadata[m].widths||{0:1},kerning:g.metadata[m].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(by.apply(this,[n[l],o,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[r[a]]=e[a],i[e[a]]=r[a];var o=function(m){return"0x"+parseInt(m,10).toString(16)},l=t.__fontmetrics__.compress=function(m){var f,x,j,_,v=["{"];for(var C in m){if(f=m[C],isNaN(parseInt(C,10))?x="'"+C+"'":(C=parseInt(C,10),x=(x=o(C).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof f=="number")f<0?(j=o(f).slice(3),_="-"):(j=o(f).slice(2),_=""),j=_+j.slice(0,-1)+i[j.slice(-1)];else{if(Ar(f)!=="object")throw new Error("Don't know what to do with value type "+Ar(f)+".");j=l(f)}v.push(x+j)}return v.push("}"),v.join("")},c=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,x,j,_,v={},C=1,N=v,A=[],O="",G="",V=m.length-1,F=1;F<V;F+=1)(_=m[F])=="'"?f?(j=f.join(""),f=void 0):f=[]:f?f.push(_):_=="{"?(A.push([N,j]),N={},j=void 0):_=="}"?((x=A.pop())[0][x[1]]=N,j=void 0,N=x[0]):_=="-"?C=-1:j===void 0?n.hasOwnProperty(_)?(O+=n[_],j=parseInt(O,16)*C,C=1,O=""):O+=_:n.hasOwnProperty(_)?(G+=n[_],N[j]=parseInt(G,16)*C,C=1,j=void 0,G=""):G+=_;return v},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},g={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var f=m.font,x=g.Unicode[f.postScriptName];x&&(f.metadata.Unicode={},f.metadata.Unicode.widths=x.widths,f.metadata.Unicode.kerning=x.kerning);var j=d.Unicode[f.postScriptName];j&&(f.metadata.Unicode.encoding=j,f.encoding=j.codePages[0])}])}(Dt.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Zd(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(Dt),Dt.API.addSvgAsImage=function(t,e,r,n,i,a,o,l){if(isNaN(e)||isNaN(r))throw Tr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Tr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(tr.canvg?Promise.resolve(tr.canvg):pa(()=>import("./index.es-AJKPky28.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(d)}).then(function(){g.addImage(c.toDataURL("image/jpeg",1),e,r,n,i,o,l)})},Dt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},Dt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,g=0;function m(x,j){var _,v=!1;for(_=0;_<x.length;_+=1)x[_]===j&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=l.length;for(g=0;g<f;g+=1)r[l[g]].value=r[l[g]].defaultValue,r[l[g]].explicitSet=!1}if(Ar(t)==="object"){for(i in t)if(a=t[i],m(l,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&m(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")c.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(n=!1);n===!0&&c.push([a[u][0]-1,a[u][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,j=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?j.push("/"+x+" /"+r[x].value):j.push("/"+x+" "+r[x].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Dt.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],g=0,m=a.length;g<m;++g){if(l=o.metadata.characterToGlyph(a.charCodeAt(g)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(g),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(a){var o,l,c,u,d,g,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,m=(l=Object.keys(a).sort(function(f,x){return f-x})).length;g<m;g++)o=l[g],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(u=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var g=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",x=0;x<m.length;x++)f+=String.fromCharCode(m[x]);var j=u();d({data:f,addLength1:!0,objectId:j}),c("endobj");var _=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+vl(l.fontName)),c("/FontFile2 "+j+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var C=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+vl(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+t.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+_+" 0 R"),c("/BaseFont /"+vl(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+C+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var g=l.metadata.rawData,m="",f=0;f<g.length;f++)m+=String.fromCharCode(g[f]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var j=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var _=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+vl(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+vl(l.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",c=a.x,u=a.y,d=a.options||{},g=a.mutex||{},m=g.pdfEscape,f=g.activeFontKey,x=g.fonts,j=f,_="",v=0,C="",N=x[j].encoding;if(x[j].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:g};for(C=l,j=f,Array.isArray(l)&&(C=l[0]),v=0;v<C.length;v+=1)x[j].metadata.hasOwnProperty("cmap")&&(o=x[j].metadata.cmap.unicode.codeMap[C[v].charCodeAt(0)]),o||C[v].charCodeAt(0)<256&&x[j].metadata.hasOwnProperty("Unicode")?_+=C[v]:_+="";var A="";return parseInt(j.slice(1))<14||N==="WinAnsiEncoding"?A=m(_,j).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(A=r(_,x[j])),g.isHex=!0,{text:A,x:c,y:u,options:d,mutex:g}};e.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(i(Object.assign({},c,{text:o[u]})).text);a.text=l}else a.text=i(Object.assign({},c,{text:o})).text}])}(Dt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Dt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,a,o,l,c,u,d,g=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,N=0;this.__bidiEngine__={};var A=function(D){var Y=D.charCodeAt(),ce=Y>>8,B=j[ce];return B!==void 0?g[256*B+(255&Y)]:ce===252||ce===253?"AL":v.test(ce)?"L":ce===8?"R":"N"},O=function(D){for(var Y,ce=0;ce<D.length;ce++){if((Y=A(D.charAt(ce)))==="L")return!1;if(Y==="R")return!0}return!1},G=function(D,Y,ce,B){var H,he,Le,te,ye=Y[B];switch(ye){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"N":case"AN":break;case"EN":C&&(ye="AN");break;case"AL":C=!0,ye="R";break;case"WS":case"BN":ye="N";break;case"CS":B<1||B+1>=Y.length||(H=ce[B-1])!=="EN"&&H!=="AN"||(he=Y[B+1])!=="EN"&&he!=="AN"?ye="N":C&&(he="AN"),ye=he===H?he:"N";break;case"ES":ye=(H=B>0?ce[B-1]:"B")==="EN"&&B+1<Y.length&&Y[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&ce[B-1]==="EN"){ye="EN";break}if(C){ye="N";break}for(Le=B+1,te=Y.length;Le<te&&Y[Le]==="ET";)Le++;ye=Le<te&&Y[Le]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(te=Y.length,Le=B+1;Le<te&&Y[Le]==="NSM";)Le++;if(Le<te){var ve=D[B],fe=ve>=1425&&ve<=2303||ve===64286;if(H=Y[Le],fe&&(H==="R"||H==="AL")){ye="R";break}}}ye=B<1||(H=Y[B-1])==="B"?"N":ce[B-1];break;case"B":C=!1,i=!0,ye=N;break;case"S":a=!0,ye="N"}return ye},V=function(D,Y,ce){var B=D.split("");return ce&&F(B,ce,{hiLevel:N}),B.reverse(),Y&&Y.reverse(),B.join("")},F=function(D,Y,ce){var B,H,he,Le,te,ye=-1,ve=D.length,fe=0,P=[],q=N?f:m,X=[];for(C=!1,i=!1,a=!1,H=0;H<ve;H++)X[H]=A(D[H]);for(he=0;he<ve;he++){if(te=fe,P[he]=G(D,X,P,he),B=240&(fe=q[te][x[P[he]]]),fe&=15,Y[he]=Le=q[fe][5],B>0)if(B===16){for(H=ye;H<he;H++)Y[H]=1;ye=-1}else ye=-1;if(q[fe][6])ye===-1&&(ye=he);else if(ye>-1){for(H=ye;H<he;H++)Y[H]=Le;ye=-1}X[he]==="B"&&(Y[he]=0),ce.hiLevel|=Le}a&&function(ae,be,Ne){for(var De=0;De<Ne;De++)if(ae[De]==="S"){be[De]=N;for(var ke=De-1;ke>=0&&ae[ke]==="WS";ke--)be[ke]=N}}(X,Y,ve)},$=function(D,Y,ce,B,H){if(!(H.hiLevel<D)){if(D===1&&N===1&&!i)return Y.reverse(),void(ce&&ce.reverse());for(var he,Le,te,ye,ve=Y.length,fe=0;fe<ve;){if(B[fe]>=D){for(te=fe+1;te<ve&&B[te]>=D;)te++;for(ye=fe,Le=te-1;ye<Le;ye++,Le--)he=Y[ye],Y[ye]=Y[Le],Y[Le]=he,ce&&(he=ce[ye],ce[ye]=ce[Le],ce[Le]=he);fe=te}fe++}}},Z=function(D,Y,ce){var B=D.split(""),H={hiLevel:N};return ce||(ce=[]),F(B,ce,H),function(he,Le,te){if(te.hiLevel!==0&&d)for(var ye,ve=0;ve<he.length;ve++)Le[ve]===1&&(ye=_.indexOf(he[ve]))>=0&&(he[ve]=_[ye+1])}(B,ce,H),$(2,B,Y,ce,H),$(1,B,Y,ce,H),B.join("")};return this.__bidiEngine__.doBidiReorder=function(D,Y,ce){if(function(H,he){if(he)for(var Le=0;Le<H.length;Le++)he[Le]=Le;l===void 0&&(l=O(H)),u===void 0&&(u=O(H))}(D,Y),o||!c||u)if(o&&c&&l^u)N=l?1:0,D=V(D,Y,ce);else if(!o&&c&&u)N=l?1:0,D=Z(D,Y,ce),D=V(D,Y);else if(!o||l||c||u){if(o&&!c&&l^u)D=V(D,Y),l?(N=0,D=Z(D,Y,ce)):(N=1,D=Z(D,Y,ce),D=V(D,Y));else if(o&&l&&!c&&u)N=1,D=Z(D,Y,ce),D=V(D,Y);else if(!o&&!c&&l^u){var B=d;l?(N=1,D=Z(D,Y,ce),N=0,d=!1,D=Z(D,Y,ce),d=B):(N=0,D=Z(D,Y,ce),D=V(D,Y),N=1,d=!1,D=Z(D,Y,ce),d=B,D=V(D,Y))}}else N=0,D=Z(D,Y,ce);else N=l?1:0,D=Z(D,Y,ce);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,l=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Qs(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new nk(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new z6(this.contents),this.head=new H6(this),this.name=new K6(this),this.cmap=new w_(this),this.toUnicode={},this.hhea=new G6(this),this.maxp=new Q6(this),this.hmtx=new X6(this),this.post=new V6(this),this.os2=new Y6(this),this.loca=new rk(this),this.glyf=new Z6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,a,o,l;for(o=0,a=0,l=(e=""+e).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var xa,Qs=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,a,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),z6=function(){var t;function e(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,a,o,l,c,u,d,g,m,f,x,j;for(j in f=Object.keys(r).length,c=Math.log(2),g=16*Math.floor(Math.log(f)/c),o=Math.floor(g/c),d=16*f-g,(i=new Qs).writeInt(this.scalarType),i.writeShort(f),i.writeShort(g),i.writeShort(o),i.writeShort(d),a=16*f,u=i.pos+a,l=null,x=[],r)for(m=r[j],i.writeString(j),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),x=x.concat(m),j==="head"&&(l=u),u+=m.length;u%4;)x.push(0),u++;return i.write(x),n=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(n),i.data},t=function(r){var n,i,a,o;for(r=S_.call(r);r.length%4;)r.push(0);for(a=new Qs(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),W6={}.hasOwnProperty,Ba=function(t,e){for(var r in e)W6.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};xa=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var H6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Qs).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),Ay=function(){function t(e,r){var n,i,a,o,l,c,u,d,g,m,f,x,j,_,v,C,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,a=function(){var A,O;for(O=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)O.push(e.readUInt16());return O}(),e.pos+=2,j=function(){var A,O;for(O=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)O.push(e.readUInt16());return O}(),u=function(){var A,O;for(O=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)O.push(e.readUInt16());return O}(),d=function(){var A,O;for(O=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)O.push(e.readUInt16());return O}(),i=(this.length-e.pos+this.offset)/2,l=function(){var A,O;for(O=[],c=A=0;0<=i?A<i:A>i;c=0<=i?++A:--A)O.push(e.readUInt16());return O}(),c=v=0,N=a.length;v<N;c=++v)for(_=a[c],n=C=x=j[c];x<=_?C<=_:C>=_;n=x<=_?++C:--C)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-x)-(m-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=g}return t.encode=function(e,r){var n,i,a,o,l,c,u,d,g,m,f,x,j,_,v,C,N,A,O,G,V,F,$,Z,D,Y,ce,B,H,he,Le,te,ye,ve,fe,P,q,X,ae,be,Ne,De,ke,qe,Ke,dt;switch(B=new Qs,o=Object.keys(e).sort(function(He,Fe){return He-Fe}),r){case"macroman":for(j=0,_=function(){var He=[];for(x=0;x<256;++x)He.push(0);return He}(),C={0:0},a={},H=0,ye=o.length;H<ye;H++)C[ke=e[i=o[H]]]==null&&(C[ke]=++j),a[i]={old:e[i],new:C[e[i]]},_[i]=C[e[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(_),{charMap:a,subtable:B.data,maxGlyphID:j+1};case"unicode":for(Y=[],g=[],N=0,C={},n={},v=u=null,he=0,ve=o.length;he<ve;he++)C[O=e[i=o[he]]]==null&&(C[O]=++N),n[i]={old:O,new:C[O]},l=C[O]-i,v!=null&&l===u||(v&&g.push(v),Y.push(i),u=l),v=i;for(v&&g.push(v),g.push(65535),Y.push(65535),Z=2*($=Y.length),F=2*Math.pow(Math.log($)/Math.LN2,2),m=Math.log(F/2)/Math.LN2,V=2*$-F,c=[],G=[],f=[],x=Le=0,fe=Y.length;Le<fe;x=++Le){if(D=Y[x],d=g[x],D===65535){c.push(0),G.push(0);break}if(D-(ce=n[D].new)>=32768)for(c.push(0),G.push(2*(f.length+$-x)),i=te=D;D<=d?te<=d:te>=d;i=D<=d?++te:--te)f.push(n[i].new);else c.push(ce-D),G.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*$+2*f.length),B.writeUInt16(0),B.writeUInt16(Z),B.writeUInt16(F),B.writeUInt16(m),B.writeUInt16(V),Ne=0,P=g.length;Ne<P;Ne++)i=g[Ne],B.writeUInt16(i);for(B.writeUInt16(0),De=0,q=Y.length;De<q;De++)i=Y[De],B.writeUInt16(i);for(qe=0,X=c.length;qe<X;qe++)l=c[qe],B.writeUInt16(l);for(Ke=0,ae=G.length;Ke<ae;Ke++)A=G[Ke],B.writeUInt16(A);for(dt=0,be=f.length;dt<be;dt++)j=f[dt],B.writeUInt16(j);return{charMap:n,subtable:B.data,maxGlyphID:N+1}}},t}(),w_=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new Ay(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=Ay.encode(e,r),(i=new Qs).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),G6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Y6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),V6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),J6=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},K6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,a,o,l,c,u,d,g,m;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},a=d=0,g=n.length;d<g;a=++d)i=n[a],e.pos=i.offset,u=e.readString(i.length),o=new J6(u,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Q6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),X6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,a,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,g,m;for(m=[],u=0,d=(g=this.metrics).length;u<d;u++)a=g[u],m.push(a.advance);return m}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),S_=[].slice,Z6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,a,o,l,c,u,d,g;return e in this.cache?this.cache[e]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new Qs(r.read(i))).readShort(),u=l.readShort(),g=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new tk(l,u,g,c,d):new ek(l,o,u,g,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,a,o,l,c;for(o=[],a=[],l=0,c=r.length;l<c;l++)i=e[r[l]],a.push(o.length),i&&(o=o.concat(i.encode(n)));return a.push(o.length),{table:o,offsets:a}},t}(),ek=function(){function t(e,r,n,i,a,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),tk=function(){function t(e,r,n,i,a){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Qs(S_.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),rk=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ba(t,xa),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<n.length;++o)if(n[o]=i,a<r.length&&r[a]==o){++a,n[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),nk=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,a,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))n=c[a],i[a]=n;return i},t.prototype.encode=function(e,r){var n,i,a,o,l,c,u,d,g,m,f,x,j,_,v;for(i in n=w_.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},v=n.charMap)f[(c=v[i]).old]=c.new;for(x in m=n.maxGlyphID,o)x in f||(f[x]=m++);return d=function(C){var N,A;for(N in A={},C)A[C[N]]=N;return A}(f),g=Object.keys(d).sort(function(C,N){return C-N}),j=function(){var C,N,A;for(A=[],C=0,N=g.length;C<N;C++)l=g[C],A.push(d[l]);return A}(),a=this.font.glyf.encode(o,j,f),u=this.font.loca.encode(a.offsets,j),_={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();Dt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,a,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+r},e}();function j_(t,e,r,n,i){n=n||{};var a=1.15,o=i.internal.scaleFactor,l=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,u=l*c,d=/\r\n|\r|\n/g,g="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(g=typeof t=="string"?t.split(d):t,m=g.length||1),r+=l*(2-a),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var f=l;if(n.halign==="center"&&(f*=.5),g&&m>=1){for(var x=0;x<g.length;x++)i.text(g[x],e-i.getStringUnitWidth(g[x])*f,r),r+=u;return i}e-=i.getStringUnitWidth(t)*f}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var ky={},$l=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:ky=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,a;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,a){return this.jsPDFDocument.rect(e,r,n,i,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return ky||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),b0=function(t,e){return b0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},b0(t,e)};function N_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");b0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var C_=function(t){N_(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function ik(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ak(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Dh(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function L_(t,e,r,n){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:a});var o=A_(i,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function A_(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function df(t,e){var r,n,i,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function k_(t,e){var r=df(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function sk(t,e,r,n,i){var a={},o=1.3333333333333333,l=Yg(e,function(N){return i.getComputedStyle(N).backgroundColor});l!=null&&(a.fillColor=l);var c=Yg(e,function(N){return i.getComputedStyle(N).color});c!=null&&(a.textColor=c);var u=lk(n,r);u&&(a.cellPadding=u);var d="borderTopColor",g=o*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var f=(parseFloat(m)||0)/g;f&&(a.lineWidth=f)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/g,right:(parseFloat(n.borderRightWidth)||0)/g,bottom:(parseFloat(n.borderBottomWidth)||0)/g,left:(parseFloat(n.borderLeftWidth)||0)/g},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var x=Yg(e,function(N){return i.getComputedStyle(N)[d]});x!=null&&(a.lineColor=x);var j=["left","right","center","justify"];j.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),j=["middle","bottom","top"],j.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(a.fontSize=_/o);var v=ok(n);v&&(a.fontStyle=v);var C=(n.fontFamily||"").toLowerCase();return t.indexOf(C)!==-1&&(a.font=C),a}function ok(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Yg(t,e){var r=P_(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function P_(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:P_(t.parentElement,e):r}function lk(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=r.map(function(l){return parseInt(l||"0")/n}),o=df(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function E_(t,e,r,n,i){var a,o;n===void 0&&(n=!1),i===void 0&&(i=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],g=[],m=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:g,foot:m};for(var f=0;f<l.rows.length;f++){var x=l.rows[f],j=(o=(a=x==null?void 0:x.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),_=ck(c,u,r,x,n,i);_&&(j==="thead"?d.push(_):j==="tfoot"?m.push(_):g.push(_))}return{head:d,body:g,foot:m}}function ck(t,e,r,n,i,a){for(var o=new C_(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(i||u.display!=="none"){var d=void 0;a&&(d=sk(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:uk(c)})}}var g=r.getComputedStyle(n);if(o.length>0&&(i||g.display!=="none"))return o}function uk(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function dk(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var a=i[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function as(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a}function F_(t,e){var r=new $l(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();dk(i,n,e);var a=as({},i,n,e),o;typeof window<"u"&&(o=window);var l=hk(i,n,e),c=fk(i,n,e),u=gk(r,a),d=mk(r,a,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function hk(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],g=r[c];n.columnStyles=as({},u,d,g)}else{var m=[t,e,r],f=m.map(function(x){return x[c]||{}});n[c]=as({},f[0],f[1],f[2])}},a=0,o=Object.keys(n);a<o.length;a++){var l=o[a];i(l)}return n}function fk(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=n;a<o.length;a++){var l=o[a];l.didParseCell&&i.didParseCell.push(l.didParseCell),l.willDrawCell&&i.willDrawCell.push(l.willDrawCell),l.didDrawCell&&i.didDrawCell.push(l.didDrawCell),l.willDrawPage&&i.willDrawPage.push(l.willDrawPage),l.didDrawPage&&i.didDrawPage.push(l.didDrawPage)}return i}function gk(t,e){var r,n,i,a,o,l,c,u,d,g,m,f,x=df(e.margin,40/t.scaleFactor()),j=(r=pk(t,e.startY))!==null&&r!==void 0?r:x.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var v;e.showHead===!0?v="everyPage":e.showHead===!1?v="never":v=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var C=(a=e.useCss)!==null&&a!==void 0?a:!1,N=e.theme||(C?"plain":"striped"),A=!!e.horizontalPageBreak,O=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:C,theme:N,startY:j,margin:x,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:v,showFoot:_,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:A,horizontalPageBreakRepeat:O,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function pk(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),a=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function mk(t,e,r){var n=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=E_(t,e.html,r,o,e.useCss)||{};n=l.head||n,i=l.body||n,a=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||vk(n,i,a);return{columns:c,head:n,body:i,foot:a}}function vk(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,l;Array.isArray(n)?l=n[parseInt(a)]:l=n[a],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=i.length:u=a+(c>0?"_".concat(c):"");var d={dataKey:u};i.push(d)}}),i}var x0=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),yk=function(t){N_(e,t);function e(r,n,i,a,o,l){var c=t.call(this,r,n,l)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return e}(x0),bk=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,a,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new yk(e,this,n,i,a,o),g=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var a=i[n];a(new x0(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var a=i[n];a(new x0(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),T_=function(){function t(e,r,n,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof C_&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var a;return Math.max(n,((a=r.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,a){var o=n.cells[a.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>i?u:i},0)},t}(),D_=function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,a=n*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=df(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),xk=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var a=i[n],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function _k(t,e){wk(t,e);var r=[],n=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=_0(r,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=_0(r,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),jk(e),Nk(e,t),Sk(e)}function wk(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=k_(t,e);e.allRows().forEach(function(a){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=a.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,c,null);var g=u.padding("horizontal");u.contentWidth=Dh(u.text,u.styles,t)+g;var m=Dh(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var f=10/r;u.minWidth=u.styles.minCellWidth||f,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=a.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},g=d.cellWidth||d.minCellWidth;g&&typeof g=="number"&&(c.minWidth=g,c.wrappedWidth=g)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function _0(t,e,r){for(var n=e,i=t.reduce(function(f,x){return f+x.wrappedWidth},0),a=0;a<t.length;a++){var o=t[a],l=o.wrappedWidth/i,c=n*l,u=o.width+c,d=r(o),g=u<d?d:u;e-=g-o.width,o.width=g}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(f){return e<0?f.width>r(f):!0});m.length&&(e=_0(m,e,r))}return e}function Sk(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var a=n[i],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete a.cells[c.index];else if(u)u.cell.height+=a.height,r=u.cell.colSpan,delete a.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var g=n.length-i,m=d.rowSpan>g?g:d.rowSpan;e[c.index]={cell:d,left:m,row:a}}}}}function jk(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,a=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])a+=c.width,delete n.cells[c.index];else if(i){var u=i;delete n.cells[c.index],i=null,u.width=c.width+a}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,a=0,u.colSpan>1){i=u,a+=c.width;continue}u.width=c.width+a}}}function Nk(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var a=i[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=a.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Py(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Py(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var g=u.styles.overflow(u.text,d);typeof g=="string"?u.text=[g]:u.text=g}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>a.height&&(a.height=m)}}r.count--}}function Py(t,e,r,n,i){return t.map(function(a){return Ck(a,e,r,n,i)})}function Ck(t,e,r,n,i){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Dh(t,r,n))return t;for(;e<Dh(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function I_(t,e){var r=new $l(t),n=Lk(e,r.scaleFactor()),i=new bk(e,n);return _k(r,i),r.applyStyles(r.userStyles),i}function Lk(t,e){var r=t.content,n=kk(r.columns);if(r.head.length===0){var i=Ey(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=Ey(n,"foot");i&&r.foot.push(i)}var a=t.settings.theme,o=t.styles;return{columns:n,head:Vg("head",r.head,n,o,a,e),body:Vg("body",r.body,n,o,a,e),foot:Vg("foot",r.foot,n,o,a,e)}}function Vg(t,e,r,n,i,a){var o={},l=e.map(function(c,u){for(var d=0,g={},m=0,f=0,x=0,j=r;x<j.length;x++){var _=j[x];if(o[_.index]==null||o[_.index].left===0)if(f===0){var v=void 0;Array.isArray(c)?v=c[_.index-m-d]:v=c[_.dataKey];var C={};typeof v=="object"&&!Array.isArray(v)&&(C=(v==null?void 0:v.styles)||{});var N=Pk(t,_,u,i,n,a,C),A=new D_(v,N,t);g[_.dataKey]=A,g[_.index]=A,f=A.colSpan-1,o[_.index]={left:A.rowSpan-1,times:f}}else f--,m++;else o[_.index].left--,f=o[_.index].times,d++}return new T_(c,u,t,g)});return l}function Ey(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=Ak(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function Ak(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function kk(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new xk(i,e,r)})}function Pk(t,e,r,n,i,a,o){var l=ak(n),c;t==="head"?c=i.headStyles:t==="body"?c=i.bodyStyles:t==="foot"&&(c=i.footStyles);var u=as({},l.table,l[t],i.styles,c),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=t==="body"?d:{},m=t==="body"&&r%2===0?as({},l.alternateRow,i.alternateRowStyles):{},f=ik(a),x=as({},f,u,m,g);return as(x,o)}function Ek(t,e,r){var n;r===void 0&&(r={});var i=k_(t,e),a=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var f=e.columns.find(function(x){return x.dataKey===m||x.index===m});f&&!a.has(f.index)&&(a.set(f.index,!0),o.push(f.index),l.push(e.columns[f.index]),i-=f.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(a.has(d)){d++;continue}var g=e.columns[d].wrappedWidth;if(u||i>=g)u=!1,o.push(d),l.push(e.columns[d]),i-=g;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function Fk(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=Ek(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function R_(t,e){var r=e.settings,n=r.startY,i=r.margin,a={x:i.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+i.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(m,f){return m+f.height},0);l+=u}var d=new $l(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(B_(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var g=as({},a);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Tk(d,e,g,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return ds(d,e,m,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,f){var x=f===e.body.length-1;Ih(d,e,m,x,g,a,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return ds(d,e,m,a,e.columns)})),L_(d,e,g,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Tk(t,e,r,n){var i=Fk(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?cu(t,e,r,n,u.columns,!0):Fy(t,e,n,u.columns),Dk(t,e,r,n,u.columns),Jg(t,e,n,u.columns)});else for(var o=-1,l=i[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?cu(t,e,r,n,d,!0):Fy(t,e,n,d),u=Ty(t,e,o+1,n,d),Jg(t,e,n,d)}var g=u-o;i.slice(1).forEach(function(m){t.applyStyles(t.userStyles),cu(t,e,r,n,m.columns,!0),Ty(t,e,o+1,n,m.columns,g),Jg(t,e,n,m.columns)}),o=u};o<e.body.length-1;)c()}function Fy(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return ds(t,e,a,r,n)})}function Dk(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(a,o){var l=o===e.body.length-1;Ih(t,e,a,l,r,n,i)})}function Ty(t,e,r,n,i,a){t.applyStyles(t.userStyles),a=a??e.body.length;var o=Math.min(r+a,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,g=O_(t,e,d,n);c.canEntireRowFit(g,i)&&(ds(t,e,c,n,i),l=r+u)}),l}function Jg(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return ds(t,e,a,r,n)})}function Ik(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),a=Math.floor((e-i)/n);return Math.max(0,a)}function Rk(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var a=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new D_(u.raw,u.styles,u.section);d=as(d,u),d.text=[];var g=Ik(u,e,n);u.text.length>g&&(d.text=u.text.splice(g,u.text.length));var m=n.scaleFactor(),f=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,f),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,f),d.contentHeight>a&&(a=d.contentHeight),i[c.index]=d}}var x=new T_(t.raw,-1,t.section,i,!0);x.height=a;for(var j=0,_=r.columns;j<_.length;j++){var c=_[j],d=x.cells[c.index];d&&(d.height=x.height);var u=t.cells[c.index];u&&(u.height=t.height)}return x}function Ok(t,e,r,n){var i=t.pageSize().height,a=n.settings.margin,o=a.top+a.bottom,l=i-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),g=e.getMaxCellHeight(n.columns)>l;return g?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Ih(t,e,r,n,i,a,o){var l=O_(t,e,n,a);if(r.canEntireRowFit(l,o))ds(t,e,r,a,o);else if(Ok(t,r,l,e)){var c=Rk(r,l,e,t);ds(t,e,r,a,o),cu(t,e,i,a,o),Ih(t,e,c,n,i,a,o)}else cu(t,e,i,a,o),Ih(t,e,r,n,i,a,o)}function ds(t,e,r,n,i){n.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var l=o[a],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}Bk(t,c,n);var d=c.getTextPos();j_(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function Bk(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=A_(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Mk(t,e,r,n.lineWidth))}function Mk(t,e,r,n){var i,a,o,l;n.top&&(i=r.x,a=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,a,o,l)),n.bottom&&(i=r.x,a=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,a,o,l)),n.left&&(i=r.x,a=r.y,o=r.x,l=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,i,a,o,l)),n.right&&(i=r.x+e.width,a=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,i,a,o,l));function c(u,d,g,m,f){t.getDocument().setLineWidth(u),t.getDocument().line(d,g,m,f,"S")}}function O_(t,e,r,n){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function cu(t,e,r,n,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(l){return ds(t,e,l,n,i)}),e.callEndPageHooks(t,n);var o=e.settings.margin;L_(t,e,r,n),B_(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return ds(t,e,l,n,i)}),t.applyStyles(t.userStyles))}function B_(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function Uk(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=F_(this,n),a=I_(this,i);return R_(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){j_(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return $l.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){$l.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new $l(this),a=E_(i,e,window,r,!1),o=a.head,l=a.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var Kg;function vr(t,e){var r=F_(t,e),n=I_(t,r);R_(t,n)}try{if(typeof window<"u"&&window){var Dy=window,Iy=Dy.jsPDF||((Kg=Dy.jspdf)===null||Kg===void 0?void 0:Kg.jsPDF);Iy&&Uk(Iy)}}catch(t){console.error("Could not apply autoTable plugin",t)}var ui={},$k=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},M_={},zi={};let Fm;const qk=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];zi.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};zi.getSymbolTotalCodewords=function(e){return qk[e]};zi.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};zi.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Fm=e};zi.isKanjiModeEnabled=function(){return typeof Fm<"u"};zi.toSJIS=function(e){return Fm(e)};var hf={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(hf);function U_(){this.buffer=[],this.length=0}U_.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var zk=U_;function qu(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}qu.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};qu.prototype.get=function(t,e){return this.data[t*this.size+e]};qu.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};qu.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Wk=qu,$_={};(function(t){const e=zi.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,a=e(n),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,l=[a-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const i=[],a=t.getRowColCoords(n),o=a.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([a[l],a[c]]);return i}})($_);var q_={};const Hk=zi.getSymbolSize,Ry=7;q_.getPositions=function(e){const r=Hk(e);return[[0,0],[r-Ry,0],[0,r-Ry]]};var z_={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const a=i.size;let o=0,l=0,c=0,u=null,d=null;for(let g=0;g<a;g++){l=c=0,u=d=null;for(let m=0;m<a;m++){let f=i.get(g,m);f===u?l++:(l>=5&&(o+=e.N1+(l-5)),u=f,l=1),f=i.get(m,g),f===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=f,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const a=i.size;let o=0;for(let l=0;l<a-1;l++)for(let c=0;c<a-1;c++){const u=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const a=i.size;let o=0,l=0,c=0;for(let u=0;u<a;u++){l=c=0;for(let d=0;d<a;d++)l=l<<1&2047|i.get(u,d),d>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let c=0;c<o;c++)a+=i.data[c];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function r(n,i,a){switch(n){case t.Patterns.PATTERN000:return(i+a)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return a%3===0;case t.Patterns.PATTERN011:return(i+a)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case t.Patterns.PATTERN101:return i*a%2+i*a%3===0;case t.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case t.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,a){const o=a.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)a.isReserved(c,l)||a.xor(c,l,r(i,c,l))},t.getBestMask=function(i,a){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let u=0;u<o;u++){a(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,l=u)}return l}})(z_);var ff={};const Us=hf,Bd=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Md=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ff.getBlocksCount=function(e,r){switch(r){case Us.L:return Bd[(e-1)*4+0];case Us.M:return Bd[(e-1)*4+1];case Us.Q:return Bd[(e-1)*4+2];case Us.H:return Bd[(e-1)*4+3];default:return}};ff.getTotalCodewordsCount=function(e,r){switch(r){case Us.L:return Md[(e-1)*4+0];case Us.M:return Md[(e-1)*4+1];case Us.Q:return Md[(e-1)*4+2];case Us.H:return Md[(e-1)*4+3];default:return}};var W_={},gf={};const uu=new Uint8Array(512),Rh=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)uu[r]=e,Rh[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)uu[r]=uu[r-255]})();gf.log=function(e){if(e<1)throw new Error("log("+e+")");return Rh[e]};gf.exp=function(e){return uu[e]};gf.mul=function(e,r){return e===0||r===0?0:uu[Rh[e]+Rh[r]]};(function(t){const e=gf;t.mul=function(n,i){const a=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)a[o+l]^=e.mul(n[o],i[l]);return a},t.mod=function(n,i){let a=new Uint8Array(n);for(;a.length-i.length>=0;){const o=a[0];for(let c=0;c<i.length;c++)a[c]^=e.mul(i[c],o);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let a=0;a<n;a++)i=t.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(W_);const H_=W_;function Tm(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Tm.prototype.initialize=function(e){this.degree=e,this.genPoly=H_.generateECPolynomial(this.degree)};Tm.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=H_.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const a=new Uint8Array(this.degree);return a.set(n,i),a}return n};var Gk=Tm,G_={},ro={},Dm={};Dm.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ma={};const Y_="[0-9]+",Yk="[A-Z $%*+\\-./:]+";let Tu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Tu=Tu.replace(/u/g,"\\u");const Vk="(?:(?![A-Z0-9 $%*+\\-./:]|"+Tu+`)(?:.|[\r
]))+`;Ma.KANJI=new RegExp(Tu,"g");Ma.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ma.BYTE=new RegExp(Vk,"g");Ma.NUMERIC=new RegExp(Y_,"g");Ma.ALPHANUMERIC=new RegExp(Yk,"g");const Jk=new RegExp("^"+Tu+"$"),Kk=new RegExp("^"+Y_+"$"),Qk=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ma.testKanji=function(e){return Jk.test(e)};Ma.testNumeric=function(e){return Kk.test(e)};Ma.testAlphanumeric=function(e){return Qk.test(e)};(function(t){const e=Dm,r=Ma;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},t.getBestModeForData=function(a){return r.testNumeric(a)?t.NUMERIC:r.testAlphanumeric(a)?t.ALPHANUMERIC:r.testKanji(a)?t.KANJI:t.BYTE},t.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},t.isValid=function(a){return a&&a.bit&&a.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(a,o){if(t.isValid(a))return a;try{return n(a)}catch{return o}}})(ro);(function(t){const e=zi,r=ff,n=hf,i=ro,a=Dm,o=7973,l=e.getBCHDigit(o);function c(m,f,x){for(let j=1;j<=40;j++)if(f<=t.getCapacity(j,x,m))return j}function u(m,f){return i.getCharCountIndicator(m,f)+4}function d(m,f){let x=0;return m.forEach(function(j){const _=u(j.mode,f);x+=_+j.getBitsLength()}),x}function g(m,f){for(let x=1;x<=40;x++)if(d(m,x)<=t.getCapacity(x,f,i.MIXED))return x}t.from=function(f,x){return a.isValid(f)?parseInt(f,10):x},t.getCapacity=function(f,x,j){if(!a.isValid(f))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=i.BYTE);const _=e.getSymbolTotalCodewords(f),v=r.getTotalCodewordsCount(f,x),C=(_-v)*8;if(j===i.MIXED)return C;const N=C-u(j,f);switch(j){case i.NUMERIC:return Math.floor(N/10*3);case i.ALPHANUMERIC:return Math.floor(N/11*2);case i.KANJI:return Math.floor(N/13);case i.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(f,x){let j;const _=n.from(x,n.M);if(Array.isArray(f)){if(f.length>1)return g(f,_);if(f.length===0)return 1;j=f[0]}else j=f;return c(j.mode,j.getLength(),_)},t.getEncodedBits=function(f){if(!a.isValid(f)||f<7)throw new Error("Invalid QR Code version");let x=f<<12;for(;e.getBCHDigit(x)-l>=0;)x^=o<<e.getBCHDigit(x)-l;return f<<12|x}})(G_);var V_={};const w0=zi,J_=1335,Xk=21522,Oy=w0.getBCHDigit(J_);V_.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;w0.getBCHDigit(i)-Oy>=0;)i^=J_<<w0.getBCHDigit(i)-Oy;return(n<<10|i)^Xk};var K_={};const Zk=ro;function Kl(t){this.mode=Zk.NUMERIC,this.data=t.toString()}Kl.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Kl.prototype.getLength=function(){return this.data.length};Kl.prototype.getBitsLength=function(){return Kl.getBitsLength(this.data.length)};Kl.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const a=this.data.length-r;a>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,a*3+1))};var eP=Kl;const tP=ro,Qg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ql(t){this.mode=tP.ALPHANUMERIC,this.data=t}Ql.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ql.prototype.getLength=function(){return this.data.length};Ql.prototype.getBitsLength=function(){return Ql.getBitsLength(this.data.length)};Ql.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Qg.indexOf(this.data[r])*45;n+=Qg.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Qg.indexOf(this.data[r]),6)};var rP=Ql;const nP=ro;function Xl(t){this.mode=nP.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Xl.getBitsLength=function(e){return e*8};Xl.prototype.getLength=function(){return this.data.length};Xl.prototype.getBitsLength=function(){return Xl.getBitsLength(this.data.length)};Xl.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var iP=Xl;const aP=ro,sP=zi;function Zl(t){this.mode=aP.KANJI,this.data=t}Zl.getBitsLength=function(e){return e*13};Zl.prototype.getLength=function(){return this.data.length};Zl.prototype.getBitsLength=function(){return Zl.getBitsLength(this.data.length)};Zl.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=sP.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var oP=Zl,Q_={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var a={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,u,d,g,m,f,x,j,_;!l.empty();){c=l.pop(),u=c.value,g=c.cost,m=r[u]||{};for(d in m)m.hasOwnProperty(d)&&(f=m[d],x=g+f,j=o[d],_=typeof o[d]>"u",(_||j>x)&&(o[d]=x,l.push(d,x),a[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var v=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(v)}return a},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],a=n;a;)i.push(a),r[a],a=r[a];return i.reverse(),i},find_path:function(r,n,i){var a=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},a;r=r||{};for(a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Q_);var lP=Q_.exports;(function(t){const e=ro,r=eP,n=rP,i=iP,a=oP,o=Ma,l=zi,c=lP;function u(v){return unescape(encodeURIComponent(v)).length}function d(v,C,N){const A=[];let O;for(;(O=v.exec(N))!==null;)A.push({data:O[0],index:O.index,mode:C,length:O[0].length});return A}function g(v){const C=d(o.NUMERIC,e.NUMERIC,v),N=d(o.ALPHANUMERIC,e.ALPHANUMERIC,v);let A,O;return l.isKanjiModeEnabled()?(A=d(o.BYTE,e.BYTE,v),O=d(o.KANJI,e.KANJI,v)):(A=d(o.BYTE_KANJI,e.BYTE,v),O=[]),C.concat(N,A,O).sort(function(V,F){return V.index-F.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function m(v,C){switch(C){case e.NUMERIC:return r.getBitsLength(v);case e.ALPHANUMERIC:return n.getBitsLength(v);case e.KANJI:return a.getBitsLength(v);case e.BYTE:return i.getBitsLength(v)}}function f(v){return v.reduce(function(C,N){const A=C.length-1>=0?C[C.length-1]:null;return A&&A.mode===N.mode?(C[C.length-1].data+=N.data,C):(C.push(N),C)},[])}function x(v){const C=[];for(let N=0;N<v.length;N++){const A=v[N];switch(A.mode){case e.NUMERIC:C.push([A,{data:A.data,mode:e.ALPHANUMERIC,length:A.length},{data:A.data,mode:e.BYTE,length:A.length}]);break;case e.ALPHANUMERIC:C.push([A,{data:A.data,mode:e.BYTE,length:A.length}]);break;case e.KANJI:C.push([A,{data:A.data,mode:e.BYTE,length:u(A.data)}]);break;case e.BYTE:C.push([{data:A.data,mode:e.BYTE,length:u(A.data)}])}}return C}function j(v,C){const N={},A={start:{}};let O=["start"];for(let G=0;G<v.length;G++){const V=v[G],F=[];for(let $=0;$<V.length;$++){const Z=V[$],D=""+G+$;F.push(D),N[D]={node:Z,lastCount:0},A[D]={};for(let Y=0;Y<O.length;Y++){const ce=O[Y];N[ce]&&N[ce].node.mode===Z.mode?(A[ce][D]=m(N[ce].lastCount+Z.length,Z.mode)-m(N[ce].lastCount,Z.mode),N[ce].lastCount+=Z.length):(N[ce]&&(N[ce].lastCount=Z.length),A[ce][D]=m(Z.length,Z.mode)+4+e.getCharCountIndicator(Z.mode,C))}}O=F}for(let G=0;G<O.length;G++)A[O[G]].end=0;return{map:A,table:N}}function _(v,C){let N;const A=e.getBestModeForData(v);if(N=e.from(C,A),N!==e.BYTE&&N.bit<A.bit)throw new Error('"'+v+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(A));switch(N===e.KANJI&&!l.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new r(v);case e.ALPHANUMERIC:return new n(v);case e.KANJI:return new a(v);case e.BYTE:return new i(v)}}t.fromArray=function(C){return C.reduce(function(N,A){return typeof A=="string"?N.push(_(A,null)):A.data&&N.push(_(A.data,A.mode)),N},[])},t.fromString=function(C,N){const A=g(C,l.isKanjiModeEnabled()),O=x(A),G=j(O,N),V=c.find_path(G.map,"start","end"),F=[];for(let $=1;$<V.length-1;$++)F.push(G.table[V[$]].node);return t.fromArray(f(F))},t.rawSplit=function(C){return t.fromArray(g(C,l.isKanjiModeEnabled()))}})(K_);const pf=zi,Xg=hf,cP=zk,uP=Wk,dP=$_,hP=q_,S0=z_,j0=ff,fP=Gk,Oh=G_,gP=V_,pP=ro,Zg=K_;function mP(t,e){const r=t.size,n=hP.getPositions(e);for(let i=0;i<n.length;i++){const a=n[i][0],o=n[i][1];for(let l=-1;l<=7;l++)if(!(a+l<=-1||r<=a+l))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(a+l,o+c,!0,!0):t.set(a+l,o+c,!1,!0))}}function vP(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function yP(t,e){const r=dP.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],a=r[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(i+o,a+l,!0,!0):t.set(i+o,a+l,!1,!0)}}function bP(t,e){const r=t.size,n=Oh.getEncodedBits(e);let i,a,o;for(let l=0;l<18;l++)i=Math.floor(l/3),a=l%3+r-8-3,o=(n>>l&1)===1,t.set(i,a,o,!0),t.set(a,i,o,!0)}function ep(t,e,r){const n=t.size,i=gP.getEncodedBits(e,r);let a,o;for(a=0;a<15;a++)o=(i>>a&1)===1,a<6?t.set(a,8,o,!0):a<8?t.set(a+1,8,o,!0):t.set(n-15+a,8,o,!0),a<8?t.set(8,n-a-1,o,!0):a<9?t.set(8,15-a-1+1,o,!0):t.set(8,15-a-1,o,!0);t.set(n-8,8,1,!0)}function xP(t,e){const r=t.size;let n=-1,i=r-1,a=7,o=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,l-c)){let u=!1;o<e.length&&(u=(e[o]>>>a&1)===1),t.set(i,l-c,u),a--,a===-1&&(o++,a=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function _P(t,e,r){const n=new cP;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),pP.getCharCountIndicator(c.mode,t)),c.write(n)});const i=pf.getSymbolTotalCodewords(t),a=j0.getTotalCodewordsCount(t,e),o=(i-a)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return wP(n,t,e)}function wP(t,e,r){const n=pf.getSymbolTotalCodewords(e),i=j0.getTotalCodewordsCount(e,r),a=n-i,o=j0.getBlocksCount(e,r),l=n%o,c=o-l,u=Math.floor(n/o),d=Math.floor(a/o),g=d+1,m=u-d,f=new fP(m);let x=0;const j=new Array(o),_=new Array(o);let v=0;const C=new Uint8Array(t.buffer);for(let V=0;V<o;V++){const F=V<c?d:g;j[V]=C.slice(x,x+F),_[V]=f.encode(j[V]),x+=F,v=Math.max(v,F)}const N=new Uint8Array(n);let A=0,O,G;for(O=0;O<v;O++)for(G=0;G<o;G++)O<j[G].length&&(N[A++]=j[G][O]);for(O=0;O<m;O++)for(G=0;G<o;G++)N[A++]=_[G][O];return N}function SP(t,e,r,n){let i;if(Array.isArray(t))i=Zg.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=Zg.rawSplit(t);u=Oh.getBestVersionForData(d,r)}i=Zg.fromString(t,u||40)}else throw new Error("Invalid data");const a=Oh.getBestVersionForData(i,r);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const o=_P(e,r,i),l=pf.getSymbolSize(e),c=new uP(l);return mP(c,e),vP(c),yP(c,e),ep(c,r,0),e>=7&&bP(c,e),xP(c,o),isNaN(n)&&(n=S0.getBestMask(c,ep.bind(null,c,r))),S0.applyMask(n,c),ep(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}M_.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Xg.M,i,a;return typeof r<"u"&&(n=Xg.from(r.errorCorrectionLevel,Xg.M),i=Oh.from(r.version),a=S0.from(r.maskPattern),r.toSJISFunc&&pf.setToSJISFunction(r.toSJISFunc)),SP(e,i,n,a)};var X_={},Im={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const a=t.getScale(n,i);return Math.floor((n+i.margin*2)*a)},t.qrToImageData=function(n,i,a){const o=i.modules.size,l=i.modules.data,c=t.getScale(o,a),u=Math.floor((o+a.margin*2)*c),d=a.margin*c,g=[a.color.light,a.color.dark];for(let m=0;m<u;m++)for(let f=0;f<u;f++){let x=(m*u+f)*4,j=a.color.light;if(m>=d&&f>=d&&m<u-d&&f<u-d){const _=Math.floor((m-d)/c),v=Math.floor((f-d)/c);j=g[l[_*o+v]?1:0]}n[x++]=j.r,n[x++]=j.g,n[x++]=j.b,n[x]=j.a}}})(Im);(function(t){const e=Im;function r(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(a,o,l){let c=l,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(a.modules.size,c),g=u.getContext("2d"),m=g.createImageData(d,d);return e.qrToImageData(m.data,a,c),r(g,u,d),g.putImageData(m,0,0),u},t.renderToDataURL=function(a,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(a,o,c),d=c.type||"image/png",g=c.rendererOpts||{};return u.toDataURL(d,g.quality)}})(X_);var Z_={};const jP=Im;function By(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function tp(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function NP(t,e,r){let n="",i=0,a=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),u=Math.floor(l/e);!c&&!a&&(a=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=a?tp("M",c+r,.5+u+r):tp("m",i,0),i=0,a=!1),c+1<e&&t[l+1]||(n+=tp("h",o),o=0)):i++}return n}Z_.render=function(e,r,n){const i=jP.getOptions(r),a=e.modules.size,o=e.modules.data,l=a+i.margin*2,c=i.color.light.a?"<path "+By(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+By(i.color.dark,"stroke")+' d="'+NP(o,a,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,m),m};const CP=$k,N0=M_,ew=X_,LP=Z_;function Rm(t,e,r,n,i){const a=[].slice.call(arguments,1),o=a.length,l=typeof a[o-1]=="function";if(!l&&!CP())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=N0.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=N0.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}ui.create=N0.create;ui.toCanvas=Rm.bind(null,ew.render);ui.toDataURL=Rm.bind(null,ew.renderToDataURL);ui.toString=Rm.bind(null,function(t,e,r){return LP.render(t,r)});const Om=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"})),en=t=>{if(!t)return"";let e=String(t);for(let r=0;r<5;r++)e=e.replace(/%%%/g,"").replace(/%\s+%%%/g,"").replace(/%\s{1,}%%%/g,"").replace(/%%\s+%/g,"").replace(/%\s{1,}%\s{1,}%/g,"").replace(/\s*%\s*%\s*%\s*/g,"").replace(/\s*%\s{1,}%\s{1,}%\s*/g,"").replace(/%+/g,"").replace(/%/g,"");return e=e.replace(/[^\w\s\-\.]/g,"").replace(/\s+/g," ").trim(),e},Lt=t=>{if(!t)return"";let e=String(t);return e.includes("%")&&(console.log("🔍 SANITIZE DEBUG - Original text with %:",e),console.log("🔍 Character codes:",e.split("").map(r=>`${r}(${r.charCodeAt(0)})`).join(" "))),e=e.replace(/%%%/g,"").replace(/%\s+%%%/g,"").replace(/%\s{1,}%%%/g,"").replace(/%%\s+%/g,"").replace(/%\s{1,}%\s{1,}%/g,"").replace(/\s*%\s*%\s*%\s*/g,"").replace(/\s*%\s{1,}%\s{1,}%\s*/g,"").replace(/%+/g,"").replace(/%.*?%/g,"").replace(/\b%/g,"").replace(/%\b/g,"").replace(/\s*%\s*/g," ").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/[^\w\s]%[^\w\s]/g,""),e=e.replace(/Ø=UÈ/g,"").replace(/Ø<ða/g,"").replace(/Ø=Ud/g,"").replace(/Ø-ÜÈ/g,"").replace(/Ø-Üd/g,"").replace(/Ø<Ða/g,"").replace(/Ø<ßà/g,"").replace(/Ø/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(/[^\w\s\-\.]/g,""),e=e.replace(/Ã¸/g,"ø").replace(/Ã©/g,"é").replace(/Ã¨/g,"è").replace(/Ã¡/g,"á").replace(/Ã /g,"à").replace(/Ã§/g,"ç").replace(/Ã´/g,"ô").replace(/Ã»/g,"û").replace(/Ã®/g,"î").replace(/Ã¯/g,"ï").replace(/Ã¢/g,"â").replace(/Ã«/g,"ë").replace(/Ã¼/g,"ü").replace(/Ã¶/g,"ö").replace(/Ã¤/g,"ä"),e=e.replace(/\s+/g," ").trim(),e=e.replace(/%/g,""),String(t).includes("%")&&(console.log("🔍 SANITIZE DEBUG - Final cleaned text:",e),console.log("🔍 Still contains %?",e.includes("%"))),e},C0=(t,e="Export Data",r=[],n={})=>{const i=new Dt(n.orientation||"portrait","mm",n.pageSize||"a4");i.setFontSize(18),i.setTextColor(40,40,40);const a=en(n.federationName||"Algerian Judo Federation");i.text(a,14,15),i.setFontSize(16),i.setTextColor(40,40,40);const o=en(e);i.text(o,14,30),i.setFontSize(10);const l=new Date().toLocaleString();if(i.text(`Generated: ${l}`,14,37),n.logoUrl)try{i.addImage(n.logoUrl,"PNG",170,10,25,25)}catch(f){console.error("Error adding logo to PDF:",f)}let c=45;if(n.includePhotos&&n.photoField){const f=n.photoField||"photos_url",x=n.photoWidth||30,j=n.photoHeight||20,_=n.photosPerRow||5,v=n.photoSpacing||5,C=t.filter(N=>N[f]);if(C.length>0){const N=Math.ceil(C.length/_);let A=0,O=0;C.forEach((G,V)=>{try{const F=14+O*(x+v),$=50+A*(j+v+10);if(i.addImage(G[f],"PNG",F,$,x,j),G.first_name&&G.last_name?(i.setFontSize(8),i.text(`${G.first_name} ${G.last_name}`,F,$+j+5,{maxWidth:x})):(G.first_name||G.last_name)&&(i.setFontSize(8),i.text(`${G.first_name||""} ${G.last_name||""}`.trim(),F,$+j+5,{maxWidth:x})),G.hasOwnProperty("confirmation")){i.setFontSize(6),G.confirmation?i.setTextColor(0,128,0):i.setTextColor(255,0,0);const Z=G.confirmation?"✓":"✗";i.text(Z,F+x-5,$+5),i.setTextColor(0,0,0)}O++,O>=_&&(O=0,A++)}catch(F){console.error(`Error adding photo for item ${V}:`,F)}}),N>0&&(c=30+N*(j+v+15))}}const u=r.length>0?r.map(f=>({header:f.header,dataKey:f.dataKey})):Object.keys(t[0]||{}).map(f=>({header:f.charAt(0).toUpperCase()+f.slice(1).replace(/_/g," "),dataKey:f})),d=(f,x)=>{if(x)return x.split(".").reduce((j,_)=>j==null?void 0:j[_],f)},g=t.map(f=>{const x={};return u.forEach(j=>{let _=d(f,j.dataKey)||f[j.dataKey];typeof _=="string"&&(_=en(_)),x[j.dataKey]=_}),x});vr(i,{startY:c,head:[u.map(f=>f.header)],body:g.map(f=>u.map(x=>f[x.dataKey])),theme:n.theme||"striped",headStyles:{fillColor:n.headerColor||[40,40,40]},margin:{top:30},styles:{overflow:"linebreak"},columnStyles:n.columnStyles||{}});const m=i.lastAutoTable.finalY||200;if(i.setFontSize(12),i.setTextColor(0,0,0),i.text("Medical certificate",14,m+20),i.setDrawColor(0),i.line(14,m+40,80,m+40),t.length>0){i.setFontSize(10);const f=t.some(j=>j.club_id),x=t.some(j=>j.league_id);if(f){const j=t.find(_=>_.club_id);if(j){const _=j.club_id,v=n.clubNames&&n.clubNames[_]?n.clubNames[_]:`ID: ${_}`;i.text(`Club: ${Lt(v)}`,14,m+60),i.text("Club Visa: _________________",14,m+70)}}if(x){const j=t.find(_=>_.league_id);if(j){const _=j.league_id,v=n.leagueNames&&n.leagueNames[_]?n.leagueNames[_]:`ID: ${_}`;i.text(`League: ${Lt(v)}`,120,m+60),i.text("League Visa: _________________",120,m+70)}}}i.save(`${n.filename||e.toLowerCase().replace(/ /g,"_")}.pdf`)},An=async()=>{try{const{data:t,error:e}=await ne.from("nameclub").select("id, name_club");if(e)throw e;const r={};return t.forEach(n=>{r[n.id]=n.name_club}),r}catch(t){return console.error("Error fetching club names:",t),{}}},qn=async()=>{try{const{data:t,error:e}=await ne.from("nameleague").select("id, name_league");if(e)throw e;const r={};return t.forEach(n=>{r[n.id]=n.name_league}),r}catch(t){return console.error("Error fetching league names:",t),{}}},AP=(t,e="export",r=[])=>{const n=r.length>0?r.map(d=>d.field):Object.keys(t[0]||{}),i=r.length>0?r.map(d=>d.header||d.field).join(","):n.join(","),a=t.map(d=>n.map(g=>{const m=d[g];if(m==null)return"";const f=String(m);return f.includes(",")||f.includes('"')||f.includes(`
`)?`"${f.replace(/"/g,'""')}"`:f}).join(",")),o=[i,...a].join(`
`),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),c=URL.createObjectURL(l),u=document.createElement("a");u.setAttribute("href",c),u.setAttribute("download",`${e}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)};var tw={exports:{}};(function(t){(function(e){var r=e.URL||e.webkitURL;function n(u){return r?r.createObjectURL(u):!1}function i(u){return r?r.revokeObjectURL(u):!1}function a(u,d){u&&u.slice(0,5)==="blob:"&&!(d&&d.noRevoke)&&i(u)}function o(u,d,g,m){if(!e.FileReader)return!1;var f=new FileReader;f.onload=function(){d.call(f,this.result)},g&&(f.onabort=f.onerror=function(){g.call(f,this.error)});var x=f[m||"readAsDataURL"];if(x)return x.call(f,u),f}function l(u,d){return Object.prototype.toString.call(d)==="[object "+u+"]"}function c(u,d,g){function m(f,x){var j=document.createElement("img"),_;function v(N,A){if(f===x){f&&f(N,A);return}else if(N instanceof Error){x(N);return}A=A||{},A.image=N,f(A)}function C(N,A){A&&e.console&&console.log(A),N&&l("Blob",N)?(u=N,_=n(u)):(_=u,g&&g.crossOrigin&&(j.crossOrigin=g.crossOrigin)),j.src=_}if(j.onerror=function(N){a(_,g),x&&x.call(j,N)},j.onload=function(){a(_,g);var N={originalWidth:j.naturalWidth||j.width,originalHeight:j.naturalHeight||j.height};try{c.transform(j,g,v,u,N)}catch(A){x&&x(A)}},typeof u=="string")return c.requiresMetaData(g)?c.fetchBlob(u,C,g):C(),j;if(l("Blob",u)||l("File",u))return _=n(u),_?(j.src=_,j):o(u,function(N){j.src=N},x)}return e.Promise&&typeof d!="function"?(g=d,new Promise(m)):m(d,d)}c.requiresMetaData=function(u){return u&&u.meta},c.fetchBlob=function(u,d){d()},c.transform=function(u,d,g,m,f){g(u,f)},c.global=e,c.readFile=o,c.isInstanceOf=l,c.createObjectURL=n,c.revokeObjectURL=i,t.exports?t.exports=c:e.loadImage=c})(typeof window<"u"&&window||Mi)})(tw);var fs=tw.exports,rw={exports:{}};(function(t){(function(e){t.exports?e(fs):e(window.loadImage)})(function(e){var r=e.transform;e.createCanvas=function(n,i,a){if(a&&e.global.OffscreenCanvas)return new OffscreenCanvas(n,i);var o=document.createElement("canvas");return o.width=n,o.height=i,o},e.transform=function(n,i,a,o,l){r.call(e,e.scale(n,i,l),i,a,o,l)},e.transformCoordinates=function(){},e.getTransformedOptions=function(n,i){var a=i.aspectRatio,o,l,c,u;if(!a)return i;o={};for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(o[l]=i[l]);return o.crop=!0,c=n.naturalWidth||n.width,u=n.naturalHeight||n.height,c/u>a?(o.maxWidth=u*a,o.maxHeight=u):(o.maxWidth=c,o.maxHeight=c/a),o},e.drawImage=function(n,i,a,o,l,c,u,d,g){var m=i.getContext("2d");return g.imageSmoothingEnabled===!1?(m.msImageSmoothingEnabled=!1,m.imageSmoothingEnabled=!1):g.imageSmoothingQuality&&(m.imageSmoothingQuality=g.imageSmoothingQuality),m.drawImage(n,a,o,l,c,0,0,u,d),m},e.requiresCanvas=function(n){return n.canvas||n.crop||!!n.aspectRatio},e.scale=function(n,i,a){i=i||{},a=a||{};var o=n.getContext||e.requiresCanvas(i)&&!!e.global.HTMLCanvasElement,l=n.naturalWidth||n.width,c=n.naturalHeight||n.height,u=l,d=c,g,m,f,x,j,_,v,C,N,A,O,G;function V(){var $=Math.max((f||u)/u,(x||d)/d);$>1&&(u*=$,d*=$)}function F(){var $=Math.min((g||u)/u,(m||d)/d);$<1&&(u*=$,d*=$)}if(o&&(i=e.getTransformedOptions(n,i,a),v=i.left||0,C=i.top||0,i.sourceWidth?(j=i.sourceWidth,i.right!==void 0&&i.left===void 0&&(v=l-j-i.right)):j=l-v-(i.right||0),i.sourceHeight?(_=i.sourceHeight,i.bottom!==void 0&&i.top===void 0&&(C=c-_-i.bottom)):_=c-C-(i.bottom||0),u=j,d=_),g=i.maxWidth,m=i.maxHeight,f=i.minWidth,x=i.minHeight,o&&g&&m&&i.crop?(u=g,d=m,O=j/_-g/m,O<0?(_=m*j/g,i.top===void 0&&i.bottom===void 0&&(C=(c-_)/2)):O>0&&(j=g*_/m,i.left===void 0&&i.right===void 0&&(v=(l-j)/2))):((i.contain||i.cover)&&(f=g=g||f,x=m=m||x),i.cover?(F(),V()):(V(),F())),o){if(N=i.pixelRatio,N>1&&!(n.style.width&&Math.floor(parseFloat(n.style.width,10))===Math.floor(l/N))&&(u*=N,d*=N),e.orientationCropBug&&!n.getContext&&(v||C||j!==l||_!==c)&&(O=n,n=e.createCanvas(l,c,!0),e.drawImage(O,n,0,0,l,c,l,c,i)),A=i.downsamplingRatio,A>0&&A<1&&u<j&&d<_)for(;j*A>u;)G=e.createCanvas(j*A,_*A,!0),e.drawImage(n,G,v,C,j,_,G.width,G.height,i),v=0,C=0,j=G.width,_=G.height,n=G;return G=e.createCanvas(u,d),e.transformCoordinates(G,i,a),N>1&&(G.style.width=G.width/N+"px"),e.drawImage(n,G,v,C,j,_,u,d,i).setTransform(1,0,0,1,0,0),G}return n.width=u,n.height=d,n}})})(rw);var kP=rw.exports,nw={exports:{}};(function(t){(function(e){t.exports?e(fs):e(window.loadImage)})(function(e){var r=e.global,n=e.transform,i=r.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a=r.ArrayBuffer&&ArrayBuffer.prototype.slice||function(d,g){g=g||this.byteLength-d;var m=new Uint8Array(this,d,g),f=new Uint8Array(g);return f.set(m),f.buffer},o={jpeg:{65505:[],65517:[]}};function l(d,g,m,f){var x=this;function j(_,v){if(!(r.DataView&&i&&d&&d.size>=12&&d.type==="image/jpeg"))return _(f);var C=m.maxMetaDataSize||262144;e.readFile(i.call(d,0,C),function(N){var A=new DataView(N);if(A.getUint16(0)!==65496)return v(new Error("Invalid JPEG file: Missing JPEG marker."));for(var O=2,G=A.byteLength-4,V=O,F,$,Z,D;O<G&&(F=A.getUint16(O),F>=65504&&F<=65519||F===65534);){if($=A.getUint16(O+2)+2,O+$>A.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if(Z=o.jpeg[F],Z&&!m.disableMetaDataParsers)for(D=0;D<Z.length;D+=1)Z[D].call(x,A,O,$,f,m);O+=$,V=O}!m.disableImageHead&&V>6&&(f.imageHead=a.call(N,0,V)),_(f)},v,"readAsArrayBuffer")||_(f)}return m=m||{},r.Promise&&typeof g!="function"?(m=g||{},f=m,new Promise(j)):(f=f||{},j(g,g))}function c(d,g,m){return!d||!g||!m?null:new Blob([m,i.call(d,g.byteLength)],{type:"image/jpeg"})}function u(d,g,m){var f={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!m&&r.Promise)return l(d,f).then(function(x){return c(d,x.imageHead,g)});l(d,function(x){m(c(d,x.imageHead,g))},f)}e.transform=function(d,g,m,f,x){e.requiresMetaData(g)?(x=x||{},l(f,function(j){j!==x&&(r.console&&console.log(j),j=x),n.call(e,d,g,m,f,j)},g,x)):n.apply(e,arguments)},e.blobSlice=i,e.bufferSlice=a,e.replaceHead=u,e.parseMetaData=l,e.metaDataParsers=o})})(nw);var Bm=nw.exports,PP={exports:{}};(function(t){(function(e){t.exports?e(fs):e(window.loadImage)})(function(e){var r=e.global;r.fetch&&r.Request&&r.Response&&r.Response.prototype.blob?e.fetchBlob=function(n,i,a){function o(l){return l.blob()}if(r.Promise&&typeof i!="function")return fetch(new Request(n,i)).then(o);fetch(new Request(n,a)).then(o).then(i).catch(function(l){i(null,l)})}:r.XMLHttpRequest&&new XMLHttpRequest().responseType===""&&(e.fetchBlob=function(n,i,a){function o(l,c){a=a||{};var u=new XMLHttpRequest;u.open(a.method||"GET",n),a.headers&&Object.keys(a.headers).forEach(function(d){u.setRequestHeader(d,a.headers[d])}),u.withCredentials=a.credentials==="include",u.responseType="blob",u.onload=function(){l(u.response)},u.onerror=u.onabort=u.ontimeout=function(d){l===c?c(null,d):c(d)},u.send(a.body)}return r.Promise&&typeof i!="function"?(a=i,new Promise(o)):o(i,i)})})})(PP);var iw={exports:{}};(function(t){(function(e){t.exports?e(fs,Bm):e(window.loadImage)})(function(e){function r(u){u&&(Object.defineProperty(this,"map",{value:this.ifds[u].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[u]||{}}))}r.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},r.prototype.ifds={ifd1:{name:"Thumbnail",map:r.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},r.prototype.get=function(u){return this[u]||this[this.map[u]]};function n(u,d,g){if(g){if(d+g>u.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}return new Blob([e.bufferSlice.call(u.buffer,d,d+g)],{type:"image/jpeg"})}}var i={1:{getValue:function(u,d){return u.getUint8(d)},size:1},2:{getValue:function(u,d){return String.fromCharCode(u.getUint8(d))},size:1,ascii:!0},3:{getValue:function(u,d,g){return u.getUint16(d,g)},size:2},4:{getValue:function(u,d,g){return u.getUint32(d,g)},size:4},5:{getValue:function(u,d,g){return u.getUint32(d,g)/u.getUint32(d+4,g)},size:8},9:{getValue:function(u,d,g){return u.getInt32(d,g)},size:4},10:{getValue:function(u,d,g){return u.getInt32(d,g)/u.getInt32(d+4,g)},size:8}};i[7]=i[1];function a(u,d,g,m,f,x){var j=i[m],_,v,C,N,A,O;if(!j){console.log("Invalid Exif data: Invalid tag type.");return}if(_=j.size*f,v=_>4?d+u.getUint32(g+8,x):g+8,v+_>u.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(f===1)return j.getValue(u,v,x);for(C=[],N=0;N<f;N+=1)C[N]=j.getValue(u,v+N*j.size,x);if(j.ascii){for(A="",N=0;N<C.length&&(O=C[N],O!=="\0");N+=1)A+=O;return A}return C}function o(u,d,g){return(!u||u[g])&&(!d||d[g]!==!0)}function l(u,d,g,m,f,x,j,_){var v,C,N,A,O,G;if(g+6>u.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}if(v=u.getUint16(g,m),C=g+2+12*v,C+4>u.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(N=0;N<v;N+=1)A=g+2+12*N,O=u.getUint16(A,m),o(j,_,O)&&(G=a(u,d,A,u.getUint16(A+2,m),u.getUint32(A+4,m),m),f[O]=G,x&&(x[O]=A));return u.getUint32(C,m)}function c(u,d,g,m,f,x,j){var _=u.exif[d];_&&(u.exif[d]=new r(d),u.exifOffsets&&(u.exifOffsets[d]=new r(d)),l(g,m,m+_,f,u.exif[d],u.exifOffsets&&u.exifOffsets[d],x&&x[d],j&&j[d]))}e.parseExifData=function(u,d,g,m,f){if(!f.disableExif){var x=f.includeExifTags,j=f.excludeExifTags||{34665:{37500:!0}},_=d+10,v,C,N;if(u.getUint32(d+4)===1165519206){if(_+8>u.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(u.getUint16(d+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(u.getUint16(_)){case 18761:v=!0;break;case 19789:v=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(u.getUint16(_+2,v)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}C=u.getUint32(_+4,v),m.exif=new r,f.disableExifOffsets||(m.exifOffsets=new r,m.exifTiffOffset=_,m.exifLittleEndian=v),C=l(u,_,_+C,v,m.exif,m.exifOffsets,x,j),C&&o(x,j,"ifd1")&&(m.exif.ifd1=C,m.exifOffsets&&(m.exifOffsets.ifd1=_+C)),Object.keys(m.exif.ifds).forEach(function(A){c(m,A,u,_,v,x,j)}),N=m.exif.ifd1,N&&N[513]&&(N[513]=n(u,_+N[513],N[514]))}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(u,d,g){var m=d.exifOffsets[274];if(!m)return u;var f=new DataView(u,m+8,2);return f.setUint16(0,g,d.exifLittleEndian),u}},e.writeExifData=function(u,d,g,m){return e.exifWriters[d.exif.map[g]](u,d,m)},e.ExifMap=r})})(iw);var EP=iw.exports,FP={exports:{}};(function(t){(function(e){t.exports?e(fs,EP):e(window.loadImage)})(function(e){var r=e.ExifMap.prototype;r.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},r.tags.ifd1=r.tags,r.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},r.getText=function(n){var i=this.get(n);switch(n){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[n][i];case"ExifVersion":case"FlashpixVersion":return i?String.fromCharCode(i[0],i[1],i[2],i[3]):void 0;case"ComponentsConfiguration":return i?this.stringValues[n][i[0]]+this.stringValues[n][i[1]]+this.stringValues[n][i[2]]+this.stringValues[n][i[3]]:void 0;case"GPSVersionID":return i?i[0]+"."+i[1]+"."+i[2]+"."+i[3]:void 0}return String(i)},r.getAll=function(){var n={},i,a,o;for(i in this)Object.prototype.hasOwnProperty.call(this,i)&&(a=this[i],a&&a.getAll?n[this.ifds[i].name]=a.getAll():(o=this.tags[i],o&&(n[o]=this.getText(o))));return n},r.getName=function(n){var i=this.tags[n];return typeof i=="object"?this.ifds[n].name:i},function(){var n=r.tags,i,a,o;for(i in n)if(Object.prototype.hasOwnProperty.call(n,i))if(a=r.ifds[i],a){o=n[i];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(a.map[o[i]]=Number(i))}else r.map[n[i]]=Number(i)}()})})(FP);var aw={exports:{}};(function(t){(function(e){t.exports?e(fs,Bm):e(window.loadImage)})(function(e){function r(){}r.prototype.map={ObjectName:5},r.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},r.prototype.get=function(u){return this[u]||this[this.map[u]]};function n(u,d,g){for(var m="",f=d+g,x=d;x<f;x+=1)m+=String.fromCharCode(u.getUint8(x));return m}function i(u,d,g,m,f){return d.types[u]==="binary"?new Blob([g.buffer.slice(m,m+f)]):d.types[u]==="Uint16"?g.getUint16(m):n(g,m,f)}function a(u,d){return u===void 0?d:u instanceof Array?(u.push(d),u):[u,d]}function o(u,d,g,m,f,x){for(var j,_,v,C=d+g,N=d;N<C;)u.getUint8(N)===28&&u.getUint8(N+1)===2&&(v=u.getUint8(N+2),(!f||f[v])&&(!x||!x[v])&&(_=u.getInt16(N+3),j=i(v,m.iptc,u,N+5,_),m.iptc[v]=a(m.iptc[v],j),m.iptcOffsets&&(m.iptcOffsets[v]=N))),N+=1}function l(u,d){return u.getUint32(d)===943868237&&u.getUint16(d+4)===1028}function c(u,d){var g=u.getUint8(d+7);return g%2!==0&&(g+=1),g===0&&(g=4),g}e.parseIptcData=function(u,d,g,m,f){if(!f.disableIptc)for(var x=d+g;d+8<x;){if(l(u,d)){var j=c(u,d),_=d+8+j;if(_>x){console.log("Invalid IPTC data: Invalid segment offset.");break}var v=u.getUint16(d+6+j);if(d+v>x){console.log("Invalid IPTC data: Invalid segment size.");break}m.iptc=new r,f.disableIptcOffsets||(m.iptcOffsets=new r),o(u,_,v,m,f.includeIptcTags,f.excludeIptcTags||{202:!0});return}d+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=r})})(aw);var TP=aw.exports,DP={exports:{}};(function(t){(function(e){t.exports?e(fs,TP):e(window.loadImage)})(function(e){var r=e.IptcMap.prototype;r.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},r.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},r.getText=function(n){var i=this.get(n),a=this.map[n],o=this.stringValues[a];return o?o[i]:String(i)},r.getAll=function(){var n={},i,a;for(i in this)Object.prototype.hasOwnProperty.call(this,i)&&(a=this.tags[i],a&&(n[a]=this.getText(a)));return n},r.getName=function(n){return this.tags[n]},function(){var n=r.tags,i=r.map||{},a;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[n[a]]=Number(a))}()})})(DP);var IP={exports:{}};(function(t){(function(e){t.exports?e(fs,kP,Bm):e(window.loadImage)})(function(e){var r=e.transform,n=e.requiresCanvas,i=e.requiresMetaData,a=e.transformCoordinates,o=e.getTransformedOptions;(function(d){if(d.global.document){var g="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",m=document.createElement("img");m.onload=function(){if(d.orientation=m.width===2&&m.height===3,d.orientation){var f=d.createCanvas(1,1,!0),x=f.getContext("2d");x.drawImage(m,1,1,1,1,0,0,1,1),d.orientationCropBug=x.getImageData(0,0,1,1).data.toString()!=="255,255,255,255"}},m.src=g}})(e);function l(d,g){var m=d&&d.orientation;return m===!0&&!e.orientation||m===1&&e.orientation||(!g||e.orientation)&&m>1&&m<9}function c(d,g){return d!==g&&(d===1&&g>1&&g<9||d>1&&d<9)}function u(d,g){if(g>1&&g<9)switch(d){case 2:case 4:return g>4;case 5:case 7:return g%2===0;case 6:case 8:return g===2||g===4||g===5||g===7}return!1}e.requiresCanvas=function(d){return l(d)||n.call(e,d)},e.requiresMetaData=function(d){return l(d,!0)||i.call(e,d)},e.transform=function(d,g,m,f,x){r.call(e,d,g,function(j,_){if(_){var v=e.orientation&&_.exif&&_.exif.get("Orientation");if(v>4&&v<9){var C=_.originalWidth,N=_.originalHeight;_.originalWidth=N,_.originalHeight=C}}m(j,_)},f,x)},e.getTransformedOptions=function(d,g,m){var f=o.call(e,d,g),x=m.exif&&m.exif.get("Orientation"),j=f.orientation,_=e.orientation&&x;if(j===!0&&(j=x),!c(j,_))return f;var v=f.top,C=f.right,N=f.bottom,A=f.left,O={};for(var G in f)Object.prototype.hasOwnProperty.call(f,G)&&(O[G]=f[G]);if(O.orientation=j,(j>4&&!(_>4)||j<5&&_>4)&&(O.maxWidth=f.maxHeight,O.maxHeight=f.maxWidth,O.minWidth=f.minHeight,O.minHeight=f.minWidth,O.sourceWidth=f.sourceHeight,O.sourceHeight=f.sourceWidth),_>1){switch(_){case 2:C=f.left,A=f.right;break;case 3:v=f.bottom,C=f.left,N=f.top,A=f.right;break;case 4:v=f.bottom,N=f.top;break;case 5:v=f.left,C=f.bottom,N=f.right,A=f.top;break;case 6:v=f.left,C=f.top,N=f.right,A=f.bottom;break;case 7:v=f.right,C=f.top,N=f.left,A=f.bottom;break;case 8:v=f.right,C=f.bottom,N=f.left,A=f.top;break}if(u(j,_)){var V=v,F=C;v=N,C=A,N=V,A=F}}switch(O.top=v,O.right=C,O.bottom=N,O.left=A,j){case 2:O.right=A,O.left=C;break;case 3:O.top=N,O.right=A,O.bottom=v,O.left=C;break;case 4:O.top=N,O.bottom=v;break;case 5:O.top=A,O.right=N,O.bottom=C,O.left=v;break;case 6:O.top=C,O.right=N,O.bottom=A,O.left=v;break;case 7:O.top=C,O.right=v,O.bottom=A,O.left=N;break;case 8:O.top=A,O.right=v,O.bottom=C,O.left=N;break}return O},e.transformCoordinates=function(d,g,m){a.call(e,d,g,m);var f=g.orientation,x=e.orientation&&m.exif&&m.exif.get("Orientation");if(c(f,x)){var j=d.getContext("2d"),_=d.width,v=d.height,C=_,N=v;switch((f>4&&!(x>4)||f<5&&x>4)&&(d.width=v,d.height=_),f>4&&(C=v,N=_),x){case 2:j.translate(C,0),j.scale(-1,1);break;case 3:j.translate(C,N),j.rotate(Math.PI);break;case 4:j.translate(0,N),j.scale(1,-1);break;case 5:j.rotate(-.5*Math.PI),j.scale(-1,1);break;case 6:j.rotate(-.5*Math.PI),j.translate(-C,0);break;case 7:j.rotate(-.5*Math.PI),j.translate(-C,N),j.scale(1,-1);break;case 8:j.rotate(.5*Math.PI),j.translate(0,-N);break}switch(u(f,x)&&(j.translate(C,N),j.rotate(Math.PI)),f){case 2:j.translate(_,0),j.scale(-1,1);break;case 3:j.translate(_,v),j.rotate(Math.PI);break;case 4:j.translate(0,v),j.scale(1,-1);break;case 5:j.rotate(.5*Math.PI),j.scale(1,-1);break;case 6:j.rotate(.5*Math.PI),j.translate(0,-v);break;case 7:j.rotate(.5*Math.PI),j.translate(_,-v),j.scale(-1,1);break;case 8:j.rotate(-.5*Math.PI),j.translate(-_,0);break}}}})})(IP);var RP=fs;const no=My(RP),Zn=()=>{const t=b.useRef(null),e=b.useRef(!1),r=b.useRef(0),n=b.useRef(0),i=b.useRef(0),a=b.useRef(0),o=g=>{if(!t.current)return;const m=g.target;m.tagName==="INPUT"||m.tagName==="TEXTAREA"||m.tagName==="SELECT"||m.tagName==="BUTTON"||m.closest("input")||m.closest("textarea")||m.closest("select")||m.closest("button")||(e.current=!0,r.current=g.pageX-t.current.offsetLeft,n.current=g.pageY-t.current.offsetTop,i.current=t.current.scrollLeft,a.current=t.current.scrollTop,t.current.style.cursor="grabbing",t.current.style.userSelect="none")},l=g=>{if(!e.current||!t.current)return;const m=g.target;m.tagName==="INPUT"||m.tagName==="TEXTAREA"||m.tagName==="SELECT"||m.tagName==="BUTTON"||m.closest("input")||m.closest("textarea")||m.closest("select")||m.closest("button")||g.preventDefault();const f=g.pageX-t.current.offsetLeft,x=g.pageY-t.current.offsetTop,j=(f-r.current)*2,_=(x-n.current)*2;t.current.scrollLeft=i.current-j,t.current.scrollTop=a.current-_},c=()=>{t.current&&(e.current&&(t.current.style.userSelect=""),e.current=!1,t.current.style.cursor="grab")},u=()=>{t.current&&(e.current&&(t.current.style.userSelect=""),e.current=!1,t.current.style.cursor="grab")};return g=>{g?(t.current=g,g.addEventListener("mousedown",o),g.addEventListener("mousemove",l),g.addEventListener("mouseup",c),g.addEventListener("mouseleave",u),g.style.cursor="grab"):t.current&&(t.current.removeEventListener("mousedown",o),t.current.removeEventListener("mousemove",l),t.current.removeEventListener("mouseup",c),t.current.removeEventListener("mouseleave",u))}},ya=({message:t="Loading..."})=>(console.log("CircleLoading component is rendering"),b.useEffect(()=>{const e=document.createElement("style");return e.textContent=`
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
    `,document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(2px)"},children:s.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"2px solid #22c55e",borderRadius:"20px",padding:"40px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",display:"flex",flexDirection:"column",alignItems:"center",gap:"25px",minWidth:"300px"},children:[s.jsx("div",{style:{width:"60px",height:"60px",border:"6px solid rgba(34, 197, 94, 0.2)",borderTop:"6px solid #22c55e",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("span",{style:{color:"#22c55e",fontWeight:"600",fontSize:"16px",textAlign:"center",animation:"pulse 2s ease-in-out infinite"},children:t})]})}));function OP(){const{state:t}=fi(),e=Mr(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(!1),[c,u]=b.useState(null),[d,g]=b.useState(""),[m,f]=b.useState(null),[x,j]=b.useState(null),[_,v]=b.useState(""),[C,N]=b.useState(null),[A,O]=b.useState(""),G="Algerian Judo Federation",V="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",[F,$]=b.useState(null),[Z,D]=b.useState([]),[Y,ce]=b.useState(""),[B,H]=b.useState(""),[he,Le]=b.useState(""),[te,ye]=b.useState(""),[ve,fe]=b.useState(""),[P,q]=b.useState(""),[X,ae]=b.useState(""),[be,Ne]=b.useState(""),[De,ke]=b.useState(""),[qe,Ke]=b.useState(""),[dt,He]=b.useState(""),[Fe,se]=b.useState(null),[Et,At]=b.useState(""),[We,Oe]=b.useState(""),[ht,ot]=b.useState(""),[xt,Ft]=b.useState([]),[Mt,tt]=b.useState([]),[_t,Bt]=b.useState([]),[vt,kt]=b.useState((t==null?void 0:t.club_id)??""),[yt,It]=b.useState((t==null?void 0:t.league_id)??""),[rt,$t]=b.useState((t==null?void 0:t.club_id)||""),[$e,me]=b.useState((t==null?void 0:t.league_id)||""),[Be,at]=b.useState(null),[Je,ze]=b.useState({}),[Gt,qt]=b.useState(null),[Qt,Ut]=b.useState(""),Pe=Zn(),z=T=>T?T.startsWith("http")?T:`${V}${T}`:null;function Te(T){return new Promise((Q,Ge)=>{no(T,de=>{if(de.type==="error")console.warn("EXIF processing failed, using original image:",T),Q(T);else try{const Ce=de.toDataURL("image/png");Q(Ce)}catch(Ce){console.warn("Canvas conversion failed, using original image:",Ce),Q(T)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const Qe=async()=>{try{a(!0),u(null);const{data:T}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(T!=null&&T.length&&f(z(T[0].logo_url)),yt){const{data:Ce}=await ne.from("nameleague").select("name_league").eq("id",yt).single();Ce&&v(Ce.name_league);const{data:et}=await ne.from("league_members").select("logo_url").eq("league_id",yt).order("id",{ascending:!1}).limit(1);et!=null&&et.length&&j(z(et[0].logo_url))}if(vt){const{data:Ce}=await ne.from("nameclub").select("name_club, id").eq("id",vt).single();Ce&&O(Ce.name_club);const{data:et}=await ne.from("club_members").select("logo_url").eq("club_id",vt).order("id",{ascending:!1}).limit(1);et!=null&&et.length&&N(z(et[0].logo_url))}if(t!=null&&t.member_id){const{data:Ce}=await ne.from("club_members").select("*").eq("id",t.member_id).single();Ce&&$(Ce)}if(vt&&yt){const{data:Ce}=await ne.from("athletes").select("*").eq("club_id",vt).eq("league_id",yt).order("id",{ascending:!0});n(Ce||[])}else n([]);const[{data:Q},{data:Ge},{data:de}]=await Promise.all([ne.from("nameclub").select("id, name_club"),ne.from("nameleague").select("id, name_league"),ne.from("clubrole").select("*")]);Q&&tt(Q),Ge&&Bt(Ge),de&&D(de)}catch(T){console.error("fetchData error",T),u(T)}finally{a(!1)}};b.useEffect(()=>{t!=null&&t.club_id&&kt(t.club_id),t!=null&&t.league_id&&It(t.league_id),Qe()},[t,vt,yt]),b.useEffect(()=>{(async()=>{if(!(!Et||!We))try{const{data:Q,error:Ge}=await ne.from("categories").select("weight").eq("genres",Et).eq("categories",We);Ge?console.error("Erreur récupération poids:",Ge.message):Ft(Q.map(de=>de.weight))}catch(Q){console.error("Erreur inconnue:",Q)}})()},[Et,We]),b.useEffect(()=>{(async()=>{if(!(!Je.genres||!Je.categories))try{const{data:Q,error:Ge}=await ne.from("categories").select("weight").eq("genres",Je.genres).eq("categories",Je.categories);Ge?console.error("Erreur récupération poids:",Ge.message):Ft(Q.map(de=>de.weight))}catch(Q){console.error("Erreur inconnue:",Q)}})()},[Je.genres,Je.categories]);const Xe=async(T,Q)=>{const{data:Ge}=await ne.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",T).eq("year",Q);if(Ge&&Ge.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:de}=await ne.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",T);return(de||0)+1},Pt=async()=>{if(!Fe)return null;const T=Fe.name.split(".").pop(),Q=`athlete-${Date.now()}.${T}`,{error:Ge}=await ne.storage.from("logos").upload(Q,Fe);if(Ge)return console.error("upload error",Ge),null;const{data:de}=ne.storage.from("logos").getPublicUrl(Q);return(de==null?void 0:de.publicUrl)??null};b.useEffect(()=>{ti()},[]);const Zt=async T=>{if(T.preventDefault(),u(""),g(""),l(!0),!B||!Y){u("First name and Last name are required."),l(!1);return}if(!/^\d{18}$/.test(X)){u("National ID (NID) must be exactly 18 digits."),l(!1);return}if(be!==De){u("Passwords do not match."),l(!1);return}if(!$e&&!yt){u("League must be selected or provided in state."),l(!1);return}if(!rt&&!vt){u("Club must be selected or provided in state."),l(!1);return}const Q=ut(he,We);if(!Q.isValid){u(Q.message),l(!1);return}if(Y&&be){const{data:Ce}=await ne.from("athletes").select("*").eq("password",be);if(Ce&&Ce.length>0){u("Change your Password for this name because is already exist"),l(!1);return}}const Ge=new Date().getFullYear(),de=`${Ge}/${Ge+1}`;try{const{data:Ce,error:et}=await ne.from("athletes").select("id, national_id_number").eq("national_id_number",X).eq("year",de);if(et)throw et;if(Ce&&Ce.length>0){u("An athlete with this National ID is already registered for this season."),l(!1);return}}catch(Ce){u(Ce.message||String(Ce)),l(!1);return}try{const Ce=await Pt(),et=new Date().getFullYear(),E=`${et}/${et+1}`;let pe;try{pe=await Xe(X,E)}catch(ft){u(ft.message),setSubmitLoading(!1);return}const ge={last_name:Y,first_name:B,date_of_birth:he,place_of_birth:te,role:ve,blood_type:P,national_id_number:X,password:be,license_number:`ATH-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0],photos_url:Ce,nationality:qe,grade:dt,renewal:pe,confirmation:!1,genres:Et,categories:We,weight:ht,league_id:yt,club_id:vt,year:E},{error:je}=await ne.from("athletes").insert([ge]);if(je)throw je;g("Athlete added successfully."),ce(""),H(""),Le(""),ye(""),fe(""),q(""),ae(""),Ne(""),ke(""),se(null),Ke(""),He(""),At(""),Oe(""),ot(""),await Qe()}catch(Ce){console.error("handleSubmit error",Ce),u((Ce==null?void 0:Ce.message)||String(Ce))}finally{l(!1)}},re=T=>{at(T.id),ze({...T})},Ie=()=>{at(null),ze({})},ut=(T,Q)=>{if(!T||!Q)return{isValid:!1,message:"Date of birth and category are required."};const Ge=new Date(T),de=new Date,Ce=de.getFullYear()-Ge.getFullYear()-(de.getMonth()<Ge.getMonth()||de.getMonth()===Ge.getMonth()&&de.getDate()<Ge.getDate()?1:0),E={Poussins:{min:9,max:10},Benjamins:{min:11,max:12},Minimes:{min:13,max:14},Cadets:{min:15,max:17},Juniors:{min:15,max:20},Hopefuls:{min:15,max:17},Seniors:{min:15,max:35},Veterans:{min:36,max:150}}[Q];return E?Ce<E.min||Ce>E.max?Q==="Veterans"?{isValid:!1,message:`For ${Q} category, athlete must be more than 35 years old. Current age: ${Ce}`}:{isValid:!1,message:`For ${Q} category, athlete must be between ${E.min} and ${E.max} years old. Current age: ${Ce}`}:{isValid:!0,message:""}:{isValid:!1,message:`Unknown category: ${Q}`}},xe=async()=>{l(!0);const T=ut(Je.date_of_birth,Je.categories);if(!T.isValid){l(!1),u(T.message);return}const{error:Q}=await ne.from("athletes").update({last_name:Je.last_name,first_name:Je.first_name,date_of_birth:Je.date_of_birth,place_of_birth:Je.place_of_birth,role:Je.role,blood_type:Je.blood_type,nationality:Je.nationality,grade:Je.grade,categories:Je.categories,weight:Je.weight,genres:Je.genres}).eq("id",Be);Q?(l(!1),u("Update failed: "+Q.message)):(await Qe(),Ie(),l(!1),g("Athlete updated successfully!"))},Se=async T=>{T&&typeof T.preventDefault=="function"&&T.preventDefault();try{await xe()}catch(Q){u((Q==null?void 0:Q.message)||String(Q))}},Ze=async T=>{const Q=new Date().toISOString().split("T")[0];if(T.registration_date!==Q){u("You can only delete athletes the same day they were added.");return}if(window.confirm("Delete this athlete?"))try{const{error:Ge}=await ne.from("athletes").delete().eq("id",T.id);if(Ge)throw Ge;await Qe()}catch(Ge){console.error("deleteAthlete error",Ge),u("Error deleting athlete: "+Ge.message)}},lt=T=>{if(!T||Object.keys(T).length===0){alert("No data available to export");return}ar(T)},ar=async T=>{let Q=null,Ge=null;try{if(T.club_id){const St=(await An()).find(jt=>jt.id===T.club_id);Q=St==null?void 0:St.name_club}if(T.league_id){const St=(await qn()).find(jt=>jt.id===T.league_id);Ge=St==null?void 0:St.name_league}}catch(wt){console.error("Error fetching names:",wt)}const de=new Dt("portrait","mm","a4");de.setFontSize(18),de.setTextColor(40,40,40),de.text("Algerian Judo Federation",14,15);const Ce=`Athlete Information - ${T.first_name} ${T.last_name}`;de.setFontSize(16),de.setTextColor(40,40,40),de.text(Ce,14,30),de.setFontSize(10);const et=new Date().toLocaleString();if(de.text(`Generated: ${et}`,14,37),m)try{de.addImage(m,"PNG",170,10,25,25)}catch(wt){console.error("Error adding logo to PDF:",wt)}let E=70;if(T.photos_url)try{const wt=await Te(T.photos_url),St=wt.startsWith("data:")?"PNG":"JPEG";de.addImage(wt,St,14,45,25,20),E=70}catch(wt){console.error("Error adding photo to PDF:",wt);try{de.addImage(T.photos_url,"JPEG",14,45,25,20)}catch(St){console.error("Fallback image addition also failed:",St)}E=70}de.setFontSize(12),T.confirmation?de.setTextColor(0,128,0):de.setTextColor(255,0,0);const pe=T.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";de.text(pe,160,50);const ge=["last_name","first_name","date_of_birth","place_of_birth","role","blood_type","national_id_number","nationality","grade","genres","categories","weight","license_number","registration_date","year","renewal"],je={last_name:"Last Name",first_name:"First Name",date_of_birth:"Date of Birth",place_of_birth:"Place of Birth",national_id_number:"National ID",license_number:"License Number",registration_date:"Registration Date"},ft=ge.map(wt=>[je[wt]||wt.charAt(0).toUpperCase()+wt.slice(1).replace(/_/g," "),T[wt]||""]);vr(de,{startY:E,head:[["Field","Value"]],body:ft,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Me=de.lastAutoTable.finalY||200;if(de.setFontSize(12),de.setTextColor(0,0,0),de.text("Medical certificate",14,Me+20),de.setDrawColor(0),de.line(14,Me+40,80,Me+40),de.setFontSize(10),T.club_id||A){const wt=A||Q||`ID: ${T.club_id}`;de.text(`Club: ${wt}`,14,Me+60),de.text("Club Visa: _________________",14,Me+70)}if(T.league_id||_){const wt=_||Ge||`ID: ${T.league_id}`;de.text(`League: ${wt}`,120,Me+60),de.text("League Visa: _________________",120,Me+70)}try{const wt=JSON.stringify({id:T.id,name:`${T.first_name||""} ${T.last_name||""}`.trim(),license:T.license_number||"",club_id:T.club_id||"",league_id:T.league_id||"",confirmation:T.confirmation||"Unconfirmed"}),St=await ui.toDataURL(wt,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});de.addImage(St,"PNG",180,Me+75,15,15)}catch(wt){console.error("Error generating QR code:",wt)}const Tt=`athlete_${T.first_name}_${T.last_name}_${T.id||"record"}.pdf`;de.save(Tt)},gt=async()=>{if(!_e||_e.length===0){alert("No athletes data available to export");return}const T=new Dt("landscape","mm","a4"),Q=T.internal.pageSize.getWidth(),Ge=new Date().getFullYear(),de=new Date().toLocaleDateString();let Ce={},et={};try{Ce=await An(),et=await qn()}catch(Me){console.error("Error fetching club/league names:",Me)}const E=()=>{if(T.setFontSize(10),T.setFont("helvetica","normal"),T.setTextColor(40,40,40),T.text(`Date: ${de}`,14,15),T.setFontSize(16),T.setFont("helvetica","bold"),T.setTextColor(40,40,40),T.text("Algerian Judo Federation",Q/2,15,{align:"center"}),m)try{T.addImage(m,"PNG",Q-40,5,25,25)}catch(Me){console.error("Error adding logo to PDF:",Me)}T.setFontSize(14),T.setFont("helvetica","normal"),T.setTextColor(40,40,40),T.text(`League: ${_||"Unknown League"}`,Q/2,30,{align:"center"}),T.setFontSize(14),T.setFont("helvetica","normal"),T.setTextColor(40,40,40),T.text(`Club: ${A||"Unknown Club"}`,Q/2,37,{align:"center"}),T.setFontSize(14),T.setFont("helvetica","bold"),T.setTextColor(220,53,69),T.text("Athletes Members - Category Situation",Q/2,47,{align:"center"})},pe=Me=>Me.sort((wt,St)=>{const jt=new Date(wt.date_of_birth||"1900-01-01"),Ct=new Date(St.date_of_birth||"1900-01-01");return jt-Ct}).map(wt=>[J(wt.last_name||""),J(wt.first_name||""),J(wt.date_of_birth||""),J(wt.place_of_birth||""),J(wt.blood_type||""),J(wt.nationality||""),J(wt.grade||""),J(wt.genres||""),J(wt.categories||""),J(wt.weight||""),J(wt.national_id_number||""),wt.confirmation?"Yes":"No",J(wt.license_number||"")]),ge={};_e.forEach(Me=>{const Tt=Me.year||"Unknown Year",wt=Me.club_id,St=wt?Ce[wt]||`Club ID: ${wt}`:"Unknown Club",jt=Me.categories||"Uncategorized",Ct=Me.genres||"Unspecified",Ot=Me.weight||"Unspecified";ge[Tt]||(ge[Tt]={}),ge[Tt][St]||(ge[Tt][St]={}),ge[Tt][St][jt]||(ge[Tt][St][jt]={}),ge[Tt][St][jt][Ct]||(ge[Tt][St][jt][Ct]={}),ge[Tt][St][jt][Ct][Ot]||(ge[Tt][St][jt][Ct][Ot]=[]),ge[Tt][St][jt][Ct][Ot].push(Me)}),E();let je=50,ft=!0;for(const[Me,Tt]of Object.entries(ge)){je>180&&!ft&&(T.addPage(),E(),je=50),T.setFontSize(13),T.setTextColor(0,0,0),T.setFont(void 0,"bold"),T.text(`Year: ${Me}`,14,je),je+=15;for(const[wt,St]of Object.entries(Tt))for(const[jt,Ct]of Object.entries(St)){je>210&&(T.addPage(),E(),je=50,T.setFontSize(13),T.setTextColor(0,0,0),T.setFont(void 0,"bold"),T.text(`Year: ${Me}`,14,je),je+=15,T.setFontSize(12),T.text(`  Club: ${wt}`,20,je),je+=12),T.setFontSize(11),T.setTextColor(0,0,0),T.setFont(void 0,"bold"),T.text(`    Club: ${wt} - Category: ${jt}`,26,je),je+=10;for(const[Ot,Wr]of Object.entries(Ct)){je>220&&(T.addPage(),E(),je=50,T.setFontSize(13),T.setTextColor(0,0,0),T.setFont(void 0,"bold"),T.text(`Year: ${Me}`,14,je),je+=15,T.setFontSize(11),T.text(`    Club: ${wt} - Category: ${jt}`,26,je),je+=10);for(const[_r,gr]of Object.entries(Wr)){je>230&&(T.addPage(),E(),je=50,T.setFontSize(13),T.setTextColor(0,0,0),T.setFont(void 0,"bold"),T.text(`Year: ${Me}`,14,je),je+=15,T.setFontSize(11),T.text(`    Club: ${wt} - Category: ${jt}`,26,je),je+=10),T.setFontSize(10),T.setTextColor(0,0,0),T.setFont(void 0,"bold"),T.text(`      Gender: ${Ot} - Weight: ${_r}`,32,je),je+=8;const Sr=pe(gr);vr(T,{startY:je,head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Gender","Category","Weight","NID","Confirmation","License #"]],body:Sr,theme:"grid",headStyles:{fillColor:[40,167,69],textColor:[255,255,255],fontSize:6},styles:{fontSize:5,overflow:"linebreak"},margin:{left:44},columnStyles:{0:{cellWidth:18},1:{cellWidth:18},2:{cellWidth:18},3:{cellWidth:18},4:{cellWidth:12},5:{cellWidth:18},6:{cellWidth:12},7:{cellWidth:12},8:{cellWidth:18},9:{cellWidth:12},10:{cellWidth:20},11:{cellWidth:15},12:{cellWidth:20}}}),je=T.lastAutoTable.finalY+8,ft=!1}je+=3}je+=5}je+=12}T.save(`athletes_hierarchical_${Ge}.pdf`)},J=T=>T?String(T).replace(/Ø=UÈ/g,"").replace(/Ø<ða/g,"").replace(/Ø=Ud/g,"").replace(/Ø-ÜÈ/g,"").replace(/Ø-Üd/g,"").replace(/Ø<Ða/g,"").replace(/Ø<ßà/g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/% % %/g,"").replace(/%%%/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/%+/g,"").replace(/\s*%\s*/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(/Ã¸/g,"ø").replace(/Ã©/g,"é").replace(/Ã¨/g,"è").replace(/Ã¡/g,"á").replace(/Ã /g,"à").replace(/Ã§/g,"ç").replace(/Ã¼/g,"ü").replace(/Ã¶/g,"ö").replace(/Ã¤/g,"ä").replace(/Ã±/g,"ñ").replace(/Ã­/g,"í").replace(/Ã³/g,"ó").replace(/Ãº/g,"ú").trim():"",w=(T,Q,Ge,de)=>{const Ce=T.internal.pageSize.getWidth();if(m)try{T.addImage(m,"PNG",Ce-40,15,25,25)}catch(pe){console.warn("Could not add federation logo:",pe)}const et=new Date().toLocaleDateString();T.setFontSize(10),T.setFont("helvetica","normal"),T.text(`Print Date: ${et}`,15,20),T.setFontSize(16),T.setFont("helvetica","bold"),T.text(J(Q),Ce/2,25,{align:"center"});let E=40;return Ge&&(T.setFontSize(12),T.setFont("helvetica","normal"),T.text(`League: ${J(Ge)}`,Ce/2,E,{align:"center"}),E+=15),de&&(T.setFontSize(12),T.setFont("helvetica","normal"),T.text(`Club: ${J(de)}`,Ce/2,E,{align:"center"}),E+=15),E+2},L=async()=>{if(!rt&&!$e){u("No club or league selected");return}try{let T=[];if(rt){const{data:pe,error:ge}=await ne.from("athletes").select("*").eq("club_id",rt);if(ge)throw ge;T=pe||[]}else if($e){const{data:pe,error:ge}=await ne.from("athletes").select("*").eq("league_id",$e);if(ge)throw ge;T=pe||[]}if(!T||T.length===0){u("No athletes found");return}const Q=new Dt("landscape");let Ge=w(Q,G,_,A);Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.setTextColor(255,0,0),Q.text("Athletes - General Situation",Q.internal.pageSize.getWidth()/2,Ge,{align:"center"}),Q.setTextColor(0,0,0),Ge+=20;const de={};T.forEach(pe=>{const ge=pe.year||"Unknown Year";de[ge]||(de[ge]=[]),de[ge].push(pe)});const Ce=Object.keys(de).sort();for(const pe of Ce){const je=de[pe].sort((Me,Tt)=>{const wt=new Date(Me.date_of_birth||"1900-01-01"),St=new Date(Tt.date_of_birth||"1900-01-01");return wt-St});Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.setTextColor(0,0,0),Q.text(`Year: ${pe}`,20,Ge),Ge+=15;const ft=je.map(Me=>[J(Me.last_name||""),J(Me.first_name||""),J(Me.date_of_birth||""),J(Me.place_of_birth||""),J(Me.blood_type||""),J(Me.nationality||""),J(Me.grade||""),J(Me.genres||""),J(Me.categories||""),J(Me.weight||""),J(Me.national_id_number||""),Me.confirmation?"Yes":"No",J(Me.license_number||"")]);vr(Q,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Gender","Category","Weight","NID","Confirmation","License #"]],body:ft,startY:Ge,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},didDrawPage:function(Me){Me.pageNumber>1&&w(Q,G,_,A)}}),Ge=Q.lastAutoTable.finalY+20,Ge>Q.internal.pageSize.getHeight()-50&&(Q.addPage(),Ge=w(Q,G,_,A))}const et=new Date().getFullYear(),E=_||A||"athletes";Q.save(`${J(E)}_general_athletes_${et}.pdf`)}catch(T){console.error("Error exporting general PDF:",T),u("Error exporting PDF. Please try again.")}},M=async()=>{if(!rt&&!$e){u("No club or league selected");return}try{let T=[];if(rt){const{data:pe,error:ge}=await ne.from("athletes").select("*").eq("club_id",rt);if(ge)throw ge;T=pe||[]}else if($e){const{data:pe,error:ge}=await ne.from("athletes").select("*").eq("league_id",$e);if(ge)throw ge;T=pe||[]}if(!T||T.length===0){u("No athletes found");return}const Q=new Dt("landscape");let Ge=w(Q,G,_,A);Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.setTextColor(255,0,0),Q.text("Athletes - Grade and Role Situation",Q.internal.pageSize.getWidth()/2,Ge,{align:"center"}),Q.setTextColor(0,0,0),Ge+=20,Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text("SECTION GRADE",20,Ge),Ge+=15;const de={};T.forEach(pe=>{const ge=pe.year||"Unknown Year",je=pe.grade||"Unknown Grade";de[ge]||(de[ge]={}),de[ge][je]||(de[ge][je]=[]),de[ge][je].push(pe)});const Ce=Object.keys(de).sort();for(const pe of Ce){const ge=de[pe];Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.setTextColor(0,0,0),Q.text(`Year: ${pe}`,20,Ge),Ge+=15;const je=Object.keys(ge).sort();for(const ft of je){const Tt=ge[ft].sort((St,jt)=>{const Ct=new Date(St.date_of_birth||"1900-01-01"),Ot=new Date(jt.date_of_birth||"1900-01-01");return Ct-Ot});Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text(`Grade: ${ft}`,30,Ge),Ge+=10;const wt=Tt.map(St=>[J(St.last_name||""),J(St.first_name||""),J(St.date_of_birth||""),J(St.place_of_birth||""),J(St.blood_type||""),J(St.nationality||""),J(St.genres||""),J(St.categories||""),J(St.weight||""),J(St.national_id_number||""),St.confirmation?"Yes":"No",J(St.license_number||"")]);vr(Q,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Gender","Category","Weight","NID","Confirmation","License #"]],body:wt,startY:Ge,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},didDrawPage:function(St){St.pageNumber>1&&w(Q,G,_,A)}}),Ge=Q.lastAutoTable.finalY+15,Ge>Q.internal.pageSize.getHeight()-80&&(Q.addPage(),Ge=w(Q,G,_,A),Ge+=20)}Ge+=10}const et=new Date().getFullYear(),E=_||A||"athletes";Q.save(`${J(E)}_grade_role_athletes_${et}.pdf`)}catch(T){console.error("Error exporting grade role PDF:",T),u("Error exporting PDF. Please try again.")}},ie=["Algerian","Tunisian"],_e=r.filter(T=>{var Ge,de;const Q=Qt.toLowerCase();return(((Ge=T.first_name)==null?void 0:Ge.toLowerCase())??"").includes(Q)||(((de=T.last_name)==null?void 0:de.toLowerCase())??"").includes(Q)||(T.national_id_number??"").includes(Q)});return b.useEffect(()=>{const T=setTimeout(()=>{},300);return()=>clearTimeout(T)},[Qt]),b.useEffect(()=>{const T=setTimeout(()=>{},300);return()=>clearTimeout(T)},[Qt]),s.jsxs("div",{className:"app-container",children:[i&&s.jsx(nn,{}),s.jsx("header",{children:s.jsxs("div",{className:"federation-header",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[m?s.jsx("img",{src:m,alt:"Federation Logo",className:"federation-logo"}):s.jsx(ri,{className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:G})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[x?s.jsx("img",{src:x,alt:"League Logo",className:"member-logo"}):s.jsx("p",{children:"No league logo"}),s.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:_||"League Name"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[C?s.jsx("img",{src:C,alt:"Club Logo",className:"member-logo"}):s.jsx("p",{children:"No club logo"}),s.jsx("h3",{className:"federation-title",style:{fontSize:"1.2rem"},children:A||"Club Name"})]})]})}),s.jsx("section",{className:"app-container",children:s.jsxs("div",{className:"form-table-wrapper",children:[s.jsx("h2",{children:"Club Member"}),F?s.jsxs("p",{children:[F.first_name," ",F.last_name," —"," ",s.jsx("strong",{children:(()=>{var Ge;const T=Z.find(de=>de.id===parseInt(F.role_id)),Q=typeof F.club_role=="object"?(Ge=F.club_role)==null?void 0:Ge.club_role:F.club_role;return(T==null?void 0:T.club_role)||Q||F.role||"No role"})()})]}):s.jsx("p",{children:"No member found with these credentials."}),s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx("button",{type:"button",className:"primary-btn","data-id":"1",onClick:T=>{pr(T.target),vt&&F?e("/club-member-listC",{state:{club_id:vt,club_name:A,league_id:yt,member_id:F==null?void 0:F.id,first_name:F==null?void 0:F.first_name,last_name:F==null?void 0:F.last_name,role:F==null?void 0:F.role_id}}):alert("Club or member not loaded yet.")},children:"The Club Member List"}),s.jsx("button",{type:"button",className:"primary-btn","data-id":"2",onClick:T=>{pr(T.target),club&&F?(console.log("➡️ Navigating to /AthletePage with state:",{club_id:club.id,club_name:club.name_club,league_id:t==null?void 0:t.league_id,member_id:F.id,first_name:F.first_name,last_name:F.last_name,role:F.role_id,club_logo:C}),e("/AthletePage",{state:{club_id:club.id,club_name:club.name_club,league_id:t==null?void 0:t.league_id,member_id:F.id,first_name:F.first_name,last_name:F.last_name,role:F.role_id,club_logo:C}})):console.log("❌ No club or member found, cannot navigate.")},children:"List of Athletes"})]}),s.jsx("h2",{className:"form-title",children:"Add Athlete"}),s.jsxs("form",{onSubmit:Zt,className:"form-grid",children:[s.jsxs("label",{children:["Last Name *",s.jsx("input",{value:Y,onChange:T=>ce(T.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{value:B,onChange:T=>H(T.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:he,onChange:T=>Le(T.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{value:te,onChange:T=>ye(T.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:qe,onChange:T=>Ke(T.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),ie.map((T,Q)=>s.jsx("option",{value:T,children:T},Q))]})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:dt,onChange:T=>He(T.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"yellow belt"}),s.jsx("option",{children:"orange belt"}),s.jsx("option",{children:"green belt"}),s.jsx("option",{children:"blue belt"})]}),s.jsx("small",{style:{color:"#666"},children:"Temporary: select brown or black belt until the DB constraint is updated."})]}),s.jsxs("label",{children:["Genres *",s.jsxs("select",{value:Et,onChange:T=>At(T.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Men",children:"Men"}),s.jsx("option",{value:"Women",children:"Women"})]})]}),s.jsxs("label",{children:["Categories *",s.jsxs("select",{value:We,onChange:T=>Oe(T.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Benjamins",children:"Benjamins"}),s.jsx("option",{value:"Minimes",children:"Minimes"}),s.jsx("option",{value:"Cadets",children:"Cadets"}),s.jsx("option",{value:"Juniors",children:"Juniors"}),s.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),s.jsx("option",{value:"Seniors",children:"Seniors"}),s.jsx("option",{value:"Veterans",children:"Veterans"}),s.jsx("option",{value:"Cadets By Team",children:"Cadets By Team"}),s.jsx("option",{value:"Juniors By Team",children:"Juniors By Team"}),s.jsx("option",{value:"Seniors By Team",children:"Seniors By Team"}),s.jsx("option",{value:"Cadets By Mixed Team",children:"Cadets By Mixed Team"}),s.jsx("option",{value:"Juniors By Mixed Team",children:"Juniors By Mixed Team"}),s.jsx("option",{value:"Seniors By Mixed Team",children:"Seniors By Mixed Team"})]})]}),s.jsxs("label",{children:["Weight *",s.jsxs("select",{value:ht,onChange:T=>ot(T.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),xt.map((T,Q)=>s.jsx("option",{value:T,children:T},Q))]})]}),s.jsxs("label",{children:["National ID Number *",s.jsx("input",{value:X,onChange:T=>ae(T.target.value.replace(/\D/g,"")),maxLength:18,required:!0}),s.jsx("small",{children:"18 digits required — must be unique. "})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:P,onChange:T=>q(T.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:be,onChange:T=>Ne(T.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:De,onChange:T=>ke(T.target.value),required:!0})]}),s.jsxs("label",{children:["Club *",s.jsxs("select",{value:rt,onChange:T=>$t(T.target.value),required:!0,disabled:!!(t!=null&&t.club_id),children:[s.jsx("option",{value:"",children:"Select Club"}),Mt.map(T=>s.jsx("option",{value:T.id,children:T.name_club},T.id))]})]}),s.jsxs("label",{children:["League *",s.jsxs("select",{value:$e,onChange:T=>me(T.target.value),required:!0,disabled:!!(t!=null&&t.league_id),children:[s.jsx("option",{value:"",children:"Select League"}),_t.map(T=>s.jsx("option",{value:T.id,children:T.name_league},T.id))]})]}),s.jsxs("label",{children:["Upload Athlete Photo *",s.jsx("input",{type:"file",onChange:T=>{var Q;return se(((Q=T.target.files)==null?void 0:Q[0])??null)},required:!0})]}),s.jsx("div",{className:"btn-row",children:s.jsx("button",{type:"submit",className:"primary-b",children:"Save Athlete"})}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),s.jsxs("h2",{className:"form-title",children:["Athletes of ",A," (",_,")"]}),s.jsxs("div",{className:"form-grid",children:[s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"Search Athlete"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:Qt,onChange:T=>Ut(T.target.value)})})]}),s.jsx("div",{className:"table-container",ref:Pe,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"NID"})," ",s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"Renewal"})," ",s.jsx("th",{children:"Year"})," ",s.jsx("th",{children:"Genres"}),s.jsx("th",{children:"Categories"}),s.jsx("th",{children:"Weight"}),s.jsx("th",{children:"License #"})," ",s.jsx("th",{children:"Registration"})," ",s.jsx("th",{children:"Photos"})," ",s.jsx("th",{children:"Confirmation"})," ",s.jsx("th",{children:"Club ID"})," ",s.jsx("th",{children:"League ID"})," ",s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:_e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:21,children:"No athletes found for this club/league."})}):_e.map(T=>s.jsxs("tr",{onDoubleClick:()=>lt(T),style:{cursor:"pointer"},children:[s.jsx("td",{children:Be===T.id?s.jsx("input",{value:Je.last_name||"",onChange:Q=>ze({...Je,last_name:Q.target.value})}):T.last_name}),s.jsx("td",{children:Be===T.id?s.jsx("input",{value:Je.first_name||"",onChange:Q=>ze({...Je,first_name:Q.target.value})}):T.first_name}),s.jsx("td",{children:Be===T.id?s.jsx("input",{type:"date",value:Je.date_of_birth||"",onChange:Q=>ze({...Je,date_of_birth:Q.target.value})}):T.date_of_birth}),s.jsx("td",{children:Be===T.id?s.jsx("input",{value:Je.place_of_birth||"",onChange:Q=>ze({...Je,place_of_birth:Q.target.value})}):T.place_of_birth}),s.jsx("td",{children:T.role}),s.jsx("td",{children:Be===T.id?s.jsxs("select",{value:Je.blood_type||"",onChange:Q=>ze({...Je,blood_type:Q.target.value}),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):T.blood_type}),s.jsx("td",{children:T.national_id_number}),s.jsx("td",{children:Be===T.id?s.jsxs("select",{value:Je.nationality||"",onChange:Q=>ze({...Je,nationality:Q.target.value}),children:[s.jsx("option",{value:"",children:"-- Select --"}),ie.map((Q,Ge)=>s.jsx("option",{value:Q,children:Q},Ge))]}):T.nationality}),s.jsx("td",{children:Be===T.id?s.jsxs("select",{value:Je.grade||"",onChange:Q=>ze({...Je,grade:Q.target.value}),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"yellow belt",children:"yellow belt"}),s.jsx("option",{value:"orange belt",children:"orange belt"}),s.jsx("option",{value:"green belt",children:"green belt"}),s.jsx("option",{value:"blue belt",children:"blue belt"})]}):T.grade}),s.jsx("td",{children:T.renewal}),s.jsx("td",{children:T.year}),s.jsx("td",{children:Be===T.id?s.jsxs("select",{value:Je.genres||"",onChange:Q=>{const Ge=Q.target.value;ze({...Je,genres:Ge,weight:""})},children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Men",children:"Men"}),s.jsx("option",{value:"Women",children:"Women"})]}):T.genres}),s.jsx("td",{children:Be===T.id?s.jsxs("select",{value:Je.categories||"",onChange:Q=>{const Ge=Q.target.value;ze({...Je,categories:Ge,weight:""})},children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Benjamins",children:"Benjamins"}),s.jsx("option",{value:"Minimes",children:"Minimes"}),s.jsx("option",{value:"Cadets",children:"Cadets"}),s.jsx("option",{value:"Juniors",children:"Juniors"}),s.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),s.jsx("option",{value:"Seniors",children:"Seniors"}),s.jsx("option",{value:"Veterans",children:"Veterans"})]}):T.categories}),s.jsx("td",{children:Be===T.id?s.jsxs("select",{value:Je.weight||"",onChange:Q=>ze({...Je,weight:Q.target.value}),disabled:!Je.genres||!Je.categories,children:[s.jsx("option",{value:"",children:"-- Select --"}),xt.map((Q,Ge)=>s.jsx("option",{value:Q,children:Q},Ge))]}):T.weight}),s.jsx("td",{children:T.license_number}),s.jsx("td",{children:T.registration_date}),s.jsx("td",{children:T.photos_url?s.jsx("img",{src:T.photos_url,alt:`${T.first_name} ${T.last_name}`,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"8px"}}):"No Photo"}),s.jsx("td",{children:T.confirmation?"✅":"❌"}),s.jsx("td",{children:T.club_id}),s.jsx("td",{children:T.league_id}),s.jsx("td",{children:Be===T.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"primary-S",onClick:Se,children:"Save"}),s.jsx("button",{type:"button",className:"secondary-btn",onClick:Ie,children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"primary-M",onClick:()=>re(T),children:"Modify"}),s.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>Ze(T.id),children:"Delete"})]})})]},T.id))})]})}),s.jsx(Pr,{}),s.jsx("button",{className:"primary-b",onClick:L,children:"Export General PDF"}),s.jsx("button",{className:"primary-b",onClick:gt,children:"Export by Category"}),s.jsx("button",{className:"primary-b",onClick:M,children:"Export by Grade PDF"})]})}),c&&s.jsx(En,{error:c,onClose:()=>u(null)}),d&&s.jsx(Rn,{success:d,onClose:()=>g("")}),o&&s.jsx(ya,{message:"Processing athlete data..."}),s.jsx(gn,{}),s.jsx("footer",{className:"footer bg-red-600 text-white p-4 mt-6",children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function BP(){const{state:t}=fi(),e=Mr(),[r,n]=b.useState(null),[i,a]=b.useState("Algerian Judo Federation"),[o,l]=b.useState(""),[c,u]=b.useState(null),[d,g]=b.useState(""),[m,f]=b.useState(null),[x,j]=b.useState(null),[_,v]=b.useState(null),[C,N]=b.useState([]),[A,O]=b.useState(!1),[G,V]=b.useState(!1),[F,$]=b.useState(!1),[Z,D]=b.useState(""),[Y,ce]=b.useState("");return b.useEffect(()=>{(async()=>{const{data:H,error:he}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!he&&H&&H.length>0&&n(H[0].logo_url)})()},[]),b.useEffect(()=>{if(!(t!=null&&t.league_id))return;(async()=>{const{data:H}=await ne.from("nameleague").select("name_league").eq("id",t.league_id).single();H&&l(H.name_league);const{data:he}=await ne.from("league_members").select("logo_url").eq("league_id",t.league_id).order("id",{ascending:!1}).limit(1);he&&he.length>0&&he[0].logo_url&&u(he[0].logo_url)})()},[t==null?void 0:t.league_id]),b.useEffect(()=>{if(!(t!=null&&t.club_id))return;(async()=>{const{data:H}=await ne.from("nameclub").select("name_club").eq("id",t.club_id).single();H&&g(H.name_club);const{data:he}=await ne.from("club_members").select("logo_url").eq("club_id",t.club_id).order("id",{ascending:!1}).limit(1);he&&he.length>0&&he[0].logo_url&&f(he[0].logo_url);const{data:Le}=await ne.from("nameclub").select("*").eq("id",t.club_id).single();Le&&v(Le)})()},[t==null?void 0:t.club_id]),b.useEffect(()=>{if(!(t!=null&&t.club_id)||!(t!=null&&t.league_id)||!(t!=null&&t.first_name)||!(t!=null&&t.last_name)||!(t!=null&&t.password))return;(async()=>{const{data:H,error:he}=await ne.from("club_members").select("*").eq("club_id",t.club_id).eq("league_id",t.league_id).eq("first_name",t.first_name).eq("last_name",t.last_name).eq("password",t.password).single();!he&&H&&j(H)})()},[t]),b.useEffect(()=>{(async()=>{const{data:H,error:he}=await ne.from("clubrole").select("*");he&&console.error("Error fetching roles:",he.message),H&&N(H)})()},[]),t?s.jsxs("div",{className:"app-container",children:[A&&s.jsx(nn,{}),s.jsx("header",{children:s.jsxs("div",{className:"federation-header",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r?s.jsx("img",{src:r,alt:"Federation Logo",className:"federation-logo"}):s.jsx(ri,{className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:i})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c?s.jsx("img",{src:c,alt:"League Logo",className:"member-logo"}):s.jsx("p",{children:"No league logo"}),s.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:o||"League Name"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[m&&s.jsx("img",{src:m,alt:"Club Logo",className:"member-logo"}),s.jsx("h3",{className:"federation-title",style:{fontSize:"1.2rem"},children:d||"Club Name"})]})]})}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{children:"Club Member"}),x?s.jsxs("p",{children:[x.first_name," ",x.last_name," —"," ",s.jsx("strong",{children:(()=>{const B=C.find(H=>H.id===x.role_id);return(B==null?void 0:B.club_role)||x.club_role||"No role"})()})]}):s.jsx("p",{children:"No member found with these credentials."}),s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx("button",{type:"button",className:"primary-btn",onClick:()=>{_&&x?(console.log("➡️ Navigating to /club-member-listC with state:",{club_id:_.id,club_name:_.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const B=C.find(H=>H.id===x.role_id);return(B==null?void 0:B.club_role)||"No Role"})(),club_logo:_.logo_url||m}),setTimeout(()=>{e("/club-member-listC",{state:{club_id:_.id,club_name:_.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const B=C.find(H=>H.id===x.role_id);return(B==null?void 0:B.club_role)||"No Role"})(),club_logo:_.logo_url||m}})},1500)):console.log("No club or member found, cannot navigate.")},disabled:G,children:"The Club Member List"}),s.jsx("button",{type:"button",className:"primary-btn",onClick:()=>{_&&x?($(!0),console.log("➡️ Navigating to /AthletePage with state:",{club_id:_.id,club_name:_.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const B=C.find(H=>H.id===x.role_id);return(B==null?void 0:B.club_role)||"No Role"})(),club_logo:_.logo_url||m}),setTimeout(()=>{e("/AthletePage",{state:{club_id:_.id,club_name:_.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const B=C.find(H=>H.id===x.role_id);return(B==null?void 0:B.club_role)||"No Role"})(),club_logo:_.logo_url||m}})},1500)):console.log("No club or member found, cannot navigate.")},disabled:F,children:"List of Athletes"})]})]}),G&&s.jsx("div",{children:"Loading..."}),F&&s.jsx("div",{children:"Loading..."}),Z&&s.jsx(En,{error:Z,onClose:()=>D("")}),Y&&s.jsx(Rn,{success:Y,onClose:()=>ce("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]}):s.jsx("p",{children:"No account data found."})}const MP="/assets/certificat-de-judo2-CzQTdYUm.png";function UP(){const t=Mr(),e=fi(),[r,n]=b.useState(!1),[i,a]=b.useState(""),[o,l]=b.useState("Algeria Federation"),[c,u]=b.useState(null),[d,g]=b.useState(""),[m,f]=b.useState([]),[x,j]=b.useState(!1),[_,v]=b.useState([]),[C,N]=b.useState(!1),[A,O]=b.useState(""),[G,V]=b.useState(""),[F,$]=b.useState("");b.useEffect(()=>{e.state?(console.log(" Athlete data received:",e.state),console.log(" Photo URL field (photos_url):",e.state.photos_url),console.log(" Photo URL field (photo_url):",e.state.photo_url),console.log(" All available fields:",Object.keys(e.state)),u(e.state)):(console.log("❌ No athlete data found in navigation state"),t("/"))},[e.state,t]),b.useEffect(()=>{(async()=>{if(!(!(c!=null&&c.club_id)&&!(c!=null&&c.league_id)))try{if(c.club_id){const he=(await An())[c.club_id];O(he||`Club ID: ${c.club_id}`)}if(c.league_id){const he=(await qn())[c.league_id];V(he||`League ID: ${c.league_id}`)}}catch(H){console.error("Error fetching club/league names:",H),c.club_id&&O(`Club ID: ${c.club_id}`),c.league_id&&V(`League ID: ${c.league_id}`)}})()},[c]),b.useEffect(()=>{c&&(async()=>{try{const H=JSON.stringify({id:c.id,name:`${c.first_name||""} ${c.last_name||""}`.trim(),license:c.license_number||"",club_id:c.club_id||"",league_id:c.league_id||"",confirmation:c.confirmation||"Unconfirmed"}),he=await ui.toDataURL(H,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});g(he)}catch(H){console.error("Error generating QR code:",H)}})()},[c]),b.useEffect(()=>{if(c&&c.grade==="black belt"){const B={first_name:c.first_name||"",last_name:c.last_name||"",date_of_birth:c.date_of_birth||"",place_of_birth:c.place_of_birth||""};ui.toDataURL(JSON.stringify(B),{width:240,margin:1}).then(H=>$(H)).catch(H=>console.error("Error generating certificate QR:",H))}else $("")},[c]),b.useEffect(()=>{(async()=>{try{const{data:H,error:he}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!he&&H&&H.length>0&&a(H[0].logo_url)}catch(H){console.error("Error fetching federation logo:",H)}})()},[]),b.useEffect(()=>{(async()=>{N(!0);try{const{data:H,error:he}=await ne.from("athletes").select("*").order("id",{ascending:!1});!he&&H?(v(H),console.log("🏃‍♂️ All athletes fetched:",H.length,"athletes")):console.error("Error fetching all athletes:",he)}catch(H){console.error("Error fetching all athletes:",H)}finally{N(!1)}})()},[]),b.useEffect(()=>{(async()=>{if(c!=null&&c.national_id_number){j(!0);try{const H=c.national_id_number,{data:he,error:Le}=await ne.from("athletes").select("*").eq("national_id_number",H),{data:te,error:ye}=await ne.from("league_members").select("*").eq("national_id_number",H),{data:ve,error:fe}=await ne.from("club_members").select("*").eq("national_id_number",H),P=[];he&&!Le&&he.forEach(q=>{P.push({...q,source:"Athletes",table_type:"athletes"})}),te&&!ye&&te.forEach(q=>{P.push({...q,source:"League Members",table_type:"league_members"})}),ve&&!fe&&ve.forEach(q=>{P.push({...q,source:"Club Members",table_type:"club_members"})}),f(P),console.log("🔍 Related athletes found:",P)}catch(H){console.error("Error fetching related athletes:",H)}finally{j(!1)}}})()},[c]);const Z=async B=>{try{n(!0);const H=new Dt("landscape","pt","a4"),he=H.internal.pageSize.getWidth(),Le=H.internal.pageSize.getHeight(),te=`${B.first_name||""} ${B.last_name||""}`.trim();try{H.addImage(MP,"PNG",0,0,he,Le),H.setTextColor(0,0,0),H.setFontSize(14),H.setFont("times","normal"),H.text("The Ministry of Youth and Sports",he/2+80,105,{align:"center"}),H.setFontSize(14),H.setFont("times","bold"),H.text("Algerian judo federation",he/2+80,130,{align:"center"}),H.setFontSize(24),H.setFont("times","bold"),H.text("Judo Certificate",he/2+80,200,{align:"center"}),H.setFontSize(16),H.setFont("times","normal"),H.text(`Mr. ${te} belt Black is hereby awarded`,he/2+80,240,{align:"center"}),H.text("this certificate, in recognition of his progress, his sporting qualities,",he/2+80,280,{align:"center"}),H.text("his loyalty to his school, and to the spirit of Judo.",he/2+80,320,{align:"center"}),H.setFontSize(14),H.setFont("times","bold"),H.text("The President:",260,400),H.text("The Instructor:",600,400)}catch(ve){console.warn("Failed to load background image, using fallback design:",ve),H.setLineWidth(4),H.setDrawColor(0,0,0),H.rect(20,20,he-40,Le-40),H.setLineWidth(1),H.rect(40,40,he-80,Le-80),H.setTextColor(0,0,0),H.setFontSize(14),H.setFont("times","normal"),H.text("The Ministry of Youth and Sports",he/2+80,105,{align:"center"}),H.setFontSize(14),H.setFont("times","bold"),H.text("Algerian judo federation",he/2+80,130,{align:"center"}),H.setFontSize(24),H.setFont("times","bold"),H.text("Judo Certificate",he/2+80,200,{align:"center"}),H.setFontSize(16),H.setFont("times","normal"),H.text(`Mr. ${te} belt Black is hereby awarded`,he/2+80,240,{align:"center"}),H.text("this certificate, in recognition of his progress, his sporting qualities,",he/2+80,280,{align:"center"}),H.text("his loyalty to his school, and to the spirit of Judo.",he/2+80,320,{align:"center"}),H.setFontSize(14),H.setFont("times","bold"),H.text("The President:",260,400),H.text("The Instructor:",600,400)}try{if(F){const fe=he-48-60,P=Le-48-80;H.addImage(F,"PNG",fe,P,48,48),H.setFontSize(8),H.setFont("times","normal"),H.text("Scan to verify certificate",fe+48/2,P+48+14,{align:"center"})}}catch(ve){console.warn("Failed to add certificate QR to PDF:",ve)}const ye=`Judo_Certificate_${te.replace(/\s+/g,"_")}_${new Date().getFullYear()}.pdf`;H.save(ye),setSuccessMessage("Judo Certificate generated successfully!"),setShowSuccess(!0)}catch(H){console.error("Error generating Judo Certificate:",H),setErrorMessage("Failed to generate Judo Certificate. Please try again."),setShowError(!0)}finally{n(!1)}};function D(B){return new Promise((H,he)=>{no(B,Le=>{if(Le.type==="error")console.warn("EXIF processing failed, using original image:",B),H(B);else try{const te=Le.toDataURL("image/png");H(te)}catch(te){console.warn("Canvas conversion failed, using original image:",te),H(B)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const Y=B=>{if(console.log("🎯 handleExportPDF called with data:",B),console.log("📊 Data type:",typeof B),console.log("📋 Data keys:",B?Object.keys(B):"No data"),console.log("🆔 national_id_number in data:",B==null?void 0:B.national_id_number),!B||Object.keys(B).length===0){console.error("❌ No data available to export"),alert("No data available to export");return}console.log("✅ Data validation passed, calling exportPDFWithAutoOrientation..."),ce(B)},ce=async B=>{if(console.log("🚀 PDF Generation - Starting with data:",B),!B||!B.primary_id&&!B.national_id_number){console.error("❌ No data or primary_id/national_id_number provided for PDF generation"),alert("No valid data available for PDF generation");return}try{const he=B.table_source||"athletes",Le="id",te=B.primary_id||B.id;console.log("🔍 Fetching complete athlete data from database..."),console.log("📊 Table source:",he),console.log("🆔 ID field:",Le),console.log("🔢 ID value:",te);const{data:ye,error:ve}=await ne.from(he).select("*").eq(Le,te).single();if(ve||!ye){console.error("❌ Error fetching athlete data:",ve),console.log("🔄 Falling back to national_id_number query...");const{data:He,error:Fe}=await ne.from("athletes").select("*").eq("national_id_number",B.national_id_number).single();if(Fe||!He){console.error("❌ Fallback query also failed:",Fe),alert("Error fetching complete athlete data from database");return}console.log("✅ Fallback athlete data fetched:",He);var H=He}else{console.log("✅ Complete athlete data fetched:",ye);var H=ye}console.log("✅ Using complete athlete data for PDF:",H);let fe=null,P=null;try{if(console.log("🔍 Fetching club and league names..."),H.club_id){console.log("🏢 Fetching club name for ID:",H.club_id);const He=await An();console.log("🏢 Club names object:",He),fe=He[H.club_id],console.log("🏢 Fetched club name:",fe)}else console.log("⚠️ No club_id found in athlete data");if(H.league_id){console.log("🏆 Fetching league name for ID:",H.league_id);const He=await qn();console.log("🏆 League names object:",He),P=He[H.league_id],console.log("🏆 Fetched league name:",P)}else console.log("⚠️ No league_id found in athlete data")}catch(He){console.error("❌ Error fetching names:",He)}const q=new Dt("portrait","mm","a4");q.setFontSize(18),q.setTextColor(40,40,40),q.text("Algerian Judo Federation",14,15);const X=`Athlete Information - ${H.first_name} ${H.last_name}`;q.setFontSize(16),q.setTextColor(40,40,40),q.text(X,14,30),q.setFontSize(10);const ae=new Date().toLocaleString();if(q.text(`Generated: ${ae}`,14,37),i)try{q.addImage(i,"PNG",170,10,25,25)}catch(He){console.error("Error adding logo to PDF:",He)}let be=70;if(B.photos_url)try{const He=await D(B.photos_url),Fe=He.startsWith("data:")?"PNG":"JPEG";q.addImage(He,Fe,14,45,25,20),be=70}catch(He){console.error("Error adding photo to PDF:",He);try{q.addImage(B.photos_url,"JPEG",14,45,25,20)}catch(Fe){console.error("Fallback image addition also failed:",Fe)}be=70}q.setFontSize(12),H.confirmation?q.setTextColor(0,128,0):q.setTextColor(255,0,0);const Ne=H.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";q.text(Ne,160,50);const De={last_name:"Last Name",first_name:"First Name",date_of_birth:"Date of Birth",place_of_birth:"Place of Birth",role:"Role",blood_type:"Blood Type",national_id_number:"National ID",nationality:"Nationality",grade:"Grade",genres:"Gender",categories:"Category",weight:"Weight",license_number:"License Number",registration_date:"Registration Date",year:"Year",renewal:"Renewal",confirmation:"Confirmation Status"},ke=Object.keys(De).filter(He=>H[He]!==null&&H[He]!==void 0&&H[He]!==""&&H[He]!=="null");console.log("PDF Generation - All data fields:",Object.keys(H)),console.log("PDF Generation - Available fields with data:",ke),console.log("PDF Generation - Fields with no data:",Object.keys(De).filter(He=>!ke.includes(He)));const qe=ke.map(He=>[De[He]||He.charAt(0).toUpperCase()+He.slice(1).replace(/_/g," "),H[He]]);vr(q,{startY:be,head:[["Field","Value"]],body:qe,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Ke=q.lastAutoTable.finalY||200;if(q.setFontSize(12),q.setTextColor(0,0,0),q.text("Medical certificate",14,Ke+20),q.setDrawColor(0),q.line(14,Ke+40,80,Ke+40),q.setFontSize(10),H.club_id){const He=fe||`Club ID: ${H.club_id}`;q.text(`Club: ${He}`,14,Ke+60),q.text("Club Visa: _________________",14,Ke+70)}if(H.league_id){const He=P||`League ID: ${H.league_id}`;q.text(`League: ${He}`,120,Ke+60),q.text("League Visa: _________________",120,Ke+70)}try{const He=JSON.stringify({id:H.id,name:`${H.first_name||""} ${H.last_name||""}`.trim(),license:H.license_number||"",club_id:H.club_id||"",league_id:H.league_id||"",confirmation:H.confirmation||"Unconfirmed"}),Fe=await ui.toDataURL(He,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});q.addImage(Fe,"PNG",180,Ke+75,15,15)}catch(He){console.error("Error generating QR code:",He)}const dt=`athlete_${H.first_name}_${H.last_name}_${H.id||"record"}.pdf`;console.log("Saving PDF with filename:",dt),q.save(dt),console.log("PDF generation completed successfully")}catch(he){console.error("Error in PDF generation:",he),alert(`Error generating PDF: ${he.message}`)}};return c?s.jsxs("div",{className:"page-container",children:[r&&s.jsx(nn,{}),s.jsxs("div",{className:"content-box",children:[s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsxs("div",{className:"federation-header",children:[i?s.jsx("img",{src:i,alt:"Federation Logo",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:o})]})}),s.jsx(Pr,{}),s.jsxs("div",{className:"athlete-profile",children:[s.jsx("h2",{className:"form-title",children:"Athlete Profile"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"photo-section",children:[c.photos_url||c.photo_url?s.jsx("img",{src:c.photos_url||c.photo_url,alt:`${c.first_name} ${c.last_name}`,className:"athlete-photo"}):s.jsx("div",{className:"photo-placeholder",children:s.jsx(gv,{})}),s.jsxs("h3",{children:[c.first_name," ",c.last_name]}),s.jsx("p",{children:c.role||"Athlete"}),c.confirmation&&s.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm mt-2",children:"✓ Confirmed"})]}),s.jsxs("div",{className:"info-grid",children:[s.jsxs("div",{className:"info-card",children:[s.jsxs("h3",{children:[s.jsx(gv,{className:"w-5 h-5"}),"Personal Information"]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"First Name:"}),s.jsx("span",{className:"info-value",children:c.first_name||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Last Name:"}),s.jsx("span",{className:"info-value",children:c.last_name||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Date of Birth:"}),s.jsx("span",{className:"info-value",children:c.date_of_birth||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Place of Birth:"}),s.jsx("span",{className:"info-value",children:c.place_of_birth||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Nationality:"}),s.jsx("span",{className:"info-value",children:c.nationality||"N/A"})]})]}),s.jsxs("div",{className:"info-card",children:[s.jsxs("h3",{children:[s.jsx(Ng,{className:"w-5 h-5"}),"Athletic Information"]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Grade:"}),s.jsx("span",{className:"info-value",children:c.grade||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Category:"}),s.jsx("span",{className:"info-value",children:c.categories||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Weight:"}),s.jsx("span",{className:"info-value",children:c.weight||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Gender:"}),s.jsx("span",{className:"info-value",children:c.genres||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"License Number:"}),s.jsx("span",{className:"info-value",children:c.license_number||"N/A"})]})]}),s.jsxs("div",{className:"info-card",children:[s.jsxs("h3",{children:[s.jsx(KC,{className:"w-5 h-5"}),"Medical Information"]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Blood Type:"}),s.jsx("span",{className:"info-value",children:c.blood_type||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"National ID:"}),s.jsx("span",{className:"info-value",children:c.national_id_number||"N/A"})]})]}),s.jsxs("div",{className:"info-card",children:[s.jsxs("h3",{children:[s.jsx(UC,{className:"w-5 h-5"}),"Registration Information"]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Registration Date:"}),s.jsx("span",{className:"info-value",children:c.registration_date||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Year:"}),s.jsx("span",{className:"info-value",children:c.year||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Renewal:"}),s.jsx("span",{className:"info-value",children:c.renewal||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Club:"}),s.jsx("span",{className:"info-value",children:A||"N/A"})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"League:"}),s.jsx("span",{className:"info-value",children:G||"N/A"})]})]})]})]}),c.description&&s.jsxs("div",{className:"athlete-description",children:[s.jsx("h3",{children:"Description:"}),s.jsx("p",{children:c.description})]}),s.jsxs("div",{className:"qr-code-section",children:[s.jsxs("h3",{children:[s.jsx(fv,{className:"w-5 h-5"}),"Athlete QR Code"]}),s.jsx("p",{children:"Scan to access athlete information"}),s.jsx("div",{className:"qr-code-container",children:d?s.jsx("img",{src:d,alt:"Athlete QR Code",className:"qr-code-centered"}):s.jsxs("div",{className:"qr-code-loading",children:[s.jsx(fv,{className:"w-16 h-16 text-gray-400"}),s.jsx("p",{children:"Generating QR Code..."})]})}),d&&s.jsx("div",{className:"qr-code-status",children:s.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:"✓ QR Code Ready"})})]})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"photo-section",children:[s.jsx("h3",{children:"Related Licenses"}),s.jsx("p",{children:"All athlete licenses with the same National ID Number"}),s.jsxs("div",{className:"related-stats",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-number",children:m.length}),s.jsx("span",{className:"stat-label",children:"Total Licenses"})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-number",children:m.filter(B=>B.table_type==="athletes").length}),s.jsx("span",{className:"stat-label",children:"Athletes"})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-number",children:m.filter(B=>B.table_type==="league_members").length}),s.jsx("span",{className:"stat-label",children:"League Members"})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-number",children:m.filter(B=>B.table_type==="club_members").length}),s.jsx("span",{className:"stat-label",children:"Club Members"})]})]})]}),s.jsx("div",{className:"info-grid",children:s.jsxs("div",{className:"info-card",children:[s.jsx("h4",{children:"Athlete Licenses Table"}),s.jsx("p",{children:"Double-click any row to generate PDF for that athlete"}),x?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Loading related athletes..."})]}):m.length>0?s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"athletes-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Source"}),s.jsx("th",{children:"Full Name"}),s.jsx("th",{children:"License Number"}),s.jsx("th",{children:"National ID"}),s.jsx("th",{children:"Club/League ID"}),s.jsx("th",{children:"Status"})]})}),s.jsxs("tbody",{children:[console.log("🔍 Rendering table with relatedAthletes:",m),m.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"20px"},children:"No related athlete licenses found"})}):m.map((B,H)=>s.jsxs("tr",{onDoubleClick:()=>{console.log("🎯 Double-click fired on athlete:",B),console.log("📋 Available fields:",Object.keys(B)),console.log("🏷️ Table type:",B.table_type),console.log("🆔 Original national_id_number:",B.national_id_number),console.log("🆔 Fallback athlete_nid:",B.athlete_nid),console.log("🆔 Fallback nid:",B.nid);const he={...B,national_id_number:B.national_id_number||B.athlete_nid||B.nid,primary_id:B.id,table_source:B.table_type};console.log("✅ Safe data created with normalized national_id_number:",he.national_id_number),console.log("📦 Complete safe data object:",he),console.log("🚀 About to call handleExportPDF...");try{Y(he),console.log("✅ handleExportPDF called successfully")}catch(Le){console.error("❌ Error calling handleExportPDF:",Le)}},className:"clickable-row",style:{cursor:"pointer"},title:"Double-click to generate PDF",children:[s.jsx("td",{children:s.jsx("span",{className:`source-badge ${B.table_type}`,children:B.source})}),s.jsx("td",{className:"name-cell",children:B.first_name&&B.last_name?`${B.first_name} ${B.last_name}`:B.full_name||"N/A"}),s.jsx("td",{className:"license-cell",children:B.license_number||B.athlete_license_number||"N/A"}),s.jsx("td",{className:"id-cell",children:B.national_id_number}),s.jsx("td",{className:"club-cell",children:B.club_id||B.league_id||"N/A"}),s.jsx("td",{children:s.jsx("span",{className:`status-badge ${B.status||"active"}`,children:B.status||"Active"})})]},`${B.table_type}-${B.id||H}`))]})]})}):s.jsx("div",{className:"no-data",children:s.jsx("p",{children:"No related athlete licenses found with the same National ID Number."})})]})})]}),c&&c.grade==="black belt"&&s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"photo-section",children:[s.jsx("h3",{children:"Judo Certificate"}),s.jsx("p",{children:"Generate official Judo certificate for black belt athletes"}),s.jsxs("div",{className:"certificate-preview",children:[s.jsxs("div",{className:"certificate-badge",children:[s.jsx(Ng,{className:"certificate-icon"}),s.jsx("span",{children:"Black Belt Certificate"})]}),s.jsxs("div",{className:"certificate-info",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Athlete:"})," ",c.first_name," ",c.last_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Grade:"})," ",c.grade]}),s.jsxs("p",{children:[s.jsx("strong",{children:"License:"})," ",c.license_number]})]}),s.jsxs("div",{className:"certificate-qr",style:{marginTop:"10px"},children:[s.jsx("h5",{style:{margin:0},children:"Certificate QR"}),F?s.jsx("img",{src:F,alt:"Certificate QR Code",style:{width:"48px",height:"48px",border:"1px solid #eee",borderRadius:"4px"}}):s.jsx("p",{style:{fontSize:"12px",color:"#666"},children:"QR appears when data is complete."})]})]})]}),s.jsx("div",{className:"info-grid",children:s.jsxs("div",{className:"info-card",children:[s.jsx("h4",{children:"Certificate Generation"}),s.jsx("p",{children:"Click the button below to generate the official Judo certificate"}),s.jsx("div",{className:"certificate-actions",children:s.jsxs("button",{className:"primary-button certificate-btn",onClick:()=>Z(c),disabled:r,children:[s.jsx(Ng,{size:20}),r?"Generating...":"Generate Judo Certificate"]})}),s.jsxs("div",{className:"certificate-requirements",children:[s.jsx("h5",{children:"Certificate Requirements:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"✓ Black Belt Grade"}),s.jsx("li",{children:"✓ Valid License Number"}),s.jsx("li",{children:"✓ Complete Athlete Information"})]})]})]})})]}),s.jsx(gn,{})]})]}):s.jsxs("div",{className:"page-container",children:[s.jsx(nn,{}),s.jsx("div",{className:"content-box",children:s.jsx("div",{className:"text-center p-8",children:s.jsx("p",{children:"Loading athlete information..."})})})]})}function $P(){const[t,e]=b.useState(null),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(!1),[d,g]=b.useState(""),m=Mr(),f="https://example.com/federation-logo.png",x="Algerian Judo Federation",[j,_]=b.useState(""),[v,C]=b.useState(null),N=async(F,$)=>{if(!r||!i){l("Please enter both Name and Key before continuing.");return}let Z="",D="",Y="";$==="federation"?(Z="members",D="last_name",Y="password"):$==="league"?(Z="league_members",D="last_name",Y="password"):$==="club"&&(Z="club_members",D="last_name",Y="password");const{data:ce,error:B}=await ne.from(Z).select("*").eq(D,r).eq(Y,i).single();if(B||!ce){l("❌ Invalid Name or Key. Please try again.");return}l("");let H={};$==="federation"?H={federationLogo:f,federationName:x}:$==="league"?H={league_id:ce.league_id,logo_url:ce.logo_url}:$==="club"&&(H={club_id:ce.club_id,league_id:ce.league_id,logo_url:ce.logo_url}),m(F,{state:{...ce,...H}})},A=F=>{m(F)},O=F=>{g(F),u(!0),e(F),l(""),n(""),a("")},G=()=>{u(!1),g(""),e(null),l(""),n(""),a("")},V=(F,$,Z,D="secondary-btn")=>s.jsx("div",{className:"login-box",children:s.jsx("button",{className:D,onClick:()=>O(F),children:$})});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"gorgeous-buttons-layout horizontal-buttons-container",children:[s.jsx("div",{className:"gorgeous-button-wrapper",children:V("federation","Federation Account","/AddMemberPage","gorgeous-green-btn")}),s.jsx("div",{className:"gorgeous-button-wrapper",children:V("league","League Account","/AddMemberLeague","gorgeous-green-btn")}),s.jsx("div",{className:"gorgeous-button-wrapper",children:V("club","Amateur Sports Club","/AddMemberClub","gorgeous-green-btn")})]}),c&&s.jsx("div",{className:"modal-overlay",onClick:G,children:s.jsxs("div",{className:"modal-content",onClick:F=>F.stopPropagation(),children:[s.jsx("button",{className:"modal-close",onClick:G,children:"×"}),s.jsxs("div",{className:"login-box",children:[s.jsx("h3",{style:{marginBottom:"1rem",color:"#15803d",textAlign:"center"},children:d==="federation"?"Federation Account Login":d==="league"?"League Account Login":"Amateur Sports Club Login"}),s.jsx("input",{type:"text",placeholder:"Enter Name",value:r,onChange:F=>n(F.target.value),className:"input-field mb-2"}),s.jsx("input",{type:"password",placeholder:"Enter Key",value:i,onChange:F=>a(F.target.value),className:"input-field mb-2"}),o&&s.jsx("p",{className:"error-text",children:o}),s.jsxs("div",{className:"btn-row mt-2 flex gap-2",children:[s.jsx("button",{className:"primary-btn",onClick:()=>N(`/${d==="federation"?"FederationPage":d==="league"?"LeaguePage":"AmateurSportsClubPage"}`,d),children:"Login"}),s.jsx("button",{className:"secondary-btn",onClick:()=>A(d==="federation"?"/AddMemberPage":d==="league"?"/AddMemberLeague":"/AddMemberClub"),children:"➕ Add Member"}),s.jsx("button",{className:"secondary-btn",onClick:G,children:"Cancel"})]})]})]})})]})}const qP=({announcements:t=[]})=>t.length===0?null:s.jsx("div",{className:"green-tape-banner relative overflow-hidden",children:s.jsx("div",{className:"text-white py-20 shadow-2xl relative",children:s.jsxs("div",{className:"relative z-20",children:[s.jsx("h2",{className:"header-text-massive font-bold text-center mb-8 tracking-wider",children:"OFFICIAL ANNOUNCEMENTS - JUDO ALGERIA"}),s.jsx("div",{className:"overflow-hidden whitespace-nowrap",children:s.jsx("div",{className:"animate-marquee",children:t.map((e,r)=>s.jsxs("span",{className:"announcement-text-huge mx-8 text-white font-bold tracking-wider whitespace-nowrap",children:["⭐ ",e," ⭐"]},r))})})]})})}),zP=({id:t,image:e,title:r,description:n,link:i,type:a="website",onClick:o})=>{const l=()=>{if(o)o();else if(i)if(a==="pdf"){const c=document.createElement("a");c.href=i,c.download=r||"document.pdf",document.body.appendChild(c),c.click(),document.body.removeChild(c)}else window.open(i,"_blank","noopener,noreferrer")};return s.jsxs("div",{className:"circle-button-container",children:[s.jsx("div",{className:"circle-button",onClick:l,role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),l())},children:s.jsxs("div",{className:"circle-button-inner",children:[s.jsx("div",{className:"circle-image-container",children:e?s.jsx("img",{src:e,alt:r||"Button",className:"circle-image"}):s.jsx("div",{className:"circle-placeholder",children:a==="pdf"?s.jsx(dv,{className:"w-8 h-8 text-white"}):s.jsx(hv,{className:"w-8 h-8 text-white"})})}),s.jsx("div",{className:"circle-overlay",children:a==="pdf"?s.jsx(dv,{className:"w-6 h-6 text-white"}):s.jsx(hv,{className:"w-6 h-6 text-white"})})]})}),(r||n)&&s.jsxs("div",{className:"circle-button-info",children:[r&&s.jsx("h3",{className:"circle-button-title",children:r}),n&&s.jsx("p",{className:"circle-button-description",children:n})]})]})};function WP(){const[t,e]=b.useState(null),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(!1),[d,g]=b.useState(""),m=Mr(),[f,x]=b.useState(""),[j,_]=b.useState(null),v=async(O,G)=>{if(!r||!i){l("Please enter both Name and Key before continuing.");return}let V="",F="",$="";G==="Athlete"&&(V="athletes",F="last_name",$="password");const{data:Z,error:D}=await ne.from(V).select("*").eq(F,r).eq($,i).single();if(console.log("Authentication attempt:",{tableName:V,nameColumn:F,keyColumn:$,name:r,key:i}),console.log("Database response:",{data:Z,supaError:D}),D||!Z){console.log("Authentication failed:",(D==null?void 0:D.message)||"No data returned"),l("❌ Invalid Name or Key. Please try again.");return}l("");let Y={};G==="Athlete"&&(Y={club_id:Z.club_id,league_id:Z.league_id}),console.log("🔍 AthleteB.jsx - Raw database data:",Z),console.log("🔍 AthleteB.jsx - Extra data being added:",Y),console.log("🔍 AthleteB.jsx - Final state being passed:",{...Z,...Y}),console.log("🔍 AthleteB.jsx - Navigating to:",O,"with state:",{...Z,...Y}),m(O,{state:{...Z,...Y}})},C=O=>{g(O),u(!0),e(O),l(""),n(""),a("")},N=()=>{u(!1),g(""),e(null),l(""),n(""),a("")},A=(O,G,V,F="secondary-btn")=>s.jsx("div",{className:"login-box",children:s.jsx("button",{className:F,onClick:()=>C(O),children:G})});return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"gorgeous-buttons-layout horizontal-buttons-container",children:s.jsx("div",{className:"gorgeous-button-wrapper",children:A("Athlete","Athletes Account Login","/Athlete","gorgeous-green-btn")})}),c&&s.jsx("div",{className:"modal-overlay",onClick:N,children:s.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[s.jsx("button",{className:"modal-close",onClick:N,children:"×"}),s.jsxs("div",{className:"login-box",children:[s.jsx("h3",{style:{marginBottom:"1rem",color:"#15803d",textAlign:"center"},children:d==="Athlete"?"Athletes Account Login":"Login"}),s.jsx("input",{type:"text",placeholder:"Enter Name",value:r,onChange:O=>n(O.target.value),className:"input-field mb-2"}),s.jsx("input",{type:"password",placeholder:"Enter Key",value:i,onChange:O=>a(O.target.value),className:"input-field mb-2"}),o&&s.jsx("p",{className:"error-text",children:o}),s.jsxs("div",{className:"btn-row mt-2 flex gap-2",children:[s.jsx("button",{className:"primary-btn",onClick:()=>v(`/${d==="Athlete"?"Athlete":""}`,d),children:"Login"}),s.jsx("button",{className:"secondary-btn",onClick:N,children:"Cancel"})]})]})]})})]})}function HP(){const[t,e]=b.useState(!1),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(""),[d,g]=b.useState(!1),[m,f]=b.useState([]),[x,j]=b.useState(0),[_,v]=b.useState(null),[C,N]=b.useState("Algerian Judo Federation"),[A,O]=b.useState(!0),[G,V]=b.useState([]),[F,$]=b.useState([]),[Z,D]=b.useState([]),[Y,ce]=b.useState([]);b.useRef(null),Mr();const[B,H]=b.useState(""),[he,Le]=b.useState(null);b.useEffect(()=>{(async()=>{const{data:fe,error:P}=await ne.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!P&&fe&&f(fe)})()},[]),b.useEffect(()=>{(async()=>{const{data:fe,error:P}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!P&&fe.length>0&&v(fe[0].logo_url)})()},[]),b.useEffect(()=>{(async()=>{const{data:fe,error:P}=await ne.from("pub").select("photo_url").order("created_at",{ascending:!1});!P&&fe&&V(fe)})()},[]),b.useEffect(()=>{(async()=>{const{data:fe,error:P}=await ne.from("publica").select("title, description, photo_url").order("created_at",{ascending:!1});!P&&fe&&$(fe)})()},[]),b.useEffect(()=>{try{const ve=localStorage.getItem("algerian_judo_banner_announcements");if(ve){const fe=JSON.parse(ve);D(fe)}}catch(ve){console.error("Erreur lors du chargement des annonces:",ve)}},[]),b.useEffect(()=>{try{const ve=localStorage.getItem("algerian_judo_circle_buttons");if(ve){const fe=JSON.parse(ve);ce(fe)}else ce([{id:1,title:"Official Website",description:"Visit our main website",image:"",link:"https://example.com",type:"website"},{id:2,title:"Rules PDF",description:"Download competition rules",image:"",link:"",type:"pdf"},{id:3,title:"Training Center",description:"Find training locations",image:"",link:"https://maps.google.com",type:"website"},{id:4,title:"Registration Form",description:"Download registration form",image:"",link:"",type:"pdf"},{id:5,title:"Contact Us",description:"Get in touch with us",image:"",link:"mailto:contact@judoalgeria.com",type:"website"}])}catch(ve){console.error("Erreur lors du chargement des boutons:",ve)}},[]),b.useEffect(()=>{if(m.length>0){const ve=setInterval(()=>{j(fe=>(fe+1)%m.length)},5e3);return()=>clearInterval(ve)}},[m]);const te=()=>{j(ve=>(ve+1)%m.length)},ye=()=>{j(ve=>(ve-1+m.length)%m.length)};return b.useEffect(()=>{const ve=fe=>{(fe.key==="Escape"||fe.code==="Space")&&he&&Le(null)};return window.addEventListener("keydown",ve),()=>window.removeEventListener("keydown",ve)},[he]),s.jsxs("div",{className:"app-container",children:[d&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[_?s.jsx("img",{src:_,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:C||"Algerian Judo Federation"})]})})}),s.jsx("div",{style:{height:"08rem"}}),s.jsxs("section",{id:"showcase",style:{backgroundImage:G.length>0?`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(${G[0].photo_url})`:"none",backgroundSize:"cover",backgroundPosition:"center",color:"white",padding:"6rem 0",textAlign:"center",height:"200px",boxShadow:"0 15px 35px rgba(0, 0, 0, 0.6), 0 8px 15px rgba(0, 0, 0, 0.3)",transform:"perspective(1000px) rotateX(2deg) rotateY(-2deg)",transition:"transform 0.5s ease, box-shadow 0.5s ease"},onMouseMove:ve=>{const fe=ve.currentTarget,P=fe.getBoundingClientRect(),q=ve.clientX-P.left,X=ve.clientY-P.top,ae=P.width/2,be=P.height/2,Ne=(X-be)/be*5,De=(q-ae)/ae*-5;fe.style.transform=`perspective(1000px) rotateX(${Ne}deg) rotateY(${De}deg)`},onMouseLeave:ve=>{ve.currentTarget.style.transform="perspective(1000px) rotateX(2deg) rotateY(-2deg)"},children:[s.jsx("h1",{children:"Welcome to the Federation"}),s.jsx("p",{children:"Promoting Judo Excellence in Algeria"})]}),s.jsx("div",{style:{height:"03rem"}}),s.jsx("section",{children:s.jsx("div",{className:"circle-buttons-container",children:Y.map(ve=>s.jsx(zP,{title:ve.title,description:ve.description,image:ve.image,link:ve.link,type:ve.type},ve.id))})}),s.jsx("div",{style:{height:"6rem"}}),Z.length>0&&s.jsx(qP,{announcements:Z}),s.jsx("div",{style:{height:"6rem"}}),s.jsxs("section",{className:"carousel-section",style:{backgroundImage:B?`url(${B})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},onMouseMove:ve=>{if(!cardRef.current)return;const fe=cardRef.current.getBoundingClientRect(),P=ve.clientX-fe.left,q=ve.clientY-fe.top,X=fe.width/2,ae=fe.height/2,be=(q-ae)/10,Ne=(X-P)/10;cardRef.current.style.transform=`perspective(1000px) rotateX(${be}deg) rotateY(${Ne}deg)`},onMouseLeave:()=>{cardRef.current&&(cardRef.current.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg)")},onMouseDown:ve=>window.dragStart=ve.clientX,onMouseUp:ve=>{if(!window.dragStart)return;const fe=ve.clientX-window.dragStart;fe>50&&ye(),fe<-50&&te(),window.dragStart=null},onTouchStart:ve=>window.touchStart=ve.touches[0].clientX,onTouchEnd:ve=>{if(!window.touchStart)return;const fe=ve.changedTouches[0].clientX-window.touchStart;fe>50&&ye(),fe<-50&&te(),window.touchStart=null},children:[s.jsx("button",{className:"carousel-button left",onClick:ye,children:"❮"}),s.jsx("div",{className:"carousel-track",children:m.map((ve,fe)=>{const P=(fe-x+m.length)%m.length;let q="";return P===0?q="active":P===1?q="next":P===m.length-1?q="prev":q="hidden",s.jsxs("div",{className:`carousel-slide ${q}`,onClick:()=>{q==="active"&&Le({photo:ve.photo_url,title:ve.title,description:ve.description})},children:[s.jsx("img",{src:ve.photo_url,alt:ve.title,className:"carousel-image"}),s.jsxs("div",{className:"carousel-caption",children:[s.jsx("h3",{children:ve.title}),s.jsx("p",{children:ve.description})]})]},ve.id)})}),s.jsx("button",{className:"carousel-button right",onClick:te,children:"❯"}),he&&s.jsx("div",{className:"fullscreen-overlay",onClick:()=>Le(null),children:s.jsxs("div",{className:"fullscreen-content",onClick:ve=>ve.stopPropagation(),children:[s.jsx("button",{className:"close-button",onClick:()=>Le(null),children:"×"}),s.jsx("img",{src:he.photo,alt:he.title,className:"fullscreen-image"}),s.jsxs("div",{className:"fullscreen-text",children:[s.jsx("h2",{children:he.title}),s.jsx("p",{children:he.description})]})]})})]}),s.jsx("div",{style:{height:"50rem"}}),s.jsx(WP,{}),s.jsx("div",{style:{height:"8rem"}}),s.jsx("div",{className:"moving-image-container",children:s.jsx("div",{className:"moving-image-track",children:F.length>0?F.map((ve,fe)=>s.jsxs("div",{className:"moving-image-card",children:[s.jsx("img",{src:ve.photo_url,alt:ve.title,onError:P=>{P.currentTarget.src=Zi}}),s.jsxs("div",{className:"moving-image-overlay",children:[s.jsx("h3",{children:ve.title}),s.jsx("p",{children:ve.description})]})]},fe)):s.jsxs("div",{className:"moving-image-card",children:[s.jsx("img",{src:Zi,alt:"Judo athletes"}),s.jsxs("div",{className:"moving-image-overlay",children:[s.jsx("h3",{children:"Welcome to the Federation"}),s.jsx("p",{children:"Promoting Judo Excellence in Algeria"})]})]})})}),s.jsx("div",{style:{height:"5rem"}}),s.jsx($P,{}),o&&s.jsx(En,{error:o,onClose:()=>l("")}),c&&s.jsx(Rn,{success:c,onClose:()=>u("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function GP(){const{state:t}=fi(),e=Mr(),[r,n]=b.useState(""),[i,a]=b.useState(null),[o,l]=b.useState("Algerian Judo Federation"),[c,u]=b.useState(null),[d,g]=b.useState([]),[m,f]=b.useState(null),[x,j]=b.useState(null),[_,v]=b.useState(!1),[C,N]=b.useState(""),[A,O]=b.useState(""),G=Zi;return b.useEffect(()=>{ti()},[]),b.useEffect(()=>{(async()=>{const{data:F,error:$}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!$&&F.length>0&&a(F[0].logo_url)})()},[]),b.useEffect(()=>{if(!(t!=null&&t.league_id))return;j(t),(async()=>{const{data:F,error:$}=await ne.from("nameleague").select("*").eq("id",t.league_id).single();!$&&F&&(n(F.name_league),u(F));const{data:Z,error:D}=await ne.from("club_members").select("club_id").eq("league_id",t.league_id).limit(1).single();if(!D&&Z){const{data:B,error:H}=await ne.from("nameclub").select("*").eq("id",Z.club_id).single();!H&&B&&f(B)}const{data:Y,error:ce}=await ne.from("nameclub").select("*").eq("league_id",t.league_id);!ce&&Y?g(Y):console.error("Error fetching clubs:",ce)})()},[t]),b.useEffect(()=>{ti()},[]),t?s.jsxs("div",{className:"app-container",children:[_&&s.jsx(nn,{}),s.jsx("header",{children:s.jsxs("div",{className:"federation-header",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i?s.jsx("img",{src:i,alt:"Federation Logo",className:"federation-logo"}):s.jsx("img",{src:G,alt:"Default Federation Logo",className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:o||"Algerian Judo Federation"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.logo_url?s.jsx("img",{src:t.logo_url,alt:"League Logo",className:"member-logo"}):null,s.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:r||"League Name"})]})]})}),s.jsxs("section",{className:"content",children:[s.jsxs("h2",{children:["Welcome ",t.first_name," ",t.last_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Role:"})," ",t.role]}),s.jsx(Pr,{}),s.jsx("button",{className:"primary-btn",onClick:async V=>{if(pr(V.currentTarget),!c){alert("League data not loaded yet.");return}e("/member-list-l",{state:{...t,league_id:c==null?void 0:c.id,league_name:c==null?void 0:c.name_league,league_logo:c==null?void 0:c.logo_url}})},children:"The League Member List"}),s.jsx("button",{className:"primary-btn",onClick:async V=>{if(pr(V.currentTarget),!c){alert("League data not loaded yet.");return}e("/TheClubListAddFed-League",{state:{...t,league_id:c==null?void 0:c.id,league_name:c==null?void 0:c.name_league,league_logo:c==null?void 0:c.logo_url}})},children:"The Club Member List"}),s.jsx("button",{className:"primary-btn",onClick:async V=>{if(pr(V.currentTarget),!c){alert("League data not loaded yet.");return}e("/TheAthleteListAdd-League",{state:{...t,league_id:c==null?void 0:c.id,league_name:c==null?void 0:c.name_league,league_logo:c==null?void 0:c.logo_url}})},children:"The Athlete List Add"})]}),C&&s.jsx(En,{error:C,onClose:()=>N("")}),A&&s.jsx(Rn,{success:A,onClose:()=>O("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]}):s.jsx("p",{children:"No account data found."})}function Mm({data:t=[],title:e="Exported Data",columns:r=[],pdfOptions:n={},filename:i="export",buttonText:a="Export",className:o=""}){const[l,c]=b.useState({}),[u,d]=b.useState({});b.useEffect(()=>{(async()=>{const v=await An(),C=await qn();c(v),d(C)})()},[]);const[g,m]=b.useState(!1),f=()=>{if(!t||t.length===0){alert("No data available to export");return}x()},x=()=>{C0(t,e,r,{...n,filename:i,clubNames:l,leagueNames:u}),m(!1)},j=()=>{if(!t||t.length===0){alert("No data available to export");return}AP(t,i,r),m(!1)};return s.jsxs("div",{className:"export-container relative",children:[s.jsx("button",{onClick:()=>m(!g),className:`export-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded ${o}`,children:a}),g&&s.jsxs("div",{className:"export-options absolute right-0 mt-2 bg-white border border-gray-300 rounded shadow-lg z-10",children:[s.jsx("button",{onClick:f,className:"primary-b block w-full text-left px-4 py-2 hover:bg-gray-100",children:"Export as PDF"}),s.jsx("button",{onClick:j,className:"primary-b block w-full text-left px-4 py-2 hover:bg-gray-100",children:"Export as CSV"})]})]})}function YP({data:t={},title:e="Member Information",fields:r=[],labels:n={},buttonText:i="Export",className:a="",logoUrl:o=null,includePhoto:l=!0,clubName:c=null,leagueName:u=null}){const[d,g]=b.useState(null),[m,f]=b.useState(null);b.useEffect(()=>{(async()=>{if(t.club_id){const v=await An();v[t.club_id]&&g(v[t.club_id])}if(t.league_id){const v=await qn();v[t.league_id]&&f(v[t.league_id])}})()},[t.club_id,t.league_id]);const x=()=>{if(!t||Object.keys(t).length===0){alert("No data available to export");return}j()},j=async()=>{const _=new Dt("portrait","mm","a4");_.setFontSize(18),_.setTextColor(40,40,40),_.text("Algerian Judo Federation",14,15),_.setFontSize(16),_.setTextColor(40,40,40),_.text(e,14,30),_.setFontSize(10);const v=new Date().toLocaleString();if(_.text(`Generated: ${v}`,14,37),o)try{_.addImage(o,"PNG",170,10,25,25)}catch(F){console.error("Error adding logo to PDF:",F)}let C=45;if(l&&t.photos_url)try{_.addImage(t.photos_url,"PNG",14,45,25,20),C=70}catch(F){console.error("Error adding person photo to PDF:",F),C=45}_.setFontSize(12),t.confirmation?_.setTextColor(0,128,0):_.setTextColor(255,0,0);const N=t.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";_.text(N,160,50);const O=(r.length>0?r:Object.keys(t)).map(F=>[n[F]||F.charAt(0).toUpperCase()+F.slice(1).replace(/_/g," "),t[F]||""]);vr(_,{startY:C,head:[["Field","Value"]],body:O,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const G=_.lastAutoTable.finalY||200;if(_.setFontSize(12),_.setTextColor(0,0,0),_.text("Medical certificate",14,G+20),_.setDrawColor(0),_.line(14,G+40,80,G+40),_.setFontSize(10),t.club_id||c){const F=c||d||(t.club_name?t.club_name:`ID: ${t.club_id}`);_.text(`Club: ${F}`,14,G+60),_.text("Club Visa: _________________",14,G+70)}if(t.league_id||u){const F=u||m||(t.league_name?t.league_name:`ID: ${t.league_id}`);_.text(`League: ${F}`,120,G+60),_.text("League Visa: _________________",120,G+70)}try{const F=JSON.stringify({id:t.id,name:`${t.first_name||""} ${t.last_name||""}`.trim(),license:t.license_number||"",club_id:t.club_id||"",league_id:t.league_id||""}),$=await ui.toDataURL(F,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});_.addImage($,"PNG",180,G+75,15,15)}catch(F){console.error("Error generating QR code:",F)}const V=`${e.toLowerCase().replace(/ /g,"_")}_${t.id||"record"}.pdf`;_.save(V)};return s.jsx("button",{onClick:x,className:`export-row-button bg-green-500 hover:bg-green-600 text-white font-bold py-1 px-2 rounded text-sm ${a}`,title:"Export this record as PDF",children:i})}function VP(){const[t,e]=b.useState([]),[r,n]=b.useState([]),[i,a]=b.useState(null),[o,l]=b.useState({}),[c,u]=b.useState(!0),[d,g]=b.useState(null),[m,f]=b.useState(!1),[x,j]=b.useState(""),[_,v]=b.useState(""),[C,N]=b.useState([]),[A,O]=b.useState(0),[G,V]=b.useState(null),[F,$]=b.useState("Algerian Judo Federation"),[Z,D]=b.useState(!0);Mr();const Y=Zn(),ce=Zi;b.useEffect(()=>{(async()=>{const{data:P,error:q}=await ne.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!q&&P&&N(P)})()},[]),b.useEffect(()=>{(async()=>{const{data:P,error:q}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!q&&P.length>0&&V(P[0].logo_url)})()},[]);const B=async()=>{try{u(!0);const{data:fe,error:P}=await ne.from("members").select("*");P?g(P):e(fe||[])}catch(fe){g(fe)}finally{u(!1)}};b.useEffect(()=>{B()},[]),b.useEffect(()=>{(async()=>{try{const{data:P,error:q}=await ne.from("federationrole").select("*");q?console.error("Error fetching roles:",q):n(P||[])}catch(P){console.error("Error fetching roles:",P)}})()},[]);const H=async fe=>{if(!window.confirm("Are you sure you want to delete this member?"))return;const{error:P}=await ne.from("members").delete().eq("id",fe);P?console.error("Error deleting member:",P):e(t.filter(q=>q.id!==fe))},he=fe=>{a(fe.id),l({...fe})},Le=async fe=>{const{error:P}=await ne.from("members").update({last_name:o.last_name,first_name:o.first_name,date_of_birth:o.date_of_birth,place_of_birth:o.place_of_birth,role_id:o.role_id,blood_type:o.blood_type,national_id_number:o.national_id_number}).eq("id",fe);P?console.error("Error updating member:",P):(e(t.map(q=>q.id===fe?o:q)),a(null))},te=(fe,P)=>{l({...o,[P]:fe.target.value})},ye=[{header:"Role",field:"role_name"},{header:"Blood Type",field:"blood_type"},{header:"Last Name",field:"last_name"},{header:"First Name",field:"first_name"},{header:"Date of Birth",field:"date_of_birth"},{header:"Place of Birth",field:"place_of_birth"},{header:"National ID Number",field:"national_id_number"},{header:"License Number",field:"license_number"},{header:"Registration Date",field:"registration_date"}],ve=()=>t.map(fe=>{const P=r.find(q=>q.id===fe.role_id);return{...fe,role_name:P?P.federation_role:fe.role_id||"N/A"}});return d?s.jsxs("p",{children:["Error fetching members: ",d.message]}):s.jsxs("div",{className:"app-container",children:[c&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[G?s.jsx("img",{src:G,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:F||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{children:"Member List"}),s.jsx("div",{className:"table-container",ref:Y,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood Type"}),s.jsx("th",{children:"Last Name"}),s.jsx("th",{children:"First Name"}),s.jsx("th",{children:"Date of Birth"}),s.jsx("th",{children:"Place of Birth"}),s.jsx("th",{children:"National ID Number"}),s.jsx("th",{children:"License Number"}),s.jsx("th",{children:"Registration Date"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:t.map(fe=>s.jsxs("tr",{children:[s.jsx("td",{children:i===fe.id?s.jsxs("select",{value:o.role_id||"",onChange:P=>l({...o,role_id:P.target.value}),children:[s.jsx("option",{value:"",children:"Select Role"}),r.map(P=>s.jsx("option",{value:P.id,children:P.federation_role},P.id))]}):(()=>{const P=r.find(q=>q.id===fe.role_id);return P?P.federation_role:fe.role_id||"N/A"})()}),s.jsx("td",{children:i===fe.id?s.jsx("input",{value:o.blood_type||"",onChange:P=>te(P,"blood_type")}):fe.blood_type}),s.jsx("td",{children:i===fe.id?s.jsx("input",{value:o.last_name||"",onChange:P=>te(P,"last_name")}):fe.last_name}),s.jsx("td",{children:i===fe.id?s.jsx("input",{value:o.first_name||"",onChange:P=>te(P,"first_name")}):fe.first_name}),s.jsx("td",{children:i===fe.id?s.jsx("input",{type:"date",value:o.date_of_birth||"",onChange:P=>te(P,"date_of_birth")}):fe.date_of_birth}),s.jsx("td",{children:i===fe.id?s.jsx("input",{value:o.place_of_birth||"",onChange:P=>te(P,"place_of_birth")}):fe.place_of_birth}),s.jsx("td",{children:fe.national_id_number}),s.jsx("td",{children:fe.license_number}),s.jsx("td",{children:fe.registration_date}),s.jsx("td",{children:i===fe.id?s.jsx("button",{className:"primary-b",onClick:()=>Le(fe.id),children:"Save"}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-b",onClick:()=>he(fe),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>H(fe.id),children:"Delete"}),s.jsx(YP,{data:fe,title:`Member - ${fe.first_name} ${fe.last_name}`,buttonText:s.jsx(GC,{size:16}),className:"ml-1",logoUrl:G||ce})]})})]},fe.id))})]})}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(Pr,{}),s.jsx("div",{className:"flex space-x-2",children:s.jsx(Mm,{data:ve(),title:`${F} - Member List`,columns:ye,filename:"federation_members",buttonText:"Export Data",pdfOptions:{orientation:"landscape",logoUrl:G||ce}})})]})]}),d&&s.jsx(En,{message:d,onClose:()=>g(null)}),c&&s.jsx("div",{children:"Loading..."}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function JP(){const[t,e]=b.useState(""),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(""),[d,g]=b.useState(""),[m,f]=b.useState(""),[x,j]=b.useState(""),[_,v]=b.useState(""),[C,N]=b.useState([]),[A,O]=b.useState(""),[G,V]=b.useState(""),[F,$]=b.useState(""),[Z,D]=b.useState(null),[Y,ce]=b.useState("Algerian Judo Federation"),[B,H]=b.useState(""),[he,Le]=b.useState(""),[te,ye]=b.useState(!1),[ve,fe]=b.useState(!1);Mr(),b.useEffect(()=>{(async()=>{const{data:ae,error:be}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!be&&ae.length>0&&D(ae[0].logo_url)})()},[]),b.useEffect(()=>{(async()=>{const{data:ae,error:be}=await ne.from("federationrole").select("federation_role").order("federation_role",{ascending:!0});!be&&ae&&N(ae)})()},[]);const P=async()=>{if(!photoFile||photoFile.size===0)return"";const X=photoFile.name.split(".").pop(),ae=`photo-${Date.now()}.${X}`,{error:be}=await ne.storage.from("logos").upload(ae,photoFile);if(be)return H(`Photo upload failed: ${be.message}`),"";const{data:Ne}=ne.storage.from("logos").getPublicUrl(ae);return(Ne==null?void 0:Ne.publicUrl)??""},q=async X=>{if(X.preventDefault(),H(""),Le(""),fe(!0),!_||!c||!t||!r||!i||!o||!d||!m||!x||!A||!G||!F){H("All fields are required."),fe(!1);return}if(d.length!==18){H("National Identity Number must be exactly 18 digits."),fe(!1);return}if(m!==x){H("Passwords do not match."),fe(!1);return}try{const ae=await P(),be=new Date().getFullYear(),Ne=`${be}/${be+1}`;if(roleName!=="League President"){H("Only members with the role 'League President' can be submitted."),fe(!1);return}const De={last_name:t,first_name:r,date_of_birth:i,place_of_birth:o,role:_,blood_type:c,national_id_number:d,password:m,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],nationality:A,holder_of:G,grade:F,photo_url:ae,confirmation:!1,year:Ne},{error:ke}=await ne.from("members").insert([De]);ke?H(`❌ Failed to add member: ${ke.message}`):(Le(`✅ Member "${r} ${t}" added successfully!`),e(""),n(""),a(""),l(""),g(""),f(""),j(""),v(""),u(""),O(""),V(""),$(""),setPhotoFile(null))}catch(ae){H(`❌ An unexpected error occurred: ${ae.message}`)}finally{fe(!1)}};return s.jsxs("div",{className:"page-container",children:[te&&s.jsx(nn,{}),s.jsxs("div",{className:"content-box",children:[s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[Z?s.jsx("img",{src:Z,alt:"Federation Logo",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:Y||"Algerian Judo Federation"})]})})}),s.jsx("h2",{className:"form-title",children:"Add a New Member"}),s.jsxs("form",{onSubmit:q,className:"form-grid",children:[s.jsxs("label",{children:["Federation Role *",s.jsxs("select",{value:_,onChange:X=>v(X.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Federation Role"}),C.map(X=>s.jsx("option",{value:X.federation_role,children:X.federation_role},X.federation_role))]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{type:"text",value:t,onChange:X=>e(X.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{type:"text",value:r,onChange:X=>n(X.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:i,onChange:X=>a(X.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{type:"text",value:o,onChange:X=>l(X.target.value),required:!0})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:c,onChange:X=>u(X.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Blood Type --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{type:"text",value:d,onChange:X=>g(X.target.value),maxLength:"18",minLength:"18",required:!0})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:m,onChange:X=>f(X.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:x,onChange:X=>j(X.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality *",s.jsx("input",{type:"text",value:A,onChange:X=>O(X.target.value),required:!0})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:G,onChange:X=>V(X.target.value),placeholder:"Licenses, Coach degree...",required:!0})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:F,onChange:X=>$(X.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",required:!0,onChange:X=>{var ae;return setPhotoFile(((ae=X.target.files)==null?void 0:ae[0])??null)}})]}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),B&&s.jsx(En,{error:B,onClose:()=>H("")}),he&&s.jsx(Rn,{success:he,onClose:()=>Le("")}),ve&&s.jsx(ya,{message:"Adding member..."}),s.jsx(gn,{})]})]})}function KP(){const[t,e]=b.useState(""),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(""),[d,g]=b.useState([]),[m,f]=b.useState(""),[x,j]=b.useState(""),[_,v]=b.useState(""),[C,N]=b.useState(""),[A,O]=b.useState(""),[G,V]=b.useState([]),[F,$]=b.useState(null),[Z,D]=b.useState(null),[Y,ce]=b.useState(""),[B,H]=b.useState(""),[he,Le]=b.useState(""),[te,ye]=b.useState(""),[ve,fe]=b.useState(""),[P,q]=b.useState(!1),[X,ae]=b.useState(!1),[be,Ne]=b.useState(null),[De,ke]=b.useState("Algerian Judo Federation"),[qe,Ke]=b.useState([]),[dt,He]=b.useState(null),[Fe,se]=b.useState(""),[Et,At]=b.useState(""),We=Mr(),{state:Oe}=fi(),ht=tt=>tt?tt.startsWith("http")?tt:`https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/${tt}`:null;b.useEffect(()=>{(async()=>{const{data:_t,error:Bt}=await ne.from("leaguerole").select("id, league_role");!Bt&&_t&&g(_t)})()},[]),b.useEffect(()=>{(async()=>{const{data:_t,error:Bt}=await ne.from("nameleague").select("id, name_league");!Bt&&_t&&V(_t)})()},[]),b.useEffect(()=>{(async()=>{const{data:_t,error:Bt}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!Bt&&_t.length>0&&Ne(_t[0].logo_url)})()},[]);const ot=async()=>{if(!F)return null;const tt=F.name.split(".").pop(),Bt=`${Date.now()}.${tt}`,{error:vt}=await ne.storage.from("logos").upload(Bt,F);if(vt)return ye(`Upload failed: ${vt.message}`),null;const{data:kt}=ne.storage.from("logos").getPublicUrl(Bt);return(kt==null?void 0:kt.publicUrl)??null},xt=async()=>{if(!Z||Z.size===0)return"";const tt=Z.name.split(".").pop(),_t=`photo-${Date.now()}.${tt}`,{error:Bt}=await ne.storage.from("logos").upload(_t,Z);if(Bt)return ye(`Photo upload failed: ${Bt.message}`),"";const{data:vt}=ne.storage.from("logos").getPublicUrl(_t);return(vt==null?void 0:vt.publicUrl)??""},Ft=async(tt,_t,Bt,vt)=>{const{data:kt}=await ne.from("league_members").select("*").eq("national_id_number",tt).eq("league_id",_t).eq("role",Bt).eq("year",vt);if(kt&&kt.length>0)throw new Error("This member is already registered for the current season with the same role and league.");const{count:yt}=await ne.from("league_members").select("*",{count:"exact",head:!0}).eq("national_id_number",tt).eq("league_id",_t).eq("role",Bt);return(yt||0)+1},Mt=async tt=>{var $t;if(tt.preventDefault(),ye(""),fe(""),ae(!0),!r||!t||!i||!o||!c||!A||!_||!C||!Z||!F){const $e=[];r||$e.push("First Name"),t||$e.push("Last Name"),i||$e.push("Date of Birth"),o||$e.push("Place of Birth"),c||$e.push("League Role"),A||$e.push("League (in the table is league_id)"),_||$e.push("Password"),C||$e.push("Confirm Password"),Z||$e.push("Member Photo"),F||$e.push("League Logo"),ye(`Please fill in the following required fields: ${$e.join(", ")}`),ae(!1);return}const _t=Number(A);if(!_t||isNaN(_t)){ye("Please select a valid league."),ae(!1);return}if(x.length!==18){ye("National ID must be exactly 18 digits."),ae(!1);return}if(_!==C){ye("Passwords do not match."),ae(!1);return}const Bt=new Date(i),vt=new Date,kt=vt.getFullYear()-Bt.getFullYear(),yt=vt.getMonth()-Bt.getMonth(),It=vt.getDate()-Bt.getDate();if((yt<0||yt===0&&It<0?kt-1:kt)<=21){ye("Member must be more than 21 years old to register."),ae(!1);return}try{const{data:$e,error:me}=await ne.from("league_members").select("id, last_name, password").eq("last_name",t).eq("password",_);if(me){ye(`Failed to validate member data: ${me.message}`),ae(!1);return}if($e&&$e.length>0){ye(`A member with the last name "${t}" and this password already exists. Please change the password.`),ae(!1);return}}catch($e){ye(`Validation error: ${$e.message}`),ae(!1);return}try{const $e=await xt(),me=await ot(),Be=new Date().getFullYear(),at=`${Be}/${Be+1}`,Je=(($t=d.find(Qt=>Qt.id===parseInt(c)))==null?void 0:$t.league_role)||"";if(Je!=="League President"){ye("Only members with the role 'League President' can be submitted."),ae(!1);return}const ze=await Ft(x,A,Je,at),Gt={last_name:t,first_name:r,date_of_birth:i,place_of_birth:o,role:Je,blood_type:m,national_id_number:x,password:_,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],logo_url:me,league_id:_t,photo_url:$e,renewal:ze,year:at,nationality:Y,holder_of:B,grade:he,confirmation:!1},{error:qt}=await ne.from("league_members").insert([Gt]);if(qt){ye(`Failed to save member: ${qt.message}`),ae(!1);return}if(me&&A&&await ne.from("nameleague").update({logo_url:me}).eq("id",A),fe(`Member "${r} ${t}" has been successfully added to the League!`),e(""),n(""),a(""),l(""),j(""),v(""),N(""),u(""),f(""),O(""),D(null),$(null),ce(""),H(""),Le(""),A){const{data:Qt}=await ne.from("league_members").select("*").eq("league_id",Number(A));Ke(Qt||[]);const{data:Ut}=await ne.from("nameleague").select("logo_url").eq("id",A).single();Ut!=null&&Ut.logo_url&&He(ht(Ut.logo_url))}ae(!1)}catch($e){ye(`Unexpected error: ${$e.message}`),ae(!1)}};return s.jsxs("div",{className:"page-container",children:[P&&s.jsx(nn,{}),s.jsxs("div",{className:"content-box",children:[s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[be?s.jsx("img",{src:be,alt:"Federation Logo",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:De||"Algerian Judo Federation"})]})})}),s.jsx("h2",{className:"form-title",children:"Add League Member"}),s.jsxs("form",{onSubmit:Mt,className:"form-grid",children:[s.jsxs("label",{children:["League Role *",s.jsxs("select",{value:c,onChange:tt=>u(tt.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Role"}),d.map(tt=>s.jsx("option",{value:tt.id,children:tt.league_role},tt.id))]})]}),s.jsxs("label",{children:["League *",s.jsx("select",{value:A,onChange:tt=>{O(tt.target.value),se(tt.target.value)},required:!0,disabled:!!(Oe!=null&&Oe.league_id),children:Oe!=null&&Oe.league_id?s.jsx("option",{value:Oe.league_id,children:Et||"Selected League"}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"Select League"}),G.map(tt=>s.jsx("option",{value:tt.id,children:tt.name_league},tt.id))]})})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:m,onChange:tt=>f(tt.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Blood Type --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{type:"text",value:t,onChange:tt=>e(tt.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{type:"text",value:r,onChange:tt=>n(tt.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:i,onChange:tt=>a(tt.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{type:"text",value:o,onChange:tt=>l(tt.target.value),required:!0})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{type:"text",value:x,onChange:tt=>j(tt.target.value),maxLength:"18",minLength:"18",required:!0}),s.jsx("small",{children:"18 digits required — must be unique. "})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:_,onChange:tt=>v(tt.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:C,onChange:tt=>N(tt.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:Y,onChange:tt=>ce(tt.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"}),s.jsx("option",{children:"Moroccan"})]})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:B,onChange:tt=>H(tt.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:he,onChange:tt=>Le(tt.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",required:!0,onChange:tt=>{var _t;return D(((_t=tt.target.files)==null?void 0:_t[0])??null)}})]}),s.jsxs("label",{children:["Upload League Logo *",s.jsx("input",{type:"file",required:!0,onChange:tt=>{var _t;return $(((_t=tt.target.files)==null?void 0:_t[0])??null)}})]}),s.jsxs("div",{className:"btn-row",children:[s.jsx("button",{type:"submit",className:"primary-b",children:"Add Member"}),s.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>We("/member-list"),children:"The Member List"}),s.jsx(Pr,{})]}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),te&&s.jsx(En,{error:te,onClose:()=>ye(null)}),ve&&s.jsx(Rn,{success:ve,onClose:()=>fe("")}),P&&s.jsx("div",{children:"Loading..."}),s.jsx(gn,{})]})]})}function QP(){const[t,e]=b.useState(""),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(""),[d,g]=b.useState([]),[m,f]=b.useState(""),[x,j]=b.useState(""),[_,v]=b.useState(""),[C,N]=b.useState(""),[A,O]=b.useState([]),[G,V]=b.useState([]),[F,$]=b.useState(null),[Z,D]=b.useState(null),[Y,ce]=b.useState(""),[B,H]=b.useState(""),[he,Le]=b.useState(""),[te,ye]=b.useState(""),[ve,fe]=b.useState(""),[P,q]=b.useState(!1),[X,ae]=b.useState(!1),[be,Ne]=b.useState(null),De="Algerian Judo Federation",[ke,qe]=b.useState(""),[Ke,dt]=b.useState(""),He=Mr();b.useEffect(()=>{(async()=>{const{data:Oe,error:ht}=await ne.from("clubrole").select("id, club_role");ht&&console.error("Error fetching roles:",ht.message),Oe&&g(Oe)})()},[]),b.useEffect(()=>{(async()=>{const{data:Oe,error:ht}=await ne.from("nameleague").select("id, name_league");ht&&console.error("Error fetching leagues:",ht.message),Oe&&V(Oe)})()},[]),b.useEffect(()=>{if(!ke){O([]);return}(async()=>{const{data:Oe,error:ht}=await ne.from("nameclub").select("id, name_club").eq("league_i",ke);ht?console.error("Error fetching clubs:",ht.message):O(Oe||[])})()},[ke]),b.useEffect(()=>{(async()=>{const{data:Oe,error:ht}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);ht&&console.error("Error fetching logo:",ht.message),Oe!=null&&Oe.length&&Ne(Oe[0].logo_url)})()},[]);const Fe=async We=>{if(!We)return null;try{const Oe=We.name.split(".").pop(),ht=`${Date.now()}-${Math.random()}.${Oe}`;console.log(`Uploading logo file: ${ht}`);const{error:ot}=await ne.storage.from("logos").upload(ht,We);if(ot)throw console.error("Logo upload error:",ot),new Error(`Logo upload failed: ${ot.message}`);const{data:xt}=ne.storage.from("logos").getPublicUrl(ht),Ft=xt==null?void 0:xt.publicUrl;if(!Ft)throw new Error("Failed to get public URL for uploaded logo");return console.log(`Logo uploaded successfully: ${Ft}`),Ft}catch(Oe){throw console.error("uploadFile error:",Oe),Oe}},se=async()=>{if(!Z)return null;try{const We=Z.name.split(".").pop(),Oe=`club_member-${Date.now()}.${We}`;console.log(`Uploading photo file: ${Oe}`);const{error:ht}=await ne.storage.from("logos").upload(Oe,Z);if(ht)throw console.error("Photo upload error:",ht),new Error(`Photo upload failed: ${ht.message}`);const{data:ot}=ne.storage.from("logos").getPublicUrl(Oe),xt=ot==null?void 0:ot.publicUrl;if(!xt)throw new Error("Failed to get public URL for uploaded photo");return console.log(`Photo uploaded successfully: ${xt}`),xt}catch(We){throw console.error("handlePhotoUpload error:",We),We}},Et=async(We,Oe,ht,ot)=>{console.log("getNextRenewal called with:",{nidVal:We,clubIdVal:Oe,roleVal:ht,currentSeasonYear:ot});const{data:xt,error:Ft}=await ne.from("club_members").select("*").eq("national_id_number",We).eq("club_id",Oe).eq("role",ht).eq("year",ot);if(console.log("Query result:",{existingInCurrentYear:xt,queryError:Ft}),xt&&xt.length>0)throw console.log("Found existing member, throwing error"),new Error("This member is already registered for the current season with the same role and club.");const{count:Mt}=await ne.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",We).eq("club_id",Oe).eq("role",ht);return(Mt||0)+1},At=async We=>{var It;if(We.preventDefault(),ye(""),fe(""),console.log("Setting submitLoading to true"),ae(!0),await new Promise(rt=>setTimeout(rt,100)),!r||!t||!i||!o||!c||!Ke||!ke||!_||!C){const rt=[];r||rt.push("First Name"),t||rt.push("Last Name"),i||rt.push("Date of Birth"),o||rt.push("Place of Birth"),c||rt.push("Role"),Ke||rt.push("Club"),ke||rt.push("League"),_||rt.push("Password"),C||rt.push("Confirm Password"),ye(`Please fill in the following required fields: ${rt.join(", ")}`),console.log("Setting submitLoading to false - missing fields"),ae(!1);return}const Oe=Number(Ke),ht=Number(ke);if(!Oe||isNaN(Oe)){ye("Please select a valid club."),ae(!1);return}if(!ht||isNaN(ht)){ye("Please select a valid league."),ae(!1);return}if(x.length!==18){ye("National ID must be exactly 18 digits."),ae(!1);return}if(_!==C){ye("Passwords do not match."),ae(!1);return}const ot=new Date(i),xt=new Date,Ft=xt.getFullYear()-ot.getFullYear(),Mt=xt.getMonth()-ot.getMonth(),tt=xt.getDate()-ot.getDate();if((Mt<0||Mt===0&&tt<0?Ft-1:Ft)<=21){ye("Member must be more than 21 years old to register."),ae(!1);return}if(t&&_){const{data:rt}=await ne.from("club_members").select("*").eq("last_name",t).eq("password",_);if(rt&&rt.length>0){ye("Change your Password for this name because is already exist"),ae(!1);return}}const Bt=((It=d.find(rt=>rt.id===parseInt(c)))==null?void 0:It.club_role)||"",vt=new Date().getFullYear(),kt=`${vt}/${vt+1}`;let yt;try{yt=await Et(x,Oe,Bt,kt)}catch(rt){ye(rt.message),ae(!1);return}try{console.log("Starting file uploads...");const rt=await se(),$t=await Fe(F);if(console.log("File uploads completed:",{photoUrl:rt,uploadedClubLogo:$t}),Bt!=="president of the club"){ye("Only members with the role 'president of the club' can be submitted."),ae(!1);return}const $e={last_name:t,first_name:r,date_of_birth:i,place_of_birth:o,role:Bt,blood_type:m,national_id_number:x,password:_,photo_url:rt,logo_url:$t,nationality:Y,grade:B,holder_of:he,club_id:Oe,league_id:ht,license_number:`LIC-${Date.now()}`,renewal:yt,year:kt,confirmation:!1},{error:me}=await ne.from("club_members").insert([$e]);me?(console.error("insert club member error",me),ye("Error saving club member: "+me.message),ae(!1)):(fe(`Member "${r} ${t}" has been successfully added to the club!`),e(""),n(""),a(""),l(""),u(""),f(""),j(""),v(""),N(""),ce(""),H(""),Le(""),D(null),$(null),ae(!1))}catch(rt){console.error("handleSubmit error",rt),ye("Unexpected error: "+rt.message),ae(!1)}};return s.jsxs("div",{className:"page-container",children:[P&&s.jsx(nn,{}),s.jsxs("div",{className:"content-box",children:[s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsxs("div",{className:"federation-header",children:[be?s.jsx("img",{src:be,alt:"Federation Logo",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:De})]})}),s.jsx("h2",{className:"form-title",children:"Add Club Member"}),s.jsxs("form",{onSubmit:At,className:"form-grid",children:[s.jsxs("label",{children:["Club Role *",s.jsxs("select",{value:c,onChange:We=>u(We.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Role"}),d.map(We=>s.jsx("option",{value:We.id,children:We.club_role},We.id))]})]}),s.jsxs("label",{children:["League *",s.jsxs("select",{value:ke,onChange:We=>{qe(We.target.value),dt("")},required:!0,children:[s.jsx("option",{value:"",children:"-- Select League --"}),G.map(We=>s.jsx("option",{value:We.id,children:We.name_league},We.id))]})]}),s.jsxs("label",{children:["Club *",s.jsxs("select",{value:Ke,onChange:We=>dt(We.target.value),disabled:!ke,required:!0,children:[s.jsx("option",{value:"",children:"-- Select Club --"}),A.map(We=>s.jsx("option",{value:We.id,children:We.name_club},We.id))]})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:Y,onChange:We=>ce(We.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:B,onChange:We=>H(We.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:he,onChange:We=>Le(We.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:m,onChange:We=>f(We.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{type:"text",value:t,onChange:We=>e(We.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{type:"text",value:r,onChange:We=>n(We.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:i,onChange:We=>a(We.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{type:"text",value:o,onChange:We=>l(We.target.value),required:!0})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{type:"text",value:x,onChange:We=>j(We.target.value),maxLength:"18",minLength:"18",required:!0})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:_,onChange:We=>v(We.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:C,onChange:We=>N(We.target.value),required:!0})]}),s.jsxs("label",{children:["Upload Club Logo *",s.jsx("input",{type:"file",onChange:We=>{var Oe;return $(((Oe=We.target.files)==null?void 0:Oe[0])??null)},required:!0})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",onChange:We=>{var Oe;return D(((Oe=We.target.files)==null?void 0:Oe[0])??null)},required:!0})]}),s.jsxs("div",{className:"btn-row",children:[s.jsx("button",{type:"submit",className:"primary-b",children:"Add Member"}),s.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>He("/club-member-list"),children:"The Member List"}),s.jsx(Pr,{})]}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),X&&s.jsx(ya,{message:"Adding member..."}),te&&s.jsx(En,{error:te,onClose:()=>ye("")}),ve&&s.jsx(Rn,{success:ve,onClose:()=>fe("")}),s.jsx(gn,{})]})]})}function XP(){b.useEffect(()=>{ti()},[]);const{state:t}=fi(),[e,r]=b.useState(null),[n,i]=b.useState(null),[a,o]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState([]),[g,m]=b.useState(null),[f,x]=b.useState(null),[j,_]=b.useState(null),[v,C]=b.useState(""),[N,A]=b.useState(""),[O,G]=b.useState(""),[V,F]=b.useState(""),[$,Z]=b.useState(""),[D,Y]=b.useState(""),[ce,B]=b.useState([]),[H,he]=b.useState(!0),[Le,te]=b.useState("");b.useEffect(()=>{console.log("📊 Loading state changed to:",H),console.log(H?"🔄 BarLoading should be visible now":"✅ BarLoading should be hidden now")},[H]);const[ye,ve]=b.useState(0),fe=Zn(),P=Zn(),q=Zn(),X=Zn(),[ae,be]=b.useState(null),[Ne]=b.useState("Algerian Judo Federation"),[De]=b.useState(!0),ke=Mr(),[qe,Ke]=b.useState(""),[dt,He]=b.useState([]),[Fe,se]=b.useState(null),[Et,At]=b.useState(""),[We,Oe]=b.useState([{id:1,title:"Official Website",description:"Visit our main website",image:"",link:"https://example.com",type:"website"},{id:2,title:"Rules PDF",description:"Download competition rules",image:"",link:"",type:"pdf"},{id:3,title:"Training Center",description:"Find training locations",image:"",link:"https://maps.google.com",type:"website"},{id:4,title:"Registration Form",description:"Download registration form",image:"",link:"",type:"pdf"},{id:5,title:"Contact Us",description:"Get in touch with us",image:"",link:"mailto:contact@judoalgeria.com",type:"website"}]),[ht,ot]=b.useState(null),[xt,Ft]=b.useState(null);b.useEffect(()=>{(async()=>{const{data:z,error:Te}=await ne.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!Te&&z&&c(z)})()},[]),b.useEffect(()=>{(async()=>{const{data:z,error:Te}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!Te&&z.length>0&&be(z[0].logo_url)})()},[]),b.useEffect(()=>{try{const Pe=localStorage.getItem("algerian_judo_banner_announcements");if(Pe){const z=JSON.parse(Pe);He(z)}}catch(Pe){console.error("Erreur lors du chargement des annonces:",Pe)}},[]);const Mt=async()=>{const{data:Pe,error:z}=await ne.from("pub").select("*").order("created_at",{ascending:!1});z||o(Pe)},tt=async Pe=>{const{error:z}=await ne.from("pub").delete().eq("id",Pe);z||Mt()},_t=async()=>{const{data:Pe,error:z}=await ne.from("publications").select("*").order("created_at",{ascending:!1});z||c(Pe)},Bt=async()=>{const{data:Pe,error:z}=await ne.from("publica").select("*").order("created_at",{ascending:!1});z||d(Pe)},vt=async()=>{const{data:Pe,error:z}=await ne.from("logo").select("*").order("id",{ascending:!1});z||B(Pe)},kt=async()=>{if(!e){alert("Please select a logo first.");return}he(!0);const Pe=`logo-${Date.now()}-${e.name}`,{error:z}=await ne.storage.from("publications").upload(Pe,e,{upsert:!0});if(z){alert("Upload failed: "+z.message),he(!1);return}const{data:Te}=ne.storage.from("publications").getPublicUrl(Pe),{error:Qe}=await ne.from("logo").insert([{logo_url:Te.publicUrl}]);if(Qe){alert("Failed to save to DB: "+Qe.message),he(!1);return}r(null),vt(),he(!1)},yt=async Pe=>{const{error:z}=await ne.from("logo").delete().eq("id",Pe);z?alert("Error deleting logo: "+z.message):vt()};b.useEffect(()=>{(async()=>{console.log("🚀 Starting to load initial data...");const z=Date.now();try{console.log(" Fetching all data..."),await Promise.all([vt(),Mt(),_t(),Bt()]);const Te=Date.now();console.log(`✅ All data loaded successfully in ${Te-z}ms`)}catch(Te){console.error("❌ Error loading data:",Te),te("Failed to load data. Please try again.")}finally{console.log("🏁 Setting loading to false"),he(!1)}})()},[]);const It=async()=>{if(!f){alert("Please choose an image for publication.");return}he(!0);const Pe=`publication-${Date.now()}-${f.name}`,{error:z}=await ne.storage.from("publications").upload(Pe,f,{upsert:!0});if(z){alert("Publication upload failed: "+z.message);return}const{data:Te}=ne.storage.from("publications").getPublicUrl(Pe),{error:Qe}=await ne.from("publications").insert([{title:$,description:D,photo_url:Te.publicUrl}]);if(Qe){alert("Insert failed: "+Qe.message),he(!1);return}x(null),C(""),A(""),_t(),he(!1)},rt=async()=>{if(!j){alert("Please choose an image for publica.");return}he(!0);const Pe=`publica-${Date.now()}-${j.name}`,{error:z}=await ne.storage.from("publications").upload(Pe,j,{upsert:!0});if(z){alert("Publica upload failed: "+z.message),he(!1);return}const{data:Te}=ne.storage.from("publications").getPublicUrl(Pe),{error:Qe}=await ne.from("publica").insert([{title:O,description:V,photo_url:Te.publicUrl}]);if(Qe){alert("Insert failed: "+Qe.message),he(!1);return}_(null),G(""),F(""),Bt(),he(!1)},$t=async Pe=>{const{error:z}=await ne.from("publications").delete().eq("id",Pe);z||_t()},$e=async Pe=>{const{error:z}=await ne.from("publica").delete().eq("id",Pe);z||Bt()},me=Pe=>{He(Pe)},Be=()=>{if(qe.trim()){const Pe=[...dt,qe.trim()];me(Pe);try{localStorage.setItem("algerian_judo_banner_announcements",JSON.stringify(Pe))}catch(z){console.error("Erreur lors de la sauvegarde des annonces:",z)}Ke("")}},at=Pe=>{const z=dt.filter((Te,Qe)=>Qe!==Pe);me(z);try{localStorage.setItem("algerian_judo_banner_announcements",JSON.stringify(z))}catch(Te){console.error("Erreur lors de la sauvegarde des annonces:",Te)}},Je=Pe=>{se(Pe),At(dt[Pe])},ze=()=>{if(Fe!==null&&Et.trim()){const Pe=[...dt];Pe[Fe]=Et.trim(),me(Pe);try{localStorage.setItem("algerian_judo_banner_announcements",JSON.stringify(Pe))}catch(z){console.error("Erreur lors de la sauvegarde des annonces:",z)}se(null),At("")}},Gt=()=>{se(null),At("")},qt=(Pe,z,Te)=>{const Qe=[...We];Qe[Pe][z]=Te,Oe(Qe);try{localStorage.setItem("algerian_judo_circle_buttons",JSON.stringify(Qe))}catch(Xe){console.error("Erreur lors de la sauvegarde des boutons:",Xe)}},Qt=async(Pe,z)=>{if(z)try{const Te=z.name.split(".").pop(),Xe=`circle-buttons/${`circle-button-${Pe}-${Date.now()}.${Te}`}`,{data:Pt,error:Zt}=await ne.storage.from("publications").upload(Xe,z);if(Zt)throw Zt;const{data:{publicUrl:re}}=ne.storage.from("publications").getPublicUrl(Xe);qt(Pe,"image",re)}catch(Te){console.error("Erreur lors du téléchargement de l'image:",Te),alert("Erreur lors du téléchargement de l'image: "+Te.message)}},Ut=async(Pe,z)=>{if(z)try{const Te=z.name.split(".").pop(),Xe=`pdfs/${`circle-button-pdf-${Pe}-${Date.now()}.${Te}`}`,{data:Pt,error:Zt}=await ne.storage.from("publications").upload(Xe,z);if(Zt)throw Zt;const{data:{publicUrl:re}}=ne.storage.from("publications").getPublicUrl(Xe);qt(Pe,"link",re)}catch(Te){console.error("Erreur lors du téléchargement du PDF:",Te),alert("Erreur lors du téléchargement du PDF: "+Te.message)}};return b.useEffect(()=>{try{const Pe=localStorage.getItem("algerian_judo_circle_buttons");Pe&&Oe(JSON.parse(Pe))}catch(Pe){console.error("Erreur lors du chargement des boutons:",Pe)}},[]),s.jsxs(s.Fragment,{children:[H&&s.jsx(nn,{}),s.jsxs("section",{className:"app-container",children:[s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[ae?s.jsx("img",{src:ae,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:Ne||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"content",children:[s.jsx("h2",{children:"Welcome to the Federation Account"}),s.jsx("p",{children:"This is the Federation Account page."}),s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx(oc,{"data-id":"1",onLoadingStart:()=>he(!0)}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:Pe=>{pr(Pe.currentTarget),ke("/MemberListPageP")},children:"The Member List Add"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:Pe=>{pr(Pe.currentTarget),ke("/TheLeagueList-Add")},children:"The League List Add"}),s.jsx("button",{className:"primary-btn","data-id":"4",onClick:Pe=>{pr(Pe.currentTarget),ke("/TheClubListAdd-Fed")},children:"The Club List Add"}),s.jsx("button",{className:"primary-btn","data-id":"5",onClick:Pe=>{pr(Pe.currentTarget),ke("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),s.jsx("div",{className:"table-container",ref:fe,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Logo"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:ce.length>0?ce.map(Pe=>s.jsxs("tr",{children:[s.jsx("td",{children:Pe.logo_url?s.jsx("img",{src:Pe.logo_url,alt:"Logo",width:"80"}):"No logo"}),s.jsx("td",{children:s.jsx("button",{className:"primary-b",onClick:()=>yt(Pe.id),children:"Delete"})})]},Pe.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"2",children:"No logos found."})})})]})}),s.jsxs("div",{className:"form-grid",children:[s.jsx("input",{type:"file",onChange:Pe=>r(Pe.target.files[0])}),s.jsx("button",{className:"primary-b",onClick:kt,children:"Upload Logo"})]}),s.jsx("h2",{children:"Update Federation Publication"}),s.jsx("div",{className:"table-container",ref:q,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Photo"}),s.jsx("th",{children:"Title"}),s.jsx("th",{children:"Description"}),s.jsx("th",{children:"Created At"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:l.length>0?l.map(Pe=>s.jsxs("tr",{children:[s.jsx("td",{children:Pe.photo_url?s.jsx("img",{src:Pe.photo_url,alt:Pe.title,width:"80"}):"No photo"}),s.jsx("td",{children:Pe.title}),s.jsx("td",{children:Pe.description}),s.jsx("td",{children:new Date(Pe.created_at).toLocaleString()}),s.jsx("td",{children:s.jsx("button",{className:"primary-b",onClick:()=>$t(Pe.id),children:"Delete"})})]},Pe.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",children:"No publications found."})})})]})}),s.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[s.jsx("input",{type:"file",onChange:Pe=>x(Pe.target.files[0])}),s.jsx("input",{type:"text",placeholder:"Title",value:$,onChange:Pe=>Z(Pe.target.value)}),s.jsx("input",{type:"text",placeholder:"Description",value:D,onChange:Pe=>Y(Pe.target.value)}),s.jsx("button",{className:"primary-b",onClick:It,children:"Save Publication"})]}),s.jsx("h2",{children:"Federation Photos"}),s.jsx("div",{className:"table-container",ref:P,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Photo"}),s.jsx("th",{children:"Created At"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:a.length>0?a.map(Pe=>s.jsxs("tr",{children:[s.jsx("td",{children:Pe.photo_url?s.jsx("img",{src:Pe.photo_url,alt:"photo",width:"80"}):"No photo"}),s.jsx("td",{children:new Date(Pe.created_at).toLocaleString()}),s.jsx("td",{children:s.jsx("button",{className:"primary-b",onClick:()=>tt(Pe.id,Pe.photo_url),children:"Delete"})})]},Pe.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"3",children:"No photos found."})})})]})}),s.jsxs("div",{className:"form-grid",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:Pe=>{Pe.target.files&&Pe.target.files.length>0&&(m(Pe.target.files[0]),console.log("✅ File selected:",Pe.target.files[0].name))}}),s.jsx("button",{className:"primary-b",onClick:async()=>{if(!g){alert("⚠️ Please select a photo first.");return}console.log(" Uploading file:",g.name);const Pe=`photos/pub-${Date.now()}-${g.name}`,{error:z}=await ne.storage.from("publications").upload(Pe,g,{upsert:!0});if(z){alert("Upload failed: "+z.message);return}const{data:Te}=ne.storage.from("publications").getPublicUrl(Pe),{error:Qe}=await ne.from("pub").insert([{photo_url:Te.publicUrl}]);if(Qe){alert("Failed to save to DB: "+Qe.message);return}alert("Photo uploaded successfully!"),m(null),Mt()},children:"Save Photo"})]}),s.jsx("h2",{children:"PUBLICA UPLOAD (Add New Publication)"}),s.jsx("div",{className:"table-container",ref:X,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Photo"}),s.jsx("th",{children:"Title"}),s.jsx("th",{children:"Description"}),s.jsx("th",{children:"Created At"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:u.length>0?u.map(Pe=>s.jsxs("tr",{children:[s.jsx("td",{children:Pe.photo_url?s.jsx("img",{src:Pe.photo_url,alt:Pe.title,width:"80"}):"No photo"}),s.jsx("td",{children:Pe.title}),s.jsx("td",{children:Pe.description}),s.jsx("td",{children:new Date(Pe.created_at).toLocaleString()}),s.jsx("td",{children:s.jsx("button",{className:"primary-b",onClick:()=>$e(Pe.id),children:"Delete"})})]},Pe.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",children:"No publica entries found."})})})]})}),s.jsxs("div",{className:"form-grid",children:[s.jsx("input",{type:"file",onChange:Pe=>_(Pe.target.files[0])}),s.jsx("input",{type:"text",placeholder:"Title",value:O,onChange:Pe=>G(Pe.target.value)}),s.jsx("input",{type:"text",placeholder:"Description",value:V,onChange:Pe=>F(Pe.target.value)}),s.jsx("button",{className:"primary-b",onClick:rt,children:"Save Publica"})]})]}),s.jsx("div",{className:"form-grid",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(eL,{className:"w-6 h-6 text-purple-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gestion des Annonces Publicitaires"})]}),s.jsx("div",{className:"space-y-4 mb-6",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouvelle annonce"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:qe,onChange:Pe=>Ke(Pe.target.value),className:"w-full px-24 py-6 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-purple-500 focus:border-purple-500 text-xl font-medium shadow-lg",placeholder:" Your ad here announcement...",style:{minWidth:"600px",width:"100%"}}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{className:"primary-b px-8 py-4 text-lg font-semibold rounded-xl shadow-lg",onClick:Be,children:[s.jsx(rL,{className:"w-6 h-6 mr-2"}),"Ajouter l'annonce"]})})]})]})}),s.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Annonces actuelles :"}),dt.map((Pe,z)=>s.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border",children:Fe===z?s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:Et,onChange:Te=>At(Te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{className:"primary-S",onClick:ze,children:[s.jsx(aL,{className:"w-3 h-3"}),"Sauvegarder"]}),s.jsxs("button",{className:"secondary-btn",onClick:Gt,children:[s.jsx(BC,{className:"w-3 h-3"}),"Annuler"]})]})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm flex-1 mr-3",children:Pe}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{className:"primary-S",onClick:()=>Je(z),children:s.jsx(lL,{className:"w-3 h-3"})}),s.jsx("button",{className:"secondary-btn",onClick:()=>at(z),children:s.jsx(uL,{className:"w-3 h-3"})})]})]})},z))]})]})}),s.jsx("div",{className:"form-grid",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(qC,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gestion des Boutons Circulaires 3D"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:We.map((Pe,z)=>s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre"}),s.jsx("input",{type:"text",value:Pe.title,onChange:Te=>qt(z,"title",Te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Titre du bouton"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("input",{type:"text",value:Pe.description,onChange:Te=>qt(z,"description",Te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Description du bouton"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{value:Pe.type,onChange:Te=>qt(z,"type",Te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"website",children:"Site Web"}),s.jsx("option",{value:"pdf",children:"Fichier PDF"})]})]}),Pe.type==="website"?s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.jsx(XC,{className:"w-4 h-4 inline mr-1"}),"Lien du site web"]}),s.jsx("input",{type:"url",value:Pe.link,onChange:Te=>qt(z,"link",Te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com"})]}):s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.jsx(VC,{className:"w-4 h-4 inline mr-1"}),"Fichier PDF"]}),s.jsx("input",{type:"file",accept:".pdf",onChange:Te=>{const Qe=Te.target.files[0];Qe&&Ut(z,Qe)},className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),Pe.link&&s.jsx("p",{className:"text-xs text-green-600 mt-1",children:"PDF téléchargé avec succès"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.jsx(fL,{className:"w-4 h-4 inline mr-1"}),"Image du bouton"]}),s.jsx("input",{type:"file",accept:"image/*",onChange:Te=>{const Qe=Te.target.files[0];Qe&&Qt(z,Qe)},className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),Pe.image&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:Pe.image,alt:Pe.title,className:"w-16 h-16 object-cover rounded-full border-2 border-gray-300"})})]})]})},Pe.id))})]})})]}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function ZP(){const[t,e]=b.useState([]),[r,n]=b.useState(!0),[i,a]=b.useState(null),[o,l]=b.useState(""),[c,u]=b.useState([]),[d,g]=b.useState(null),[m,f]=b.useState("Algerian Judo Federation"),[x,j]=b.useState([]);Mr();const _=Zn();b.useEffect(()=>{(async()=>{const{data:F,error:$}=await ne.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!$&&F&&u(F)})()},[]),b.useEffect(()=>{(async()=>{const{data:F,error:$}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!$&&F.length>0&&g(F[0].logo_url)})()},[]);const v=async()=>{try{n(!0);const{data:V,error:F}=await ne.from("league_members").select(`
          *,
          nameleague!league_id(
            name_league
          )
        `);if(F)a(F);else{const $=(V||[]).map(Z=>{var D;return{...Z,league_name:((D=Z.nameleague)==null?void 0:D.name_league)||"Unknown League"}});e($)}}catch(V){a(V)}finally{n(!1)}};b.useEffect(()=>{v()},[]),b.useEffect(()=>{(async()=>{try{const{data:F,error:$}=await ne.from("leaguerole").select("*");$?console.error("Error fetching roles:",$):j(F||[])}catch(F){console.error("Error fetching roles:",F)}})()},[]);const C=V=>V?V.startsWith("http")?V:`${ne.storageUrl}/object/public/logos/${V}`:null,N=t,A=[{header:"Last Name",field:"last_name"},{header:"First Name",field:"first_name"},{header:"Date of Birth",field:"date_of_birth"},{header:"Place of Birth",field:"place_of_birth"},{header:"Role",field:"role"},{header:"Blood Type",field:"blood_type"},{header:"Nationality",field:"nationality"},{header:"Grade",field:"grade"},{header:"Holder Of",field:"holder_of"},{header:"National ID",field:"national_id_number"},{header:"Renewal",field:"renewal"},{header:"Year",field:"year"},{header:"License Number",field:"license_number"},{header:"Registration Date",field:"registration_date"},{header:"Confirmation",field:"confirmation"},{header:"League ID",field:"league_id"}],O=()=>t.map(V=>({...V,confirmation:V.confirmation?"Yes":"No"})),G=V=>{if(!V||Object.keys(V).length===0){a("No member data available to export");return}console.log("Exporting PDF for member:",V),l(`PDF export initiated for ${V.first_name} ${V.last_name}`)};return s.jsxs("div",{className:"app-container",children:[r&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[d?s.jsx("img",{src:d,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:m||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{children:"League Member List"}),s.jsx("div",{className:"table-container",ref:_,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"Holder Of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photo"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"League Name"})]})}),s.jsx("tbody",{children:N.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:17,children:"No members found."})}):N.map(V=>s.jsxs("tr",{onDoubleClick:()=>G(V),style:{cursor:"pointer"},children:[s.jsx("td",{children:V.last_name}),s.jsx("td",{children:V.first_name}),s.jsx("td",{children:V.date_of_birth}),s.jsx("td",{children:V.place_of_birth}),s.jsx("td",{children:V.role||"No Role"}),s.jsx("td",{children:V.blood_type}),s.jsx("td",{children:V.nationality}),s.jsx("td",{children:V.grade}),s.jsx("td",{children:V.holder_of}),s.jsx("td",{children:V.national_id_number}),s.jsx("td",{children:V.renewal}),s.jsx("td",{children:V.year}),s.jsx("td",{children:V.license_number}),s.jsx("td",{children:V.registration_date}),s.jsx("td",{children:V.photo_url?s.jsx("img",{src:C(V.photo_url),alt:"Member",style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),s.jsx("td",{children:V.confirmation?"✅":"❌"}),s.jsx("td",{children:V.league_name||"Unknown League"})]},V.id))})]})}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"btn-row",children:[s.jsx(Pr,{}),s.jsx(Mm,{className:"primary-b",data:O(),title:`${m} - League Members List`,columns:A,filename:"league_members",buttonText:"Export Data",pdfOptions:{orientation:"landscape",logoUrl:d||Zi}})]})})]}),i&&s.jsx(En,{error:i.message||i,onClose:()=>a(null)}),o&&s.jsx(Rn,{success:o,onClose:()=>l("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function e8(){const[t,e]=b.useState([]),[r,n]=b.useState(!0),[i,a]=b.useState(null),[o,l]=b.useState(""),[c,u]=b.useState([]),[d,g]=b.useState(null),[m,f]=b.useState("Algerian Judo Federation");Mr();const x=Zn(),j=async()=>{try{n(!0);const{data:N,error:A}=await ne.from("club_members").select(`
          *,
          nameleague!league_id(name_league)
        `);A?a(A):e(N||[])}catch(N){a(N)}finally{n(!1)}},_=async()=>{const{data:N,error:A}=await ne.from("logo").select("logo_url").order("id",{ascending:!1}).limit(1);A&&console.error("Error fetching logo:",A.message),N!=null&&N.length&&g(N[0].logo_url)};b.useEffect(()=>{j(),_()},[]),b.useEffect(()=>{(async()=>{const{data:A,error:O}=await ne.from("clubrole").select("id, club_role");O&&console.error("Error fetching roles:",O.message),A&&u(A)})()},[]);const v=[{header:"Role",field:"role_name"},{header:"Blood Type",field:"blood_type"},{header:"Last Name",field:"last_name"},{header:"First Name",field:"first_name"},{header:"Date of Birth",field:"date_of_birth"},{header:"Place of Birth",field:"place_of_birth"},{header:"League Name",field:"league_name"}],C=()=>t.map(N=>{var O;const A=c.find(G=>G.id===N.role_id);return{...N,role_name:(A==null?void 0:A.club_role)||"No Role",league_name:((O=N.nameleague)==null?void 0:O.name_league)||N.league_id||"No League"}});return s.jsxs("div",{className:"app-container",children:[r&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[d?s.jsx("img",{src:d,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:m||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{children:"Club Member List"}),s.jsx("div",{className:"table-container",ref:x,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"holder_of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photos"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"Club ID"}),s.jsx("th",{children:"League ID"})]})}),s.jsx("tbody",{children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:18,children:"No members found."})}):t.map(N=>{var A;return s.jsxs("tr",{children:[s.jsx("td",{children:N.last_name}),s.jsx("td",{children:N.first_name}),s.jsx("td",{children:N.date_of_birth}),s.jsx("td",{children:N.place_of_birth}),s.jsx("td",{children:N.role||"No Role"}),s.jsx("td",{children:N.blood_type}),s.jsx("td",{children:N.nationality}),s.jsx("td",{children:N.grade}),s.jsx("td",{children:N.holder_of}),s.jsx("td",{children:N.national_id_number}),s.jsx("td",{children:N.renewal}),s.jsx("td",{children:N.year}),s.jsx("td",{children:N.license_number}),s.jsx("td",{children:N.registration_date}),s.jsx("td",{children:N.photo_url?s.jsx("img",{src:N.photo_url,alt:"Photo",style:{width:"50px",height:"50px"}}):"No Photo"}),s.jsx("td",{children:N.confirmation?"✅":"❌"}),s.jsx("td",{children:N.club_id}),s.jsx("td",{children:((A=N.nameleague)==null?void 0:A.name_league)||N.league_id})]},N.id)})})]})}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"btn-row",children:[s.jsx(Pr,{}),s.jsx(Mm,{className:"primary-b",data:C(),title:`${m} - Club Members List`,columns:v,filename:"club_members",buttonText:"Export Data",pdfOptions:{orientation:"landscape",logoUrl:d||Zi}})]})})]}),i&&s.jsx(En,{error:i.message||i,onClose:()=>a(null)}),o&&s.jsx(Rn,{success:o,onClose:()=>l("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function t8(){b.useEffect(()=>{ti()},[]);const{state:t}=fi(),[e,r]=b.useState([]),[n,i]=b.useState(""),[a,o]=b.useState(null),[l,c]=b.useState({}),[u,d]=b.useState(!0),[g,m]=b.useState(null),[f,x]=b.useState(""),[j,_]=b.useState(""),[v,C]=b.useState(""),[N,A]=b.useState([]),[O,G]=b.useState(""),[V,F]=b.useState(""),[$,Z]=b.useState(""),[D,Y]=b.useState(""),[ce,B]=b.useState(""),[H,he]=b.useState(""),[Le,te]=b.useState(""),[ye,ve]=b.useState(""),[fe,P]=b.useState(""),[q,X]=b.useState(""),[ae,be]=b.useState(""),[Ne,De]=b.useState(null),[ke,qe]=b.useState(!1),[Ke,dt]=b.useState([]),[He,Fe]=b.useState(null),[se,Et]=b.useState("Algerian Judo Federation"),[At,We]=b.useState(!0),Oe=Mr(),ht=Zn();b.useEffect(()=>{(async()=>{const{data:Be,error:at}=await ne.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!at&&Be&&dt(Be)})()},[]),b.useEffect(()=>{(async()=>{const{data:Be,error:at}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!at&&Be.length>0&&Fe(Be[0].logo_url)})()},[]);const ot=async()=>{try{d(!0);const{data:me,error:Be}=await ne.from("members").select("*").order("created_at",{ascending:!1});Be?(console.error("Error fetching members:",Be),m(Be)):r(me||[])}catch(me){console.error("Exception in fetchMembers:",me),m(me)}finally{d(!1)}};b.useEffect(()=>{ot()},[]);const xt=async()=>{if(!Ne||Ne.size===0)return"";const me=Ne.name.split(".").pop(),Be=`photo-${Date.now()}.${me}`,{error:at}=await ne.storage.from("logos").upload(Be,Ne);if(at)return m(`Photo upload failed: ${at.message}`),"";const{data:Je}=ne.storage.from("logos").getPublicUrl(Be);return(Je==null?void 0:Je.publicUrl)??""},Ft=async me=>{if(me.preventDefault(),m(""),x(""),qe(!0),!v||!O||!V||!$||!D||!ce||!H||!Le||!ye||!fe||!q||!ae){m("All fields are required."),qe(!1);return}if(H.length!==18){m("National Identity Number must be exactly 18 digits."),qe(!1);return}if(Le!==ye){m("Passwords do not match."),qe(!1);return}try{const Be=await xt(),at=new Date().getFullYear(),Je=`${at}/${at+1}`;if(j!=="League President"){m("Only members with the role 'League President' can be submitted."),qe(!1);return}const ze={last_name:V,first_name:$,date_of_birth:D,place_of_birth:ce,role:v,blood_type:O,national_id_number:H,password:Le,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],nationality:fe,holder_of:q,grade:ae,photo_url:Be,confirmation:!1,year:Je},{error:Gt}=await ne.from("members").insert([ze]);Gt?m(`❌ Failed to add member: ${Gt.message}`):(x(`✅ Member "${$} ${V}" added successfully!`),F(""),Z(""),Y(""),B(""),he(""),te(""),ve(""),C(""),G(""),P(""),X(""),be(""),De(null))}catch(Be){m(`❌ An unexpected error occurred: ${Be.message}`)}finally{qe(!1)}},Mt=e.filter(me=>{if(!n)return!0;const Be=n.toLowerCase();return me.first_name&&me.first_name.toLowerCase().includes(Be)||me.last_name&&me.last_name.toLowerCase().includes(Be)||me.national_id_number&&String(me.national_id_number).toLowerCase().includes(Be)||me.role&&me.role.toLowerCase().includes(Be)||me.blood_type&&me.blood_type.toLowerCase().includes(Be)||me.place_of_birth&&me.place_of_birth.toLowerCase().includes(Be)||me.license_number&&String(me.license_number).toLowerCase().includes(Be)||me.registration_date&&String(me.registration_date).toLowerCase().includes(Be)||me.date_of_birth&&String(me.date_of_birth).toLowerCase().includes(Be)}),tt=async me=>{if(!window.confirm("Are you sure you want to delete this member?"))return;const{error:Be}=await ne.from("members").delete().eq("id",me);Be?console.error("Error deleting member:",Be):r(e.filter(at=>at.id!==me))},_t=me=>{o(me.id),c({...me})},Bt=async me=>{const{error:Be}=await ne.from("members").update({last_name:l.last_name,first_name:l.first_name,date_of_birth:l.date_of_birth,place_of_birth:l.place_of_birth,role:l.role,blood_type:l.blood_type}).eq("id",me);Be?console.error("Error updating member:",Be):(r(e.map(at=>at.id===me?l:at)),o(null))},vt=(me,Be)=>{c({...l,[Be]:me.target.value})},kt=async()=>{const me=[{header:"Role",dataKey:"role"},{header:"Blood Type",dataKey:"blood_type"},{header:"Last Name",dataKey:"last_name"},{header:"First Name",dataKey:"first_name"},{header:"Date of Birth",dataKey:"date_of_birth"},{header:"Place of Birth",dataKey:"place_of_birth"},{header:"National ID",dataKey:"national_id_number"},{header:"License Number",dataKey:"license_number"},{header:"Registration Date",dataKey:"registration_date"}],Be={includePhotos:!1,federationName:se};try{const{data:at,error:Je}=await ne.from("members").select("*").order("created_at",{ascending:!1});if(Je){console.error("Error fetching members for PDF:",Je),m(Je);return}C0(at||[],"Members List",me,Be)}catch(at){console.error("Exception exporting members PDF:",at),m(at)}};function yt(me){return new Promise(Be=>{no(me,at=>{if(at.type==="error")console.warn("EXIF processing failed, using original image:",me),Be(me);else try{const Je=at.toDataURL("image/png");Be(Je)}catch(Je){console.warn("Canvas conversion failed, using original image:",Je),Be(me)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const It=async me=>{if(!me||Object.keys(me).length===0){alert("No data available to export");return}let Be=null,at=null;try{me.club_id&&(Be=(await An())[me.club_id]),me.league_id&&(at=(await qn())[me.league_id])}catch(z){console.error("Error fetching names:",z)}const Je=new Dt("portrait","mm","a4");Je.setFontSize(18),Je.setTextColor(40,40,40),Je.text("Algerian Judo Federation",14,15);const ze=`Member Information - ${me.first_name||""} ${me.last_name||""}`.trim();Je.setFontSize(16),Je.setTextColor(40,40,40),Je.text(ze,14,30),Je.setFontSize(10);const Gt=new Date().toLocaleString();if(Je.text(`Generated: ${Gt}`,14,37),He)try{Je.addImage(He,"PNG",170,10,25,25)}catch(z){console.error("Error adding logo to PDF:",z)}let qt=70;if(me.photo_url)try{const z=await yt(me.photo_url),Te=z.startsWith("data:")?"PNG":"JPEG";Je.addImage(z,Te,14,45,25,20),qt=70}catch(z){console.error("Error adding photo to PDF:",z);try{Je.addImage(me.photo_url,"JPEG",14,45,25,20)}catch(Te){console.error("Fallback image addition also failed:",Te)}qt=70}Je.setFontSize(12),me.confirmation?Je.setTextColor(0,128,0):Je.setTextColor(255,0,0);const Qt=me.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";Je.text(Qt,160,50),Je.setTextColor(0,0,0);const Ut=[["First Name",me.first_name||""],["Last Name",me.last_name||""],["Date of Birth",me.date_of_birth||""],["Place of Birth",me.place_of_birth||""],["National ID",me.national_id_number||""],["Nationality",me.nationality||""],["Blood Type",me.blood_type||""],["Grade",me.grade||""],["Role",me.role||""],["Holder Of",me.holder_of||""],["License Number",me.license_number||""],["Registration Date",me.registration_date||""],["Year",me.year||""],["Renewal",me.renewal||""]];vr(Je,{head:[["Field","Value"]],body:Ut,startY:qt,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Pe=Je.lastAutoTable.finalY||200;Je.setFontSize(12),Je.setTextColor(0,0,0),Je.text("Medical certificate",14,Pe+20),Je.setDrawColor(0),Je.line(14,Pe+40,80,Pe+40),Je.text("Federation Visa: _________________",120,Pe+70);try{const z=JSON.stringify({id:me.id,name:`${me.first_name||""} ${me.last_name||""}`.trim(),license:me.license_number||"",club_id:me.club_id||"",league_id:me.league_id||"",confirmation:me.confirmation||"Unconfirmed"}),Te=await ui.toDataURL(z,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});Je.addImage(Te,"PNG",175,Pe+75,15,15)}catch(z){console.error("Error generating QR code:",z)}Je.save(`member_${me.first_name||""}_${me.last_name||""}.pdf`)},rt=me=>{if(!me||Object.keys(me).length===0){alert("No data available to export");return}It(me)},$t=async()=>{const me=[{header:"Role",dataKey:"role"},{header:"Last Name",dataKey:"last_name"},{header:"First Name",dataKey:"first_name"},{header:"National ID",dataKey:"national_id_number"}],Be={includePhotos:!1,federationName:se};try{const{data:at,error:Je}=await ne.from("members").select("*").order("role",{ascending:!0});if(Je){console.error("Error fetching members for role export:",Je),m(Je);return}C0(at||[],"Role-focused Members Export",me,Be)}catch(at){console.error("Exception exporting role-focused PDF:",at),m(at)}},$e=async(me,Be)=>{try{const{data:at,error:Je}=await ne.from("members").update({confirmation:!Be}).eq("id",me).select();if(Je){console.error("Error updating confirmation:",Je),m(Je);return}r(ze=>ze.map(Gt=>Gt.id===me?{...Gt,confirmation:!Be}:Gt)),x(Be?"Confirmation unset":"Confirmation set")}catch(at){console.error("Exception in toggleConfirmation:",at),m(at)}};return g?s.jsxs("p",{children:["Error fetching members: ",g.message]}):s.jsxs("div",{className:"app-container",children:[u&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[He?s.jsx("img",{src:He,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:se||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"content",children:[s.jsx("h2",{children:"Welcome to the Federation Account"}),s.jsx("p",{children:"This is the Federation Account page."}),s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx(oc,{"data-id":"1"}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:me=>{pr(me.currentTarget),Oe("/MemberListPageP")},children:"The Member List Add"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:me=>{pr(me.currentTarget),Oe("/TheLeagueList-Add")},children:"The League List Add"}),s.jsx("button",{className:"primary-btn","data-id":"4",onClick:me=>{pr(me.currentTarget),Oe("/TheClubListAdd-Fed")},children:"The Club List Add"}),s.jsx("button",{className:"primary-btn","data-id":"5",onClick:me=>{pr(me.currentTarget),Oe("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),s.jsx("h2",{className:"form-title",children:"Add a New Member"}),s.jsxs("form",{onSubmit:Ft,className:"form-grid",children:[s.jsxs("label",{children:["Federation Role *",s.jsxs("select",{value:v,onChange:me=>C(me.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Federation Role"}),N.map(me=>s.jsx("option",{value:me.federation_role,children:me.federation_role},me.federation_role))]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{type:"text",value:V,onChange:me=>F(me.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{type:"text",value:$,onChange:me=>Z(me.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:D,onChange:me=>Y(me.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{type:"text",value:ce,onChange:me=>B(me.target.value),required:!0})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:O,onChange:me=>G(me.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Blood Type --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{type:"text",value:H,onChange:me=>he(me.target.value),maxLength:"18",minLength:"18",required:!0})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:Le,onChange:me=>te(me.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:ye,onChange:me=>ve(me.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality *",s.jsx("input",{type:"text",value:fe,onChange:me=>P(me.target.value),required:!0})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:q,onChange:me=>X(me.target.value),placeholder:"Licenses, Coach degree...",required:!0})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:ae,onChange:me=>be(me.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",required:!0,onChange:me=>{var Be;return De(((Be=me.target.files)==null?void 0:Be[0])??null)}})]}),s.jsxs("div",{className:"btn-row",children:[s.jsx("button",{type:"submit",className:"primary-b",children:"Add Member"}),s.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>Oe("/MemberListPage"),children:"The Member List"}),s.jsx(Pr,{})]}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),s.jsx("h2",{className:"form-title",children:"Federation Member List"}),s.jsxs("div",{className:"form-grid",children:[s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"search Member"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:n,onChange:me=>i(me.target.value)})})]}),s.jsx("div",{className:"table-container",ref:ht,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"Holder Of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photo"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:Mt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:17,children:"No members found."})}):Mt.map(me=>s.jsxs("tr",{onDoubleClick:()=>rt(me),style:{cursor:"pointer"},children:[s.jsx("td",{children:a===me.id?s.jsx("input",{value:l.last_name||"",onChange:Be=>vt(Be,"last_name")}):me.last_name}),s.jsx("td",{children:a===me.id?s.jsx("input",{value:l.first_name||"",onChange:Be=>vt(Be,"first_name")}):me.first_name}),s.jsx("td",{children:a===me.id?s.jsx("input",{type:"date",value:l.date_of_birth||"",onChange:Be=>vt(Be,"date_of_birth")}):me.date_of_birth}),s.jsx("td",{children:a===me.id?s.jsx("input",{value:l.place_of_birth||"",onChange:Be=>vt(Be,"place_of_birth")}):me.place_of_birth}),s.jsx("td",{children:a===me.id?s.jsx("input",{value:l.role||"",onChange:Be=>vt(Be,"role")}):me.role}),s.jsx("td",{children:a===me.id?s.jsx("input",{value:l.blood_type||"",onChange:Be=>vt(Be,"blood_type")}):me.blood_type}),s.jsx("td",{children:me.nationality||""}),s.jsx("td",{children:me.grade||""}),s.jsx("td",{children:me.holder_of||""}),s.jsx("td",{children:me.national_id_number}),s.jsx("td",{children:me.renewal||""}),s.jsx("td",{children:me.year||""}),s.jsx("td",{children:me.license_number}),s.jsx("td",{children:me.registration_date}),s.jsx("td",{children:me.photo_url?s.jsx("img",{src:me.photo_url,alt:"Member",style:{width:40,height:40,objectFit:"cover",borderRadius:4}}):"—"}),s.jsx("td",{children:me.confirmation?"Confirmed":"Pending"}),s.jsx("td",{children:a===me.id?s.jsx("button",{className:"primary-b",onClick:()=>Bt(me.id),children:"Save"}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-b",onClick:()=>_t(me),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>tt(me.id),children:"Delete"}),s.jsx("button",{className:"primary-b",onClick:()=>$e(me.id,!!me.confirmation),children:me.confirmation?"Unset Confirm":"Set Confirm"})]})})]},me.id))})]})}),s.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"12px"},children:[s.jsx("button",{className:"primary-btn",onClick:kt,children:"Export General PDF"}),s.jsx("button",{className:"primary-btn",onClick:$t,children:"Export Grade/Role PDF"})]}),s.jsx(Pr,{})]}),g&&s.jsx(En,{error:g.message||g,onClose:()=>m(null)}),f&&s.jsx(Rn,{success:f,onClose:()=>x("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function r8(){const[t,e]=b.useState([]),[r,n]=b.useState(null),[i,a]=b.useState({}),[o,l]=b.useState(!0),[c,u]=b.useState(!1),[d,g]=b.useState(!1),[m,f]=b.useState(null),[x,j]=b.useState(""),[_,v]=b.useState([]),[C,N]=b.useState(null),[A]=b.useState("Algerian Judo Federation"),[O,G]=b.useState(""),[V,F]=b.useState(null),[$,Z]=b.useState(""),[D,Y]=b.useState(""),[ce,B]=b.useState(""),[H,he]=b.useState(""),[Le,te]=b.useState(""),[ye,ve]=b.useState([]),[fe,P]=b.useState(""),[q,X]=b.useState(""),[ae,be]=b.useState(""),[Ne,De]=b.useState(""),[ke,qe]=b.useState(null),[Ke,dt]=b.useState(""),[He,Fe]=b.useState(""),[se,Et]=b.useState(""),[At,We]=b.useState(""),[Oe,ht]=b.useState([]),[ot,xt]=b.useState(null),[Ft,Mt]=b.useState(""),[tt,_t]=b.useState(""),Bt=Zn(),[vt,kt]=b.useState([]),[yt,It]=b.useState(""),[rt,$t]=b.useState(""),[$e,me]=b.useState(null),[Be,at]=b.useState(null),Je=Mr(),{state:ze}=fi();function Gt(w){return w??""}function qt(w){return new Promise((L,M)=>{no(w,ie=>{if(ie.type==="error")console.warn("EXIF processing failed, using original image:",w),L(w);else try{const _e=ie.toDataURL("image/png");L(_e)}catch(_e){console.warn("Canvas conversion failed, using original image:",_e),L(w)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}function Qt(){n(null),a({})}b.useEffect(()=>{(async()=>{const{data:L,error:M}=await ne.from("leaguerole").select("*");M?console.error(M):ve(L)})()},[]),b.useEffect(()=>{ti()},[]),b.useEffect(()=>{(async()=>{const{data:L,error:M}=await ne.from("nameleague").select("id, name_league");M?console.error("Error fetching leagues:",M):ht(L||[])})()},[]),b.useEffect(()=>{ze!=null&&ze.league_id&&(We(ze.league_id.toString()),Mt(ze.league_id.toString()))},[ze==null?void 0:ze.league_id]);const Ut=async w=>{const L=typeof w=="object"?w.id:w;if(!window.confirm("Are you sure you want to delete this member?"))return;const{error:M}=await ne.from("league_members").delete().eq("id",L);M||e(ie=>ie.filter(_e=>_e.id!==L))},Pe=async()=>{try{l(!0),f(null);const{data:w}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(w!=null&&w.length&&N(Gt(w[0].logo_url)),ze!=null&&ze.league_id){const{data:L}=await ne.from("nameleague").select("*").eq("id",ze.league_id).single();L&&(me(L),G(L.name_league));const{data:M}=await ne.from("league_members").select("logo_url").eq("league_id",ze.league_id).order("id",{ascending:!1}).limit(1);M!=null&&M.length&&F(Gt(M[0].logo_url))}if(ze!=null&&ze.member_id){const{data:L}=await ne.from("league_members").select("*").eq("id",ze.member_id).single();L&&at(L)}if(ze!=null&&ze.league_id){const{data:L}=await ne.from("league_members").select("*").eq("league_id",ze.league_id);e(L||[])}}catch(w){f(w.message),console.error("Error fetching data:",w.message)}finally{l(!1)}};b.useEffect(()=>{Pe()},[rt,At]),b.useEffect(()=>{ze!=null&&ze.league_id&&We(ze.league_id.toString())},[ze==null?void 0:ze.league_id]),b.useEffect(()=>{(async()=>{const L=(ze==null?void 0:ze.league_id)||At;if(!L)return;const{data:M,error:ie}=await ne.from("nameclub").select("id, name_club, league_i").eq("league_i",L);ie?console.error("Error fetching clubs:",ie):kt(M||[])})()},[ze==null?void 0:ze.league_id,At]),b.useEffect(()=>{Pe()},[ze==null?void 0:ze.league_id]);const z=async()=>{if(!ke||ke.size===0)return"";const w=ke.name.split(".").pop(),L=`photo-${Date.now()}.${w}`,{error:M}=await ne.storage.from("logos").upload(L,ke);if(M)return f(`Photo upload failed: ${M.message}`),"";const{data:ie}=ne.storage.from("logos").getPublicUrl(L);return(ie==null?void 0:ie.publicUrl)??""},Te=async()=>{if(!ot)return null;const w=ot.name.split(".").pop(),M=`${Date.now()}.${w}`,{error:ie}=await ne.storage.from("logos").upload(M,ot);if(ie)return f(`Upload failed: ${ie.message}`),null;const{data:_e}=ne.storage.from("logos").getPublicUrl(M);return(_e==null?void 0:_e.publicUrl)??null},Qe=async(w,L,M,ie)=>{const{data:_e}=await ne.from("league_members").select("*").eq("national_id_number",w).eq("league_id",L).eq("role",M).eq("year",ie);if(_e&&_e.length>0)throw new Error("This member is already registered for the current season with the same role and league.");const{count:T}=await ne.from("league_members").select("*",{count:"exact",head:!0}).eq("national_id_number",w).eq("league_id",L).eq("role",M);return(T||0)+1},Xe=async w=>{var de;if(w.preventDefault(),f(""),j(""),u(!0),!D||!$||!ce||!H||!Le||!At||!ae||!Ne||!ke){const Ce=[];D||Ce.push("First Name"),$||Ce.push("Last Name"),ce||Ce.push("Date of Birth"),H||Ce.push("Place of Birth"),Le||Ce.push("League Role"),At||Ce.push("League (in the table is league_id)"),ae||Ce.push("Password"),Ne||Ce.push("Confirm Password"),ke||Ce.push("Member Photo"),f(`Please fill in the following required fields: ${Ce.join(", ")}`),u(!1);return}const L=Number(At);if(!L||isNaN(L)){f("Please select a valid league."),u(!1);return}if(q.length!==18){f("National ID must be exactly 18 digits."),u(!1);return}if(ae!==Ne){f("Passwords do not match."),u(!1);return}const M=new Date(ce),ie=new Date,_e=ie.getFullYear()-M.getFullYear(),T=ie.getMonth()-M.getMonth(),Q=ie.getDate()-M.getDate();if((T<0||T===0&&Q<0?_e-1:_e)<=21){f("Member must be more than 21 years old to register."),u(!1);return}try{const{data:Ce,error:et}=await ne.from("league_members").select("id, last_name, password").eq("last_name",$).eq("password",ae);if(et){f(`Failed to validate member data: ${et.message}`),u(!1);return}if(Ce&&Ce.length>0){f(`A member with the last name "${$}" and this password already exists. Please change the password.`),u(!1);return}}catch(Ce){f(`Validation error: ${Ce.message}`),u(!1);return}try{const Ce=await z(),et=await Te(),E=new Date().getFullYear(),pe=`${E}/${E+1}`,ge=((de=ye.find(Tt=>Tt.id===parseInt(Le)))==null?void 0:de.league_role)||"",je=await Qe(q,At,ge,pe),ft={last_name:$,first_name:D,date_of_birth:ce,place_of_birth:H,role:ge,blood_type:fe,national_id_number:q,password:ae,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],logo_url:ze.logo_url||"",league_id:L,photo_url:Ce,renewal:je,year:pe,nationality:Ke,holder_of:He,grade:se,confirmation:!1},{error:Me}=await ne.from("league_members").insert([ft]);if(Me){f(`Failed to save member: ${Me.message}`),u(!1);return}if(et&&At&&await ne.from("nameleague").update({logo_url:et}).eq("id",At),j(`Member "${D} ${$}" has been successfully added to the League!`),Z(""),Y(""),B(""),he(""),X(""),be(""),De(""),te(""),P(""),We(""),qe(null),dt(""),Fe(""),Et(""),At){const{data:Tt}=await ne.from("league_members").select("*").eq("league_id",Number(At));e(Tt||[]);const{data:wt}=await ne.from("nameleague").select("logo_url").eq("id",At).single();wt!=null&&wt.logo_url&&F(Gt(wt.logo_url))}u(!1)}catch(Ce){f(`Unexpected error: ${Ce.message}`),u(!1)}},Pt=w=>{n(w.id),a({...w})},Zt=async w=>{if(g(!0),f(""),j(""),!i.first_name||!i.last_name||!i.date_of_birth||!i.place_of_birth){const L=[];i.first_name||L.push("First Name"),i.last_name||L.push("Last Name"),i.date_of_birth||L.push("Date of Birth"),i.place_of_birth||L.push("Place of Birth"),f(`Please fill in the following required fields: ${L.join(", ")}`),g(!1);return}if(i.national_id_number&&i.national_id_number.length!==18){f("National ID must be exactly 18 digits."),g(!1);return}if(i.date_of_birth){const L=new Date(i.date_of_birth),M=new Date,ie=M.getFullYear()-L.getFullYear(),_e=M.getMonth()-L.getMonth(),T=M.getDate()-L.getDate();if((_e<0||_e===0&&T<0?ie-1:ie)<=21){f("Member must be more than 21 years old."),g(!1);return}}try{const L=new Date().getFullYear(),M=`${L}/${L+1}`,ie=await Qe(i.national_id_number,i.league_id||At,i.role,M),{role_id:_e,...T}=i,Q={...T,renewal:ie,year:M},{error:Ge}=await ne.from("league_members").update(Q).eq("id",w);if(Ge){f(`Failed to save member: ${Ge.message}`),g(!1);return}e(de=>de.map(Ce=>Ce.id===w?{...Ce,...Q}:Ce)),n(null),j(`Member "${Q.first_name} ${Q.last_name}" has been successfully updated!`),g(!1)}catch(L){f(`Unexpected error: ${L.message}`),g(!1)}},re=(w,L)=>{a({...i,[L]:w.target.value})},Ie=t.filter(w=>{const L=(tt||"").toLowerCase();return L?(w.first_name||"").toLowerCase().includes(L)||(w.last_name||"").toLowerCase().includes(L)||(w.national_id_number||"").includes(L):!0}),ut=(w,L,M)=>{const ie=w.internal.pageSize.width;if(C)try{w.addImage(C,"PNG",ie-50,10,30,30)}catch(Q){console.warn("Could not add federation logo to PDF:",Q)}const _e=new Date().toLocaleDateString();w.setFontSize(10),w.setFont("helvetica","normal"),w.text(`Print Date: ${_e}`,20,20),w.setFontSize(16),w.setFont("helvetica","bold"),w.text("Algerian Judo Federation",ie/2,20,{align:"center"}),w.setFontSize(14),w.setFont("helvetica","normal"),w.text(`League: ${M||"League Name"}`,ie/2,35,{align:"center"});const T=w.internal.getNumberOfPages();return w.text(`Page ${T}`,ie/2,w.internal.pageSize.height-10,{align:"center"}),50},xe=(w,L,M,ie=null)=>{const _e=w.internal.pageSize.width,T=w.internal.pageSize.height;if(C)try{w.addImage(C,"PNG",_e-50,10,30,30)}catch(de){console.warn("Could not add federation logo to PDF:",de)}const Q=new Date().toLocaleDateString();w.setFontSize(10),w.setFont("helvetica","normal"),w.text(`Print Date: ${Q}`,20,20),w.setFontSize(16),w.setFont("helvetica","bold"),w.text(L||"Federation Name",_e/2,20,{align:"center"}),w.setFontSize(14),w.text(M||"League Name",_e/2,30,{align:"center"}),ie&&(w.setFontSize(12),w.text(ie,_e/2,40,{align:"center"}));const Ge=w.internal.getCurrentPageInfo().pageNumber;return w.setFontSize(10),w.setFont("helvetica","normal"),w.text(`Page ${Ge}`,_e-20,T-10,{align:"right"}),ie?50:40},Se=w=>w?String(w).replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/[^\x20-\x7E\u00A0-\u024F\u1E00-\u1EFF]/g,"").trim():"",Ze=w=>[Se(w.last_name||""),Se(w.first_name||""),Se(w.date_of_birth||""),Se(w.place_of_birth||""),Se(w.blood_type||""),Se(w.nationality||""),Se(w.grade||""),Se(w.role||""),Se(w.holder_of||""),Se(w.national_id_number||""),Se(w.renewal||""),w.confirmation?"Yes":"No",Se(w.license_number||""),Se(w.club_name||"")],lt=async()=>{if(!(ze!=null&&ze.league_id)){alert("No league selected");return}try{const{data:w,error:L}=await ne.from("league_members").select("*").eq("league_id",ze.league_id);if(L)throw L;if(!w||w.length===0){alert("No members found in this league");return}const M=new Dt("landscape");let ie=ut(M,A,O);M.setFontSize(14),M.setFont("helvetica","bold"),M.setTextColor(255,0,0),M.text("League Members - General Situation",M.internal.pageSize.getWidth()/2,ie,{align:"center"}),M.setTextColor(0,0,0),ie+=20;const _e={};w.forEach(Ge=>{const de=Ge.year||"Unknown Year";_e[de]||(_e[de]=[]),_e[de].push(Ge)});const T=Object.keys(_e).sort();for(const Ge of T){const Ce=_e[Ge].sort((E,pe)=>{const ge=new Date(E.registration_date||"1900-01-01"),je=new Date(pe.registration_date||"1900-01-01");return ge-je});M.setFontSize(14),M.setFont("helvetica","bold"),M.setTextColor(0,0,0),M.text(`Year: ${Ge}`,20,ie),ie+=15;const et=Ce.map(E=>[Se(E.last_name||""),Se(E.first_name||""),Se(E.date_of_birth||""),Se(E.place_of_birth||""),Se(E.blood_type||""),Se(E.nationality||""),Se(E.grade||""),Se(E.holder_of||""),Se(E.national_id_number||""),Se(E.password||""),Se(E.renewal||""),E.confirmation?"Yes":"No",Se(E.license_number||"")]);vr(M,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:et,startY:ie,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},didDrawPage:function(E){E.pageNumber>1&&ut(M,A,O)}}),ie=M.lastAutoTable.finalY+20,ie>M.internal.pageSize.getHeight()-50&&(M.addPage(),ie=ut(M,A,O))}const Q=new Date().getFullYear();M.save(`league_${Se(O)}_general_members_${Q}.pdf`)}catch(w){console.error("Error exporting general PDF:",w),alert("Error exporting PDF. Please try again.")}},ar=async()=>{if(!(ze!=null&&ze.league_id)){alert("No league selected");return}try{const{data:w,error:L}=await ne.from("league_members").select("*").eq("league_id",ze.league_id);if(L)throw L;if(!w||w.length===0){alert("No members found in this league");return}const M=new Dt("landscape");let _e=xe(M,A,O);M.setFontSize(14),M.setFont("helvetica","bold"),M.setTextColor(255,0,0),M.text("League Members - Grade and Role Situation",M.internal.pageSize.getWidth()/2,_e,{align:"center"}),M.setTextColor(0,0,0),_e+=20;const T={};w.forEach(Ge=>{const de=Ge.year||"Unknown Year",Ce=Ge.club_name||"No Club";T[de]||(T[de]={}),T[de][Ce]||(T[de][Ce]=[]),T[de][Ce].push(Ge)}),M.setFontSize(16),M.setFont("helvetica","bold"),M.setTextColor(0,0,0),M.text("SECTION ROLE",20,_e),_e+=25;for(const[Ge,de]of Object.entries(T)){if(Object.keys(de).length===0)continue;M.setFontSize(14),M.setFont("helvetica","bold"),M.setTextColor(0,0,0),M.text(`Year: ${Ge}`,20,_e),_e+=15;const Ce=[];for(const[E,pe]of Object.entries(de))Ce.push(...pe);const et={};Ce.forEach(E=>{const pe=E.role||"No Role";et[pe]||(et[pe]=[]),et[pe].push(E)});for(const[E,pe]of Object.entries(et)){if(pe.length===0)continue;M.setFontSize(12),M.setFont("helvetica","bold"),M.text(`Role: ${Se(E)}`,30,_e),_e+=8;const ge=pe.map(je=>Ze(je));vr(M,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:ge,startY:_e,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:20,right:10}}),_e=M.lastAutoTable.finalY+15,_e>160&&(M.addPage(),_e=xe(M,A,O)+5)}_e+=10}M.setFontSize(16),M.setFont("helvetica","bold"),M.setTextColor(0,0,0),M.text("SECTION GRADE",20,_e),_e+=25;for(const[Ge,de]of Object.entries(T)){if(Object.keys(de).length===0)continue;M.setFontSize(14),M.setFont("helvetica","bold"),M.setTextColor(0,0,0),M.text(`Year: ${Ge}`,20,_e),_e+=15;const Ce=[];for(const[E,pe]of Object.entries(de))Ce.push(...pe);const et={};Ce.forEach(E=>{const pe=E.grade||"No Grade";et[pe]||(et[pe]=[]),et[pe].push(E)});for(const[E,pe]of Object.entries(et)){if(pe.length===0)continue;M.setFontSize(12),M.setFont("helvetica","bold"),M.text(`Grade: ${Se(E)}`,30,_e),_e+=8;const ge=pe.map(je=>Ze(je));vr(M,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:ge,startY:_e,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:20,right:10}}),_e=M.lastAutoTable.finalY+15,_e>160&&(M.addPage(),_e=xe(M,A,O)+5)}_e+=10}const Q=new Date().getFullYear();M.save(`league_${Se(O)}_grade_role_members_${Q}.pdf`)}catch(w){console.error("Error exporting grade role PDF:",w),alert("Error exporting PDF. Please try again.")}},gt=w=>{if(!w||Object.keys(w).length===0){alert("No data available to export");return}J(w)},J=async w=>{let L=null,M=null;try{w.club_id&&(L=(await An())[w.club_id]),w.league_id&&(M=(await qn())[w.league_id])}catch(et){console.error("Error fetching names:",et)}const ie=new Dt("portrait","mm","a4");ie.setFontSize(18),ie.setTextColor(40,40,40),ie.text("Algerian Judo Federation",14,15);const _e=`Member Information - ${w.first_name} ${w.last_name}`;ie.setFontSize(16),ie.setTextColor(40,40,40),ie.text(_e,14,30),ie.setFontSize(10);const T=new Date().toLocaleString();if(ie.text(`Generated: ${T}`,14,37),C)try{ie.addImage(C,"PNG",170,10,25,25)}catch(et){console.error("Error adding logo to PDF:",et)}let Q=70;if(w.photo_url)try{const et=await qt(w.photo_url),E=et.startsWith("data:")?"PNG":"JPEG";ie.addImage(et,E,14,45,25,20),Q=70}catch(et){console.error("Error adding photo to PDF:",et);try{ie.addImage(w.photo_url,"JPEG",14,45,25,20)}catch(E){console.error("Fallback image addition also failed:",E)}Q=70}ie.setFontSize(12),w.confirmation?ie.setTextColor(0,128,0):ie.setTextColor(255,0,0);const Ge=w.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";ie.text(Ge,160,50);const de=[["First Name",w.first_name||""],["Last Name",w.last_name||""],["Date of Birth",w.date_of_birth||""],["Place of Birth",w.place_of_birth||""],["National ID",w.national_id_number||""],["Nationality",w.nationality||""],["Blood Type",w.blood_type||""],["Grade",w.grade||""],["Role",w.role||""],["License Number",w.license_number||""],["Registration Date",w.registration_date||""],["Year",w.year||""],["Renewal",w.renewal||""]];vr(ie,{head:[["Field","Value"]],body:de,startY:Q,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Ce=ie.lastAutoTable.finalY||200;if(ie.setFontSize(12),ie.setTextColor(0,0,0),ie.text("Medical certificate",14,Ce+20),ie.setDrawColor(0),ie.line(14,Ce+40,80,Ce+40),ie.setFontSize(10),w.league_id||M){const et=M||`ID: ${w.league_id}`;ie.text(`League: ${et}`,120,Ce+60),ie.text("League Visa: _________________",120,Ce+70)}try{const et=JSON.stringify({id:w.id,name:`${w.first_name||""} ${w.last_name||""}`.trim(),license:w.license_number||"",club_id:w.club_id||"",league_id:w.league_id||"",confirmation:w.confirmation||"Unconfirmed"}),E=await ui.toDataURL(et,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});ie.addImage(E,"PNG",175,Ce+75,15,15)}catch(et){console.error("Error generating QR code:",et)}ie.save(`member_${w.first_name}_${w.last_name}.pdf`)};return ze?s.jsxs("div",{className:"app-container",children:[o&&s.jsx(nn,{}),s.jsx("header",{children:s.jsxs("div",{className:"federation-header",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.jsx("img",{src:C||Zi,alt:"Federation Logo",className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:A})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[ze.logo_url?s.jsx("img",{src:ze.logo_url,alt:"League Logo",className:"member-logo"}):null,s.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:O||"League Name"})]})]})}),s.jsxs("section",{className:"app-container",children:[s.jsxs("h2",{children:["Welcome ",ze.first_name," ",ze.last_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Role:"})," ",ze.role]}),s.jsxs("div",{className:"form-table-wrapper",children:[s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx("button",{className:"primary-btn","data-id":"1",onClick:async w=>{if(pr(w.currentTarget),!$e){alert("League data not loaded yet.");return}Je("/member-list-l",{state:{...ze,league_id:$e==null?void 0:$e.id,league_name:$e==null?void 0:$e.name_league,league_logo:$e==null?void 0:$e.logo_url}})},children:"The League Member List"}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:async w=>{if(pr(w.currentTarget),!$e){alert("League data not loaded yet.");return}Je("/TheClubListAddFed-League",{state:{...ze,league_id:$e==null?void 0:$e.id,league_name:$e==null?void 0:$e.name_league,league_logo:$e==null?void 0:$e.logo_url}})},children:"The Club Member List"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:async w=>{if(pr(w.currentTarget),!$e){alert("League data not loaded yet.");return}Je("/TheAthleteListAdd-League",{state:{...ze,league_id:$e==null?void 0:$e.id,league_name:$e==null?void 0:$e.name_league,league_logo:$e==null?void 0:$e.logo_url}})},children:"The Athlete List Add"})]}),s.jsx("h2",{className:"form-title",children:"Add League Member"}),s.jsxs("form",{onSubmit:Xe,className:"form-grid",children:[s.jsxs("label",{children:["League Role *",s.jsxs("select",{value:Le,onChange:w=>te(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Role"}),ye.map(w=>s.jsx("option",{value:w.id,children:w.league_role},w.id))]})]}),s.jsxs("label",{children:["League *",s.jsx("select",{value:At,onChange:w=>{We(w.target.value),Mt(w.target.value)},required:!0,disabled:!!(ze!=null&&ze.league_id),children:ze!=null&&ze.league_id?s.jsx("option",{value:ze.league_id,children:O||"Selected League"}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"Select League"}),Oe.map(w=>s.jsx("option",{value:w.id,children:w.name_league},w.id))]})})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:fe,onChange:w=>P(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Blood Type --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{type:"text",value:$,onChange:w=>Z(w.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{type:"text",value:D,onChange:w=>Y(w.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:ce,onChange:w=>B(w.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{type:"text",value:H,onChange:w=>he(w.target.value),required:!0})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{type:"text",value:q,onChange:w=>X(w.target.value),maxLength:"18",minLength:"18",required:!0}),s.jsx("small",{children:"18 digits required — must be unique. "})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:ae,onChange:w=>be(w.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:Ne,onChange:w=>De(w.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:Ke,onChange:w=>dt(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"}),s.jsx("option",{children:"Moroccan"})]})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:He,onChange:w=>Fe(w.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:se,onChange:w=>Et(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",required:!0,onChange:w=>{var L;return qe(((L=w.target.files)==null?void 0:L[0])??null)}})]}),s.jsxs("label",{children:["League Logo",s.jsx("input",{type:"text",value:ze.logo_url||"",disabled:!0})]}),s.jsxs("div",{className:"btn-row",children:[s.jsx("button",{type:"submit",className:"primary-b",disabled:c,children:c?"Adding...":"Add Member"}),c&&s.jsx(ya,{message:"Adding member..."})]}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),m&&s.jsx(En,{error:m,onClose:()=>f(null)}),x&&s.jsx(Rn,{success:x,onClose:()=>j("")}),s.jsx("h2",{className:"form-title",children:"List Of League Members"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{children:["League",s.jsx("select",{value:At,onChange:w=>{We(w.target.value),Mt(w.target.value)},required:!0,disabled:!!(ze!=null&&ze.league_id),children:ze!=null&&ze.league_id?s.jsx("option",{value:ze.league_id,children:O||"Selected League"}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"Select League"}),Oe.map(w=>s.jsx("option",{value:w.id,children:w.name_league},w.id))]})})]}),s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"search Member"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:tt,onChange:w=>_t(w.target.value)})})]}),s.jsx("div",{className:"table-container",ref:Bt,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"Holder Of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photo"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"League ID"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:Ie.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:18,children:"No members found."})}):Ie.map(w=>s.jsxs("tr",{onDoubleClick:()=>gt(w),style:{cursor:"pointer"},children:[s.jsx("td",{children:r===w.id?s.jsx("input",{value:i.last_name||"",onChange:L=>re(L,"last_name")}):w.last_name}),s.jsx("td",{children:r===w.id?s.jsx("input",{value:i.first_name||"",onChange:L=>re(L,"first_name")}):w.first_name}),s.jsx("td",{children:r===w.id?s.jsx("input",{type:"date",value:i.date_of_birth||"",onChange:L=>re(L,"date_of_birth")}):w.date_of_birth}),s.jsx("td",{children:r===w.id?s.jsx("input",{value:i.place_of_birth||"",onChange:L=>re(L,"place_of_birth")}):w.place_of_birth}),s.jsx("td",{children:r===w.id?s.jsxs("select",{value:i.role||"",onChange:L=>re(L,"role"),children:[s.jsx("option",{value:"",children:"-- Select --"}),ye.map(L=>s.jsx("option",{value:L.league_role??L.name??"",children:L.league_role??L.name??""},L.id))]}):w.role||"No Role"}),s.jsx("td",{children:r===w.id?s.jsxs("select",{value:i.blood_type||"",onChange:L=>re(L,"blood_type"),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):w.blood_type}),s.jsx("td",{children:r===w.id?s.jsxs("select",{value:i.nationality||"",onChange:L=>re(L,"nationality"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]}):w.nationality}),s.jsx("td",{children:r===w.id?s.jsxs("select",{value:i.grade||"",onChange:L=>re(L,"grade"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]}):w.grade}),s.jsx("td",{children:r===w.id?s.jsx("input",{value:i.holder_of||"",onChange:L=>re(L,"holder_of")}):w.holder_of}),s.jsx("td",{children:w.national_id_number}),s.jsx("td",{children:w.renewal}),s.jsx("td",{children:w.year}),s.jsx("td",{children:w.license_number}),s.jsx("td",{children:w.registration_date}),s.jsx("td",{children:w.photo_url?s.jsx("img",{src:Gt(w.photo_url),alt:"Member",style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),s.jsx("td",{children:w.confirmation?"✅":"❌"}),s.jsx("td",{children:w.league_id}),s.jsx("td",{children:r===w.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-S",onClick:()=>Zt(w.id),disabled:d,children:d?"Saving...":"Save"}),s.jsx("button",{className:"secondary-btn",onClick:Qt,disabled:d,children:"Cancel"}),d&&s.jsx(ya,{message:"Saving changes..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-M",onClick:()=>Pt(w),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>Ut(w),children:"Delete"})]})})]},w.id))})]})}),s.jsx(Pr,{}),s.jsx("button",{className:"primary-b",onClick:lt,children:"Export General PDF"}),s.jsx("button",{className:"primary-b",onClick:ar,children:"Export Grade Role PDF"})]})]}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]}):s.jsx("p",{children:"No account data found."})}function n8(){const{state:t}=fi(),e=Mr(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(""),[d,g]=b.useState(null),[m,f]=b.useState(null),[x,j]=b.useState(null),[_,v]=b.useState({}),[C,N]=b.useState(null),[A,O]=b.useState(""),[G,V]=b.useState(""),[F,$]=b.useState(null),[Z,D]=b.useState(""),[Y,ce]=b.useState((t==null?void 0:t.club_id)||""),[B,H]=b.useState((t==null?void 0:t.league_id)||""),he="Algerian Judo Federation",Le="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",[te,ye]=b.useState([]),[ve,fe]=b.useState([]),[P,q]=b.useState([]),[X,ae]=b.useState({}),[be,Ne]=b.useState({}),[De,ke]=b.useState(""),[qe,Ke]=b.useState(""),[dt,He]=b.useState(""),[Fe,se]=b.useState(""),[Et,At]=b.useState(""),[We,Oe]=b.useState(""),[ht,ot]=b.useState(""),[xt,Ft]=b.useState(""),[Mt,tt]=b.useState(""),[_t,Bt]=b.useState(null),[vt,kt]=b.useState(null),[yt,It]=b.useState(""),[rt,$t]=b.useState(""),[$e,me]=b.useState(""),[Be,at]=b.useState(""),[Je,ze]=b.useState(!1),[Gt,qt]=b.useState(!1),Qt=Zn(),Ut=L=>L?L.startsWith("http")?L:`${Le}${L}`:null;function Pe(L){return new Promise((M,ie)=>{no(L,_e=>{if(_e.type==="error")console.warn("EXIF processing failed, using original image:",L),M(L);else try{const T=_e.toDataURL("image/png");M(T)}catch(T){console.warn("Canvas conversion failed, using original image:",T),M(L)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const z=async()=>{try{a(!0),l(null);const{data:L}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(L!=null&&L.length&&N(Ut(L[0].logo_url)),t!=null&&t.league_id){const{data:M}=await ne.from("nameleague").select("name_league").eq("id",t.league_id).single();M&&V(M.name_league);const{data:ie}=await ne.from("league_members").select("logo_url").eq("league_id",t.league_id).order("id",{ascending:!1}).limit(1);ie!=null&&ie.length&&O(Ut(ie[0].logo_url))}if(t!=null&&t.club_id){const{data:M}=await ne.from("nameclub").select("name_club, id").eq("id",t.club_id).single();M&&(D(M.name_club),g(M));const{data:ie,error:_e}=await ne.from("club_members").select("logo_url").eq("club_id",t.club_id).not("logo_url","is",null).order("id",{ascending:!1}).limit(1);if(_e)console.error("Error fetching club logo:",_e.message);else if(ie!=null&&ie.length&&ie[0].logo_url){const{data:T}=ne.storage.from("logos").getPublicUrl(ie[0].logo_url);$(T.publicUrl)}}if(t!=null&&t.member_id){const{data:M}=await ne.from("club_members").select("*").eq("id",t.member_id).single();M&&f(M)}if(t!=null&&t.club_id){const{data:M}=await ne.from("club_members").select("*").eq("club_id",t.club_id);n(M||[])}}catch(L){l(L),console.error("Error fetching data:",L.message)}finally{a(!1)}};b.useEffect(()=>{z()},[t]),b.useEffect(()=>{(async()=>{const{data:M}=await ne.from("clubrole").select("id, club_role");M&&ye(M)})()},[]),b.useEffect(()=>{(async()=>{const{data:M}=await ne.from("nameclub").select("id, name_club");M&&fe(M)})()},[]),b.useEffect(()=>{(async()=>{const{data:M}=await ne.from("nameleague").select("id, name_league");M&&q(M)})()},[]);const Te=async L=>{if(!L)return null;const M=L.name.split(".").pop(),ie=`${Date.now()}-${Math.random()}.${M}`,{error:_e}=await ne.storage.from("logos").upload(ie,L);if(_e)return l(`Upload failed: ${_e.message}`),null;const{data:T}=ne.storage.from("logos").getPublicUrl(ie);return(T==null?void 0:T.publicUrl)??null},Qe=async(L,M,ie,_e)=>{const{data:T}=await ne.from("club_members").select("*").eq("national_id_number",L).eq("club_id",M).eq("role",ie).eq("year",_e);if(T&&T.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:Q}=await ne.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",L).eq("club_id",M).eq("role",ie);return(Q||0)+1};b.useEffect(()=>{ti()},[]);const Xe=async L=>{var je,ft;if(L.preventDefault(),l(""),u(""),console.log("Setting submitLoading to true"),ze(!0),await new Promise(Me=>setTimeout(Me,100)),!qe||!De||!dt||!Fe||!Et||!Y||!B||!xt||!Mt){const Me=[];qe||Me.push("First Name"),De||Me.push("Last Name"),dt||Me.push("Date of Birth"),Fe||Me.push("Place of Birth"),Et||Me.push("Role"),Y||Me.push("Club"),B||Me.push("League"),xt||Me.push("Password"),Mt||Me.push("Confirm Password"),l(`Please fill in the following required fields: ${Me.join(", ")}`),console.log("Setting submitLoading to false - missing fields"),ze(!1);return}const M=Number(Y),ie=Number(B);if(!M||isNaN(M)){l("Please select a valid club."),ze(!1);return}if(!ie||isNaN(ie)){l("Please select a valid league."),ze(!1);return}const _e=new Date(dt),T=new Date,Q=T.getFullYear()-_e.getFullYear(),Ge=T.getMonth()-_e.getMonth(),de=T.getDate()-_e.getDate();if((Ge<0||Ge===0&&de<0?Q-1:Q)<=21){l("Member must be more than 21 years old to register."),ze(!1);return}if(ht.length!==18){l("National ID must be exactly 18 digits."),ze(!1);return}if(xt!==Mt){l("Passwords do not match."),ze(!1);return}if(De&&xt){const{data:Me}=await ne.from("club_members").select("*").eq("last_name",De).eq("password",xt);if(Me&&Me.length>0){l("Change your Password for this name because is already exist"),ze(!1);return}}const et=((je=te.find(Me=>Me.id===parseInt(Et)))==null?void 0:je.club_role)||"",E=new Date().getFullYear(),pe=`${E}/${E+1}`;let ge;try{ge=await Qe(ht,M,et,pe)}catch(Me){l(Me.message),ze(!1);return}try{const Me=await Te(vt),Tt=((ft=te.find(Ot=>Ot.id===parseInt(Et)))==null?void 0:ft.club_role)||"",wt=await Qe(ht,Y,Tt),St=`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,jt={last_name:De,first_name:qe,date_of_birth:dt,place_of_birth:Fe,role:Tt,blood_type:We,nationality:yt,grade:rt,holder_of:$e,national_id_number:ht,password:xt,photo_url:Me,logo_url:F,renewal:wt,year:St,confirmation:!1,club_id:Y,league_id:B,license_number:`LIC-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0]},{error:Ct}=await ne.from("club_members").insert([jt]);if(Ct)throw Ct;u(`Member ${qe} ${De} added successfully!`),z(),ke(""),Ke(""),He(""),se(""),At(""),Oe(""),ot(""),Ft(""),tt(""),ce(""),H(""),Bt(null),kt(null),It(""),$t(""),me(""),console.log("Setting submitLoading to false - success"),ze(!1),setTimeout(()=>{window.location.reload()},2e3)}catch(Me){l(Me.message),console.log("Setting submitLoading to false - error"),ze(!1)}},Pt=L=>{j(L.id),v(L)},Zt=()=>{j(null),v({})},re=(L,M)=>{v({..._,[M]:L.target.value})},Ie=async L=>{if(l(""),u(""),qt(!0),!_.first_name||!_.last_name||!_.date_of_birth||!_.place_of_birth||!_.role){const de=[];_.first_name||de.push("First Name"),_.last_name||de.push("Last Name"),_.date_of_birth||de.push("Date of Birth"),_.place_of_birth||de.push("Place of Birth"),_.role||de.push("Role"),l(`Please fill in the following required fields: ${de.join(", ")}`),qt(!1);return}const M=new Date(_.date_of_birth),ie=new Date,_e=ie.getFullYear()-M.getFullYear(),T=ie.getMonth()-M.getMonth(),Q=ie.getDate()-M.getDate();if((T<0||T===0&&Q<0?_e-1:_e)<=21){l("Member must be more than 21 years old to register."),qt(!1);return}try{const{error:de}=await ne.from("club_members").update(_).eq("id",L);if(de)throw de;u(`Member ${_.first_name} ${_.last_name} updated successfully!`),Zt(),z(),qt(!1),setTimeout(()=>{window.location.reload()},2e3)}catch(de){l(de.message),qt(!1)}},ut=async L=>{try{const M=new Date(L.registration_date).toISOString().split("T")[0],ie=new Date().toISOString().split("T")[0];if(M!==ie){alert("You can only delete members on the same day of registration.");return}const{error:_e}=await ne.from("club_members").delete().eq("id",L.id);if(_e)throw _e;n(T=>T.filter(Q=>Q.id!==L.id))}catch(M){l(M.message)}},xe=r.filter(L=>{var ie,_e;const M=Be.toLowerCase();return(((ie=L.first_name)==null?void 0:ie.toLowerCase())??"").includes(M)||(((_e=L.last_name)==null?void 0:_e.toLowerCase())??"").includes(M)||(L.national_id_number??"").includes(M)}),Se=L=>L?String(L).replace(/Ø=UÈ/g,"").replace(/Ø<ða/g,"").replace(/Ø=Ud/g,"").replace(/Ø-ÜÈ/g,"").replace(/Ø-Üd/g,"").replace(/Ø<Ða/g,"").replace(/Ø<ßà/g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/% % %/g,"").replace(/%%%/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/%+/g,"").replace(/\s*%\s*/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(/Ã¸/g,"ø").replace(/Ã©/g,"é").replace(/Ã¨/g,"è").replace(/Ã¡/g,"á").replace(/Ã /g,"à").replace(/Ã§/g,"ç").replace(/Ã´/g,"ô").replace(/Ã»/g,"û").replace(/Ã®/g,"î").replace(/Ã¯/g,"ï").replace(/Ã¢/g,"â").replace(/Ã«/g,"ë").replace(/Ã¼/g,"ü").replace(/Ã¶/g,"ö").replace(/Ã¤/g,"ä").trim():"",Ze=L=>{console.log("👆 handleMemberDoubleClick called with member:",L),lt(L)},lt=L=>{if(console.log("🎯 generateIndividualMemberPDF called with member:",L),!L||Object.keys(L).length===0){l("No member data available to export");return}ar(L)},ar=async L=>{try{console.log("🔥 exportPDFWithAutoOrientation called with member:",L);const M=new Dt,ie=M.internal.pageSize.width,_e=M.internal.pageSize.height;let T=Z;if(console.log("Initial clubName:",Z,"member.club_id:",L.club_id),L.club_id)try{const je=await An();console.log("Fetched clubNames:",je),je[L.club_id]?(T=je[L.club_id],console.log("Found memberClubName:",T)):console.log("Club ID not found in clubNames:",L.club_id)}catch(je){console.error("Error fetching club name:",je)}M.setFontSize(18),M.setTextColor(40,40,40),M.text(Se(he),14,15),M.setFontSize(16),M.setTextColor(40,40,40),M.text(`Athlete Information - ${Se(L.first_name)} ${Se(L.last_name)}`,14,30),M.setFontSize(10);const Q=new Date().toLocaleString();if(M.text(`Generated: ${Q}`,14,37),C)try{M.addImage(C,"PNG",170,10,25,25)}catch(je){console.error("Error adding federation logo to PDF:",je)}let Ge=70;if(L.photos_url||L.photo_url)try{const je=L.photos_url||L.photo_url,ft=await Pe(je),Me=ft.startsWith("data:")?"PNG":"JPEG";M.addImage(ft,Me,14,45,25,20),Ge=70}catch(je){console.error("Error adding photo to PDF:",je);try{const ft=L.photos_url||L.photo_url;M.addImage(ft,"JPEG",14,45,25,20),Ge=70}catch(ft){console.error("Fallback image addition also failed:",ft),Ge=70}}M.setFontSize(12),L.confirmation?M.setTextColor(0,128,0):M.setTextColor(255,0,0);const de=L.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";M.text(de,160,50),M.setTextColor(0,0,0);const Ce=te.find(je=>je.id===parseInt(L.role_id)),et=(Ce==null?void 0:Ce.club_role)||L.role||"No Role",E=[["Last Name",Se(L.last_name)||""],["First Name",Se(L.first_name)||""],["Date of Birth",Se(L.date_of_birth)||""],["Place of Birth",Se(L.place_of_birth)||""],["Role",Se(et)],["Blood type",Se(L.blood_type)||""],["National ID",Se(L.national_id_number)||""],["Nationality",Se(L.nationality)||""],["Grade",Se(L.grade)||""],["Genres",Se(L.gender)||""],["Categories",Se(L.category)||""],["Weight",Se(L.weight)||""],["License Number",Se(L.license_number)||""],["Registration Date",Se(L.registration_date)||""],["Year",Se(L.year)||""],["Renewal",Se(L.renewal)||""]];vr(M,{startY:Ge,head:[["Field","Value"]],body:E,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const pe=M.lastAutoTable.finalY||200;M.setFontSize(12),M.setTextColor(0,0,0),M.text("Medical certificate",14,pe+20),M.setDrawColor(0),M.line(14,pe+40,80,pe+40),M.setFontSize(10),console.log("memberClubName:",T,"finalY:",pe),T?(M.text(`Club: ${Se(T)}`,14,pe+60),M.text("Club Visa: _________________",14,pe+70)):console.log("No memberClubName found, member.club_id:",L.club_id),G&&(M.text(`League: ${Se(G)}`,120,pe+60),M.text("League Visa: _________________",120,pe+70));try{const je=JSON.stringify({id:L.id,name:`${L.first_name||""} ${L.last_name||""}`.trim(),license:L.license_number||"",club_id:L.club_id||"",league_id:L.league_id||""}),Me=await(await pa(async()=>{const{default:Tt}=await Promise.resolve().then(()=>Om);return{default:Tt}},void 0)).default.toDataURL(je,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});M.addImage(Me,"PNG",180,pe+75,15,15)}catch(je){console.error("Error generating QR code:",je)}const ge=`athlete_${Se(L.first_name)}_${Se(L.last_name)}_${L.id||"record"}.pdf`;console.log("💾 About to save PDF with filename:",ge),M.save(ge),console.log("✅ PDF save completed")}catch(M){console.error("❌ Error in exportPDFWithAutoOrientation:",M),l(`Error generating PDF: ${M.message}`)}},gt=(L,M=1,ie="",_e="")=>{const T=L.internal.pageSize.getWidth(),Q=L.internal.pageSize.getHeight();if(C)try{L.addImage(C,"PNG",T-40,15,25,25)}catch(de){console.warn("Could not add federation logo:",de)}const Ge=new Date().toLocaleDateString();return L.setFontSize(10),L.setFont("helvetica","normal"),L.text(`Print Date: ${Ge}`,15,20),L.setFontSize(16),L.setFont("helvetica","bold"),L.text("Algerian Judo Federation",T/2,25,{align:"center"}),L.setFontSize(12),L.setFont("helvetica","normal"),L.text(`League: ${_e}`,T/2,35,{align:"center"}),L.text(`Club: ${ie}`,T/2,45,{align:"center"}),L.setFontSize(10),L.text(`Page ${M}`,T-20,Q-10,{align:"right"}),55},J=async()=>{try{if(!xe||xe.length===0){l("No members found to export");return}const L=new Dt("landscape");let ie=gt(L,1,Z||"Unknown Club",G||"");L.setFontSize(14),L.setFont("helvetica","bold"),L.setTextColor(255,0,0),L.text("Club Members - General Situation",L.internal.pageSize.getWidth()/2,ie,{align:"center"}),L.setTextColor(0,0,0),ie+=20;const _e={};xe.forEach(Ge=>{const de=Ge.year||"Unknown Year";_e[de]||(_e[de]=[]),_e[de].push(Ge)});const T=Object.keys(_e).sort();for(const Ge of T){const Ce=_e[Ge].sort((E,pe)=>{const ge=new Date(E.registration_date||"1900-01-01"),je=new Date(pe.registration_date||"1900-01-01");return ge-je});L.setFontSize(14),L.setFont("helvetica","bold"),L.setTextColor(0,0,0),L.text(`Year: ${Ge}`,20,ie),ie+=12;const et=Ce.map(E=>{var ge;const pe=((ge=te.find(je=>je.id===parseInt(E.role_id)))==null?void 0:ge.club_role)||E.role||"No Role";return[Se(E.last_name),Se(E.first_name),Se(E.date_of_birth),Se(E.place_of_birth),Se(E.blood_type),Se(E.nationality),Se(pe),Se(E.grade),Se(E.holder_of),Se(E.national_id_number),Se(E.password),Se(E.renewal),E.confirmation?"Yes":"No",Se(E.license_number)]});vr(L,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:et,startY:ie,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ie=L.lastAutoTable.finalY+15,ie>180&&Ge!==T[T.length-1]&&(L.addPage(),ie=gt(L,L.internal.getNumberOfPages(),Z||"Unknown Club",G||"")+10)}const Q=new Date().getFullYear();L.save(`club_members_general_${Q}.pdf`)}catch(L){console.error("Error generating PDF:",L),l("Error generating PDF: "+L.message)}},w=async()=>{try{if(!xe||xe.length===0){l("No members found to export");return}const L=new Dt("landscape");let ie=gt(L,1,Z||"Unknown Club",G||"");L.setFontSize(14),L.setFont("helvetica","bold"),L.setTextColor(255,0,0),L.text("Club Members - Grade & Role Report",L.internal.pageSize.getWidth()/2,ie,{align:"center"}),L.setTextColor(0,0,0),ie+=20,L.setFontSize(12),L.setFont("helvetica","bold"),L.text(Se("ROLES SECTION"),20,ie),ie+=15;const _e={};xe.forEach(de=>{const Ce=de.year||"No Year",et=te.find(pe=>pe.id===parseInt(de.role_id)),E=(et==null?void 0:et.club_role)||de.role||"No Role";_e[Ce]||(_e[Ce]={}),_e[Ce][E]||(_e[Ce][E]=[]),_e[Ce][E].push(de)});const T=Object.keys(_e).sort();for(const de of T){L.setFontSize(12),L.setFont("helvetica","bold"),L.text(`Year: ${Se(de)}`,20,ie),ie+=10;for(const[Ce,et]of Object.entries(_e[de])){if(et.length===0)continue;L.setFontSize(11),L.setFont("helvetica","bold"),L.text(`Role: ${Se(Ce)}`,30,ie),ie+=8;const pe=et.sort((ge,je)=>new Date(ge.registration_date)-new Date(je.registration_date)).map(ge=>{var ft;const je=((ft=te.find(Me=>Me.id===parseInt(ge.role_id)))==null?void 0:ft.club_role)||ge.role||"No Role";return[Se(ge.last_name),Se(ge.first_name),Se(ge.date_of_birth),Se(ge.place_of_birth),Se(ge.blood_type),Se(ge.nationality),Se(je),Se(ge.grade),Se(ge.holder_of),Se(ge.national_id_number),Se(ge.password),Se(ge.renewal),ge.confirmation?"Yes":"No",Se(ge.license_number)]});vr(L,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:pe,startY:ie,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ie=L.lastAutoTable.finalY+8,ie>180&&(L.addPage(),ie=gt(L,L.internal.getNumberOfPages(),Z||"Unknown Club",G||"")+5)}ie+=10,ie>170&&de!==T[T.length-1]&&(L.addPage(),ie=gt(L,L.internal.getNumberOfPages(),Z||"Unknown Club",G||"")+10)}L.addPage(),ie=gt(L,L.internal.getNumberOfPages(),Z||"Unknown Club",G||""),L.setFontSize(12),L.setFont("helvetica","bold"),L.text(Se("GRADES SECTION"),20,ie),ie+=15;const Q={};xe.forEach(de=>{const Ce=de.year||"No Year",et=de.grade||"No Grade";Q[Ce]||(Q[Ce]={}),Q[Ce][et]||(Q[Ce][et]=[]),Q[Ce][et].push(de)});for(const de of T){L.setFontSize(12),L.setFont("helvetica","bold"),L.text(`Year: ${Se(de)}`,20,ie),ie+=10;for(const[Ce,et]of Object.entries(Q[de]||{})){if(et.length===0)continue;L.setFontSize(11),L.setFont("helvetica","bold"),L.text(`Grade: ${Se(Ce)}`,30,ie),ie+=8;const pe=et.sort((ge,je)=>new Date(ge.registration_date)-new Date(je.registration_date)).map(ge=>{const je=te.find(Me=>Me.id===parseInt(ge.role_id)),ft=(je==null?void 0:je.club_role)||ge.role||"No Role";return[Se(ge.last_name),Se(ge.first_name),Se(ge.date_of_birth),Se(ge.place_of_birth),Se(ge.blood_type),Se(ge.nationality),Se(ft),Se(ge.grade),Se(ge.holder_of),Se(ge.national_id_number),Se(ge.password),Se(ge.renewal),ge.confirmation?"Yes":"No",Se(ge.license_number)]});vr(L,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:pe,startY:ie,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ie=L.lastAutoTable.finalY+8,ie>180&&(L.addPage(),ie=gt(L,L.internal.getNumberOfPages(),Z||"Unknown Club",G||"")+5)}ie+=10,ie>170&&de!==T[T.length-1]&&(L.addPage(),ie=gt(L,L.internal.getNumberOfPages(),Z||"Unknown Club",G||"")+10)}const Ge=new Date().getFullYear();L.save(`club_members_grade_role_${Ge}.pdf`)}catch(L){console.error("Error exporting complete club report PDF:",L),l("Error exporting PDF: "+L.message)}};return s.jsxs("div",{className:"app-container",children:[i&&s.jsx(nn,{}),s.jsx("header",{children:s.jsxs("div",{className:"federation-header",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[C?s.jsx("img",{src:C,alt:"Federation Logo",className:"federation-logo"}):s.jsx(ri,{className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:he})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[A?s.jsx("img",{src:A,alt:"League Logo",className:"member-logo"}):s.jsx("p",{children:"No league logo"}),s.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:G||"League Name"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[F?s.jsx("img",{src:F,alt:"Club Logo",className:"member-logo"}):s.jsx("p",{children:"No club logo"}),s.jsx("h3",{className:"federation-title",style:{fontSize:"1.2rem"},children:Z||"Club Name"})]})]})}),s.jsx("section",{className:"app-container",children:s.jsxs("div",{className:"form-table-wrapper",children:[s.jsx("h2",{children:"Club Member"}),m?s.jsxs("p",{children:[m.first_name," ",m.last_name," —"," ",s.jsx("strong",{children:(()=>{const L=te.find(M=>M.id===parseInt(m.role_id));return(L==null?void 0:L.club_role)||m.club_role||m.role||"No role"})()})]}):s.jsx("p",{children:"No member found with these credentials."}),s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx("button",{type:"button",className:"primary-btn","data-id":"1",onClick:L=>{pr(L.target),d&&m?(console.log("➡️ Navigating to /club-member-listC with state:",{club_id:d.id,club_name:d.name_club,league_id:t==null?void 0:t.league_id,member_id:m.id,first_name:m.first_name,last_name:m.last_name,role:m.role,club_logo:F}),e("/club-member-listC",{state:{club_id:d.id,club_name:d.name_club,league_id:t==null?void 0:t.league_id,member_id:m.id,first_name:m.first_name,last_name:m.last_name,role:m.role,club_logo:F}})):console.log("❌ No club or member found, cannot navigate.")},children:"The Club Member List"}),s.jsx("button",{type:"button",className:"primary-btn","data-id":"2",onClick:L=>{pr(L.target),d&&m?e("/AthletePage",{state:{club_id:d.id,club_name:d.name_club,league_id:t==null?void 0:t.league_id,member_id:m.id,first_name:m.first_name,last_name:m.last_name,role:m.role,club_logo:F,...t,club:d,member:m}}):console.log("❌ No club or member found, cannot navigate.")},children:"List of Athletes"})]}),s.jsxs("section",{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"form-title",children:"Add Club Member"}),s.jsxs("form",{onSubmit:Xe,className:"form-grid",children:[s.jsxs("label",{children:["Club Role *",s.jsxs("select",{value:Et,onChange:L=>At(L.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Role"}),te.map(L=>s.jsx("option",{value:L.id,children:L.club_role},L.id))]})]}),s.jsxs("label",{children:["Club *",s.jsxs("select",{value:Y,onChange:L=>ce(L.target.value),required:!0,disabled:!!(t!=null&&t.club_id),children:[s.jsx("option",{value:"",children:"Select Club"}),ve.map(L=>s.jsx("option",{value:L.id,children:L.name_club},L.id))]})]}),s.jsxs("label",{children:["League *",s.jsxs("select",{value:B,onChange:L=>H(L.target.value),required:!0,disabled:!!(t!=null&&t.league_id),children:[s.jsx("option",{value:"",children:"Select League"}),P.map(L=>s.jsx("option",{value:L.id,children:L.name_league},L.id))]})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:yt,onChange:L=>It(L.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:rt,onChange:L=>$t(L.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:$e,onChange:L=>me(L.target.value),required:!0})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:We,onChange:L=>Oe(L.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{value:De,onChange:L=>ke(L.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{value:qe,onChange:L=>Ke(L.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:dt,onChange:L=>He(L.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{value:Fe,onChange:L=>se(L.target.value),required:!0})]}),s.jsxs("label",{children:["National ID *",s.jsx("input",{value:ht,onChange:L=>ot(L.target.value),maxLength:"18",required:!0}),s.jsx("small",{children:"18 digits required — must be unique. "})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:xt,onChange:L=>Ft(L.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:Mt,onChange:L=>tt(L.target.value),required:!0})]}),s.jsxs("label",{children:["Club Logo *",s.jsx("input",{type:"text",value:F||"",disabled:!0})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",onChange:L=>{var M;return kt(((M=L.target.files)==null?void 0:M[0])??null)},required:!0})]}),s.jsx("div",{className:"btn-row",children:s.jsx("button",{type:"submit",className:"primary-b",disabled:Je,children:Je?"Saving...":"Save Member"})}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]})]}),s.jsx("h2",{className:"form-title",children:"List of Members Club"}),s.jsxs("div",{className:"form-grid",children:[s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"Search Members Club"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:Be,onChange:L=>at(L.target.value)})})]}),s.jsx("div",{className:"table-container",ref:Qt,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"holder_of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photos"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"Club ID"}),s.jsx("th",{children:"League ID"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:xe.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:19,children:"No members found."})}):xe.map(L=>s.jsxs("tr",{onDoubleClick:()=>Ze(L),style:{cursor:"pointer"},children:[s.jsx("td",{children:x===L.id?s.jsx("input",{value:_.last_name||"",onChange:M=>re(M,"last_name")}):L.last_name}),s.jsx("td",{children:x===L.id?s.jsx("input",{value:_.first_name||"",onChange:M=>re(M,"first_name")}):L.first_name}),s.jsx("td",{children:x===L.id?s.jsx("input",{type:"date",value:_.date_of_birth||"",onChange:M=>re(M,"date_of_birth")}):L.date_of_birth}),s.jsx("td",{children:x===L.id?s.jsx("input",{value:_.place_of_birth||"",onChange:M=>re(M,"place_of_birth")}):L.place_of_birth}),s.jsx("td",{children:x===L.id?s.jsxs("select",{value:_.role||"",onChange:M=>re(M,"role"),children:[s.jsx("option",{value:"",children:"-- Select --"}),te.map(M=>s.jsx("option",{value:M.club_role,children:M.club_role},M.id))]}):L.role||"No Role"}),s.jsx("td",{children:x===L.id?s.jsxs("select",{value:_.blood_type||"",onChange:M=>re(M,"blood_type"),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):L.blood_type}),s.jsx("td",{children:x===L.id?s.jsxs("select",{value:_.nationality||"",onChange:M=>re(M,"nationality"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]}):L.nationality}),s.jsx("td",{children:x===L.id?s.jsxs("select",{value:_.grade||"",onChange:M=>re(M,"grade"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]}):L.grade}),s.jsx("td",{children:x===L.id?s.jsx("input",{value:_.holder_of||"",onChange:M=>re(M,"holder_of")}):L.holder_of}),s.jsx("td",{children:L.national_id_number}),s.jsx("td",{children:L.renewal}),s.jsx("td",{children:L.year}),s.jsx("td",{children:L.license_number}),s.jsx("td",{children:L.registration_date}),s.jsx("td",{children:L.photo_url?s.jsx("img",{src:L.photo_url,alt:"Photo",style:{width:"50px",height:"50px"}}):"No Photo"}),s.jsx("td",{children:L.confirmation?"Yes":"No"}),s.jsx("td",{children:L.club_id}),s.jsx("td",{children:L.league_id}),s.jsx("td",{children:x===L.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-S",onClick:()=>Ie(L.id),children:"Save"}),s.jsx("button",{className:"secondary-btn",onClick:Zt,children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-M",onClick:()=>Pt(L),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>ut(L),children:"Delete"})]})})]},L.id))})]})}),s.jsxs("div",{children:[s.jsx(Pr,{}),s.jsx("button",{className:"primary-b",onClick:J,children:"Export General PDF"}),s.jsx("button",{className:"primary-b",onClick:w,children:"Export Grade & Role PDF"})]})]})]})}),o&&s.jsx(En,{error:o,onClose:()=>l(null)}),c&&s.jsx(Rn,{success:c,onClose:()=>u("")}),i&&s.jsx("div",{children:"Loading..."}),Je&&s.jsx(ya,{message:"Adding member..."}),Gt&&s.jsx(ya,{message:"Saving changes..."}),s.jsx(gn,{}),s.jsx("footer",{className:"footer bg-red-600 text-white p-4 mt-6",children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function i8(){b.useEffect(()=>{ti()},[]),b.useEffect(()=>{ti()},[]);const t=Mr(),r=fi().state||{},[n,i]=b.useState(null),[a]=b.useState("Algerian Judo Federation"),[o,l]=b.useState([]),[c,u]=b.useState([]),[d,g]=b.useState([]),[m,f]=b.useState([]),[x,j]=b.useState((r==null?void 0:r.league_id)||""),[_,v]=b.useState((r==null?void 0:r.club_id)||""),[C,N]=b.useState(""),[A,O]=b.useState(""),[G,V]=b.useState(""),[F,$]=b.useState(""),[Z,D]=b.useState(""),[Y,ce]=b.useState(""),[B,H]=b.useState(""),[he,Le]=b.useState(""),[te,ye]=b.useState(""),[ve,fe]=b.useState(""),[P,q]=b.useState(""),[X,ae]=b.useState(""),[be,Ne]=b.useState(null),[De,ke]=b.useState(null),[qe,Ke]=b.useState(""),[dt,He]=b.useState(""),[Fe,se]=b.useState(""),[Et,At]=b.useState(null),[We,Oe]=b.useState({}),[ht,ot]=b.useState(!0),[xt,Ft]=b.useState(""),[Mt,tt]=b.useState(""),[_t,Bt]=b.useState([]),[vt,kt]=b.useState([]),yt="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",It=Zn(),rt=re=>re?re.startsWith("http")?re:`${yt}${re}`:null,$t=async()=>{try{console.log("Force refreshing all data..."),typeof Storage<"u"&&(localStorage.clear(),sessionStorage.clear()),"caches"in window&&caches.keys().then(Ze=>{Ze.forEach(lt=>{caches.delete(lt)})});const re=Date.now();console.log("🔍 Cache cleared at:",re);const{data:Ie,error:ut}=await ne.from("nameleague").select("id, name_league");!ut&&Ie&&(console.log("🔍 RAW DATABASE LEAGUES:",Ie),Ie.forEach(Ze=>{var lt;(lt=Ze.name_league)!=null&&lt.includes("%")&&(console.log("🚨 DATABASE CORRUPTION FOUND - League:",Ze.name_league),console.log("🚨 Character codes:",Ze.name_league.split("").map(ar=>`${ar}(${ar.charCodeAt(0)})`).join(" ")))}),Ie.forEach(Ze=>{Ze.name_league&&(Ze.name_league=Lt(Ze.name_league))}),g(Ie));const{data:xe,error:Se}=await ne.from("nameclub").select("id, name_club, league_i");!Se&&xe&&(console.log("🔍 RAW DATABASE CLUBS:",xe),xe.forEach(Ze=>{var lt;(lt=Ze.name_club)!=null&&lt.includes("%")&&(console.log("🚨 DATABASE CORRUPTION FOUND - Club:",Ze.name_club),console.log("🚨 Character codes:",Ze.name_club.split("").map(ar=>`${ar}(${ar.charCodeAt(0)})`).join(" ")))}),xe.forEach(Ze=>{Ze.name_club&&(Ze.name_club=Lt(Ze.name_club))}),u(xe)),console.log("Data refresh completed")}catch(re){console.error("Error refreshing data:",re)}};b.useEffect(()=>{(async()=>{try{const{data:Ie,error:ut}=await ne.from("clubrole").select("*");if(ut)throw ut;l(Ie||[]);const{data:xe,error:Se}=await ne.from("nameleague").select("id, name_league");if(Se)throw Se;g(xe||[]);const{data:Ze,error:lt}=await ne.from("nameclub").select("id, name_club, league_i");if(lt)throw lt;u(Ze||[])}catch(Ie){console.error("Error fetching initial data:",Ie.message)}finally{ot(!1)}})()},[]),b.useEffect(()=>{(async()=>{if(!x){u([]),v("");return}try{const{data:Ie,error:ut}=await ne.from("nameclub").select("id, name_club").eq("league_i",Number(x));if(ut)throw ut;u(Ie||[]),v("")}catch(Ie){console.error("Error fetching clubs:",Ie.message),u([])}})()},[x]),b.useEffect(()=>{(async()=>{if(!_){Ft("");return}try{console.log("Fetching club name for selectedClub:",_);const{data:Ie,error:ut}=await ne.from("nameclub").select("name_club").eq("id",Number(_)).single();if(ut)throw ut;console.log("Club data retrieved:",Ie),Ft((Ie==null?void 0:Ie.name_club)||""),console.log("Club name set to:",(Ie==null?void 0:Ie.name_club)||"")}catch(Ie){console.error("Error fetching club name:",Ie.message),Ft("")}})()},[_]),b.useEffect(()=>{(async()=>{if(!x){tt("");return}try{console.log("Fetching league name for selectedLeague:",x);const{data:Ie,error:ut}=await ne.from("nameleague").select("name_league").eq("id",Number(x)).single();if(ut)throw ut;console.log("League data retrieved:",Ie),tt((Ie==null?void 0:Ie.name_league)||""),console.log("League name set to:",(Ie==null?void 0:Ie.name_league)||"")}catch(Ie){console.error("Error fetching league name:",Ie.message),tt("")}})()},[x]),b.useEffect(()=>{(async()=>{const{data:Ie}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);Ie!=null&&Ie.length&&i(Ie[0].logo_url)})()},[]);const $e=async()=>{const{data:re}=await ne.from("club_members").select("*");f(re||[])};b.useEffect(()=>{$e()},[]);const me=async re=>{if(!re)return null;const Ie=re.name.split(".").pop(),ut=`${Date.now()}-${Math.random()}.${Ie}`,{error:xe}=await ne.storage.from("logos").upload(ut,re);if(xe)return He(`Upload failed: ${xe.message}`),null;const{data:Se}=ne.storage.from("logos").getPublicUrl(ut);return(Se==null?void 0:Se.publicUrl)??null},Be=async(re,Ie,ut)=>{const{count:xe}=await ne.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",re).eq("club_id",Ie).eq("role",ut);return(xe||0)+1},at=async re=>{var Ie;if(re.preventDefault(),He(""),se(""),!A||!C||!G||!F||!Z||!_||!x||!he||!te){He("Please fill in all required fields.");return}if(B.length!==18){He("National ID must be exactly 18 digits.");return}if(he!==te){He("Passwords do not match.");return}try{const ut=await me(De),xe=await me(be),Se=((Ie=o.find(w=>w.id===parseInt(Z)))==null?void 0:Ie.club_role)||"",Ze=await Be(B,_,Se),lt=new Date().getFullYear(),ar=`${lt}/${lt+1}`,gt={last_name:C,first_name:A,date_of_birth:G,place_of_birth:F,role:Se,blood_type:Y,national_id_number:B,password:he,nationality:ve,grade:P,holder_of:X,photo_url:xe,renewal:Ze,year:ar,confirmation:!1,logo_url:ut,club_id:_,league_id:x,license_number:`LIC-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0]},{error:J}=await ne.from("club_members").insert([gt]);if(J){He(`Failed to save member: ${J.message}`);return}se(`Member "${A} ${C}" added successfully!`),N(""),O(""),V(""),$(""),D(""),ce(""),H(""),Le(""),ye(""),v(""),j(""),ke(null),Ne(null),fe(""),q(""),ae("")}catch(ut){He(`Unexpected error: ${ut.message}`)}},Je=re=>{At(re.id),Oe(re)},ze=()=>{At(null),Oe({})},Gt=(re,Ie)=>{Oe({...We,[Ie]:re.target.value})},qt=async re=>{try{const{error:Ie}=await ne.from("club_members").update(We).eq("id",re);if(Ie)throw Ie;ze(),$e()}catch(Ie){He(Ie.message)}},Qt=async re=>{try{const Ie=new Date(re.registration_date).toISOString().split("T")[0],ut=new Date().toISOString().split("T")[0];if(Ie!==ut){alert("You can only delete members on the same day of registration.");return}const{error:xe}=await ne.from("club_members").delete().eq("id",re.id);if(xe)throw xe;f(Se=>Se.filter(Ze=>Ze.id!==re.id))}catch(Ie){He(Ie.message)}},Ut=async(re,Ie)=>{try{const{error:ut}=await ne.from("club_members").update({confirmation:!Ie}).eq("id",re);if(ut)throw ut;f(xe=>xe.map(Se=>Se.id===re?{...Se,confirmation:!Ie}:Se))}catch(ut){He(`Failed to update confirmation: ${ut.message}`)}},Pe=m.filter(re=>{const Ie=qe.toLowerCase();return re.first_name.toLowerCase().includes(Ie)||re.last_name.toLowerCase().includes(Ie)||re.national_id_number.includes(Ie)}),z=re=>{Te(re)},Te=async re=>{if(!re||Object.keys(re).length===0){alert("No data available to export");return}let Ie=null,ut=null;try{re.club_id&&(Ie=(await An())[re.club_id]),re.league_id&&(ut=(await qn())[re.league_id])}catch(w){console.error("Error fetching names:",w)}const xe=new Dt;xe.internal.pageSize.width,xe.internal.pageSize.height,xe.setFontSize(18),xe.setTextColor(40,40,40),xe.text(a,14,15),xe.setFontSize(16),xe.setTextColor(40,40,40),xe.text(`Athlete Information - ${re.first_name} ${re.last_name}`,14,30),xe.setFontSize(10);const Se=new Date().toLocaleString();if(xe.text(`Generated: ${Se}`,14,37),n)try{xe.addImage(n,"PNG",170,10,25,25)}catch(w){console.error("Error adding federation logo to PDF:",w)}let Ze=45;if(re.photo_url)try{xe.addImage(re.photo_url,"PNG",14,45,25,20),Ze=70}catch(w){console.error("Error adding member photo to PDF:",w),Ze=45}xe.setFontSize(12),re.confirmation?xe.setTextColor(0,128,0):xe.setTextColor(255,0,0);const lt=re.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";xe.text(lt,160,50),xe.setTextColor(0,0,0);const ar=[["Last Name",en(re.last_name)||""],["First Name",en(re.first_name)||""],["Date of Birth",en(re.date_of_birth)||""],["Place of Birth",en(re.place_of_birth)||""],["Role",(()=>{const w=o.find(L=>L.id===re.role_id);return en(w==null?void 0:w.club_role)||"No Role"})()],["Blood type",en(re.blood_type)||""],["National ID",en(re.national_id_number)||""],["Nationality",en(re.nationality)||""],["Grade",en(re.grade)||""],["Genres",en(re.gender)||""],["Categories",en(re.category)||""],["Weight",en(re.weight)||""],["License Number",en(re.license_number)||""],["Registration Date",en(re.registration_date)||""],["Year",en(re.year)||""],["Renewal",en(re.renewal)||""]];vr(xe,{startY:Ze,head:[["Field","Value"]],body:ar,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const gt=xe.lastAutoTable.finalY||200;if(xe.setFontSize(12),xe.setTextColor(0,0,0),xe.text("Medical certificate",14,gt+20),xe.setDrawColor(0),xe.line(14,gt+40,80,gt+40),xe.setFontSize(10),re.club_id||Ie){const w=Ie||`ID: ${re.club_id}`;xe.text(`${w}`,14,gt+60),xe.text("Club Visa: _________________",14,gt+70)}if(re.league_id||ut){const w=ut||`ID: ${re.league_id}`;xe.text(`${w}`,120,gt+60),xe.text("League Visa: _________________",120,gt+70)}try{const w=JSON.stringify({id:re.id,name:`${re.first_name||""} ${re.last_name||""}`.trim(),license:re.license_number||"",club_id:re.club_id||"",league_id:re.league_id||""}),M=await(await pa(async()=>{const{default:ie}=await Promise.resolve().then(()=>Om);return{default:ie}},void 0)).default.toDataURL(w,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});xe.addImage(M,"PNG",180,gt+75,15,15)}catch(w){console.error("Error generating QR code:",w)}const J=`athlete_${re.first_name}_${re.last_name}_${re.id||"record"}.pdf`;xe.save(J)},Qe=(re,Ie=1)=>{var gt,J;const ut=re.internal.pageSize.getWidth(),xe=re.internal.pageSize.getHeight();if(n)try{re.addImage(n,"PNG",ut-40,15,25,25)}catch(w){console.warn("Could not add federation logo:",w)}re.setFontSize(10),re.setFont("helvetica","normal");const Se=new Date().toLocaleDateString();re.text(`Print Date: ${Se}`,15,20);const Ze=c.find(w=>w.id===_);if(Ze!=null&&Ze.logo_club)try{const w=Ze.logo_club.startsWith("http")?Ze.logo_club:`https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/${Ze.logo_club}`;re.addImage(w,"PNG",ut-70,15,25,25)}catch(w){console.warn("Could not add club logo:",w)}re.setFontSize(16),re.setFont("helvetica","bold"),re.text(a,ut/2,30,{align:"center"}),re.setFontSize(12),re.setFont("helvetica","normal");const lt=((gt=d.find(w=>w.id===x))==null?void 0:gt.name_league)||"",ar=((J=c.find(w=>w.id===_))==null?void 0:J.name_club)||"";return re.text(`${Lt(lt)}`,ut/2,35,{align:"center"}),re.text(`${Lt(ar)}`,ut/2,45,{align:"center"}),re.setFontSize(10),re.text(`Page ${Ie}`,ut-20,xe-10,{align:"right"}),45},Xe=re=>re.map(Ie=>{var Se,Ze;const ut=((Se=c.find(lt=>lt.id===Ie.club_id))==null?void 0:Se.name_club)||"",xe=((Ze=d.find(lt=>lt.id===Ie.league_id))==null?void 0:Ze.name_league)||"";return[Lt(Ie.last_name)||"",Lt(Ie.first_name)||"",Lt(Ie.date_of_birth)||"",Lt(Ie.place_of_birth)||"",Lt(Ie.role_name)||"",Lt(Ie.blood_type)||"",Lt(Ie.nationality)||"",Lt(Ie.national_id_number)||"",Lt(Ie.license_number)||"",Lt(Ie.registration_date)||"",Lt(ut),Lt(xe),"",""]}),Pt=async()=>{try{if(console.log("Starting General PDF export..."),await $t(),console.log("Filtered members count:",(Pe==null?void 0:Pe.length)||0),!Pe||Pe.length===0){alert("No member data available to export. Please ensure members are loaded.");return}const re=new Dt("landscape");let Ie=Qe(re);re.setFontSize(14),re.setFont("helvetica","bold"),re.text("Federation Club Members - General Report",re.internal.pageSize.getWidth()/2,Ie+10,{align:"center"});const ut=Xe(Pe);console.log("Table data prepared, rows:",ut.length),vr(re,{head:[["Last Name","First Name","DOB","POB","Role","Blood","Nationality","NID","License #","Registration","Club","League","Club Visa","League Visa"]],body:ut,startY:Ie+20,styles:{fontSize:7,cellPadding:1},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{10:{cellWidth:25},11:{cellWidth:25},12:{cellWidth:20},13:{cellWidth:20}},didDrawPage:Ze=>{Ze.pageNumber>1&&Qe(re,Ze.pageNumber)}});const Se=`federation_club_members_general_${new Date().getFullYear()}.pdf`;console.log("Saving PDF as:",Se),re.save(Se),console.log("General PDF export completed successfully")}catch(re){console.error("Error exporting General PDF:",re),console.error("Error details:",{message:re.message,stack:re.stack,name:re.name}),alert(`Error exporting General PDF: ${re.message}`)}},Zt=async()=>{try{console.log("Starting Grade & Role PDF export..."),await $t(),console.log("Fetching leagues...");const{data:re,error:Ie}=await ne.from("nameleague").select("id, name_league");if(Ie)throw console.error("Error fetching leagues:",Ie),new Error(`Failed to fetch leagues: ${Ie.message}`);if(console.log("Leagues fetched:",(re==null?void 0:re.length)||0),!re||re.length===0){alert("No leagues found");return}re.forEach(ie=>{ie.name_league&&(console.log("Original league name:",ie.name_league),ie.name_league=Lt(ie.name_league),console.log("Sanitized league name:",ie.name_league))}),console.log("Fetching clubs...");const{data:ut,error:xe}=await ne.from("nameclub").select("id, name_club, league_i");if(xe)throw console.error("Error fetching clubs:",xe),new Error(`Failed to fetch clubs: ${xe.message}`);if(console.log("Clubs fetched:",(ut==null?void 0:ut.length)||0),!ut||ut.length===0){alert("No clubs found");return}ut.forEach(ie=>{ie.name_club&&(console.log("Original club name:",ie.name_club),ie.name_club=Lt(ie.name_club),console.log("Sanitized club name:",ie.name_club))}),console.log("Fetching members...");const{data:Se,error:Ze}=await ne.from("club_members").select("*");if(Ze)throw console.error("Error fetching members:",Ze),new Error(`Failed to fetch members: ${Ze.message}`);if(console.log("Members fetched:",(Se==null?void 0:Se.length)||0),!Se||Se.length===0){alert("No members found");return}const lt=new Dt("landscape");let gt=Qe(lt);const J={};console.log("🔍 DEBUG: Starting member processing..."),Se.forEach(ie=>{var Ce,et;const _e=ut.find(E=>E.id===ie.club_id),T=re.find(E=>E.id===(_e==null?void 0:_e.league_i));(Ce=T==null?void 0:T.name_league)!=null&&Ce.includes("%")&&console.log("🔍 DEBUG: Raw league name contains %:",T.name_league),(et=_e==null?void 0:_e.name_club)!=null&&et.includes("%")&&console.log("🔍 DEBUG: Raw club name contains %:",_e.name_club);const Q=T?Lt(T.name_league):"Unknown League",Ge=_e?Lt(_e.name_club):"Unknown Club",de=ie.year||"Unknown Year";J[de]||(J[de]={}),J[de][Q]||(J[de][Q]={}),J[de][Q][Ge]||(J[de][Q][Ge]=[]),J[de][Q][Ge].push(ie)}),lt.setFontSize(16),lt.setFont("helvetica","bold"),lt.text("Club Members - Grade & Role Report",lt.internal.pageSize.getWidth()/2,gt,{align:"center"}),gt+=20,lt.setFontSize(12),lt.setFont("helvetica","bold"),lt.text(Lt("ROLES SECTION"),20,gt),gt+=10;let w=!0;for(const[ie,_e]of Object.entries(J))if(Object.keys(_e).length!==0){w||(lt.addPage(),gt=Qe(lt,lt.internal.getNumberOfPages())+5),w=!1,lt.setFontSize(11),lt.setFont("helvetica","bold"),lt.text(`Year: ${en(ie)}`,20,gt),gt+=15;for(const[T,Q]of Object.entries(_e))if(Object.keys(Q).length!==0){lt.setFontSize(14),lt.setFont("helvetica","bold"),lt.text(`League: ${en(T)}`,35,gt),gt+=12;for(const[Ge,de]of Object.entries(Q)){if(de.length===0)continue;lt.setFontSize(12),lt.setFont("helvetica","bold"),lt.text(`Club: ${en(Ge)}`,50,gt),gt+=10;const Ce={};de.forEach(et=>{const E=o.find(ge=>ge.id===et.role_id),pe=(E==null?void 0:E.club_role)||"No Role";Ce[pe]||(Ce[pe]=[]),Ce[pe].push(et)});for(const[et,E]of Object.entries(Ce)){if(E.length===0)continue;lt.setFontSize(10),lt.setFont("helvetica","bold"),lt.text(`Role: ${Lt(et)}`,65,gt),gt+=6;const pe=E.map(ge=>[Lt(ge.last_name),Lt(ge.first_name),Lt(ge.date_of_birth),Lt(ge.place_of_birth),Lt(ge.blood_type),Lt(ge.nationality),Lt(ge.grade),Lt(ge.holder_of),Lt(ge.nid),Lt(ge.password),Lt(ge.renewal),ge.confirmation?"Yes":"No",Lt(ge.license_number)]);vr(lt,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:pe,startY:gt,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[52,152,219],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),gt=lt.lastAutoTable.finalY+8,gt>180&&(lt.addPage(),gt=Qe(lt,lt.internal.getNumberOfPages())+5)}gt+=8,gt>160&&(lt.addPage(),gt=Qe(lt,lt.internal.getNumberOfPages())+5)}gt+=10}gt+=15}lt.addPage(),gt=Qe(lt,lt.internal.getNumberOfPages()),lt.setFontSize(16),lt.setFont("helvetica","bold"),lt.text("Federation Club Members - Grade & Role Report",lt.internal.pageSize.getWidth()/2,gt,{align:"center"}),gt+=20,lt.setFontSize(12),lt.setFont("helvetica","bold"),lt.text(Lt("GRADES SECTION"),20,gt),gt+=10;let L=!0;for(const[ie,_e]of Object.entries(J))if(Object.keys(_e).length!==0){L||(lt.addPage(),gt=Qe(lt,lt.internal.getNumberOfPages())+5),L=!1,lt.setFontSize(11),lt.setFont("helvetica","bold"),lt.text(`Year: ${Lt(ie)}`,20,gt),gt+=15;for(const[T,Q]of Object.entries(_e))if(Object.keys(Q).length!==0){lt.setFontSize(14),lt.setFont("helvetica","bold"),lt.text(`League: ${Lt(T)}`,35,gt),gt+=12;for(const[Ge,de]of Object.entries(Q)){if(de.length===0)continue;lt.setFontSize(12),lt.setFont("helvetica","bold"),lt.text(`Club: ${Lt(Ge)}`,50,gt),gt+=10;const Ce={};de.forEach(et=>{const E=et.grade||"No Grade";Ce[E]||(Ce[E]=[]),Ce[E].push(et)});for(const[et,E]of Object.entries(Ce)){if(E.length===0)continue;lt.setFontSize(10),lt.setFont("helvetica","bold"),lt.text(`Grade: ${Lt(et)}`,65,gt),gt+=6;const pe=E.map(ge=>{const je=o.find(Me=>Me.id===ge.role_id),ft=(je==null?void 0:je.club_role)||"No Role";return[Lt(ge.last_name),Lt(ge.first_name),Lt(ge.date_of_birth),Lt(ge.place_of_birth),Lt(ge.blood_type),Lt(ge.nationality),Lt(ft),Lt(ge.holder_of),Lt(ge.nid),Lt(ge.password),Lt(ge.renewal),ge.confirmation?"Yes":"No",Lt(ge.license_number),Lt(Ge)]});vr(lt,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Holder Of","NID","Password","Renewal","Confirmation","License #","Club"]],body:pe,startY:gt,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[52,152,219],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),gt=lt.lastAutoTable.finalY+8,gt>180&&(lt.addPage(),gt=Qe(lt,lt.internal.getNumberOfPages())+5)}gt+=8,gt>160&&(lt.addPage(),gt=Qe(lt,lt.internal.getNumberOfPages())+5)}gt+=10}gt+=15}const M=new Date().getFullYear();lt.save(`federation_complete_league_club_report_${M}.pdf`)}catch(re){console.error("Error exporting complete federation report PDF:",re),console.error("Error details:",{message:re.message,stack:re.stack,name:re.name});let Ie="Error exporting PDF: ";re.message.includes("Failed to fetch")?Ie+="Network connection error. Please check your internet connection and try again.":re.message.includes("Failed to fetch leagues")?Ie+="Unable to load league data from database.":re.message.includes("Failed to fetch clubs")?Ie+="Unable to load club data from database.":re.message.includes("Failed to fetch members")?Ie+="Unable to load member data from database.":Ie+=re.message,alert(Ie)}};return b.useEffect(()=>{const re=setTimeout(()=>{},300);return()=>clearTimeout(re)},[qe]),b.useEffect(()=>{(async()=>{if(!x){u([]),v(""),f([]);return}try{ot(!0);const{data:Ie,error:ut}=await ne.from("nameclub").select("id, name_club").eq("league_i",Number(x));if(ut)throw ut;u(Ie||[]),v("");const{data:xe,error:Se}=await ne.from("club_members").select("*").eq("league_id",Number(x));if(Se)throw Se;f(xe||[])}catch(Ie){console.error("Error fetching league data:",Ie),u([]),f([])}finally{ot(!1)}})()},[x]),b.useEffect(()=>{(async()=>{if(!(!x||!_)){ot(!0);try{const{data:Ie,error:ut}=await ne.from("club_members").select("*").eq("league_id",Number(x)).eq("club_id",Number(_));if(ut)throw ut;f(Ie||[])}catch(Ie){console.error("Error fetching members by club:",Ie),f([])}finally{ot(!1)}}})()},[_,x]),s.jsxs("div",{className:"app-container",children:[ht&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[n?s.jsx("img",{src:n,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:a||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{children:"Welcome to the Federation Account"}),s.jsx("p",{children:"This is the Federation Account page."}),s.jsxs("div",{className:"form-table-wrapper",children:[s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx(oc,{"data-id":"1"}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:re=>{pr(re.currentTarget),t("/MemberListPageP")},children:"The Member List Add"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:re=>{pr(re.currentTarget),t("/TheLeagueList-Add")},children:"The League List Add"}),s.jsx("button",{className:"primary-btn","data-id":"4",onClick:re=>{pr(re.currentTarget),t("/TheClubListAdd-Fed")},children:"The Club List Add"}),s.jsx("button",{className:"primary-btn","data-id":"5",onClick:re=>{pr(re.currentTarget),t("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),s.jsx("h2",{className:"form-title",children:"Add Club Member"}),s.jsxs("form",{onSubmit:at,className:"form-grid",children:[s.jsxs("label",{children:["Club Role",s.jsxs("select",{value:Z,onChange:re=>D(re.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Role"}),o.map(re=>s.jsx("option",{value:re.id,children:re.club_role},re.id))]})]}),s.jsxs("label",{children:["League",s.jsxs("select",{value:x,onChange:re=>j(re.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select League"}),d.map(re=>s.jsx("option",{value:re.id,children:re.name_league},re.id))]})]}),s.jsxs("label",{children:["Club",s.jsxs("select",{value:_,onChange:re=>v(re.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Club"}),c.map(re=>s.jsx("option",{value:re.id,children:re.name_club},re.id))]})]}),s.jsxs("label",{children:["Nationality",s.jsxs("select",{value:ve,onChange:re=>fe(re.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]})]}),s.jsxs("label",{children:["Grade",s.jsxs("select",{value:P,onChange:re=>q(re.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Holder of",s.jsx("input",{value:X,onChange:re=>ae(re.target.value)})]}),s.jsxs("label",{children:["Blood Type",s.jsxs("select",{value:Y,onChange:re=>ce(re.target.value),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Last Name",s.jsx("input",{value:C,onChange:re=>N(re.target.value)})]}),s.jsxs("label",{children:["First Name",s.jsx("input",{value:A,onChange:re=>O(re.target.value)})]}),s.jsxs("label",{children:["Date of Birth",s.jsx("input",{type:"date",value:G,onChange:re=>V(re.target.value)})]}),s.jsxs("label",{children:["Place of Birth",s.jsx("input",{value:F,onChange:re=>$(re.target.value)})]}),s.jsxs("label",{children:["National ID",s.jsx("input",{value:B,onChange:re=>H(re.target.value),maxLength:"18"})]}),s.jsxs("label",{children:["Password",s.jsx("input",{type:"password",value:he,onChange:re=>Le(re.target.value)})]}),s.jsxs("label",{children:["Confirm Password",s.jsx("input",{type:"password",value:te,onChange:re=>ye(re.target.value)})]}),s.jsxs("label",{children:["Upload Club Logo",s.jsx("input",{type:"file",onChange:re=>{var Ie;return ke((Ie=re.target.files)==null?void 0:Ie[0])}})]}),s.jsxs("label",{children:["Upload Member Photo",s.jsx("input",{type:"file",onChange:re=>{var Ie;return Ne((Ie=re.target.files)==null?void 0:Ie[0])}})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"primary-b",children:"Save Member"})})]}),s.jsx("h2",{className:"form-title",children:"List Of Clubs Members"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{children:["League:",s.jsxs("select",{value:x,onChange:re=>j(re.target.value),children:[s.jsx("option",{value:"",children:"-- All Leagues --"}),d.map(re=>s.jsx("option",{value:re.id,children:re.name_league},re.id))]})]}),s.jsxs("label",{children:["Club:",s.jsxs("select",{value:_,onChange:re=>v(re.target.value),disabled:!x,children:[s.jsx("option",{value:"",children:"-- All Clubs --"}),c.map(re=>s.jsx("option",{value:re.id,children:re.name_club},re.id))]})]}),s.jsx("p",{children:s.jsx("h2",{className:"form-title",children:"search Club Member"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:qe,onChange:re=>Ke(re.target.value)})})]}),s.jsx("div",{className:"table-container",ref:It,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"holder_of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photos"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"Club ID"}),s.jsx("th",{children:"League ID"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:Pe.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:19,children:"No members found."})}):Pe.map(re=>s.jsxs("tr",{onDoubleClick:Ie=>{if(Date.now()-(window.lastDragEndTime||0)<200){console.log("🚫 Preventing double-click after drag"),Ie.preventDefault(),Ie.stopPropagation();return}z(re)},style:{cursor:"pointer"},children:[s.jsx("td",{children:Et===re.id?s.jsx("input",{value:We.last_name||"",onChange:Ie=>Gt(Ie,"last_name")}):re.last_name}),s.jsx("td",{children:Et===re.id?s.jsx("input",{value:We.first_name||"",onChange:Ie=>Gt(Ie,"first_name")}):re.first_name}),s.jsx("td",{children:Et===re.id?s.jsx("input",{type:"date",value:We.date_of_birth||"",onChange:Ie=>Gt(Ie,"date_of_birth")}):re.date_of_birth}),s.jsx("td",{children:Et===re.id?s.jsx("input",{value:We.place_of_birth||"",onChange:Ie=>Gt(Ie,"place_of_birth")}):re.place_of_birth}),s.jsx("td",{children:Et===re.id?s.jsxs("select",{value:We.role_id||"",onChange:Ie=>Gt(Ie,"role_id"),children:[s.jsx("option",{value:"",children:"-- Select --"}),o.map(Ie=>s.jsx("option",{value:Ie.id,children:Ie.club_role},Ie.id))]}):(()=>{const Ie=o.find(ut=>ut.id===re.role_id);return(Ie==null?void 0:Ie.club_role)||"No Role"})()}),s.jsx("td",{children:Et===re.id?s.jsxs("select",{value:We.blood_type||"",onChange:Ie=>Gt(Ie,"blood_type"),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):re.blood_type}),s.jsx("td",{children:Et===re.id?s.jsxs("select",{value:We.nationality||"",onChange:Ie=>Gt(Ie,"nationality"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]}):re.nationality}),s.jsx("td",{children:Et===re.id?s.jsxs("select",{value:We.grade||"",onChange:Ie=>Gt(Ie,"grade"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]}):re.grade}),s.jsx("td",{children:Et===re.id?s.jsx("input",{value:We.holder_of||"",onChange:Ie=>Gt(Ie,"holder_of")}):re.holder_of}),s.jsx("td",{children:re.national_id_number}),s.jsx("td",{children:re.renewal}),s.jsx("td",{children:re.year}),s.jsx("td",{children:re.license_number}),s.jsx("td",{children:re.registration_date}),s.jsx("td",{children:re.photos_url||re.photo_url?s.jsx("img",{src:rt(re.photos_url||re.photo_url),alt:"Member",style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),s.jsx("td",{children:re.confirmation?"✅":"❌"}),s.jsx("td",{children:re.club_id}),s.jsx("td",{children:re.league_id}),s.jsx("td",{children:Et===re.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-b",onClick:()=>qt(re.id),children:"Save"}),s.jsx("button",{className:"secondary-btn",onClick:ze,children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-b",onClick:()=>Je(re),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>Qt(re),children:"Delete"}),s.jsx("button",{className:re.confirmation?"cancel-btn":"confirm-btn",onClick:()=>Ut(re.id,re.confirmation),children:re.confirmation?"Cancel Confirmation":"Confirm"})]})})]},re.id))})]})}),s.jsx(Pr,{}),s.jsx("button",{className:"primary-b",onClick:Pt,children:"Export General PDF"}),s.jsx("button",{className:"primary-b",onClick:Zt,children:"Export Grade & Role PDF"})]})]}),dt&&s.jsx(En,{error:dt,onClose:()=>He("")}),Fe&&s.jsx(Rn,{success:Fe,onClose:()=>se("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function a8(){b.useEffect(()=>{ti()},[]);const{state:t}=fi(),e=Mr(),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState([]),[c,u]=b.useState(0),[d,g]=b.useState(null),[m,f]=b.useState("Algerian Judo Federation"),[x,j]=b.useState(!0),[_,v]=b.useState(!0),[C,N]=b.useState(null),[A,O]=b.useState(""),[G,V]=b.useState(""),[F,$]=b.useState(""),[Z,D]=b.useState(""),[Y,ce]=b.useState(""),[B,H]=b.useState(""),[he,Le]=b.useState(""),[te,ye]=b.useState(""),[ve,fe]=b.useState(""),[P,q]=b.useState(""),[X,ae]=b.useState(""),[be,Ne]=b.useState(null),[De,ke]=b.useState(""),[qe,Ke]=b.useState(""),[dt,He]=b.useState(""),[Fe,se]=b.useState([]),[Et,At]=b.useState([]),[We,Oe]=b.useState([]),[ht,ot]=b.useState([]),[xt,Ft]=b.useState((t==null?void 0:t.club_id)??""),[Mt,tt]=b.useState((t==null?void 0:t.league_id)??""),[_t,Bt]=b.useState(""),[vt,kt]=b.useState(""),[yt,It]=b.useState(null),[rt,$t]=b.useState({}),[$e,me]=b.useState(""),[Be,at]=b.useState(""),[Je,ze]=b.useState([]),[Gt,qt]=b.useState(""),Qt=Zn();b.useEffect(()=>{(async()=>{const{data:w,error:L}=await ne.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!L&&w&&l(w)})()},[]),b.useEffect(()=>{(async()=>{const{data:w,error:L}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!L&&w.length>0&&g(w[0].logo_url)})()},[]),b.useEffect(()=>{(async()=>{try{const[{data:w,error:L},{data:M,error:ie}]=await Promise.all([ne.from("nameclub").select("id, name_club"),ne.from("nameleague").select("id, name_league")]);L||ie?console.error("Error fetching clubs/leagues:",L||ie):(console.log("Clubs:",w),console.log("Leagues:",M),Oe(w),ot(M))}catch(w){console.error("Unexpected error:",w)}finally{v(!1)}})()},[]),b.useEffect(()=>{(async()=>{if(!(!De||!qe))try{const{data:w,error:L}=await ne.from("categories").select("weight").eq("genres",De).eq("categories",qe);L?console.error("Erreur récupération poids:",L.message):se(w.map(M=>M.weight))}catch(w){console.error("Erreur inconnue:",w)}})()},[De,qe]),b.useEffect(()=>{(async()=>{if(!(!rt.genres||!rt.categories))try{const{data:w,error:L}=await ne.from("categories").select("weight").eq("genres",rt.genres).eq("categories",rt.categories);L?console.error("Erreur récupération poids:",L.message):se(w.map(M=>M.weight))}catch(w){console.error("Erreur inconnue:",w)}})()},[rt.genres,rt.categories]),b.useEffect(()=>{(async()=>{try{const{data:w,error:L}=await ne.from("nameleague").select("id, name_league");if(L)throw L;ot(w||[]);const{data:M,error:ie}=await ne.from("athletes").select("*");if(ie)throw ie;At(M||[]),ze(M||[])}catch(w){console.error(w)}})()},[]),b.useEffect(()=>{(async()=>{if(!$e){Oe([]),at(""),At(Je);return}try{const{data:w,error:L}=await ne.from("nameclub").select("id, name_club").eq("league_id",$e);if(L)throw L;Oe(w||[]),at("");const M=Je.filter(ie=>ie.league_id===Number($e));At(M)}catch(w){console.error(w)}})()},[$e]),b.useEffect(()=>{if(!$e&&!Be){At(Je);return}let J=Je;$e&&(J=J.filter(w=>w.league_id===Number($e))),Be&&(J=J.filter(w=>w.club_id===Number(Be))),At(J)},[$e,Be,Je]);const Ut=async(J,w,L)=>{try{const{count:M,error:ie}=await ne.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",J).eq("club_id",w).eq("league_id",L);return ie?(console.error("getNextRenewal count error",ie),1):(M||0)+1}catch(M){return console.error("getNextRenewal unexpected",M),1}},Pe=async()=>{if(!be)return null;const J=be.name.split(".").pop(),w=`athlete-${Date.now()}.${J}`,{error:L}=await ne.storage.from("logos").upload(w,be);if(L)return console.error("upload error",L),null;const{data:M}=ne.storage.from("logos").getPublicUrl(w);return(M==null?void 0:M.publicUrl)??null},z=(J,w)=>{if(!J||!w)return{isValid:!1,message:"Date of birth and category are required."};const L=new Date(J),M=new Date,ie=M.getFullYear()-L.getFullYear()-(M.getMonth()<L.getMonth()||M.getMonth()===L.getMonth()&&M.getDate()<L.getDate()?1:0),T={Poussins:{min:9,max:10},Benjamins:{min:11,max:12},Minimes:{min:13,max:14},Cadets:{min:15,max:17},Juniors:{min:15,max:20},Hopefuls:{min:15,max:17},Seniors:{min:15,max:35},Veterans:{min:36,max:150}}[w];return T?ie<T.min||ie>T.max?w==="Veterans"?{isValid:!1,message:`For ${w} category, athlete must be more than 35 years old. Current age: ${ie}`}:{isValid:!1,message:`For ${w} category, athlete must be between ${T.min} and ${T.max} years old. Current age: ${ie}`}:{isValid:!0,message:""}:{isValid:!1,message:`Unknown category: ${w}`}},Te=async J=>{if(J.preventDefault(),n(""),a(""),!/^\d{18}$/.test(he)){alert("National ID Number must be exactly 18 digits (numbers only).");return}if(te!==ve){alert("Passwords do not match.");return}if(!$e||!Be){n("Club and League must be set before adding a member.");return}if(!G||!A||!F||!Z||!roleId||!te||!ve){n("Please fill in all required fields.");return}const w=z(F,qe);if(!w.isValid){n(w.message);return}const L=new Date().getFullYear(),M=`${L}/${L+1}`;try{const{data:ie,error:_e}=await ne.from("athletes").select("id, first_name, last_name, national_id_number").eq("national_id_number",he).eq("year",M);if(_e)throw _e;if(ie&&ie.length>0){n("An athlete with this National ID is already registered for this season.");return}const{data:T,error:Q}=await ne.from("athletes").select("id, first_name, last_name, national_id_number").eq("first_name",G).eq("last_name",A).eq("year",M);if(Q)throw Q;if(T&&T.length>0){const Ge=T[0];if(Ge.national_id_number!==he){n(`Athlete ${G} ${A} is already registered for this season with a different National ID (${Ge.national_id_number}). Please use the same National ID for renewal.`);return}}}catch(ie){n(ie.message||String(ie));return}try{v(!0);const ie=await Pe(),_e=await Ut(he,xt,Mt),T={last_name:A,first_name:G,date_of_birth:F,place_of_birth:Z,role:Y,blood_type:B,national_id_number:he,password:te,license_number:`ATH-${L}-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0],photos_url:ie,nationality:P,grade:X,renewal:_e,confirmation:!1,genres:De,categories:qe,weight:dt,league_id:$e,club_id:Be,year:M},{error:Q}=await ne.from("athletes").insert([T]);Q?(console.error("insert athlete error",Q),alert("Error saving athlete: "+Q.message)):(O(""),V(""),$(""),D(""),ce(""),H(""),Le(""),ye(""),fe(""),q(""),ae(""),ke(""),Ke(""),He(""),Ne(null),await fetchData())}catch(ie){console.error("handleSubmit error",ie),alert("Unexpected error: "+ie.message)}finally{v(!1)}},Qe=J=>{It(J.id),$t({...J})},Xe=()=>{It(null),$t({})},Pt=async()=>{const J=z(rt.date_of_birth,rt.categories);if(!J.isValid){alert(J.message);return}const w=new Date().getFullYear(),L=`${w}/${w+1}`;try{const{data:ie,error:_e}=await ne.from("athletes").select("id, first_name, last_name, national_id_number").eq("first_name",rt.first_name).eq("last_name",rt.last_name).eq("year",L).neq("id",yt);if(_e){alert("Error checking athlete data: "+_e.message);return}if(ie&&ie.length>0){const T=ie[0];if(T.national_id_number!==rt.national_id_number){alert(`Athlete ${rt.first_name} ${rt.last_name} is already registered for this season with a different National ID (${T.national_id_number}). Please use the same National ID for renewal.`);return}}}catch(ie){alert("Error validating renewal: "+(ie.message||String(ie)));return}const{error:M}=await ne.from("athletes").update({last_name:rt.last_name,first_name:rt.first_name,date_of_birth:rt.date_of_birth,place_of_birth:rt.place_of_birth,role:rt.role,blood_type:rt.blood_type,nationality:rt.nationality,grade:rt.grade,categories:rt.categories,weight:rt.weight,genres:rt.genres}).eq("id",yt);M?alert("Update failed: "+M.message):(await fetchData(),Xe())},Zt=async J=>{const w=new Date().toISOString().split("T")[0];if(J.registration_date!==w){alert("You can only delete athletes the same day they were added.");return}if(window.confirm("Delete this athlete?"))try{const{error:L}=await ne.from("athletes").delete().eq("id",J.id);if(L)throw L;await fetchData()}catch(L){console.error("deleteAthlete error",L),alert("Error deleting athlete: "+L.message)}},re=["Admin","Coach","Athlete"],Ie=["Algerian","Tunisian"],ut=["brown belt","black belt"],xe=async(J,w)=>{try{const{error:L}=await ne.from("athletes").update({confirmation:!w}).eq("id",J);if(L)throw L;At(M=>M.map(ie=>ie.id===J?{...ie,confirmation:!w}:ie))}catch(L){n(`Failed to update athlete confirmation: ${L.message}`)}},Se=Et.filter(J=>{const w=Gt.toLowerCase();return J.first_name.toLowerCase().includes(w)||J.last_name.toLowerCase().includes(w)||J.national_id_number.includes(w)}),Ze=J=>{if(!J||Object.keys(J).length===0){alert("No data available to export");return}lt(J)},lt=async J=>{let w=null,L=null;try{J.club_id&&(w=(await An())[J.club_id]),J.league_id&&(L=(await qn())[J.league_id])}catch(Ce){console.error("Error fetching names:",Ce)}const M=new Dt("portrait","mm","a4");M.setFontSize(18),M.setTextColor(40,40,40),M.text("Algerian Judo Federation",14,15);const ie=`Athlete Information - ${J.first_name} ${J.last_name}`;M.setFontSize(16),M.setTextColor(40,40,40),M.text(ie,14,30),M.setFontSize(10);const _e=new Date().toLocaleString();if(M.text(`Generated: ${_e}`,14,37),d)try{M.addImage(d,"PNG",170,10,25,25)}catch(Ce){console.error("Error adding logo to PDF:",Ce)}let T=45;if(J.photos_url)try{M.addImage(J.photos_url,"PNG",14,45,25,20),T=70}catch(Ce){console.error("Error adding photo to PDF:",Ce),T=45}M.setFontSize(12),J.confirmation?M.setTextColor(0,128,0):M.setTextColor(255,0,0);const Q=J.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";M.text(Q,160,50);const Ge=[["First Name",J.first_name||""],["Last Name",J.last_name||""],["Date of Birth",J.date_of_birth||""],["Place of Birth",J.place_of_birth||""],["National ID",J.national_id_number||""],["Nationality",J.nationality||""],["Blood Type",J.blood_type||""],["Grade",J.grade||""],["Role",J.role||""],["Gender",J.genres||""],["Category",J.categories||""],["Weight",J.weight||""],["License Number",J.license_number||""],["Registration Date",J.registration_date||""],["Year",J.year||""],["Renewal",J.renewal||""],["Club",w||`Club ID: ${J.club_id}`],["League",L||`League ID: ${J.league_id}`],["Confirmation",J.confirmation?"Confirmed":"Not Confirmed"]];vr(M,{head:[["Field","Value"]],body:Ge,startY:T,theme:"grid",headStyles:{fillColor:[220,53,69]},styles:{fontSize:10},columnStyles:{0:{cellWidth:50},1:{cellWidth:120}}});const de=M.lastAutoTable.finalY||200;if(M.setFontSize(12),M.setTextColor(0,0,0),M.text("Medical certificate",14,de+10),M.setDrawColor(0),M.line(14,de+25,80,de+25),M.setFontSize(10),J.club_id||w){const Ce=w||`ID: ${J.club_id}`;M.text(`Club: ${Ce}`,14,de+40),M.text("Club Visa: _________________",14,de+50)}if(J.league_id||L){const Ce=L||`ID: ${J.league_id}`;M.text(`League: ${Ce}`,120,de+40),M.text("League Visa: _________________",120,de+50)}try{const Ce=JSON.stringify({id:J.id,name:`${J.first_name||""} ${J.last_name||""}`.trim(),license:J.license_number||"",club_id:J.club_id||"",league_id:J.league_id||"",confirmation:J.confirmation||"Unconfirmed"}),et=await ui.toDataURL(Ce,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});M.addImage(et,"PNG",170,de+55,15,15)}catch(Ce){console.error("Error generating QR code:",Ce)}M.save(`athlete_${J.first_name}_${J.last_name}.pdf`)},ar=async()=>{if(!Se||Se.length===0){alert("No athletes data available to export");return}const J=new Dt("landscape","mm","a4"),w=new Date().getFullYear();if(J.setFontSize(18),J.setTextColor(40,40,40),J.text("Algerian Judo Federation",14,15),J.setFontSize(14),J.text(`Year: ${w}`,14,25),d)try{J.addImage(d,"PNG",250,10,25,25)}catch(_e){console.error("Error adding logo to PDF:",_e)}J.setFontSize(16),J.text("General Athletes List",14,35);let L={},M={};try{L=await An(),M=await qn()}catch(_e){console.error("Error fetching club/league names:",_e)}const ie=Se.map(_e=>[_e.last_name||"",_e.first_name||"",_e.date_of_birth||"",_e.place_of_birth||"",_e.role||"",_e.blood_type||"",_e.national_id_number||"",_e.nationality||"",_e.grade||"",_e.renewal||"",_e.year||"",_e.genres||"",_e.categories||"",_e.weight||"",_e.license_number||"",_e.registration_date||"",_e.confirmation?"Yes":"No",L[_e.club_id]||`Club ID: ${_e.club_id}`,M[_e.league_id]||`League ID: ${_e.league_id}`]);vr(J,{head:[["Last","First","DOB","POB","Role","Blood","NID","Nationality","Grade","Renewal","Year","Gender","Category","Weight","License #","Registration","Confirmed","Club","League"]],body:ie,startY:45,theme:"grid",headStyles:{fillColor:[220,53,69]},styles:{fontSize:8},columnStyles:{0:{cellWidth:15},1:{cellWidth:15},2:{cellWidth:12},3:{cellWidth:15},4:{cellWidth:10},5:{cellWidth:8},6:{cellWidth:15},7:{cellWidth:12},8:{cellWidth:10},9:{cellWidth:12},10:{cellWidth:8},11:{cellWidth:10},12:{cellWidth:12},13:{cellWidth:10},14:{cellWidth:15},15:{cellWidth:15},16:{cellWidth:10},17:{cellWidth:20},18:{cellWidth:20}}}),J.save(`general_athletes_list_${w}.pdf`)},gt=async()=>{if(!Se||Se.length===0){alert("No athletes data available to export");return}const J=new Dt("landscape","mm","a4"),w=new Date().getFullYear(),L=()=>{if(J.setFontSize(18),J.setTextColor(40,40,40),J.text("Algerian Judo Federation",14,15),J.setFontSize(14),J.text(`Year: ${w}`,14,25),d)try{J.addImage(d,"PNG",250,10,25,25)}catch(de){console.error("Error adding logo to PDF:",de)}J.setFontSize(16),J.text("Athletes List - Hierarchical by Category",14,35)};L();let M={},ie={};try{M=await An(),ie=await qn()}catch(de){console.error("Error fetching club/league names:",de)}const _e=Se.reduce((de,Ce)=>{const et=Ce.categories||"Uncategorized",E=Ce.genres||"Unspecified",pe=Ce.weight||"No Weight";return de[et]||(de[et]={}),de[et][E]||(de[et][E]={}),de[et][E][pe]||(de[et][E][pe]=[]),de[et][E][pe].push(Ce),de},{}),T=de=>de.map(Ce=>[Ce.last_name||"",Ce.first_name||"",Ce.date_of_birth||"",Ce.national_id_number||"",Ce.nationality||"",Ce.grade||"",Ce.license_number||"",Ce.confirmation?"Yes":"No",M[Ce.club_id]||`Club ID: ${Ce.club_id}`,ie[Ce.league_id]||`League ID: ${Ce.league_id}`]);let Q=45,Ge=!0;Object.entries(_e).forEach(([de,Ce])=>{Ge||(J.addPage(),L(),Q=45),Ge=!1,J.setFontSize(16),J.setTextColor(220,53,69),J.text(`CATEGORY: ${de}`,14,Q),Q+=15,Object.entries(Ce).forEach(([et,E])=>{J.setFontSize(14),J.setTextColor(0,123,255),J.text(`  Gender: ${et}`,20,Q),Q+=10,Object.entries(E).forEach(([pe,ge])=>{J.setFontSize(12),J.setTextColor(40,167,69),J.text(`    Weight: ${pe}`,30,Q),Q+=5,Q>180&&(J.addPage(),L(),Q=45,J.setFontSize(14),J.setTextColor(220,53,69),J.text(`CATEGORY: ${de} (continued)`,14,Q),Q+=10,J.setTextColor(0,123,255),J.text(`  Gender: ${et} (continued)`,20,Q),Q+=10,J.setTextColor(40,167,69),J.text(`    Weight: ${pe} (continued)`,30,Q),Q+=5);const je=T(ge);vr(J,{head:[["Last Name","First Name","DOB","NID","Nationality","Grade","License #","Confirmed","Club","League"]],body:je,startY:Q,margin:{left:35},theme:"grid",headStyles:{fillColor:[40,167,69],fontSize:9},styles:{fontSize:8,cellPadding:2},columnStyles:{0:{cellWidth:20},1:{cellWidth:20},2:{cellWidth:18},3:{cellWidth:25},4:{cellWidth:18},5:{cellWidth:15},6:{cellWidth:20},7:{cellWidth:15},8:{cellWidth:30},9:{cellWidth:30}}}),Q=J.lastAutoTable.finalY+10}),Q+=5}),Q+=10}),J.save(`athletes_hierarchical_${w}.pdf`)};return b.useEffect(()=>{const J=setTimeout(()=>{},300);return()=>clearTimeout(J)},[Gt]),b.useEffect(()=>{xt&&Mt&&fetchData()},[xt,Mt]),s.jsxs("div",{className:"app-container",children:[_&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[d?s.jsx("img",{src:d,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:m||"Algerian Judo Federation"})]})})}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{children:"Welcome to the Federation Account"}),s.jsx("p",{children:"This is the Federation Account page."}),s.jsxs("div",{className:"form-table-wrapper",children:[s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx(oc,{"data-id":"1"}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:()=>e("/MemberListPageP"),children:"The Member List Add"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:J=>{pr(J.currentTarget),e("/TheLeagueList-Add",{state:{...t,league_id:(t==null?void 0:t.league_id)??$e??"",league_name:(t==null?void 0:t.league_name)??"",league_logo:(t==null?void 0:t.league_logo)??""}})},children:"The League List Add"}),s.jsx("button",{className:"primary-btn","data-id":"4",onClick:J=>{pr(J.currentTarget),e("/TheClubListAdd-Fed")},children:"The Club List Add"}),s.jsx("button",{className:"primary-btn","data-id":"5",onClick:J=>{pr(J.currentTarget),e("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),s.jsx("h2",{className:"form-title",children:"Add Athlete"}),s.jsxs("form",{onSubmit:Te,className:"form-grid",children:[s.jsxs("label",{children:["Last Name",s.jsx("input",{value:A,onChange:J=>O(J.target.value),required:!0})]}),s.jsxs("label",{children:["First Name",s.jsx("input",{value:G,onChange:J=>V(J.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth",s.jsx("input",{type:"date",value:F,onChange:J=>$(J.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth",s.jsx("input",{value:Z,onChange:J=>D(J.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality",s.jsxs("select",{value:P,onChange:J=>q(J.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),Ie.map((J,w)=>s.jsx("option",{value:J,children:J},w))]})]}),s.jsxs("label",{children:["Grade",s.jsxs("select",{value:X,onChange:J=>ae(J.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),ut.map((J,w)=>s.jsx("option",{value:J,children:J},w))]})]}),s.jsxs("label",{children:["Genres",s.jsxs("select",{value:De,onChange:J=>ke(J.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Men",children:"Men"}),s.jsx("option",{value:"Women",children:"Women"})]})]}),s.jsxs("label",{children:["Categories",s.jsxs("select",{value:qe,onChange:J=>Ke(J.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Benjamins",children:"Benjamins"}),s.jsx("option",{value:"Minimes",children:"Minimes"}),s.jsx("option",{value:"Cadets",children:"Cadets"}),s.jsx("option",{value:"Juniors",children:"Juniors"}),s.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),s.jsx("option",{value:"Seniors",children:"Seniors"}),s.jsx("option",{value:"Veterans",children:"Veterans"}),s.jsx("option",{value:"Cadets By Team",children:"Cadets By Team"}),s.jsx("option",{value:"Juniors By Team",children:"Juniors By Team"}),s.jsx("option",{value:"Seniors By Team",children:"Seniors By Team"}),s.jsx("option",{value:"Cadets By Mixed Team",children:"Cadets By Mixed Team"}),s.jsx("option",{value:"Juniors By Mixed Team",children:"Juniors By Mixed Team"}),s.jsx("option",{value:"Seniors By Mixed Team",children:"Seniors By Mixed Team"})]})]}),s.jsxs("label",{children:["Weight",s.jsxs("select",{value:dt,onChange:J=>He(J.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),Fe.map((J,w)=>s.jsx("option",{value:J,children:J},w))]})]}),s.jsxs("label",{children:["National ID Number",s.jsx("input",{value:he,onChange:J=>Le(J.target.value.replace(/\D/g,"")),maxLength:18,required:!0}),s.jsx("small",{children:"18 digits required"})]}),s.jsxs("label",{children:["Blood Type",s.jsxs("select",{value:B,onChange:J=>H(J.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Password",s.jsx("input",{type:"password",value:te,onChange:J=>ye(J.target.value)})]}),s.jsxs("label",{children:["Confirm Password",s.jsx("input",{type:"password",value:ve,onChange:J=>fe(J.target.value)})]}),s.jsxs("label",{children:["League:",s.jsxs("select",{value:$e,onChange:J=>{me(J.target.value),at("")},required:!0,children:[s.jsx("option",{value:"",children:"-- Select League --"}),ht.map(J=>s.jsx("option",{value:J.id,children:J.name_league},J.id))]})]}),s.jsxs("label",{children:["Club:",s.jsxs("select",{value:Be,onChange:J=>at(J.target.value),disabled:!$e,required:!0,children:[s.jsx("option",{value:"",children:"-- Select Club --"}),We.map(J=>s.jsx("option",{value:J.id,children:J.name_club},J.id))]})]}),s.jsxs("label",{children:["Upload Athlete Photo",s.jsx("input",{type:"file",onChange:J=>{var w;return Ne(((w=J.target.files)==null?void 0:w[0])??null)}})]}),s.jsxs("div",{className:"btn-row",children:[s.jsx("button",{type:"submit",className:"primary-b",children:"Save Athlete"}),s.jsx(Pr,{})]})]}),s.jsx("h2",{className:"form-title",children:"List Of Athletes"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{children:["League:",s.jsxs("select",{value:$e,onChange:J=>me(J.target.value),children:[s.jsx("option",{value:"",children:"-- All Leagues --"}),ht.map(J=>s.jsx("option",{value:J.id,children:J.name_league},J.id))]})]}),s.jsxs("label",{children:["Club:",s.jsxs("select",{value:Be,onChange:J=>at(J.target.value),disabled:!$e,children:[s.jsx("option",{value:"",children:"-- All Clubs --"}),We.map(J=>s.jsx("option",{value:J.id,children:J.name_club},J.id))]})]}),s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"search Athlete"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:Gt,onChange:J=>qt(J.target.value)})}),s.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",justifyContent:"flex-end"},children:[s.jsx("button",{onClick:ar,disabled:_||Se.length===0,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:_||Se.length===0?"not-allowed":"pointer",opacity:_||Se.length===0?.6:1,fontSize:"14px"},children:_?"Exporting...":"Export PDF (General)"}),s.jsx("button",{onClick:gt,disabled:_||Se.length===0,style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:_||Se.length===0?"not-allowed":"pointer",opacity:_||Se.length===0?.6:1,fontSize:"14px"},children:_?"Exporting...":"Export PDF (by Category)"})]})]}),s.jsx("div",{className:"table-container",ref:Qt,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"Genres"}),s.jsx("th",{children:"Categories"}),s.jsx("th",{children:"Weight"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photos"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"Club ID"}),s.jsx("th",{children:"League ID"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:Et.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:21,children:"No athletes found for this club/league."})}):Et.map(J=>s.jsxs("tr",{onClick:()=>Ze(J),style:{cursor:"pointer"},children:[s.jsx("td",{children:yt===J.id?s.jsx("input",{value:rt.last_name||"",onChange:w=>handleChange(w,"last_name")}):J.last_name}),s.jsx("td",{children:yt===J.id?s.jsx("input",{value:rt.first_name||"",onChange:w=>$t({...rt,first_name:w.target.value})}):J.first_name}),s.jsx("td",{children:yt===J.id?s.jsx("input",{type:"date",value:rt.date_of_birth||"",onChange:w=>$t({...rt,date_of_birth:w.target.value})}):J.date_of_birth}),s.jsx("td",{children:yt===J.id?s.jsx("input",{value:rt.place_of_birth||"",onChange:w=>$t({...rt,place_of_birth:w.target.value})}):J.place_of_birth}),s.jsx("td",{children:yt===J.id?s.jsxs("select",{value:rt.role||"",onChange:w=>$t({...rt,role:w.target.value}),children:[s.jsx("option",{value:"",children:"-- Select --"}),re.map((w,L)=>s.jsx("option",{value:typeof w=="object"?w.club_role??w.name??"":w,children:typeof w=="object"?w.club_role??w.name??"":w},L))]}):J.role}),s.jsx("td",{children:yt===J.id?s.jsxs("select",{value:rt.blood_type||"",onChange:w=>$t({...rt,blood_type:w.target.value}),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):J.blood_type}),s.jsx("td",{children:J.national_id_number}),s.jsx("td",{children:yt===J.id?s.jsxs("select",{value:rt.nationality||"",onChange:w=>$t({...rt,nationality:w.target.value}),children:[s.jsx("option",{value:"",children:"-- Select --"}),Ie.map((w,L)=>s.jsx("option",{value:w,children:w},L))]}):J.nationality}),s.jsx("td",{children:yt===J.id?s.jsxs("select",{value:rt.grade||"",onChange:w=>$t({...rt,grade:w.target.value}),children:[s.jsx("option",{value:"",children:"-- Select --"}),ut.map((w,L)=>s.jsx("option",{value:w,children:w},L))]}):J.grade}),s.jsx("td",{children:J.renewal}),s.jsx("td",{children:J.year}),s.jsx("td",{children:yt===J.id?s.jsxs("select",{value:rt.genres||"",onChange:w=>{$t({...rt,genres:w.target.value,weight:""})},children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Men",children:"Men"}),s.jsx("option",{value:"Women",children:"Women"})]}):J.genres}),s.jsx("td",{children:yt===J.id?s.jsxs("select",{value:rt.categories||"",onChange:w=>{$t({...rt,categories:w.target.value,weight:""})},children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"Benjamins",children:"Benjamins"}),s.jsx("option",{value:"Minimes",children:"Minimes"}),s.jsx("option",{value:"Cadets",children:"Cadets"}),s.jsx("option",{value:"Juniors",children:"Juniors"}),s.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),s.jsx("option",{value:"Seniors",children:"Seniors"}),s.jsx("option",{value:"Veterans",children:"Veterans"})]}):J.categories}),s.jsx("td",{children:yt===J.id?s.jsxs("select",{value:rt.weight||"",onChange:w=>$t({...rt,weight:w.target.value}),disabled:!rt.genres||!rt.categories,children:[s.jsx("option",{value:"",children:"-- Select --"}),Fe.map((w,L)=>s.jsx("option",{value:w,children:w},L))]}):J.weight}),s.jsx("td",{children:J.license_number}),s.jsx("td",{children:J.registration_date}),s.jsx("td",{children:J.photos_url?s.jsx("img",{src:J.photos_url,alt:`${J.first_name} ${J.last_name}`,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"8px"}}):"No Photo"}),s.jsx("td",{children:J.confirmation?"✅":"❌"}),s.jsx("td",{children:J.club_id}),s.jsx("td",{children:J.league_id}),s.jsx("td",{children:yt===J.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-b",onClick:Pt,children:"Save"}),s.jsx("button",{className:"secondary-btn",onClick:Xe,children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-b",onClick:()=>Qe(J),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>Zt(J.id),children:"Delete"}),s.jsx("button",{className:J.confirmation?"cancel-btn":"confirm-btn",onClick:()=>xe(J.id,J.confirmation),children:J.confirmation?"Cancel Confirmation":"Confirm"})]})})]},J.id))})]})})]})]}),r&&s.jsx(En,{error:r.message||r,onClose:()=>n("")}),i&&s.jsx(Rn,{success:i,onClose:()=>a("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function s8(){b.useEffect(()=>{ti()},[]);const[t,e]=b.useState([]),[r,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(""),[d,g]=b.useState(""),[m,f]=b.useState(""),[x,j]=b.useState(""),[_,v]=b.useState(""),[C,N]=b.useState(""),[A,O]=b.useState(null),[G,V]=b.useState(null),[F,$]=b.useState(""),[Z,D]=b.useState(""),[Y,ce]=b.useState(""),[B,H]=b.useState(""),[he,Le]=b.useState(!1),[te,ye]=b.useState(!1),[ve,fe]=b.useState(null),[P,q]=b.useState({}),[X,ae]=b.useState([]),[be,Ne]=b.useState(null),[De,ke]=b.useState(!0),[qe,Ke]=b.useState(null),[dt,He]=b.useState(""),[Fe,se]=b.useState(null),[Et,At]=b.useState("Algerian Judo Federation"),[We,Oe]=b.useState([]),[ht,ot]=b.useState(""),xt=Mr(),Ft=Zn();b.useEffect(()=>{(async()=>{const{data:Te,error:Qe}=await ne.from("nameleague").select("*");!Qe&&Te&&ae(Te),ke(!1)})()},[]),b.useEffect(()=>{(async()=>{const{data:Te,error:Qe}=await ne.from("leaguerole").select("*");!Qe&&Te&&Oe(Te)})()},[]),b.useEffect(()=>{(async()=>{if(!B){ke(!1);return}const{data:Te,error:Qe}=await ne.from("league_members").select("*").eq("league_id",Number(B));Qe?Ke(`Error fetching members: ${Qe.message}`):e(Te||[]),ke(!1)})()},[B]);const Mt=async()=>{try{ke(!0),Ke(null);const{data:z,error:Te}=await ne.from("league_members").select("*").order("id",{ascending:!1});Te?Ke(Te):(e(z||[]),He(`Loaded ${(z==null?void 0:z.length)||0} league members`))}catch(z){Ke(z)}finally{ke(!1)}};b.useEffect(()=>{Mt()},[]),b.useEffect(()=>{(async()=>{const{data:Te,error:Qe}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!Qe&&Te&&Te.length>0&&se(tt(Te[0].logo_url)||Te[0].logo_url)})()},[]);const tt=z=>z?z.startsWith("http")?z:`${ne.storageUrl}/object/public/logos/${z}`:null,_t=(Array.isArray(t)?t:[]).filter(z=>{if(B&&String(z.league_id)!==String(B))return!1;const Te=(ht||"").trim().toLowerCase();return Te?[z.first_name,z.last_name,z.national_id_number,z.club_name,z.role,z.grade].filter(Xe=>Xe!=null).some(Xe=>String(Xe).toLowerCase().includes(Te)):!0}),Bt=z=>{const Te=z.registration||z.registration_date||"";return[Lt(z.last_name||""),Lt(z.first_name||""),Lt(z.date_of_birth||""),Lt(z.place_of_birth||""),Lt(z.role||""),Lt(z.blood_type||""),Lt(z.nationality||""),Lt(z.grade||""),Lt(z.holder_of||""),Lt(z.national_id_number||""),Lt(z.renewal||""),Lt(z.license_number||""),Lt(Te),z.confirmation?"Yes":"No",Lt(z.password||""),String(z.league_id||"")]},vt=z=>{const Te=z.internal.pageSize.width;z.internal.pageSize.height;try{Fe?z.addImage(Fe,"PNG",Te-50,10,30,30):Zi&&z.addImage(Zi,"PNG",Te-50,10,30,30)}catch(Xe){console.warn("Could not add logo to PDF header:",Xe)}const Qe=new Date().toLocaleDateString();return z.setFontSize(10),z.setFont("helvetica","normal"),z.text(`Print Date: ${Qe}`,14,18),z.setFontSize(16),z.setFont("helvetica","bold"),z.text("Algerian Judo Federation",Te/2,24,{align:"center"}),40},kt=z=>[Lt(z.last_name||""),Lt(z.first_name||""),Lt(z.date_of_birth||""),Lt(z.place_of_birth||""),Lt(z.blood_type||""),Lt(z.nationality||""),Lt(z.grade||""),Lt(z.role||""),Lt(z.holder_of||""),Lt(z.national_id_number||""),Lt(z.renewal||""),z.confirmation?"Yes":"No",Lt(z.license_number||""),Lt(z.club_name||"")],yt=async()=>{const z=Number(B);try{let Te=Array.isArray(t)?t.slice():[];if(z&&!isNaN(z)&&(Te=Te.filter(xe=>String(xe.league_id)===String(z))),!Te||Te.length===0){alert("No members found");return}const Qe=new Dt("landscape"),Xe=xe=>{const Se=X.find(Ze=>String(Ze.id)===String(xe));return Lt((Se==null?void 0:Se.name_league)||`League ${xe}`)},Pt=["Last","First","DOB","POB","Role","Blood","Nationality","Grade","Holder Of","NID","Renewal","License #","Registration","Confirmation","Password","League ID"],Zt={};Te.forEach(xe=>{const Se=xe.league_id||"Unknown League";Zt[Se]||(Zt[Se]=[]),Zt[Se].push(xe)});const re=Object.keys(Zt);re.forEach((xe,Se)=>{let Ze=vt(Qe);Qe.setFontSize(14),Qe.setFont("helvetica","bold"),Qe.setTextColor(255,0,0),Qe.text("League Members - General Situation",Qe.internal.pageSize.getWidth()/2,Ze,{align:"center"}),Qe.setTextColor(0,0,0),Ze+=20;const lt=Xe(xe);Qe.setFontSize(12),Qe.setFont("helvetica","bold"),Qe.text(`${lt}`,14,Ze),Ze+=8;const ar=Zt[xe],gt={};ar.forEach(w=>{const L=w.year?String(w.year):"Unknown Year";gt[L]||(gt[L]=[]),gt[L].push(w)});const J=Object.keys(gt).sort();J.forEach((w,L)=>{Qe.setFontSize(11),Qe.setFont("helvetica","bold"),Qe.text(`Year: ${w}`,14,Ze),Ze+=8;const M=gt[w];vr(Qe,{head:[Pt],body:M.map(Bt),startY:Ze,styles:{fontSize:8},headStyles:{fillColor:[0,128,0],textColor:[255,255,255]},margin:{left:14,right:10}}),Ze=Qe.lastAutoTable.finalY+10,Ze>Qe.internal.pageSize.getHeight()-50&&L<J.length-1&&(Qe.addPage(),Ze=vt(Qe),Qe.setFontSize(14),Qe.setFont("helvetica","bold"),Qe.setTextColor(255,0,0),Qe.text("League Members - General Situation",Qe.internal.pageSize.getWidth()/2,Ze,{align:"center"}),Qe.setTextColor(0,0,0),Ze+=20,Qe.setFontSize(12),Qe.setFont("helvetica","bold"),Qe.text(`${lt}`,14,Ze),Ze+=8)}),Se<re.length-1&&Qe.addPage()});const Ie=new Date().getFullYear(),ut=!z||isNaN(z)?`league_all_general_members_${Ie}.pdf`:`league_general_members_${Ie}.pdf`;Qe.save(ut)}catch(Te){console.error("Error exporting general PDF:",Te),alert("Error exporting PDF. Please try again.")}},It=async()=>{ke(!0),Ke(null);try{const{data:z,error:Te}=await ne.from("league_members").select("*");if(Te)throw Te;if(!z||z.length===0){alert("No league members found"),ke(!1);return}const Qe={};z.forEach(ut=>{const xe=ut.league_id||"Unknown League";Qe[xe]||(Qe[xe]=[]),Qe[xe].push(ut)});const Xe=new Dt("landscape"),Pt=ut=>{const xe=X.find(Se=>String(Se.id)===String(ut));return Lt((xe==null?void 0:xe.name_league)||`League ${ut}`)},Zt=(ut,xe)=>{const Se=Pt(ut);let Ze=vt(Xe);Xe.setFontSize(14),Xe.setFont("helvetica","bold"),Xe.setTextColor(255,0,0),Xe.text("League Members - Grade and Role Situation",Xe.internal.pageSize.getWidth()/2,Ze,{align:"center"}),Xe.setTextColor(0,0,0),Ze+=20,Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`${Se}`,14,Ze),Ze+=12;const lt={};xe.forEach(gt=>{const J=gt.club_name||"No Club";lt[J]||(lt[J]=[]),lt[J].push(gt)});const ar=Object.keys(lt).sort();ar.forEach((gt,J)=>{const w=lt[gt],L={};w.forEach(ie=>{const _e=ie.year||"Unknown Year";L[_e]||(L[_e]=[]),L[_e].push(ie)}),Object.keys(L).sort().forEach((ie,_e)=>{Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`${Lt(gt)}   Year ${Lt(ie)}`,14,Ze),Ze+=10;const T=L[ie],Q={};T.forEach(de=>{const Ce=de.role||"No Role";Q[Ce]||(Q[Ce]=[]),Q[Ce].push(de)}),Object.entries(Q).forEach(([de,Ce])=>{Ce.length&&(Xe.setFontSize(11),Xe.setFont("helvetica","bold"),Xe.text(`Role: ${Lt(de)}`,18,Ze),Ze+=6,vr(Xe,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #","Club"]],body:Ce.map(kt),startY:Ze,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:10}}),Ze=Xe.lastAutoTable.finalY+12,Ze>160&&(Xe.addPage(),Ze=vt(Xe),Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`${Se}`,14,Ze),Ze+=12,Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`${Lt(gt)}   Year ${Lt(ie)}`,14,Ze),Ze+=10))});const Ge={};T.forEach(de=>{const Ce=de.grade||"No Grade";Ge[Ce]||(Ge[Ce]=[]),Ge[Ce].push(de)}),Object.entries(Ge).forEach(([de,Ce])=>{Ce.length&&(Xe.setFontSize(11),Xe.setFont("helvetica","bold"),Xe.text(`Grade: ${Lt(de)}`,18,Ze),Ze+=6,vr(Xe,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #","Club"]],body:Ce.map(kt),startY:Ze,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:10}}),Ze=Xe.lastAutoTable.finalY+12,Ze>160&&(Xe.addPage(),Ze=vt(Xe),Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`${Se}`,14,Ze),Ze+=12,Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`${Lt(gt)}   Year ${Lt(ie)}`,14,Ze),Ze+=10))}),Ze+=8}),Ze+=10,Ze>160&&J<ar.length-1&&(Xe.addPage(),Ze=vt(Xe),Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`${Se}`,14,Ze),Ze+=12)})},re=Object.keys(Qe);if(re.length===0){alert("No league members found"),ke(!1);return}re.forEach((ut,xe)=>{xe>0&&Xe.addPage(),Zt(ut,Qe[ut])});const Ie=new Date().getFullYear();Xe.save(`league_grade_role_all_leagues_${Ie}.pdf`)}catch(z){Ke(`Error exporting grade role PDF: ${z.message}`)}finally{ke(!1)}},rt=z=>{if(!z||Object.keys(z).length===0){alert("No data available to export");return}$e(z)};function $t(z){return new Promise((Te,Qe)=>{no(z,Xe=>{if(Xe.type==="error")console.warn("EXIF processing failed, using original image:",z),Te(z);else try{const Pt=Xe.toDataURL("image/png");Te(Pt)}catch(Pt){console.warn("Canvas conversion failed, using original image:",Pt),Te(z)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const $e=async z=>{let Te=null,Qe=null;try{z.club_id&&(Te=(await An())[z.club_id]),z.league_id&&(Qe=(await qn())[z.league_id])}catch(Se){console.error("Error fetching names:",Se)}const Xe=new Dt("portrait","mm","a4");Xe.setFontSize(18),Xe.setTextColor(40,40,40),Xe.text("Algerian Judo Federation",14,15);const Pt=`Member Information - ${z.first_name} ${z.last_name}`;Xe.setFontSize(16),Xe.setTextColor(40,40,40),Xe.text(Pt,14,30),Xe.setFontSize(10);const Zt=new Date().toLocaleString();if(Xe.text(`Generated: ${Zt}`,14,37),Fe)try{Xe.addImage(Fe,"PNG",170,10,25,25)}catch(Se){console.error("Error adding logo to PDF:",Se)}let re=70;if(z.photo_url)try{const Se=await $t(z.photo_url),Ze=Se.startsWith("data:")?"PNG":"JPEG";Xe.addImage(Se,Ze,14,45,25,20),re=70}catch(Se){console.error("Error adding photo to PDF:",Se);try{Xe.addImage(z.photo_url,"JPEG",14,45,25,20)}catch(Ze){console.error("Fallback image addition also failed:",Ze)}re=70}Xe.setFontSize(12),z.confirmation?Xe.setTextColor(0,128,0):Xe.setTextColor(255,0,0);const Ie=z.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";Xe.text(Ie,160,50);const ut=[["First Name",z.first_name||""],["Last Name",z.last_name||""],["Date of Birth",z.date_of_birth||""],["Place of Birth",z.place_of_birth||""],["National ID",z.national_id_number||""],["Nationality",z.nationality||""],["Blood Type",z.blood_type||""],["Grade",z.grade||""],["Role",z.role||""],["License Number",z.license_number||""],["Registration Date",z.registration_date||""],["Year",z.year||""],["Renewal",z.renewal||""]];vr(Xe,{head:[["Field","Value"]],body:ut,startY:re,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const xe=Xe.lastAutoTable.finalY||200;if(Xe.setFontSize(12),Xe.setTextColor(0,0,0),Xe.text("Medical certificate",14,xe+20),Xe.setDrawColor(0),Xe.line(14,xe+40,80,xe+40),Xe.setFontSize(10),z.league_id||Qe){const Se=Qe||`ID: ${z.league_id}`;Xe.text(`League: ${Se}`,120,xe+60),Xe.text("League Visa: _________________",120,xe+70)}try{const Se=JSON.stringify({id:z.id,name:`${z.first_name||""} ${z.last_name||""}`.trim(),license:z.license_number||"",club_id:z.club_id||"",league_id:z.league_id||"",confirmation:z.confirmation||"Unconfirmed"}),Ze=await ui.toDataURL(Se,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});Xe.addImage(Ze,"PNG",175,xe+75,15,15)}catch(Se){console.error("Error generating QR code:",Se)}Xe.save(`member_${z.first_name}_${z.last_name}.pdf`)},me=async()=>{if(!A||A.size===0)return"";const z=A.name.split(".").pop(),Te=`photo-${Date.now()}.${z}`,{error:Qe}=await ne.storage.from("logos").upload(Te,A);if(Qe)return Ke(`Photo upload failed: ${Qe.message}`),"";const{data:Xe}=ne.storage.from("logos").getPublicUrl(Te);return(Xe==null?void 0:Xe.publicUrl)??""},Be=async()=>{if(!G)return null;const z=G.name.split(".").pop(),Qe=`${Date.now()}.${z}`,{error:Xe}=await ne.storage.from("logos").upload(Qe,G);if(Xe)return Ke(`Upload failed: ${Xe.message}`),null;const{data:Pt}=ne.storage.from("logos").getPublicUrl(Qe);return(Pt==null?void 0:Pt.publicUrl)??null},at=async(z,Te,Qe,Xe)=>{const{data:Pt}=await ne.from("league_members").select("*").eq("national_id_number",z).eq("league_id",Te).eq("role",Qe).eq("year",Xe);if(Pt&&Pt.length>0)throw new Error("This member is already registered for the current season with the same role and league.");const{count:Zt}=await ne.from("league_members").select("*",{count:"exact",head:!0}).eq("national_id_number",z).eq("league_id",Te).eq("role",Qe);return(Zt||0)+1},Je=async z=>{var ut;if(z.preventDefault(),Ke(""),He(""),Le(!0),!i||!r||!o||!c||!d||!B||!_||!C||!A){const xe=[];i||xe.push("First Name"),r||xe.push("Last Name"),o||xe.push("Date of Birth"),c||xe.push("Place of Birth"),d||xe.push("League Role"),B||xe.push("League (in the table is league_id)"),_||xe.push("Password"),C||xe.push("Confirm Password"),A||xe.push("Member Photo"),Ke(`Please fill in the following required fields: ${xe.join(", ")}`),Le(!1);return}const Te=Number(B);if(!Te||isNaN(Te)){Ke("Please select a valid league."),Le(!1);return}if(x.length!==18){Ke("National ID must be exactly 18 digits."),Le(!1);return}if(_!==C){Ke("Passwords do not match."),Le(!1);return}const Qe=new Date(o),Xe=new Date,Pt=Xe.getFullYear()-Qe.getFullYear(),Zt=Xe.getMonth()-Qe.getMonth(),re=Xe.getDate()-Qe.getDate();if((Zt<0||Zt===0&&re<0?Pt-1:Pt)<=21){Ke("Member must be more than 21 years old to register."),Le(!1);return}try{const{data:xe,error:Se}=await ne.from("league_members").select("id, last_name, password").eq("last_name",r).eq("password",_);if(Se){Ke(`Failed to validate member data: ${Se.message}`),Le(!1);return}if(xe&&xe.length>0){Ke(`A member with the last name "${r}" and this password already exists. Please change the password.`),Le(!1);return}}catch(xe){Ke(`Validation error: ${xe.message}`),Le(!1);return}try{const xe=await me(),Se=await Be(),Ze=new Date().getFullYear(),lt=`${Ze}/${Ze+1}`,ar=((ut=We.find(L=>L.id===parseInt(d)))==null?void 0:ut.league_role)||"",gt=await at(x,B,ar,lt),J={last_name:r,first_name:i,date_of_birth:o,place_of_birth:c,role:ar,blood_type:m,national_id_number:x,password:_,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],logo_url:Se,league_id:Te,photo_url:xe,renewal:gt,year:lt,nationality:F,holder_of:Z,grade:Y,confirmation:!1},{error:w}=await ne.from("league_members").insert([J]);if(w){Ke(`Failed to save member: ${w.message}`),Le(!1);return}if(Se&&B&&await ne.from("nameleague").update({logo_url:Se}).eq("id",B),He(`Member "${i} ${r}" has been successfully added to the League!`),n(""),a(""),l(""),u(""),j(""),v(""),N(""),g(""),f(""),H(""),O(null),$(""),D(""),ce(""),B){const{data:L}=await ne.from("league_members").select("*").eq("league_id",Number(B));e(L||[]);const{data:M}=await ne.from("nameleague").select("logo_url").eq("id",B).single();M!=null&&M.logo_url&&Ne(tt(M.logo_url))}Le(!1)}catch(xe){Ke(`Unexpected error: ${xe.message}`),Le(!1)}},ze=z=>{fe(z.id),q({...z})},Gt=()=>{fe(null),q({})},qt=(z,Te)=>{q({...P,[Te]:z.target.value})},Qt=async z=>{try{ye(!0),e(t.map(Te=>Te.id===z?{...Te,...P}:Te)),He("Member updated."),Gt()}catch(Te){Ke(Te.message||String(Te))}finally{ye(!1)}},Ut=async z=>{try{e(t.filter(Te=>Te.id!==z.id)),He("Member removed.")}catch(Te){Ke(Te.message||String(Te))}};async function Pe(z,Te){try{const{error:Qe}=await ne.from("league_members").update({confirmation:!Te}).eq("id",z);if(Qe){console.error("toggleConfirmation error:",Qe);return}e(Xe=>Xe.map(Pt=>Pt.id===z?{...Pt,confirmation:!Te}:Pt))}catch(Qe){console.error(Qe)}}return s.jsxs("div",{className:"app-container",children:[De&&s.jsx(nn,{}),s.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"federation-header",children:[Fe?s.jsx("img",{src:Fe,alt:"Logo Fédération",className:"federation-logo"}):s.jsx(ri,{className:"w-16 h-16 text-green-700"}),s.jsx("h1",{className:"federation-title",children:Et})]})})}),s.jsxs("div",{className:"form-table-wrapper",children:[s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx(oc,{"data-id":"1"}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:z=>{pr(z.currentTarget),xt("/MemberListPageP")},children:"The Member List Add"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:z=>{pr(z.currentTarget),xt("/TheLeagueList-Add")},children:"The League List Add"}),s.jsx("button",{className:"primary-btn","data-id":"4",onClick:z=>{pr(z.currentTarget),xt("/TheClubListAdd-Fed")},children:"The Club List Add"}),s.jsx("button",{className:"primary-btn","data-id":"5",onClick:z=>{pr(z.currentTarget),xt("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),s.jsx("h2",{className:"form-title",children:"Add League Member"}),s.jsxs("form",{onSubmit:Je,className:"form-grid",children:[s.jsxs("label",{children:["League Role *",s.jsxs("select",{value:d,onChange:z=>g(z.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Role"}),We.map(z=>s.jsx("option",{value:z.id,children:z.league_role},z.id))]})]}),s.jsxs("label",{children:["League *",s.jsxs("select",{value:B,onChange:z=>H(z.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select League"}),X.map(z=>s.jsx("option",{value:z.id,children:z.name_league},z.id))]})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:m,onChange:z=>f(z.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Blood Type --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{type:"text",value:r,onChange:z=>n(z.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{type:"text",value:i,onChange:z=>a(z.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:o,onChange:z=>l(z.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{type:"text",value:c,onChange:z=>u(z.target.value),required:!0})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{type:"text",value:x,onChange:z=>j(z.target.value),maxLength:"18",minLength:"18",required:!0}),s.jsx("small",{children:"18 digits required — must be unique. "})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:_,onChange:z=>v(z.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:C,onChange:z=>N(z.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:F,onChange:z=>$(z.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"}),s.jsx("option",{children:"Moroccan"})]})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:Z,onChange:z=>D(z.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:Y,onChange:z=>ce(z.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",required:!0,onChange:z=>{var Te;return O(((Te=z.target.files)==null?void 0:Te[0])??null)}})]}),s.jsxs("label",{children:["Upload League Logo *",s.jsx("input",{type:"file",onChange:z=>{var Te;return V(((Te=z.target.files)==null?void 0:Te[0])??null)},required:!0})]}),s.jsxs("div",{className:"btn-row",children:[s.jsx("button",{type:"submit",className:"primary-b",disabled:he,children:he?"Adding...":"Add Member"}),he&&s.jsx(ya,{message:"Adding member..."})]}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{className:"form-title",children:"League Member List"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{children:["League",s.jsxs("select",{value:B,onChange:z=>H(z.target.value),children:[s.jsx("option",{value:"",children:"Select League"}),X.map(z=>s.jsx("option",{value:z.id,children:z.name_league},z.id))]})]}),s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"search Member"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:ht,onChange:z=>ot(z.target.value)})})]}),s.jsx("div",{className:"table-container",ref:Ft,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"Holder Of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photo"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"League ID"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:_t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:18,children:"No members found."})}):_t.map(z=>s.jsxs("tr",{onDoubleClick:()=>rt(z),style:{cursor:"pointer"},children:[s.jsx("td",{children:ve===z.id?s.jsx("input",{value:P.last_name||"",onChange:Te=>qt(Te,"last_name")}):z.last_name}),s.jsx("td",{children:ve===z.id?s.jsx("input",{value:P.first_name||"",onChange:Te=>qt(Te,"first_name")}):z.first_name}),s.jsx("td",{children:ve===z.id?s.jsx("input",{type:"date",value:P.date_of_birth||"",onChange:Te=>qt(Te,"date_of_birth")}):z.date_of_birth}),s.jsx("td",{children:ve===z.id?s.jsx("input",{value:P.place_of_birth||"",onChange:Te=>qt(Te,"place_of_birth")}):z.place_of_birth}),s.jsx("td",{children:ve===z.id?s.jsxs("select",{value:P.role||"",onChange:Te=>qt(Te,"role"),children:[s.jsx("option",{value:"",children:"-- Select --"}),We.map(Te=>s.jsx("option",{value:Te.league_role??Te.name??"",children:Te.league_role??Te.name??""},Te.id))]}):z.role||"No Role"}),s.jsx("td",{children:ve===z.id?s.jsxs("select",{value:P.blood_type||"",onChange:Te=>qt(Te,"blood_type"),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):z.blood_type}),s.jsx("td",{children:ve===z.id?s.jsxs("select",{value:P.nationality||"",onChange:Te=>qt(Te,"nationality"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]}):z.nationality}),s.jsx("td",{children:ve===z.id?s.jsxs("select",{value:P.grade||"",onChange:Te=>qt(Te,"grade"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]}):z.grade}),s.jsx("td",{children:ve===z.id?s.jsx("input",{value:P.holder_of||"",onChange:Te=>qt(Te,"holder_of")}):z.holder_of}),s.jsx("td",{children:z.national_id_number}),s.jsx("td",{children:z.renewal}),s.jsx("td",{children:z.year}),s.jsx("td",{children:z.license_number}),s.jsx("td",{children:z.registration_date}),s.jsx("td",{children:z.photo_url?s.jsx("img",{src:tt(z.photo_url),alt:"Member",style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),s.jsx("td",{children:z.confirmation?"✅":"❌"}),s.jsx("td",{children:z.league_id}),s.jsx("td",{children:ve===z.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-S",onClick:()=>Qt(z.id),disabled:te,children:te?"Saving...":"Save"}),s.jsx("button",{className:"secondary-btn",onClick:Gt,disabled:te,children:"Cancel"}),te&&s.jsx(ya,{message:"Saving changes..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-M",onClick:()=>ze(z),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>Ut(z),children:"Delete"}),s.jsx("button",{className:z.confirmation?"cancel-btn":"confirm-btn",onClick:()=>Pe(z.id,z.confirmation),children:z.confirmation?"Cancel Confirmation":"Confirm"})]})})]},z.id))})]})}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"btn-row",children:[s.jsx(Pr,{}),s.jsx("button",{className:"primary-b",onClick:yt,children:"Export General PDF"}),s.jsx("button",{className:"primary-b",onClick:It,children:"Export Grade Role PDF"})]})})]})]}),qe&&s.jsx(En,{error:qe.message||qe,onClose:()=>Ke(null)}),dt&&s.jsx(Rn,{success:dt,onClose:()=>He("")}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function o8(){const{state:t}=fi(),e=Mr(),[r,n]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(!1),[c,u]=b.useState(null),[d,g]=b.useState(null),[m,f]=b.useState(null),[x,j]=b.useState(null),[_,v]=b.useState(null),[C,N]=b.useState(null),[A,O]=b.useState({}),[G,V]=b.useState(null),[F,$]=b.useState(null),[Z,D]=b.useState(""),[Y,ce]=b.useState(null),[B,H]=b.useState(""),[he,Le]=b.useState((t==null?void 0:t.club_id)||""),[te,ye]=b.useState((t==null?void 0:t.league_id)||""),ve="Algerian Judo Federation",fe="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",[P,q]=b.useState([]),[X,ae]=b.useState([]),[be,Ne]=b.useState([]),[De,ke]=b.useState(""),[qe,Ke]=b.useState(""),[dt,He]=b.useState(""),[Fe,se]=b.useState(""),[Et,At]=b.useState(""),[We,Oe]=b.useState(""),[ht,ot]=b.useState(""),[xt,Ft]=b.useState(""),[Mt,tt]=b.useState(""),[_t,Bt]=b.useState(null),[vt,kt]=b.useState(null),[yt,It]=b.useState(""),[rt,$t]=b.useState(""),[$e,me]=b.useState(""),[Be,at]=b.useState(""),Je=Zn(),ze=w=>w?w.startsWith("http")?w:`${fe}${w}`:null;b.useEffect(()=>{ti()},[]);function Gt(w){return new Promise((L,M)=>{no(w,ie=>{if(ie.type==="error")console.warn("EXIF processing failed, using original image:",w),L(w);else try{const _e=ie.toDataURL("image/png");L(_e)}catch(_e){console.warn("Canvas conversion failed, using original image:",_e),L(w)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const qt=w=>{u(w),g(null)};b.useEffect(()=>{(async()=>{const{data:L,error:M}=await ne.from("clubrole").select("id, club_role");M&&console.error("Error fetching roles:",M.message),L&&q(L)})()},[]);const Qt=async()=>{try{a(!0),u(null);const{data:w}=await ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(w!=null&&w.length&&V(ze(w[0].logo_url)),t!=null&&t.league_id){const{data:M}=await ne.from("nameleague").select("*").eq("id",t.league_id).single();M&&(j(M),D(M.name_league));const{data:ie}=await ne.from("league_members").select("logo_url").eq("league_id",t.league_id).order("id",{ascending:!1}).limit(1);ie!=null&&ie.length&&$(ze(ie[0].logo_url))}let L=t==null?void 0:t.club_id;if(!L&&(t!=null&&t.league_id)){const{data:M}=await ne.from("nameclub").select("id").eq("league_id",t.league_id);if(M!=null&&M.length){const{data:ie}=await ne.from("club_members").select("club_id").in("club_id",M.map(_e=>_e.id));if(ie!=null&&ie.length){const _e=new Set(ie.map(Q=>Q.club_id)),T=M.find(Q=>_e.has(Q.id));T&&(L=T.id)}}}if(L){const{data:M}=await ne.from("nameclub").select("name_club, id").eq("id",L).single();M&&(H(M.name_club),f(M));const{data:ie}=await ne.from("club_members").select("logo_url").eq("club_id",L).order("id",{ascending:!1}).limit(1);ie!=null&&ie.length&&ce(ze(ie[0].logo_url))}if(t!=null&&t.member_id){const{data:M}=await ne.from("club_members").select("*").eq("id",t.member_id).single();M&&v(M)}if(t!=null&&t.league_id){let M=ne.from("club_members").select("*, nameclub!inner(league_i)").eq("nameclub.league_i",t.league_id);he&&(M=M.eq("club_id",he));const{data:ie,error:_e}=await M;if(_e)throw _e;n(ie||[])}}catch(w){qt(`Error fetching data: ${w.message}`),console.error("Error fetching data:",w.message)}finally{a(!1)}};b.useEffect(()=>{(async()=>{if(console.log("fetchClubs called with state?.league_id:",t==null?void 0:t.league_id,"selectedLeagueId:",te),!(t!=null&&t.league_id)&&!te){console.log("No league_id available, returning early");return}const L=(t==null?void 0:t.league_id)||te;console.log("Using league_id:",L);const{data:M,error:ie}=await ne.from("nameclub").select("id, name_club, league_i").eq("league_i",L);ie?console.error("Error fetching clubs:",ie):(console.log("Fetched clubs:",M),ae(M||[]))})()},[t==null?void 0:t.league_id,te]),b.useEffect(()=>{Qt()},[he,te]),b.useEffect(()=>()=>{u(""),g("")},[]);const Ut=w=>{N(w.id),O({...w})},Pe=()=>{N(null),O({})},z=(w,L)=>{O({...A,[L]:w.target.value})},Te=async w=>{var Ge;if(u(""),g(""),l(!0),!A.first_name||!A.last_name||!A.date_of_birth||!A.place_of_birth||!A.role_id){const de=[];A.first_name||de.push("First Name"),A.last_name||de.push("Last Name"),A.date_of_birth||de.push("Date of Birth"),A.place_of_birth||de.push("Place of Birth"),A.role_id||de.push("Role"),u(`Please fill in the following required fields: ${de.join(", ")}`),l(!1);return}const L=new Date(A.date_of_birth),M=new Date,ie=M.getFullYear()-L.getFullYear(),_e=M.getMonth()-L.getMonth(),T=M.getDate()-L.getDate();if((_e<0||_e===0&&T<0?ie-1:ie)<=21){u("Member must be more than 21 years old to register."),l(!1);return}if(A.last_name&&A.password){const{data:de}=await ne.from("club_members").select("*").eq("last_name",A.last_name).eq("password",A.password).neq("id",w);if(de&&de.length>0){u("Change your Password for this name because is already exist"),l(!1);return}}try{const de=((Ge=P.find(E=>E.id===parseInt(A.role_id)))==null?void 0:Ge.club_role)||"",Ce={...A,role:de};delete Ce.role_id;const{error:et}=await ne.from("club_members").update(Ce).eq("id",w);if(et)throw et;g(`Member "${A.first_name} ${A.last_name}" has been successfully updated!`),Pe(),Qt(),l(!1)}catch(de){u(`Failed to update member: ${de.message}`),l(!1)}},Qe=async w=>{try{const L=new Date(w.registration_date).toISOString().split("T")[0],M=new Date().toISOString().split("T")[0];if(L!==M){u("You can only delete members on the same day of registration.");return}const{error:ie}=await ne.from("club_members").delete().eq("id",w.id);if(ie)throw ie;await Qt()}catch(L){u(L.message)}},Xe=async(w,L)=>{try{const{error:M}=await ne.from("club_members").update({confirmation:!L}).eq("id",w);if(M)throw M;n(ie=>ie.map(_e=>_e.id===w?{..._e,confirmation:!L}:_e))}catch(M){qt(`Failed to update member confirmation: ${M.message}`)}},Pt=r.filter(w=>{const L=Be.toLowerCase();return w.first_name.toLowerCase().includes(L)||w.last_name.toLowerCase().includes(L)||w.national_id_number.includes(L)}),Zt=w=>{console.log("👆 handleMemberDoubleClick called with member:",w),re(w)},re=w=>{if(console.log("🎯 generateIndividualMemberPDF called with member:",w),!w||Object.keys(w).length===0){u("No member data available to export");return}Ie(w)},Ie=async w=>{try{console.log("🔥 exportPDFWithAutoOrientation called with member:",w);const L=new Dt,M=L.internal.pageSize.width,ie=L.internal.pageSize.height;let _e=B;if(console.log("Initial clubName:",B,"member.club_id:",w.club_id),w.club_id)try{const ge=await An();console.log("Fetched clubNames:",ge),ge[w.club_id]?(_e=ge[w.club_id],console.log("Found memberClubName:",_e)):console.log("Club ID not found in clubNames:",w.club_id)}catch(ge){console.error("Error fetching club name:",ge)}L.setFontSize(18),L.setTextColor(40,40,40),L.text(xe(ve),14,15),L.setFontSize(16),L.setTextColor(40,40,40),L.text(`Athlete Information - ${xe(w.first_name)} ${xe(w.last_name)}`,14,30),L.setFontSize(10);const T=new Date().toLocaleString();if(L.text(`Generated: ${T}`,14,37),G)try{L.addImage(G,"PNG",170,10,25,25)}catch(ge){console.error("Error adding federation logo to PDF:",ge)}let Q=70;if(w.photos_url||w.photo_url)try{const ge=w.photos_url||w.photo_url,je=await Gt(ge),ft=je.startsWith("data:")?"PNG":"JPEG";L.addImage(je,ft,14,45,25,20),Q=70}catch(ge){console.error("Error adding photo to PDF:",ge);try{const je=w.photos_url||w.photo_url;L.addImage(je,"JPEG",14,45,25,20),Q=70}catch(je){console.error("Fallback image addition also failed:",je),Q=70}}L.setFontSize(12),w.confirmation?L.setTextColor(0,128,0):L.setTextColor(255,0,0);const Ge=w.confirmation?"CONFIRMED":"NOT CONFIRMED";L.text(Ge,160,50),L.setTextColor(0,0,0);const de=P.find(ge=>ge.id===w.role_id),Ce=(de==null?void 0:de.club_role)||"No Role",et=[["Last Name",xe(w.last_name)||""],["First Name",xe(w.first_name)||""],["Date of Birth",xe(w.date_of_birth)||""],["Place of Birth",xe(w.place_of_birth)||""],["Role",xe(Ce)],["Blood type",xe(w.blood_type)||""],["National ID",xe(w.national_id_number)||""],["Nationality",xe(w.nationality)||""],["Grade",xe(w.grade)||""],["Genres",xe(w.gender)||""],["Categories",xe(w.category)||""],["Weight",xe(w.weight)||""],["License Number",xe(w.license_number)||""],["Registration Date",xe(w.registration_date)||""],["Year",xe(w.year)||""],["Renewal",xe(w.renewal)||""]];vr(L,{startY:Q,head:[["Field","Value"]],body:et,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const E=L.lastAutoTable.finalY||200;L.setFontSize(12),L.setTextColor(0,0,0),L.text("Medical certificate",14,E+20),L.setDrawColor(0),L.line(14,E+40,80,E+40),L.setFontSize(10),console.log("memberClubName:",_e,"finalY:",E),_e?(L.text(`Club: ${xe(_e)}`,14,E+60),L.text("Club Visa: _________________",14,E+70)):console.log("No memberClubName found, member.club_id:",w.club_id),Z&&(L.text(`League: ${xe(Z)}`,120,E+60),L.text("League Visa: _________________",120,E+70));try{const ge=JSON.stringify({id:w.id,name:`${w.first_name||""} ${w.last_name||""}`.trim(),license:w.license_number||"",club_id:w.club_id||"",league_id:w.league_id||""}),ft=await(await pa(async()=>{const{default:Me}=await Promise.resolve().then(()=>Om);return{default:Me}},void 0)).default.toDataURL(ge,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});L.addImage(ft,"PNG",180,E+75,15,15)}catch(ge){console.error("Error generating QR code:",ge)}const pe=`athlete_${xe(w.first_name)}_${xe(w.last_name)}_${w.id||"record"}.pdf`;console.log("💾 About to save PDF with filename:",pe),L.save(pe),console.log("✅ PDF save completed")}catch(L){console.error("❌ Error in exportPDFWithAutoOrientation:",L),u(`Error generating PDF: ${L.message}`)}},ut=(w,L=1,M="",ie="")=>{const _e=w.internal.pageSize.getWidth(),T=w.internal.pageSize.getHeight();if(G)try{w.addImage(G,"PNG",_e-40,15,25,25)}catch(Ge){console.warn("Could not add federation logo:",Ge)}const Q=new Date().toLocaleDateString();return w.setFontSize(10),w.setFont("helvetica","normal"),w.text(`Print Date: ${Q}`,15,20),w.setFontSize(16),w.setFont("helvetica","bold"),w.text(xe("Algerian Judo Federation"),_e/2,25,{align:"center"}),ie&&(w.setFontSize(12),w.setFont("helvetica","normal"),w.text(`League: ${xe(ie)}`,_e/2,40,{align:"center"})),M&&(w.setFontSize(12),w.setFont("helvetica","normal"),w.text(`Club: ${xe(M)}`,_e/2,53,{align:"center"})),w.setFontSize(10),w.text(`Page ${L}`,_e-20,T-10,{align:"right"}),M?70:ie?57:40},xe=w=>w?String(w).replace(/Ø=UÈ/g,"").replace(/Ø<ða/g,"").replace(/Ø=Ud/g,"").replace(/Ø-ÜÈ/g,"").replace(/Ø-Üd/g,"").replace(/Ø<Ða/g,"").replace(/Ø<ßà/g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/% % %/g,"").replace(/%%%/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/%+/g,"").replace(/\s*%\s*/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(/Ã¸/g,"ø").replace(/Ã©/g,"é").replace(/Ã¨/g,"è").replace(/Ã¡/g,"á").replace(/Ã /g,"à").replace(/Ã§/g,"ç").replace(/Ã´/g,"ô").replace(/Ã»/g,"û").replace(/Ã®/g,"î").replace(/Ã¯/g,"ï").replace(/Ã¢/g,"â").replace(/Ã«/g,"ë").replace(/Ã¼/g,"ü").replace(/Ã¶/g,"ö").replace(/Ã¤/g,"ä").trim():"",Se=async()=>{const w=(t==null?void 0:t.league_id)||te;if(!w){qt("No league selected");return}try{const{data:L,error:M}=await ne.from("nameclub").select("id, name_club").eq("league_i",w);if(M)throw M;if(!L||L.length===0){qt("No clubs found in this league");return}const ie=L.map(pe=>pe.id),{data:_e,error:T}=await ne.from("club_members").select("*").in("club_id",ie);if(T)throw T;if(!_e||_e.length===0){qt("No members found in any clubs of this league");return}const Q=new Dt("landscape");let de=ut(Q,1,"",Z||"Unknown League");Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.setTextColor(255,0,0),Q.text("Club Members - General Situation",Q.internal.pageSize.getWidth()/2,de,{align:"center"}),Q.setTextColor(0,0,0),de+=20;const Ce={};_e.forEach(pe=>{const ge=pe.year||"Unknown Year";Ce[ge]||(Ce[ge]={});const je=L.find(Me=>Me.id===pe.club_id),ft=je?xe(je.name_club):"Unknown Club";Ce[ge][ft]||(Ce[ge][ft]=[]),Ce[ge][ft].push(pe)});const et={};_e.forEach(pe=>{const ge=L.find(ft=>ft.id===pe.club_id),je=ge?xe(ge.name_club):"Unknown Club";et[je]||(et[je]=[]),et[je].push(pe)});for(const[pe,ge]of Object.entries(et)){if(ge.length===0)continue;const je=ge.sort((Me,Tt)=>{const wt=new Date(Me.registration_date||"1900-01-01"),St=new Date(Tt.registration_date||"1900-01-01");return wt-St});Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.text(`${xe(pe)}`,20,de),de+=12;const ft=je.map(Me=>[xe(Me.last_name),xe(Me.first_name),xe(Me.date_of_birth),xe(Me.place_of_birth),xe(Me.blood_type),xe(Me.nationality),xe(Me.grade),xe(Me.holder_of),xe(Me.national_id_number),xe(Me.password),xe(Me.renewal),Me.confirmation?"Yes":"No",xe(Me.license_number)]);vr(Q,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:ft,startY:de,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),de=Q.lastAutoTable.finalY+8,de>180&&(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z||"Unknown League")+5),de+=8,de>160&&(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z)+5)}const E=new Date().getFullYear();Q.save(`federation_league_club_members_general_${E}.pdf`)}catch(L){console.error("Error generating PDF:",L),u("Error generating PDF: "+L.message)}},Ze=async()=>{const w=(t==null?void 0:t.league_id)||te;if(!w){qt("No league selected");return}try{const{data:L,error:M}=await ne.from("nameclub").select("id, name_club").eq("league_i",w);if(M)throw M;if(!L||L.length===0){qt("No clubs found in this league");return}const ie=L.map(ge=>ge.id),{data:_e,error:T}=await ne.from("club_members").select("*").in("club_id",ie);if(T)throw T;if(!_e||_e.length===0){qt("No members found in any clubs of this league");return}const Q=new Dt("landscape");let de=ut(Q,1,"",Z);const Ce={};_e.forEach(ge=>{const je=L.find(Tt=>Tt.id===ge.club_id),ft=je?xe(je.name_club):"Unknown Club",Me=ge.year||"Unknown Year";Ce[Me]||(Ce[Me]={}),Ce[Me][ft]||(Ce[Me][ft]=[]),Ce[Me][ft].push(ge)}),Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.setTextColor(255,0,0),Q.text("Club Members - Grade & Role Report",Q.internal.pageSize.getWidth()/2,de,{align:"center"}),Q.setTextColor(0,0,0),de+=20;let et=!0;for(const[ge,je]of Object.entries(Ce)){et||(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z||"Unknown League")+5),et=!1,Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text(xe(`ROLES SECTION - ${ge}`),20,de),de+=15;for(const[ft,Me]of Object.entries(je)){if(Me.length===0)continue;Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text(`Club: ${xe(ft)}`,35,de),de+=10;const Tt={};Me.forEach(wt=>{const St=P.find(Ct=>Ct.id===wt.role_id),jt=(St==null?void 0:St.club_role)||"No Role";Tt[jt]||(Tt[jt]=[]),Tt[jt].push(wt)});for(const[wt,St]of Object.entries(Tt)){if(St.length===0)continue;Q.setFontSize(11),Q.setFont("helvetica","bold"),Q.text(`Role: ${xe(wt)}`,30,de),de+=8;const jt=St.map(Ct=>[xe(Ct.last_name),xe(Ct.first_name),xe(Ct.date_of_birth),xe(Ct.place_of_birth),xe(Ct.blood_type),xe(Ct.nationality),xe(Ct.grade),xe(Ct.holder_of),xe(Ct.national_id_number),xe(Ct.password),xe(Ct.renewal),Ct.confirmation?"Yes":"No",xe(Ct.license_number)]);vr(Q,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:jt,startY:de,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),de=Q.lastAutoTable.finalY+8,de>180&&(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z||"Unknown League")+5)}de+=8,de>160&&(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z||"Unknown League")+5)}de+=10}Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z),Q.setFontSize(14),Q.setFont("helvetica","bold"),Q.setTextColor(255,0,0),Q.text("Club Members - Grade & Role Report",Q.internal.pageSize.getWidth()/2,de,{align:"center"}),Q.setTextColor(0,0,0),de+=20;let E=!0;for(const[ge,je]of Object.entries(Ce)){E||(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z)+5),E=!1,Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text(xe(`GRADES SECTION - ${ge}`),20,de),de+=15;for(const[ft,Me]of Object.entries(je)){if(Me.length===0)continue;Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text(`Club: ${xe(ft)}`,35,de),de+=10;const Tt={};Me.forEach(wt=>{const St=wt.grade||"No Grade";Tt[St]||(Tt[St]=[]),Tt[St].push(wt)});for(const[wt,St]of Object.entries(Tt)){if(St.length===0)continue;Q.setFontSize(11),Q.setFont("helvetica","bold"),Q.text(`Grade: ${xe(wt)}`,30,de),de+=8;const jt=St.map(Ct=>{const Ot=P.find(_r=>_r.id===Ct.role_id),Wr=(Ot==null?void 0:Ot.club_role)||"No Role";return[xe(Ct.last_name),xe(Ct.first_name),xe(Ct.date_of_birth),xe(Ct.place_of_birth),xe(Ct.blood_type),xe(Ct.nationality),xe(Wr),xe(Ct.holder_of),xe(Ct.national_id_number),xe(Ct.password),xe(Ct.renewal),Ct.confirmation?"Yes":"No",xe(Ct.license_number)]});vr(Q,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:jt,startY:de,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),de=Q.lastAutoTable.finalY+8,de>180&&(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z)+5)}de+=8,de>160&&(Q.addPage(),de=ut(Q,Q.internal.getNumberOfPages(),"",Z)+5)}de+=10}const pe=new Date().getFullYear();Q.save(`league_${xe(Z)}_complete_report_${pe}.pdf`)}catch(L){console.error("Error exporting complete league report PDF:",L),u("Error exporting PDF: "+L.message)}};b.useEffect(()=>{const w=setTimeout(()=>{},300);return()=>clearTimeout(w)},[Be]),b.useEffect(()=>{Qt()},[he,te]);const lt=async w=>{if(!w)return null;const L=w.name.split(".").pop(),M=`${Date.now()}-${Math.random()}.${L}`,{error:ie}=await ne.storage.from("logos").upload(M,w);if(ie)return u(`Upload failed: ${ie.message}`),null;const{data:_e}=ne.storage.from("logos").getPublicUrl(M);return(_e==null?void 0:_e.publicUrl)??null},ar=async()=>{if(!_t)return null;const w=_t.name.split(".").pop(),L=`club_member-${Date.now()}.${w}`,{error:M}=await ne.storage.from("logos").upload(L,_t);if(M)return console.error("upload error",M),null;const{data:ie}=ne.storage.from("logos").getPublicUrl(L);return(ie==null?void 0:ie.publicUrl)??null},gt=async(w,L,M,ie)=>{const{data:_e}=await ne.from("club_members").select("*").eq("national_id_number",w).eq("club_id",L).eq("role",M).eq("year",ie);if(_e&&_e.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:T}=await ne.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",w).eq("club_id",L).eq("role",M);return(T||0)+1},J=async w=>{var ge;if(w.preventDefault(),u(""),g(""),console.log("Setting submitLoading to true"),l(!0),await new Promise(je=>setTimeout(je,100)),!qe||!De||!dt||!Fe||!Et||!he||!te||!xt||!Mt){const je=[];qe||je.push("First Name"),De||je.push("Last Name"),dt||je.push("Date of Birth"),Fe||je.push("Place of Birth"),Et||je.push("Role"),he||je.push("Club"),te||je.push("League"),xt||je.push("Password"),Mt||je.push("Confirm Password"),u(`Please fill in the following required fields: ${je.join(", ")}`),console.log("Setting submitLoading to false - missing fields"),l(!1);return}const L=Number(he),M=Number(te);if(!L||isNaN(L)){u("Please select a valid club."),l(!1);return}if(!M||isNaN(M)){u("Please select a valid league."),l(!1);return}if(ht.length!==18){u("National ID must be exactly 18 digits."),l(!1);return}if(xt!==Mt){u("Passwords do not match."),l(!1);return}const ie=new Date(dt),_e=new Date,T=_e.getFullYear()-ie.getFullYear(),Q=_e.getMonth()-ie.getMonth(),Ge=_e.getDate()-ie.getDate();if((Q<0||Q===0&&Ge<0?T-1:T)<=21){u("Member must be more than 21 years old to register."),l(!1);return}if(De&&xt){const{data:je}=await ne.from("club_members").select("*").eq("last_name",De).eq("password",xt);if(je&&je.length>0){u("Change your Password for this name because is already exist"),l(!1);return}}const Ce=((ge=P.find(je=>je.id===parseInt(Et)))==null?void 0:ge.club_role)||"",et=new Date().getFullYear(),E=`${et}/${et+1}`;let pe;try{pe=await gt(ht,L,Ce,E)}catch(je){u(je.message),l(!1);return}try{const je=await ar(),ft=await lt(vt),Me={last_name:De,first_name:qe,date_of_birth:dt,place_of_birth:Fe,role:Ce,blood_type:We,national_id_number:ht,password:xt,photo_url:je,logo_url:ft,nationality:yt,grade:rt,holder_of:$e,club_id:L,league_id:M,license_number:`LIC-${Date.now()}`,renewal:pe,year:E},{error:Tt}=await ne.from("club_members").insert([Me]);Tt?(console.error("insert club member error",Tt),u("Error saving club member: "+Tt.message),l(!1)):(g(`Member "${qe} ${De}" has been successfully added to the club!`),ke(""),Ke(""),He(""),se(""),At(""),Oe(""),ot(""),Ft(""),tt(""),It(""),$t(""),me(""),Bt(null),kt(null),await Qt(),l(!1))}catch(je){console.error("handleSubmit error",je),u("Unexpected error: "+je.message),l(!1)}};return s.jsxs("div",{className:"app-container",children:[i&&s.jsx(nn,{}),o&&s.jsx(ya,{}),s.jsx("header",{children:s.jsxs("div",{className:"federation-header",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[G?s.jsx("img",{src:G,alt:"Federation Logo",className:"federation-logo"}):s.jsx("img",{src:Zi,alt:"Default Federation Logo",className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:ve})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.logo_url?s.jsx("img",{src:t.logo_url,alt:"League Logo",className:"member-logo"}):null,s.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:Z||"League Name"})]})]})}),s.jsxs("section",{className:"app-container",children:[s.jsxs("h2",{children:["Welcome ",t.first_name," ",t.last_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Role:"})," ",t.role]}),s.jsxs("div",{className:"form-table-wrapper",children:[s.jsxs("div",{className:"sticky-button-bar",children:[s.jsx(Pr,{}),s.jsx("button",{className:"primary-btn","data-id":"1",onClick:async w=>{if(pr(w.currentTarget),c){alert("Please resolve the current error before navigating to another page.");return}if(!x||!x.id){alert("League data not loaded yet.");return}e("/member-list-l",{state:{...t,league_id:x.id,league_name:x.name_league||"",league_logo:(x==null?void 0:x.logo_url)||null}})},children:"The League Member List"}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:async w=>{if(pr(w.currentTarget),c){alert("Please resolve the current error before navigating to another page.");return}if(!x||!x.id){alert("League data not loaded yet.");return}e("/TheClubListAddFed-League",{state:{...t,league_id:x.id,league_name:x.name_league||"",league_logo:(x==null?void 0:x.logo_url)||null}})},children:"The Club Member List"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:async w=>{if(pr(w.currentTarget),c){alert("Please resolve the current error before navigating to another page.");return}if(!x||!x.id){alert("League data not loaded yet.");return}e("/TheAthleteListAdd-League",{state:{...t,league_id:x.id,league_name:x.name_league||"",league_logo:(x==null?void 0:x.logo_url)||null}})},children:"The Athlete List Add"})]}),s.jsxs("section",{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"form-title",children:"Add Club Member"}),s.jsxs("form",{onSubmit:J,className:"form-grid",children:[s.jsxs("label",{children:["Club Role *",s.jsxs("select",{value:Et,onChange:w=>At(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Role"}),P.map(w=>s.jsx("option",{value:w.id,children:w.club_role},w.id))]})]}),s.jsxs("label",{children:["League: *",s.jsx("select",{value:te,onChange:w=>{ye(w.target.value),Le("")},disabled:!!(t!=null&&t.league_id),required:!0,children:t!=null&&t.league_id?s.jsx("option",{value:t.league_id,children:Z}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"-- Select League --"}),be.map(w=>s.jsx("option",{value:w.id,children:w.name_league},w.id))]})})]}),s.jsxs("label",{children:["Club: *",s.jsxs("select",{value:he,onChange:w=>Le(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Club --"}),X.map(w=>s.jsx("option",{value:w.id,children:w.name_club},w.id))]})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:yt,onChange:w=>It(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:rt,onChange:w=>$t(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]})]}),s.jsxs("label",{children:["Holder of *",s.jsx("input",{type:"text",value:$e,onChange:w=>me(w.target.value),required:!0})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:We,onChange:w=>Oe(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["Last Name *",s.jsx("input",{value:De,onChange:w=>ke(w.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{value:qe,onChange:w=>Ke(w.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:dt,onChange:w=>He(w.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{value:Fe,onChange:w=>se(w.target.value),required:!0})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{value:ht,onChange:w=>ot(w.target.value),maxLength:"18",required:!0}),s.jsx("small",{children:"18 digits required — must be unique. "})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:xt,onChange:w=>Ft(w.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:Mt,onChange:w=>tt(w.target.value),required:!0})]}),s.jsxs("label",{children:["Upload Club Logo *",s.jsx("input",{type:"file",onChange:w=>{var L;return kt(((L=w.target.files)==null?void 0:L[0])??null)},required:!0})]}),s.jsxs("label",{children:["Upload Member Photo *",s.jsx("input",{type:"file",onChange:w=>{var L;return Bt(((L=w.target.files)==null?void 0:L[0])??null)},required:!0})]}),s.jsx("div",{className:"btn-row",children:s.jsx("button",{type:"submit",className:"primary-b",disabled:o,children:o?"Saving...":"Save Member"})}),s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]})]}),s.jsx("h2",{className:"form-title",children:"List Of Club Members"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{children:["League:",s.jsx("select",{value:te,onChange:w=>{ye(w.target.value),Le("")},disabled:!!(t!=null&&t.league_id),children:t!=null&&t.league_id?s.jsx("option",{value:t.league_id,children:Z}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"-- Select League --"}),be.map(w=>s.jsx("option",{value:w.id,children:w.name_league},w.id))]})})]}),s.jsxs("label",{children:["Club:",s.jsxs("select",{value:he,onChange:w=>Le(w.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Club --"}),X.map(w=>s.jsx("option",{value:w.id,children:w.name_club},w.id))]})]}),s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"search Member"})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:Be,onChange:w=>at(w.target.value)})})]}),s.jsx("div",{className:"table-container",ref:Je,children:s.jsxs("table",{className:"athlete-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"holder_of"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photos"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"Club ID"}),s.jsx("th",{children:"League ID"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:19,children:"No members found."})}):Pt.map(w=>s.jsxs("tr",{onDoubleClick:()=>Zt(w),style:{cursor:"pointer"},children:[s.jsx("td",{children:C===w.id?s.jsx("input",{value:A.last_name||"",onChange:L=>z(L,"last_name")}):w.last_name}),s.jsx("td",{children:C===w.id?s.jsx("input",{value:A.first_name||"",onChange:L=>z(L,"first_name")}):w.first_name}),s.jsx("td",{children:C===w.id?s.jsx("input",{type:"date",value:A.date_of_birth||"",onChange:L=>z(L,"date_of_birth")}):w.date_of_birth}),s.jsx("td",{children:C===w.id?s.jsx("input",{value:A.place_of_birth||"",onChange:L=>z(L,"place_of_birth")}):w.place_of_birth}),s.jsx("td",{children:C===w.id?s.jsxs("select",{value:A.role_id||"",onChange:L=>z(L,"role_id"),children:[s.jsx("option",{value:"",children:"-- Select --"}),P.map(L=>s.jsx("option",{value:L.id,children:L.club_role},L.id))]}):w.role||"No Role"}),s.jsx("td",{children:C===w.id?s.jsxs("select",{value:A.blood_type||"",onChange:L=>z(L,"blood_type"),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):w.blood_type}),s.jsx("td",{children:C===w.id?s.jsxs("select",{value:A.nationality||"",onChange:L=>z(L,"nationality"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Algerian"}),s.jsx("option",{children:"Tunisian"})]}):w.nationality}),s.jsx("td",{children:C===w.id?s.jsxs("select",{value:A.grade||"",onChange:L=>z(L,"grade"),children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{children:"Brown Belt"}),s.jsx("option",{children:"Black Belt"})]}):w.grade}),s.jsx("td",{children:C===w.id?s.jsx("input",{value:A.holder_of||"",onChange:L=>z(L,"holder_of")}):w.holder_of}),s.jsx("td",{children:w.national_id_number}),s.jsx("td",{children:w.renewal}),s.jsx("td",{children:w.year}),s.jsx("td",{children:w.license_number}),s.jsx("td",{children:w.registration_date}),s.jsx("td",{children:w.photos_url||w.photo_url?s.jsx("img",{src:ze(w.photos_url||w.photo_url),alt:"Member",style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),s.jsx("td",{children:w.confirmation?"✅":"❌"}),s.jsx("td",{children:w.club_id}),s.jsx("td",{children:w.league_id}),s.jsx("td",{children:C===w.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-S",onClick:()=>Te(w.id),children:"Save"}),s.jsx("button",{className:"secondary-btn",onClick:Pe,children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-M",onClick:()=>Ut(w),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>Qe(w),children:"Delete"}),s.jsx("button",{className:w.confirmation?"cancel-btn":"confirm-btn",onClick:()=>Xe(w.id,w.confirmation),children:w.confirmation?"Cancel Confirmation":"Confirm"})]})})]},w.id))})]})})]}),s.jsx(Pr,{}),s.jsx("button",{className:"primary-b",onClick:Se,children:"Export General PDF"}),s.jsx("button",{className:"primary-b",onClick:Ze,children:"Export Grade Role PDF"})]})]}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})}),c&&s.jsx(En,{error:c,onClose:()=>u(null)}),d&&s.jsx(Rn,{success:d,onClose:()=>g("")}),s.jsx("style",{jsx:!0,children:`
        @keyframes fadeInScale {
          from {
            opacity: 0;
            transform: scale(0.8);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
        
        @keyframes bounceIn {
          0% {
            transform: scale(0.3);
            opacity: 0;
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})}function l8(){const{state:t}=fi(),e=Mr(),[r,n]=b.useState(!0),[i,a]=b.useState(!1),[o,l]=b.useState(""),[c,u]=b.useState(""),[d,g]=b.useState(null),[m,f]=b.useState(null),[x,j]=b.useState(""),[_,v]=b.useState(null),[C,N]=b.useState(""),[A,O]=b.useState((t==null?void 0:t.club_id)??""),[G,V]=b.useState((t==null?void 0:t.league_id)??""),[F,$]=b.useState((t==null?void 0:t.league_id)??""),[Z,D]=b.useState((t==null?void 0:t.club_id)??""),[Y,ce]=b.useState([]),[B,H]=b.useState([]),[he,Le]=b.useState([]),[te,ye]=b.useState([]),[ve,fe]=b.useState([]),[P,q]=b.useState(""),[X,ae]=b.useState(""),[be,Ne]=b.useState(""),[De,ke]=b.useState(""),[qe,Ke]=b.useState(""),[dt,He]=b.useState(""),[Fe,se]=b.useState(""),[Et,At]=b.useState(""),[We,Oe]=b.useState(""),[ht,ot]=b.useState(null),[xt,Ft]=b.useState(""),[Mt,tt]=b.useState(""),[_t,Bt]=b.useState(""),[vt,kt]=b.useState(""),[yt,It]=b.useState(""),[rt,$t]=b.useState(1),[$e,me]=b.useState(null),[Be,at]=b.useState({}),[Je,ze]=b.useState(""),Gt=Zn(),qt="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",Qt="Algerian Judo Federation",Ut=["Admin","Coach","Athlete"],Pe=["Algerian","Tunisian"],z=["brown belt","black belt"],Te=["Poussins","Benjamins","Minimes","Cadets","Juniors","Hopefuls","Seniors","Veterans"],Qe=["Men","Women"],[Xe,Pt]=b.useState([]),Zt=E=>E?E.startsWith("http")?E:`${qt}${E}`:null,re=async()=>{if(!ht)return null;try{const E=ht.name.split(".").pop(),pe=`athlete-${Date.now()}.${E}`,{error:ge}=await ne.storage.from("logos").upload(pe,ht);if(ge)return console.error("upload error",ge),null;const{data:je}=ne.storage.from("logos").getPublicUrl(pe);return(je==null?void 0:je.publicUrl)??null}catch(E){return console.error("handlePhotoUpload error",E),null}};function Ie(E){return new Promise((pe,ge)=>{no(E,je=>{if(je.type==="error")console.warn("EXIF processing failed, using original image:",E),pe(E);else try{const ft=je.toDataURL("image/png");pe(ft)}catch(ft){console.warn("Canvas conversion failed, using original image:",ft),pe(E)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const ut=async(E,pe)=>{const{data:ge}=await ne.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",E).eq("year",pe);if(ge&&ge.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:je}=await ne.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",E);return(je||0)+1},xe=async()=>{var E;try{l("");const[pe,ge,je,ft,Me]=await Promise.all([ne.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1),ne.from("nameleague").select("id, name_league"),ne.from("roles").select("id, name"),F?ne.from("nameclub").select("id, name_club").eq("league_i",F):ne.from("nameclub").select("id, name_club"),ne.from("athletes").select("*").order("id",{ascending:!1}).limit(1e3)]);if((E=pe.data)!=null&&E.length&&g(Zt(pe.data[0].logo_url)),Le(ge.data||[]),je.data?ce(je.data.map(St=>St.name)):ce(Ut),H(ft.data||[]),Me.error)throw Me.error;const Tt=Me.data||[];fe(Tt);let wt=Tt;Z?wt=Tt.filter(St=>String(St.club_id)===String(Z)):F&&(wt=Tt.filter(St=>String(St.league_id)===String(F))),ye(wt),await Promise.all([t!=null&&t.league_id?Se(t.league_id):Promise.resolve(),Z||A?Ze(Z||A):Promise.resolve()])}catch(pe){console.error("fetchData error",pe),l((pe==null?void 0:pe.message)||String(pe))}finally{n(!1),a(!1)}};b.useEffect(()=>{ti()},[]);const Se=async E=>{var pe;try{const[ge,je]=await Promise.all([ne.from("nameleague").select("*").eq("id",E).single(),ne.from("league_members").select("logo_url").eq("league_id",E).order("id",{ascending:!1}).limit(1)]);ge.data&&j(ge.data.name_league||""),(pe=je.data)!=null&&pe.length&&f(Zt(je.data[0].logo_url))}catch(ge){console.error("loadLeagueDetails error",ge)}},Ze=async E=>{var pe;try{const[ge,je]=await Promise.all([ne.from("nameclub").select("name_club, i").eq("id",E).single(),ne.from("club_members").select("logo_url").eq("club_id",E).order("id",{ascending:!1}).limit(1)]);ge.data&&N(ge.data.name_club),(pe=je.data)!=null&&pe.length&&v(Zt(je.data[0].logo_url))}catch(ge){console.error("loadClubDetails error",ge)}};b.useEffect(()=>{xe()},[]),b.useEffect(()=>{ti()},[]);const lt=b.useMemo(()=>{let E=ve;return Z?E=ve.filter(pe=>String(pe.club_id)===String(Z)):F&&(E=ve.filter(pe=>String(pe.league_id)===String(F))),E},[ve,Z,F]);b.useEffect(()=>{ye(lt)},[lt]),b.useEffect(()=>{F&&(async()=>{try{const{data:pe}=await ne.from("nameclub").select("id, name_club").eq("league_i",F);H(pe||[])}catch(pe){console.error("Error fetching clubs:",pe)}})()},[F]);const ar=b.useCallback(async(E,pe)=>{if(!(!E||!pe))try{const{data:ge,error:je}=await ne.from("categories").select("weight").eq("genres",E).eq("categories",pe);je?console.error("Erreur récupération poids:",je.message):Pt(ge.map(ft=>ft.weight))}catch(ge){console.error("Erreur inconnue:",ge)}},[]);b.useEffect(()=>{const E=Be.genres||_t,pe=Be.categories||vt;ar(E,pe)},[_t,vt,Be.genres,Be.categories,ar]);const gt=(E,pe)=>{if(!E||!pe)return{isValid:!1,message:"Date of birth and category are required."};const ge=new Date(E),je=new Date,ft=je.getFullYear()-ge.getFullYear()-(je.getMonth()<ge.getMonth()||je.getMonth()===ge.getMonth()&&je.getDate()<ge.getDate()?1:0),Tt={Poussins:{min:9,max:10},Benjamins:{min:11,max:12},Minimes:{min:13,max:14},Cadets:{min:15,max:17},Juniors:{min:15,max:20},Hopefuls:{min:15,max:17},Seniors:{min:15,max:35},Veterans:{min:36,max:150}}[pe];return Tt?ft<Tt.min||ft>Tt.max?pe==="Veterans"?{isValid:!1,message:`For ${pe} category, athlete must be more than 35 years old. Current age: ${ft}`}:{isValid:!1,message:`For ${pe} category, athlete must be between ${Tt.min} and ${Tt.max} years old. Current age: ${ft}`}:{isValid:!0,message:""}:{isValid:!1,message:`Unknown category: ${pe}`}},J=async E=>{if(E.preventDefault(),l(""),u(""),a(!0),!X||!P){l("First name and Last name are required."),a(!1);return}if(!/^\d{18}$/.test(Fe)){l("National ID (NID) must be exactly 18 digits."),a(!1);return}if(Et!==We){l("Passwords do not match."),a(!1);return}if(!F&&!G){l("League must be selected or provided in state."),a(!1);return}if(!Z&&!A){l("Club must be selected or provided in state."),a(!1);return}const pe=gt(be,vt);if(!pe.isValid){l(pe.message),a(!1);return}if(P&&Et){const{data:ft}=await ne.from("athletes").select("*").eq("password",Et);if(ft&&ft.length>0){l("Change your Password for this name because is already exist"),a(!1);return}}const ge=new Date().getFullYear(),je=`${ge}/${ge+1}`;try{const{data:ft,error:Me}=await ne.from("athletes").select("id, national_id_number").eq("national_id_number",Fe).eq("year",je);if(Me)throw Me;if(ft&&ft.length>0){l("An athlete with this National ID is already registered for this season."),a(!1);return}}catch(ft){l(ft.message||String(ft)),a(!1);return}try{const ft=await re(),Me=new Date().getFullYear(),Tt=`${Me}/${Me+1}`;let wt;try{wt=await ut(Fe,Tt)}catch(Ct){l(Ct.message),setSubmitLoading(!1);return}const St={last_name:P,first_name:X,date_of_birth:be,place_of_birth:De,role:qe,blood_type:dt,national_id_number:Fe,password:Et,license_number:`ATH-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0],photos_url:ft,nationality:xt,grade:Mt,renewal:wt,confirmation:!1,genres:_t,categories:vt,weight:yt,league_id:F||G,club_id:Z||A,year:Tt},{error:jt}=await ne.from("athletes").insert([St]);if(jt)throw jt;u("Athlete added successfully."),q(""),ae(""),Ne(""),ke(""),Ke(""),He(""),se(""),At(""),Oe(""),ot(null),Ft(""),tt(""),Bt(""),kt(""),It(""),await xe()}catch(ft){console.error("handleSubmit error",ft),l((ft==null?void 0:ft.message)||String(ft))}finally{n(!1)}},w=E=>{me(E.id),at({...E})},L=()=>{me(null),at({})},M=async()=>{a(!0);const E=gt(Be.date_of_birth,Be.categories);if(!E.isValid){a(!1),l(E.message);return}const{error:pe}=await ne.from("athletes").update({last_name:Be.last_name,first_name:Be.first_name,date_of_birth:Be.date_of_birth,place_of_birth:Be.place_of_birth,role:Be.role,blood_type:Be.blood_type,nationality:Be.nationality,grade:Be.grade,categories:Be.categories,weight:Be.weight,genres:Be.genres}).eq("id",$e);pe?(a(!1),l("Update failed: "+pe.message)):(await xe(),L(),a(!1),u("Athlete updated successfully!"))},ie=async E=>{const pe=new Date().toISOString().split("T")[0];if(E.registration_date!==pe){l("You can only delete athletes the same day they were added.");return}if(window.confirm("Delete this athlete?"))try{const{error:ge}=await ne.from("athletes").delete().eq("id",E.id);if(ge)throw ge;await xe()}catch(ge){console.error("deleteAthlete error",ge),l("Error deleting athlete: "+ge.message)}},_e=async(E,pe)=>{try{n(!0);const{error:ge}=await ne.from("athletes").update({confirmation:!pe}).eq("id",E);if(ge)throw ge;ye(je=>je.map(ft=>ft.id===E?{...ft,confirmation:!pe}:ft))}catch(ge){console.error("toggle confirmation error",ge),l((ge==null?void 0:ge.message)||String(ge))}finally{n(!1)}},T=te.filter(E=>{const pe=Je.trim().toLowerCase();return pe?String(E.first_name||"").toLowerCase().includes(pe)||String(E.last_name||"").toLowerCase().includes(pe)||String(E.national_id_number||"").includes(pe):!0}),Q=E=>{if(!E||Object.keys(E).length===0){l("No data available to export");return}Ge(E)},Ge=async E=>{let pe=null,ge=null;try{E.club_id&&(pe=(await An())[E.club_id]),E.league_id&&(ge=(await qn())[E.league_id])}catch(Ct){console.error("Error fetching names:",Ct)}const je=new Dt("portrait","mm","a4");je.setFontSize(18),je.setTextColor(40,40,40),je.text("Algerian Judo Federation",14,15);const ft=`Athlete Information - ${E.first_name} ${E.last_name}`;je.setFontSize(16),je.setTextColor(40,40,40),je.text(ft,14,30),je.setFontSize(10);const Me=new Date().toLocaleString();if(je.text(`Generated: ${Me}`,14,37),d)try{je.addImage(d,"PNG",170,10,25,25)}catch(Ct){console.error("Error adding logo to PDF:",Ct)}let Tt=70;if(E.photos_url)try{const Ct=await Ie(E.photos_url),Ot=Ct.startsWith("data:")?"PNG":"JPEG";je.addImage(Ct,Ot,14,45,25,20),Tt=70}catch(Ct){console.error("Error adding photo to PDF:",Ct);try{je.addImage(E.photos_url,"JPEG",14,45,25,20)}catch(Ot){console.error("Fallback image addition also failed:",Ot)}Tt=70}je.setFontSize(12),E.confirmation?je.setTextColor(0,128,0):je.setTextColor(255,0,0);const wt=E.confirmation?"CONFIRMED ✓":"NOT CONFIRMED ✗";je.text(wt,160,50);const St=[["First Name",E.first_name||""],["Last Name",E.last_name||""],["Date of Birth",E.date_of_birth||""],["Place of Birth",E.place_of_birth||""],["National ID",E.national_id_number||""],["Nationality",E.nationality||""],["Blood Type",E.blood_type||""],["Grade",E.grade||""],["Role",E.role||""],["Gender",E.genres||""],["Category",E.categories||""],["Weight",E.weight||""],["License Number",E.license_number||""],["Registration Date",E.registration_date||""],["Year",E.year||""],["Renewal",E.renewal||""]];vr(je,{head:[["Field","Value"]],body:St,startY:Tt,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const jt=je.lastAutoTable.finalY||200;if(je.setFontSize(12),je.setTextColor(0,0,0),je.text("Medical certificate",14,jt+20),je.setDrawColor(0),je.line(14,jt+40,80,jt+40),je.setFontSize(10),E.club_id||pe){const Ct=pe||`ID: ${E.club_id}`;je.text(`Club: ${Ct}`,14,jt+60),je.text("Club Visa: _________________",14,jt+70)}if(E.league_id||ge){const Ct=ge||`ID: ${E.league_id}`;je.text(`League: ${Ct}`,120,jt+60),je.text("League Visa: _________________",120,jt+70)}try{const Ct=JSON.stringify({id:E.id,name:`${E.first_name||""} ${E.last_name||""}`.trim(),license:E.license_number||"",club_id:E.club_id||"",league_id:E.league_id||"",confirmation:E.confirmation||"Unconfirmed"}),Ot=await ui.toDataURL(Ct,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});je.addImage(Ot,"PNG",175,jt+75,15,15)}catch(Ct){console.error("Error generating QR code:",Ct)}je.save(`athlete_${E.first_name}_${E.last_name}.pdf`)},de=async()=>{if(!T||T.length===0){l("No athletes data available to export");return}const E=new Dt("landscape","mm","a4"),pe=E.internal.pageSize.getWidth(),ge=new Date().getFullYear(),je=new Date().toLocaleDateString();if(E.setFontSize(10),E.setFont("helvetica","normal"),E.setTextColor(40,40,40),E.text(`Date: ${je}`,14,15),E.setFontSize(16),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text("Algerian Judo Federation",pe/2,15,{align:"center"}),d)try{E.addImage(d,"PNG",pe-40,5,25,25)}catch(jt){console.error("Error adding logo to PDF:",jt)}E.setFontSize(14),E.setFont("helvetica","normal"),E.setTextColor(40,40,40),E.text(`League: ${x||"Unknown League"}`,pe/2,30,{align:"center"}),E.setFont("helvetica","bold"),E.setTextColor(255,0,0),E.text("Athletes Members - General Situation",pe/2,40,{align:"center"});let ft={},Me={};try{ft=await An(),Me=await qn()}catch(jt){console.error("Error fetching club/league names:",jt)}const Tt={};T.forEach(jt=>{const Ct=jt.year||ge,Ot=jt.club_id;Tt[Ct]||(Tt[Ct]={}),Tt[Ct][Ot]||(Tt[Ct][Ot]=[]),Tt[Ct][Ot].push(jt)});const wt=Object.keys(Tt).sort();let St=55;wt.forEach((jt,Ct)=>{const Ot=Tt[jt];E.setFontSize(14),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`Year ${jt}`,14,St),St+=15,Object.keys(Ot).sort((_r,gr)=>{const Sr=ft[_r]||`Club ${_r}`,sr=ft[gr]||`Club ${gr}`;return Sr.localeCompare(sr)}).forEach((_r,gr)=>{const Sr=Ot[_r],sr=ft[_r]||`Club ${_r}`;E.setFontSize(12),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`Club ${gr+1}: ${sr}`,14,St),St+=10;const jr=Sr.sort((dr,_a)=>{const ta=dr.categories||"",Wo=_a.categories||"";if(ta!==Wo)return ta.localeCompare(Wo);const Ni=dr.genres||"",io=_a.genres||"";if(Ni!==io)return Ni.localeCompare(io);const Ho=parseFloat(dr.weight)||0,wa=parseFloat(_a.weight)||0;return Ho-wa}).map(dr=>[dr.last_name||"",dr.first_name||"",dr.date_of_birth||"",dr.place_of_birth||"",dr.role||"",dr.blood_type||"",dr.national_id_number||"",dr.nationality||"",dr.grade||"",dr.renewal||"",dr.year||"",dr.genres||"",dr.categories||"",dr.weight||"",dr.license_number||"",dr.registration_date||"",dr.confirmation?"Yes":"No",ft[dr.club_id]||`Club ID: ${dr.club_id}`,Me[dr.league_id]||`League ID: ${dr.league_id}`]);vr(E,{head:[["Last","First","DOB","POB","Role","Blood","NID","Nationality","Grade","Renewal","Year","Gender","Category","Weight","License #","Registration","Confirmed","Club","League"]],body:jr,startY:St,theme:"grid",headStyles:{fillColor:[34,139,34]},styles:{fontSize:8},didParseCell:function(dr){if(dr.section==="body"){const ta=jr[dr.row.index][11];ta&&ta.toLowerCase().includes("women")?dr.cell.styles.fillColor=[211,211,211]:dr.cell.styles.fillColor=[255,255,255]}},columnStyles:{0:{cellWidth:15},1:{cellWidth:15},2:{cellWidth:12},3:{cellWidth:15},4:{cellWidth:10},5:{cellWidth:8},6:{cellWidth:15},7:{cellWidth:12},8:{cellWidth:10},9:{cellWidth:12},10:{cellWidth:8},11:{cellWidth:10},12:{cellWidth:12},13:{cellWidth:10},14:{cellWidth:15},15:{cellWidth:15},16:{cellWidth:10},17:{cellWidth:20},18:{cellWidth:20}}}),St=E.lastAutoTable.finalY+15,St>160&&(E.addPage(),St=20)}),St+=10}),E.save(`athletes_members_general_situation_${ge}.pdf`)},Ce=async()=>{if(!T||T.length===0){l("No athletes data available to export");return}const E=new Dt("landscape","mm","a4"),pe=E.internal.pageSize.getWidth(),ge=new Date().getFullYear(),je=new Date().toLocaleDateString(),ft=()=>{if(E.setFontSize(10),E.setFont("helvetica","normal"),E.setTextColor(40,40,40),E.text(`Date: ${je}`,14,15),E.setFontSize(16),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text("Algerian Judo Federation",pe/2,15,{align:"center"}),d)try{E.addImage(d,"PNG",pe-40,5,25,25)}catch(Ot){console.error("Error adding logo to PDF:",Ot)}E.setFontSize(14),E.setFont("helvetica","normal"),E.setTextColor(40,40,40),E.text(`League: ${x||"Unknown League"}`,pe/2,30,{align:"center"}),E.setFontSize(14),E.setFont("helvetica","bold"),E.setTextColor(220,53,69),E.text("Athletes Members - Category Situation",pe/2,40,{align:"center"})};ft();let Me={},Tt={};try{Me=await An(),Tt=await qn()}catch(Ot){console.error("Error fetching club/league names:",Ot)}const wt=T.reduce((Ot,Wr)=>{const _r=Wr.year||"Unknown Year",gr=Wr.club_id||"Unknown Club",Sr=Me[gr]||`Club ID: ${gr}`,sr=Wr.categories||"Uncategorized",yn=Wr.genres||"Unspecified",jr=Wr.weight||"No Weight";return Ot[_r]||(Ot[_r]={}),Ot[_r][Sr]||(Ot[_r][Sr]={}),Ot[_r][Sr][sr]||(Ot[_r][Sr][sr]={}),Ot[_r][Sr][sr][yn]||(Ot[_r][Sr][sr][yn]={}),Ot[_r][Sr][sr][yn][jr]||(Ot[_r][Sr][sr][yn][jr]=[]),Ot[_r][Sr][sr][yn][jr].push(Wr),Ot},{}),St=(Ot,Wr)=>[...Ot].sort((gr,Sr)=>{const sr=new Date(gr.date_of_birth||"1900-01-01"),yn=new Date(Sr.date_of_birth||"1900-01-01");return sr-yn}).map(gr=>[gr.last_name||"",gr.first_name||"",gr.date_of_birth||"",gr.national_id_number||"",gr.nationality||"",gr.grade||"",gr.license_number||"",gr.confirmation?"Yes":"No",Me[gr.club_id]||`Club ID: ${gr.club_id}`]);let jt=50,Ct=!0;Object.entries(wt).sort().forEach(([Ot,Wr])=>{Ct||(E.addPage(),ft(),jt=50),Ct=!1,E.setFontSize(13),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`Year: ${Ot}`,14,jt),jt+=15,Object.entries(Wr).sort().forEach(([_r,gr])=>{Object.entries(gr).sort().forEach(([Sr,sr])=>{Object.entries(sr).sort().forEach(([yn,jr])=>{Object.entries(jr).sort().forEach(([dr,_a])=>{jt>200&&(E.addPage(),ft(),jt=50),E.setFontSize(11),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`  Club: ${_r} - Category: ${Sr}`,20,jt),jt+=10,E.setFontSize(10),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`    Gender: ${yn} - Weight: ${dr}`,30,jt),jt+=8,jt>220&&(E.addPage(),ft(),jt=50,E.setFontSize(13),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`Year: ${Ot} (continued)`,14,jt),jt+=12,E.setFontSize(11),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`  Club: ${_r} - Category: ${Sr} (continued)`,20,jt),jt+=10,E.setFontSize(10),E.setFont("helvetica","bold"),E.setTextColor(40,40,40),E.text(`    Gender: ${yn} - Weight: ${dr} (continued)`,30,jt),jt+=8);const ta=St(_a);vr(E,{head:[["Last Name","First Name","DOB","NID","Nationality","Grade","License #","Confirmed","Club"]],body:ta,startY:jt,margin:{left:14,right:14},theme:"grid",headStyles:{fillColor:[40,167,69],fontSize:9,textColor:[255,255,255]},styles:{fontSize:8,cellPadding:2,fillColor:[255,255,255]},columnStyles:{0:{cellWidth:25},1:{cellWidth:30},2:{cellWidth:20},3:{cellWidth:35},4:{cellWidth:20},5:{cellWidth:18},6:{cellWidth:35},7:{cellWidth:20},8:{cellWidth:50}}}),jt=E.lastAutoTable.finalY+10})})})})}),E.save(`athletes_category_hierarchical_${ge}.pdf`)},et=async()=>{try{const E=T||te||[];if(!E||E.length===0){l("No athletes data available to export");return}const{clubNames:pe,leagueNames:ge}=await Promise.all([An(),qn()]).then(([jt,Ct])=>({clubNames:jt,leagueNames:Ct})),je=new Date().getFullYear(),ft={};E.forEach(jt=>{const Ct=je,Ot=jt.grade||"No Grade";ft[Ct]||(ft[Ct]={}),ft[Ct][Ot]||(ft[Ct][Ot]=[]),ft[Ct][Ot].push(jt)}),Object.keys(ft).forEach(jt=>{Object.keys(ft[jt]).forEach(Ct=>{ft[jt][Ct].sort((Ot,Wr)=>new Date(Ot.date_of_birth)-new Date(Wr.date_of_birth))})});const Me=new Dt("landscape","mm","a4");let Tt=50;const wt=()=>{const jt=new Date().toLocaleDateString("en-GB");if(Me.setFontSize(8),Me.setTextColor(100,100,100),Me.text(`Print Date: ${jt}`,14,10),Me.setFontSize(16),Me.setTextColor(0,0,0),Me.setFont("helvetica","bold"),Me.text("Algerian Judo Federation",Me.internal.pageSize.width/2,20,{align:"center"}),d)try{Me.addImage(d,"PNG",Me.internal.pageSize.width-40,15,25,25)}catch(Ct){console.warn("Could not add federation logo to PDF:",Ct)}return Me.setFontSize(12),Me.setFont("helvetica","normal"),Me.text(`League: ${x||"Unknown League"}`,Me.internal.pageSize.width/2,30,{align:"center"}),Me.setFontSize(14),Me.setFont("helvetica","bold"),Me.setTextColor(220,53,69),Me.text("Athletes - Grade and Role Situation",Me.internal.pageSize.width/2,40,{align:"center"}),50};Tt=wt(),Object.keys(ft).sort().forEach((jt,Ct)=>{Object.keys(ft[jt]).sort().forEach((Wr,_r)=>{const gr=ft[jt][Wr];Tt>180&&(Me.addPage(),Tt=wt()),Me.setFontSize(12),Me.setFont("helvetica","bold"),Me.setTextColor(0,0,0),Me.text(`Season Year: ${jt} - Grade: ${Wr}`,14,Tt),Tt+=10;const Sr=gr.map(sr=>[sr.last_name||"",sr.first_name||"",sr.date_of_birth?new Date(sr.date_of_birth).toLocaleDateString("en-GB"):"",sr.national_id_number||"",sr.nationality||"",sr.grade||"",sr.license_number||"",sr.confirmation?"Yes":"No",pe[sr.club_id]||`Club ID: ${sr.club_id}`]);vr(Me,{head:[["Last Name","First Name","DOB","NID","Nationality","Grade","License #","Confirmed","Club"]],body:Sr,startY:Tt,margin:{left:14,right:14},theme:"grid",headStyles:{fillColor:[40,167,69],fontSize:9,textColor:[255,255,255]},styles:{fontSize:8,cellPadding:2,fillColor:[255,255,255]},columnStyles:{0:{cellWidth:25},1:{cellWidth:30},2:{cellWidth:20},3:{cellWidth:35},4:{cellWidth:20},5:{cellWidth:18},6:{cellWidth:35},7:{cellWidth:20},8:{cellWidth:50}},didDrawPage:function(sr){sr.pageNumber>1&&(wt(),sr.settings.margin.top=80)}}),Tt=Me.lastAutoTable.finalY+10})}),Me.save(`athletes_grade_role_${new Date().getFullYear()}.pdf`)}catch(E){console.error("Error exporting PDF:",E)}};return s.jsxs("div",{className:"app-container",children:[r&&s.jsx(nn,{}),s.jsx("header",{children:s.jsxs("div",{className:"federation-header",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[d?s.jsx("img",{src:d,alt:"Federation Logo",className:"federation-logo"}):s.jsx("img",{src:Zi,alt:"Default Federation Logo",className:"federation-logo"}),s.jsx("h1",{className:"federation-title",children:Qt})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t!=null&&t.logo_url?s.jsx("img",{src:t.logo_url,alt:"League Logo",className:"member-logo",style:{width:"50px",height:"50px"}}):null,s.jsx("h2",{className:"federation-title",children:x||"League Name"})]})]})}),s.jsxs("section",{className:"app-container",children:[s.jsxs("h2",{children:["Welcome ",(t==null?void 0:t.first_name)||"User"," ",(t==null?void 0:t.last_name)||""]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Role:"})," ",(t==null?void 0:t.role)||"N/A"]}),s.jsxs("div",{className:"sticky-button-bar",style:{margin:"12px 0",display:"flex",gap:8},children:[s.jsx(Pr,{}),s.jsx("button",{className:"primary-btn","data-id":"1",onClick:async E=>{if(pr(E.currentTarget),o){l("Please resolve the current error before navigating to another page.");return}e("/member-list-l",{state:{...t,league_id:G,league_name:x,league_logo:m}})},children:"The League Member List"}),s.jsx("button",{className:"primary-btn","data-id":"2",onClick:async E=>{if(pr(E.currentTarget),o){l("Please resolve the current error before navigating to another page.");return}e("/TheClubListAddFed-League",{state:{...t,league_id:G,league_name:x,league_logo:m}})},children:"The Club Member List"}),s.jsx("button",{className:"primary-btn","data-id":"3",onClick:async E=>{if(pr(E.currentTarget),o){l("Please resolve the current error before navigating to another page.");return}e("/TheAthleteListAdd-League",{state:{...t,league_id:G,league_name:x,league_logo:m}})},children:"The Athlete List Add"})]}),s.jsx("div",{className:"form-table-wrapper"}),s.jsx("h2",{className:"form-title",children:"Add Athlete"}),c&&s.jsx("div",{style:{color:"green"},children:c}),s.jsxs("form",{onSubmit:J,className:"form-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:12},children:[s.jsxs("label",{children:["Last Name *",s.jsx("input",{value:P,onChange:E=>q(E.target.value),required:!0})]}),s.jsxs("label",{children:["First Name *",s.jsx("input",{value:X,onChange:E=>ae(E.target.value),required:!0})]}),s.jsxs("label",{children:["Date of Birth *",s.jsx("input",{type:"date",value:be,onChange:E=>Ne(E.target.value),required:!0})]}),s.jsxs("label",{children:["Place of Birth *",s.jsx("input",{value:De,onChange:E=>ke(E.target.value),required:!0})]}),s.jsxs("label",{children:["Role *",s.jsxs("select",{value:qe,onChange:E=>Ke(E.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),Y.map((E,pe)=>s.jsx("option",{value:typeof E=="object"?E.club_role??E.name??"":E,children:typeof E=="object"?E.club_role??E.name??"":E},pe))]})]}),s.jsxs("label",{children:["Blood Type *",s.jsxs("select",{value:dt,onChange:E=>He(E.target.value),required:!0,children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]})]}),s.jsxs("label",{children:["National Identity Number *",s.jsx("input",{value:Fe,onChange:E=>se(E.target.value.replace(/\D/g,"").slice(0,18)),maxLength:18,required:!0}),s.jsx("small",{children:"18 digits required — must be unique."})]}),s.jsxs("label",{children:["Password *",s.jsx("input",{type:"password",value:Et,onChange:E=>At(E.target.value),required:!0})]}),s.jsxs("label",{children:["Confirm Password *",s.jsx("input",{type:"password",value:We,onChange:E=>Oe(E.target.value),required:!0})]}),s.jsxs("label",{children:["Nationality *",s.jsxs("select",{value:xt,onChange:E=>Ft(E.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),Pe.map((E,pe)=>s.jsx("option",{value:E,children:E},pe))]})]}),s.jsxs("label",{children:["Grade *",s.jsxs("select",{value:Mt,onChange:E=>tt(E.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),s.jsx("option",{value:"brown belt",children:"brown belt"}),s.jsx("option",{value:"black belt",children:"black belt"})]})]}),s.jsxs("label",{children:["Genres *",s.jsxs("select",{value:_t,onChange:E=>Bt(E.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),Qe.map((E,pe)=>s.jsx("option",{value:E,children:E},pe))]})]}),s.jsxs("label",{children:["Categories *",s.jsxs("select",{value:vt,onChange:E=>kt(E.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),Te.map((E,pe)=>s.jsx("option",{value:E,children:E},pe))]})]}),s.jsxs("label",{children:["Weight *",s.jsxs("select",{value:yt,onChange:E=>It(E.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select --"}),Xe.map((E,pe)=>s.jsx("option",{value:E,children:E},pe))]})]}),s.jsxs("label",{children:["League *",s.jsxs("select",{value:F,onChange:E=>{$(E.target.value),D("")},disabled:!0,required:!0,children:[s.jsx("option",{value:"",children:"-- Select League --"}),he.map(E=>s.jsx("option",{value:E.id,children:E.name_league},E.id))]})]}),s.jsxs("label",{children:["Club *",s.jsxs("select",{value:Z,onChange:E=>D(E.target.value),disabled:!F&&!A,required:!0,children:[s.jsx("option",{value:"",children:"-- Select Club --"}),B.map(E=>s.jsx("option",{value:E.id,children:E.name_club},E.id))]})]}),s.jsxs("label",{children:["Upload Photo *",s.jsx("input",{type:"file",accept:"image/*",onChange:E=>{var pe;return ot(((pe=E.target.files)==null?void 0:pe[0])??null)},required:!0})]}),s.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",gap:8},children:s.jsx("button",{type:"submit",className:"primary-b",children:"Save Athlete"})}),s.jsx("p",{style:{gridColumn:"1 / -1",fontSize:"14px",color:"#666",marginTop:"10px"},children:"All fields marked with an asterisk (*) must be filled in."})]})]}),s.jsxs("section",{className:"app-container",children:[s.jsx("h2",{className:"form-title",children:"List of Athletes"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{children:["League",s.jsxs("select",{value:F,onChange:E=>{$(E.target.value),D("")},disabled:!0,children:[s.jsx("option",{value:"",children:"-- Select League --"}),he.map(E=>s.jsx("option",{value:E.id,children:E.name_league},E.id))]})]}),s.jsxs("label",{children:["Club:",s.jsxs("select",{value:Z,onChange:E=>D(E.target.value),disabled:!F&&!A,children:[s.jsx("option",{value:"",children:"-- All Clubs --"}),B.map(E=>s.jsx("option",{value:E.id,children:E.name_club},E.id))]})]}),s.jsx("div",{children:s.jsx("div",{children:s.jsx("h2",{className:"form-title",children:"search Member"})})}),s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or License Number",value:Je,onChange:E=>ze(E.target.value)})})]}),s.jsx("div",{className:"table-container",ref:Gt,style:{overflow:"auto"},children:s.jsxs("table",{className:"athlete-table",style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Last"}),s.jsx("th",{children:"First"}),s.jsx("th",{children:"DOB"}),s.jsx("th",{children:"POB"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Blood"}),s.jsx("th",{children:"NID"}),s.jsx("th",{children:"Nationality"}),s.jsx("th",{children:"Grade"}),s.jsx("th",{children:"Renewal"}),s.jsx("th",{children:"Year"}),s.jsx("th",{children:"Genres"}),s.jsx("th",{children:"Categories"}),s.jsx("th",{children:"Weight"}),s.jsx("th",{children:"License #"}),s.jsx("th",{children:"Registration"}),s.jsx("th",{children:"Photos"}),s.jsx("th",{children:"Confirmation"}),s.jsx("th",{children:"Club ID"}),s.jsx("th",{children:"League ID"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:T.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:21,children:"No athletes found."})}):T.map(E=>s.jsxs("tr",{onDoubleClick:()=>Q(E),style:{cursor:"pointer"},children:[s.jsx("td",{children:$e===E.id?s.jsx("input",{value:Be.last_name||"",onChange:pe=>at({...Be,last_name:pe.target.value})}):E.last_name}),s.jsx("td",{children:$e===E.id?s.jsx("input",{value:Be.first_name||"",onChange:pe=>at({...Be,first_name:pe.target.value})}):E.first_name}),s.jsx("td",{children:$e===E.id?s.jsx("input",{type:"date",value:Be.date_of_birth||"",onChange:pe=>at({...Be,date_of_birth:pe.target.value})}):E.date_of_birth}),s.jsx("td",{children:$e===E.id?s.jsx("input",{value:Be.place_of_birth||"",onChange:pe=>at({...Be,place_of_birth:pe.target.value})}):E.place_of_birth}),s.jsx("td",{children:$e===E.id?s.jsxs("select",{value:Be.role||"",onChange:pe=>at({...Be,role:pe.target.value}),children:[s.jsx("option",{value:"",children:"-- Select --"}),Y.map((pe,ge)=>s.jsx("option",{value:typeof pe=="object"?pe.club_role??pe.name??"":pe,children:typeof pe=="object"?pe.club_role??pe.name??"":pe},ge))]}):E.role}),s.jsx("td",{children:$e===E.id?s.jsxs("select",{value:Be.blood_type||"",onChange:pe=>at({...Be,blood_type:pe.target.value}),children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{children:"A+"}),s.jsx("option",{children:"A-"}),s.jsx("option",{children:"B+"}),s.jsx("option",{children:"B-"}),s.jsx("option",{children:"AB+"}),s.jsx("option",{children:"AB-"}),s.jsx("option",{children:"O+"}),s.jsx("option",{children:"O-"})]}):E.blood_type}),s.jsx("td",{children:E.national_id_number}),s.jsx("td",{children:$e===E.id?s.jsxs("select",{value:Be.nationality||"",onChange:pe=>at({...Be,nationality:pe.target.value}),children:[s.jsx("option",{value:"",children:"--"}),Pe.map((pe,ge)=>s.jsx("option",{value:pe,children:pe},ge))]}):E.nationality}),s.jsx("td",{children:$e===E.id?s.jsxs("select",{value:Be.grade||"",onChange:pe=>at({...Be,grade:pe.target.value}),children:[s.jsx("option",{value:"",children:"--"}),z.map((pe,ge)=>s.jsx("option",{value:pe,children:pe},ge))]}):E.grade}),s.jsx("td",{children:E.renewal}),s.jsx("td",{children:E.year}),s.jsx("td",{children:$e===E.id?s.jsxs("select",{value:Be.genres||"",onChange:pe=>at({...Be,genres:pe.target.value}),children:[s.jsx("option",{value:"",children:"--"}),Qe.map((pe,ge)=>s.jsx("option",{value:pe,children:pe},ge))]}):E.genres}),s.jsx("td",{children:$e===E.id?s.jsxs("select",{value:Be.categories||"",onChange:pe=>at({...Be,categories:pe.target.value}),children:[s.jsx("option",{value:"",children:"--"}),Te.map((pe,ge)=>s.jsx("option",{value:pe,children:pe},ge))]}):E.categories}),s.jsx("td",{children:$e===E.id?s.jsxs("select",{value:Be.weight||"",onChange:pe=>at({...Be,weight:pe.target.value}),disabled:!Be.genres||!Be.categories,children:[s.jsx("option",{value:"",children:"-- Select --"}),Xe.map((pe,ge)=>s.jsx("option",{value:pe,children:pe},ge))]}):E.weight}),s.jsx("td",{children:E.license_number}),s.jsx("td",{children:E.registration_date}),s.jsx("td",{children:E.photos_url?s.jsx("img",{src:E.photos_url,alt:`${E.first_name} ${E.last_name}`,style:{width:48,height:48,objectFit:"cover",borderRadius:6}}):"No Photo"}),s.jsx("td",{children:E.confirmation?"✅":"❌"}),s.jsx("td",{children:E.club_id}),s.jsx("td",{children:E.league_id}),s.jsx("td",{children:$e===E.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-S",onClick:M,children:"Save"}),s.jsx("button",{className:"secondary-btn",onClick:L,children:"Cancel "})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"primary-M",onClick:()=>w(E),children:"Modify"}),s.jsx("button",{className:"secondary-btn",onClick:()=>ie(E),children:"Delete"}),s.jsx("button",{className:E.confirmation?"cancel-btn":"confirm-btn",onClick:()=>_e(E.id,E.confirmation),children:E.confirmation?"Cancel Confirmation":"Confirm"})]})})]},E.id))})]})}),s.jsxs("div",{className:"export-buttons",style:{margin:"12px 0",display:"flex",gap:8},children:[s.jsx(Pr,{}),s.jsx("button",{className:"primary-b",onClick:de,children:"Export General PDF"}),s.jsx("button",{className:"primary-b",onClick:Ce,children:"Export by Category"}),s.jsx("button",{className:"primary-b",onClick:et,children:"Export by Grade PDF"})]})]}),o&&s.jsx(En,{error:o,onClose:()=>l("")}),c&&s.jsx(Rn,{success:c,onClose:()=>u("")}),i&&s.jsx(ya,{}),s.jsx(gn,{}),s.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:s.jsx("p",{children:"© 2025 Algerian Judo Federation. All rights reserved."})})]})}function c8(){const t=Mr();return s.jsxs("div",{style:{padding:"50px",backgroundColor:"#f0f0f0",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",gap:"30px"},children:[s.jsx("h1",{children:"Button Comparison Test"}),s.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",padding:"20px",backgroundColor:"white",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("p",{style:{marginBottom:"10px",fontWeight:"bold"},children:"primary-btn class:"}),s.jsx("button",{className:"primary-btn",children:"Primary Button"})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("p",{style:{marginBottom:"10px",fontWeight:"bold"},children:"primary-b class:"}),s.jsx("button",{className:"primary-b",children:"Primary B Button"})]})]}),s.jsx("div",{style:{display:"flex",gap:"20px",alignItems:"center",padding:"20px",backgroundColor:"white",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("p",{style:{marginBottom:"10px",fontWeight:"bold"},children:"primary-bt class (for comparison):"}),s.jsx("button",{className:"primary-bt",children:"Primary BT Button"})]})}),s.jsxs("p",{style:{maxWidth:"600px",textAlign:"center",backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:["The first two buttons (primary-btn and primary-b) should look ",s.jsx("strong",{children:"exactly identical"}),"with the same gradient, animations, and hover effects. The third button (primary-bt) has different enhanced styling for comparison."]}),s.jsx("button",{className:"secondary-btn",onClick:()=>t("/"),style:{marginTop:"20px"},children:"Back to Home"})]})}function u8(){return s.jsx(pN,{children:s.jsxs(hN,{children:[s.jsx(Vr,{path:"/",element:s.jsx(HP,{})}),s.jsx(Vr,{path:"/FederationPage",element:s.jsx(pL,{})}),s.jsx(Vr,{path:"/LeaguePage",element:s.jsx(GP,{})}),s.jsx(Vr,{path:"/AmateurSportsClubPage",element:s.jsx(BP,{})}),s.jsx(Vr,{path:"/AddMemberPage",element:s.jsx(JP,{})}),s.jsx(Vr,{path:"/AddMemberLeague",element:s.jsx(KP,{})}),s.jsx(Vr,{path:"/AddMemberClub",element:s.jsx(QP,{})}),s.jsx(Vr,{path:"/AthletePage",element:s.jsx(OP,{})}),s.jsx(Vr,{path:"/Athlete",element:s.jsx(UP,{})}),s.jsx(Vr,{path:"/MemberListPage",element:s.jsx(VP,{})}),s.jsx(Vr,{path:"/member-list",element:s.jsx(ZP,{})}),s.jsx(Vr,{path:"/club-member-list",element:s.jsx(e8,{})}),s.jsx(Vr,{path:"/MemberListPageP",element:s.jsx(t8,{})}),s.jsx(Vr,{path:"/member-list-l",element:s.jsx(r8,{})}),s.jsx(Vr,{path:"/club-member-listC",element:s.jsx(n8,{})}),s.jsx(Vr,{path:"/photos-logo-publication",element:s.jsx(XP,{})}),s.jsx(Vr,{path:"/TheClubListAdd-Fed",element:s.jsx(i8,{})}),s.jsx(Vr,{path:"/TheLeagueList-Add",element:s.jsx(s8,{})}),s.jsx(Vr,{path:"/TheAthleteList-Add",element:s.jsx(a8,{})}),s.jsx(Vr,{path:"/TheClubListAddFed-League",element:s.jsx(o8,{})}),s.jsx(Vr,{path:"/TheAthleteListAdd-League",element:s.jsx(l8,{})}),s.jsx(Vr,{path:"/button-test",element:s.jsx(c8,{})})]})})}rp.createRoot(document.getElementById("root")).render(s.jsx(u8,{}));export{Ar as _,Mi as c,My as g};
