var Hw=Object.defineProperty;var Gw=(t,e,r)=>e in t?Hw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ar=(t,e,r)=>Gw(t,typeof e!="symbol"?e+"":e,r);function Yw(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var By={exports:{}},Bh={},My={exports:{}},yr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),Jw=Symbol.for("react.portal"),Kw=Symbol.for("react.fragment"),Qw=Symbol.for("react.strict_mode"),Xw=Symbol.for("react.profiler"),Zw=Symbol.for("react.provider"),eS=Symbol.for("react.context"),tS=Symbol.for("react.forward_ref"),rS=Symbol.for("react.suspense"),nS=Symbol.for("react.memo"),iS=Symbol.for("react.lazy"),L1=Symbol.iterator;function aS(t){return t===null||typeof t!="object"?null:(t=L1&&t[L1]||t["@@iterator"],typeof t=="function"?t:null)}var Uy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qy=Object.assign,$y={};function ec(t,e,r){this.props=t,this.context=e,this.refs=$y,this.updater=r||Uy}ec.prototype.isReactComponent={};ec.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ec.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zy(){}zy.prototype=ec.prototype;function C0(t,e,r){this.props=t,this.context=e,this.refs=$y,this.updater=r||Uy}var L0=C0.prototype=new zy;L0.constructor=C0;qy(L0,ec.prototype);L0.isPureReactComponent=!0;var A1=Array.isArray,Wy=Object.prototype.hasOwnProperty,A0={current:null},Hy={key:!0,ref:!0,__self:!0,__source:!0};function Gy(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Wy.call(e,n)&&!Hy.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Tu,type:t,key:s,ref:o,props:i,_owner:A0.current}}function sS(t,e){return{$$typeof:Tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tu}function oS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var P1=/\/+/g;function Hf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oS(""+t.key):e.toString(36)}function Ud(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tu:case Jw:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Hf(o,0):n,A1(i)?(r="",t!=null&&(r=t.replace(P1,"$&/")+"/"),Ud(i,e,r,"",function(u){return u})):i!=null&&(P0(i)&&(i=sS(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(P1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",A1(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+Hf(s,l);o+=Ud(s,e,r,c,i)}else if(c=aS(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+Hf(s,l++),o+=Ud(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ld(t,e,r){if(t==null)return t;var n=[],i=0;return Ud(t,n,"","",function(s){return e.call(r,s,i++)}),n}function lS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ci={current:null},qd={transition:null},cS={ReactCurrentDispatcher:ci,ReactCurrentBatchConfig:qd,ReactCurrentOwner:A0};function Yy(){throw Error("act(...) is not supported in production builds of React.")}yr.Children={map:ld,forEach:function(t,e,r){ld(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ld(t,function(){e++}),e},toArray:function(t){return ld(t,function(e){return e})||[]},only:function(t){if(!P0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};yr.Component=ec;yr.Fragment=Kw;yr.Profiler=Xw;yr.PureComponent=C0;yr.StrictMode=Qw;yr.Suspense=rS;yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cS;yr.act=Yy;yr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=qy({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=A0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Wy.call(e,c)&&!Hy.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Tu,type:t.type,key:i,ref:s,props:n,_owner:o}};yr.createContext=function(t){return t={$$typeof:eS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zw,_context:t},t.Consumer=t};yr.createElement=Gy;yr.createFactory=function(t){var e=Gy.bind(null,t);return e.type=t,e};yr.createRef=function(){return{current:null}};yr.forwardRef=function(t){return{$$typeof:tS,render:t}};yr.isValidElement=P0;yr.lazy=function(t){return{$$typeof:iS,_payload:{_status:-1,_result:t},_init:lS}};yr.memo=function(t,e){return{$$typeof:nS,type:t,compare:e===void 0?null:e}};yr.startTransition=function(t){var e=qd.transition;qd.transition={};try{t()}finally{qd.transition=e}};yr.unstable_act=Yy;yr.useCallback=function(t,e){return ci.current.useCallback(t,e)};yr.useContext=function(t){return ci.current.useContext(t)};yr.useDebugValue=function(){};yr.useDeferredValue=function(t){return ci.current.useDeferredValue(t)};yr.useEffect=function(t,e){return ci.current.useEffect(t,e)};yr.useId=function(){return ci.current.useId()};yr.useImperativeHandle=function(t,e,r){return ci.current.useImperativeHandle(t,e,r)};yr.useInsertionEffect=function(t,e){return ci.current.useInsertionEffect(t,e)};yr.useLayoutEffect=function(t,e){return ci.current.useLayoutEffect(t,e)};yr.useMemo=function(t,e){return ci.current.useMemo(t,e)};yr.useReducer=function(t,e,r){return ci.current.useReducer(t,e,r)};yr.useRef=function(t){return ci.current.useRef(t)};yr.useState=function(t){return ci.current.useState(t)};yr.useSyncExternalStore=function(t,e,r){return ci.current.useSyncExternalStore(t,e,r)};yr.useTransition=function(){return ci.current.useTransition()};yr.version="18.3.1";My.exports=yr;var v=My.exports;const uS=Oy(v),dS=Yw({__proto__:null,default:uS},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS=v,fS=Symbol.for("react.element"),gS=Symbol.for("react.fragment"),pS=Object.prototype.hasOwnProperty,mS=hS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vS={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)pS.call(e,n)&&!vS.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:fS,type:t,key:s,ref:o,props:i,_owner:mS.current}}Bh.Fragment=gS;Bh.jsx=Vy;Bh.jsxs=Vy;By.exports=Bh;var a=By.exports,rp={},Jy={exports:{}},zi={},Ky={exports:{}},Qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,se){var ke=Y.length;Y.push(se);e:for(;0<ke;){var be=ke-1>>>1,E=Y[be];if(0<i(E,se))Y[be]=se,Y[ke]=E,ke=be;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var se=Y[0],ke=Y.pop();if(ke!==se){Y[0]=ke;e:for(var be=0,E=Y.length,q=E>>>1;be<q;){var oe=2*(be+1)-1,me=Y[oe],Ne=oe+1,Se=Y[Ne];if(0>i(me,ke))Ne<E&&0>i(Se,me)?(Y[be]=Se,Y[Ne]=ke,be=Ne):(Y[be]=me,Y[oe]=ke,be=oe);else if(Ne<E&&0>i(Se,ke))Y[be]=Se,Y[Ne]=ke,be=Ne;else break e}}return se}function i(Y,se){var ke=Y.sortIndex-se.sortIndex;return ke!==0?ke:Y.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,g=null,m=3,f=!1,x=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Y){for(var se=r(u);se!==null;){if(se.callback===null)n(u);else if(se.startTime<=Y)n(u),se.sortIndex=se.expirationTime,e(c,se);else break;se=r(u)}}function C(Y){if(w=!1,j(Y),!x)if(r(c)!==null)x=!0,ve($);else{var se=r(u);se!==null&&ue(C,se.startTime-Y)}}function $(Y,se){x=!1,w&&(w=!1,b(T),T=-1),f=!0;var ke=m;try{for(j(se),g=r(c);g!==null&&(!(g.expirationTime>se)||Y&&!I());){var be=g.callback;if(typeof be=="function"){g.callback=null,m=g.priorityLevel;var E=be(g.expirationTime<=se);se=t.unstable_now(),typeof E=="function"?g.callback=E:g===r(c)&&n(c),j(se)}else n(c);g=r(c)}if(g!==null)var q=!0;else{var oe=r(u);oe!==null&&ue(C,oe.startTime-se),q=!1}return q}finally{g=null,m=ke,f=!1}}var Z=!1,V=null,T=-1,R=5,z=-1;function I(){return!(t.unstable_now()-z<R)}function G(){if(V!==null){var Y=t.unstable_now();z=Y;var se=!0;try{se=V(!0,Y)}finally{se?de():(Z=!1,V=null)}}else Z=!1}var de;if(typeof S=="function")de=function(){S(G)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=G,de=function(){U.postMessage(null)}}else de=function(){N(G,0)};function ve(Y){V=Y,Z||(Z=!0,de())}function ue(Y,se){T=N(function(){Y(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){x||f||(x=!0,ve($))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var se=3;break;default:se=m}var ke=m;m=se;try{return Y()}finally{m=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ke=m;m=Y;try{return se()}finally{m=ke}},t.unstable_scheduleCallback=function(Y,se,ke){var be=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?be+ke:be):ke=be,Y){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=ke+E,Y={id:d++,callback:se,priorityLevel:Y,startTime:ke,expirationTime:E,sortIndex:-1},ke>be?(Y.sortIndex=ke,e(u,Y),r(c)===null&&Y===r(u)&&(w?(b(T),T=-1):w=!0,ue(C,ke-be))):(Y.sortIndex=E,e(c,Y),x||f||(x=!0,ve($))),Y},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(Y){var se=m;return function(){var ke=m;m=se;try{return Y.apply(this,arguments)}finally{m=ke}}}})(Qy);Ky.exports=Qy;var yS=Ky.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bS=v,qi=yS;function Ft(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xy=new Set,du={};function Mo(t,e){$l(t,e),$l(t+"Capture",e)}function $l(t,e){for(du[t]=e,t=0;t<e.length;t++)Xy.add(e[t])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=Object.prototype.hasOwnProperty,xS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k1={},E1={};function _S(t){return np.call(E1,t)?!0:np.call(k1,t)?!1:xS.test(t)?E1[t]=!0:(k1[t]=!0,!1)}function wS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SS(t,e,r,n){if(e===null||typeof e>"u"||wS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ui(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$n[t]=new ui(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$n[e]=new ui(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$n[t]=new ui(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$n[t]=new ui(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$n[t]=new ui(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$n[t]=new ui(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$n[t]=new ui(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$n[t]=new ui(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$n[t]=new ui(t,5,!1,t.toLowerCase(),null,!1,!1)});var k0=/[\-:]([a-z])/g;function E0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(k0,E0);$n[e]=new ui(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(k0,E0);$n[e]=new ui(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(k0,E0);$n[e]=new ui(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$n[t]=new ui(t,1,!1,t.toLowerCase(),null,!1,!1)});$n.xlinkHref=new ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$n[t]=new ui(t,1,!1,t.toLowerCase(),null,!0,!0)});function F0(t,e,r,n){var i=$n.hasOwnProperty(e)?$n[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SS(e,r,i,n)&&(r=null),n||i===null?_S(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var fs=bS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cd=Symbol.for("react.element"),yl=Symbol.for("react.portal"),bl=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),Zy=Symbol.for("react.provider"),eb=Symbol.for("react.context"),T0=Symbol.for("react.forward_ref"),ap=Symbol.for("react.suspense"),sp=Symbol.for("react.suspense_list"),I0=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),tb=Symbol.for("react.offscreen"),F1=Symbol.iterator;function Dc(t){return t===null||typeof t!="object"?null:(t=F1&&t[F1]||t["@@iterator"],typeof t=="function"?t:null)}var Qr=Object.assign,Gf;function Wc(t){if(Gf===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Gf=e&&e[1]||""}return`
`+Gf+t}var Yf=!1;function Vf(t,e){if(!t||Yf)return"";Yf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Yf=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Wc(t):""}function jS(t){switch(t.tag){case 5:return Wc(t.type);case 16:return Wc("Lazy");case 13:return Wc("Suspense");case 19:return Wc("SuspenseList");case 0:case 2:case 15:return t=Vf(t.type,!1),t;case 11:return t=Vf(t.type.render,!1),t;case 1:return t=Vf(t.type,!0),t;default:return""}}function op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bl:return"Fragment";case yl:return"Portal";case ip:return"Profiler";case D0:return"StrictMode";case ap:return"Suspense";case sp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eb:return(t.displayName||"Context")+".Consumer";case Zy:return(t._context.displayName||"Context")+".Provider";case T0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I0:return e=t.displayName||null,e!==null?e:op(t.type)||"Memo";case Fs:e=t._payload,t=t._init;try{return op(t(e))}catch{}}return null}function NS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return op(e);case 8:return e===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CS(t){var e=rb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ud(t){t._valueTracker||(t._valueTracker=CS(t))}function nb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=rb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lp(t,e){var r=e.checked;return Qr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function D1(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ks(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ib(t,e){e=e.checked,e!=null&&F0(t,"checked",e,!1)}function cp(t,e){ib(t,e);var r=Ks(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?up(t,e.type,r):e.hasOwnProperty("defaultValue")&&up(t,e.type,Ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function T1(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function up(t,e,r){(e!=="number"||ih(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Hc=Array.isArray;function El(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ks(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ft(91));return Qr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I1(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ft(92));if(Hc(r)){if(1<r.length)throw Error(Ft(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ks(r)}}function ab(t,e){var r=Ks(e.value),n=Ks(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function R1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dd,ob=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dd=dd||document.createElement("div"),dd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LS=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(t){LS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jc[e]=Jc[t]})});function lb(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Jc.hasOwnProperty(t)&&Jc[t]?(""+e).trim():e+"px"}function cb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=lb(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var AS=Qr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fp(t,e){if(e){if(AS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ft(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ft(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ft(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ft(62))}}function gp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=null;function R0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mp=null,Fl=null,Dl=null;function O1(t){if(t=Ou(t)){if(typeof mp!="function")throw Error(Ft(280));var e=t.stateNode;e&&(e=zh(e),mp(t.stateNode,t.type,e))}}function ub(t){Fl?Dl?Dl.push(t):Dl=[t]:Fl=t}function db(){if(Fl){var t=Fl,e=Dl;if(Dl=Fl=null,O1(t),e)for(t=0;t<e.length;t++)O1(e[t])}}function hb(t,e){return t(e)}function fb(){}var Jf=!1;function gb(t,e,r){if(Jf)return t(e,r);Jf=!0;try{return hb(t,e,r)}finally{Jf=!1,(Fl!==null||Dl!==null)&&(fb(),db())}}function fu(t,e){var r=t.stateNode;if(r===null)return null;var n=zh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ft(231,e,typeof r));return r}var vp=!1;if(ls)try{var Tc={};Object.defineProperty(Tc,"passive",{get:function(){vp=!0}}),window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{vp=!1}function PS(t,e,r,n,i,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Kc=!1,ah=null,sh=!1,yp=null,kS={onError:function(t){Kc=!0,ah=t}};function ES(t,e,r,n,i,s,o,l,c){Kc=!1,ah=null,PS.apply(kS,arguments)}function FS(t,e,r,n,i,s,o,l,c){if(ES.apply(this,arguments),Kc){if(Kc){var u=ah;Kc=!1,ah=null}else throw Error(Ft(198));sh||(sh=!0,yp=u)}}function Uo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B1(t){if(Uo(t)!==t)throw Error(Ft(188))}function DS(t){var e=t.alternate;if(!e){if(e=Uo(t),e===null)throw Error(Ft(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return B1(i),t;if(s===n)return B1(i),e;s=s.sibling}throw Error(Ft(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o)throw Error(Ft(189))}}if(r.alternate!==n)throw Error(Ft(190))}if(r.tag!==3)throw Error(Ft(188));return r.stateNode.current===r?t:e}function mb(t){return t=DS(t),t!==null?vb(t):null}function vb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vb(t);if(e!==null)return e;t=t.sibling}return null}var yb=qi.unstable_scheduleCallback,M1=qi.unstable_cancelCallback,TS=qi.unstable_shouldYield,IS=qi.unstable_requestPaint,un=qi.unstable_now,RS=qi.unstable_getCurrentPriorityLevel,O0=qi.unstable_ImmediatePriority,bb=qi.unstable_UserBlockingPriority,oh=qi.unstable_NormalPriority,OS=qi.unstable_LowPriority,xb=qi.unstable_IdlePriority,Mh=null,Oa=null;function BS(t){if(Oa&&typeof Oa.onCommitFiberRoot=="function")try{Oa.onCommitFiberRoot(Mh,t,void 0,(t.current.flags&128)===128)}catch{}}var pa=Math.clz32?Math.clz32:qS,MS=Math.log,US=Math.LN2;function qS(t){return t>>>=0,t===0?32:31-(MS(t)/US|0)|0}var hd=64,fd=4194304;function Gc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=Gc(l):(s&=o,s!==0&&(n=Gc(s)))}else o=r&~i,o!==0?n=Gc(o):s!==0&&(n=Gc(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-pa(e),i=1<<r,n|=t[r],e&=~i;return n}function $S(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-pa(s),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=$S(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function bp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _b(){var t=hd;return hd<<=1,!(hd&4194240)&&(hd=64),t}function Kf(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Iu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pa(e),t[e]=r}function WS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-pa(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function B0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-pa(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var kr=0;function wb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sb,M0,jb,Nb,Cb,xp=!1,gd=[],$s=null,zs=null,Ws=null,gu=new Map,pu=new Map,Ts=[],HS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U1(t,e){switch(t){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":gu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pu.delete(e.pointerId)}}function Ic(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ou(e),e!==null&&M0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function GS(t,e,r,n,i){switch(e){case"focusin":return $s=Ic($s,t,e,r,n,i),!0;case"dragenter":return zs=Ic(zs,t,e,r,n,i),!0;case"mouseover":return Ws=Ic(Ws,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return gu.set(s,Ic(gu.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,pu.set(s,Ic(pu.get(s)||null,t,e,r,n,i)),!0}return!1}function Lb(t){var e=No(t.target);if(e!==null){var r=Uo(e);if(r!==null){if(e=r.tag,e===13){if(e=pb(r),e!==null){t.blockedOn=e,Cb(t.priority,function(){jb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=_p(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);pp=n,r.target.dispatchEvent(n),pp=null}else return e=Ou(r),e!==null&&M0(e),t.blockedOn=r,!1;e.shift()}return!0}function q1(t,e,r){$d(t)&&r.delete(e)}function YS(){xp=!1,$s!==null&&$d($s)&&($s=null),zs!==null&&$d(zs)&&(zs=null),Ws!==null&&$d(Ws)&&(Ws=null),gu.forEach(q1),pu.forEach(q1)}function Rc(t,e){t.blockedOn===e&&(t.blockedOn=null,xp||(xp=!0,qi.unstable_scheduleCallback(qi.unstable_NormalPriority,YS)))}function mu(t){function e(i){return Rc(i,t)}if(0<gd.length){Rc(gd[0],t);for(var r=1;r<gd.length;r++){var n=gd[r];n.blockedOn===t&&(n.blockedOn=null)}}for($s!==null&&Rc($s,t),zs!==null&&Rc(zs,t),Ws!==null&&Rc(Ws,t),gu.forEach(e),pu.forEach(e),r=0;r<Ts.length;r++)n=Ts[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ts.length&&(r=Ts[0],r.blockedOn===null);)Lb(r),r.blockedOn===null&&Ts.shift()}var Tl=fs.ReactCurrentBatchConfig,ch=!0;function VS(t,e,r,n){var i=kr,s=Tl.transition;Tl.transition=null;try{kr=1,U0(t,e,r,n)}finally{kr=i,Tl.transition=s}}function JS(t,e,r,n){var i=kr,s=Tl.transition;Tl.transition=null;try{kr=4,U0(t,e,r,n)}finally{kr=i,Tl.transition=s}}function U0(t,e,r,n){if(ch){var i=_p(t,e,r,n);if(i===null)sg(t,e,n,uh,r),U1(t,n);else if(GS(i,t,e,r,n))n.stopPropagation();else if(U1(t,n),e&4&&-1<HS.indexOf(t)){for(;i!==null;){var s=Ou(i);if(s!==null&&Sb(s),s=_p(t,e,r,n),s===null&&sg(t,e,n,uh,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else sg(t,e,n,null,r)}}var uh=null;function _p(t,e,r,n){if(uh=null,t=R0(n),t=No(t),t!==null)if(e=Uo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=pb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uh=t,null}function Ab(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RS()){case O0:return 1;case bb:return 4;case oh:case OS:return 16;case xb:return 536870912;default:return 16}default:return 16}}var Os=null,q0=null,zd=null;function Pb(){if(zd)return zd;var t,e=q0,r=e.length,n,i="value"in Os?Os.value:Os.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return zd=i.slice(t,1<n?1-n:void 0)}function Wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pd(){return!0}function $1(){return!1}function Wi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pd:$1,this.isPropagationStopped=$1,this}return Qr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$0=Wi(tc),Ru=Qr({},tc,{view:0,detail:0}),KS=Wi(Ru),Qf,Xf,Oc,Uh=Qr({},Ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oc&&(Oc&&t.type==="mousemove"?(Qf=t.screenX-Oc.screenX,Xf=t.screenY-Oc.screenY):Xf=Qf=0,Oc=t),Qf)},movementY:function(t){return"movementY"in t?t.movementY:Xf}}),z1=Wi(Uh),QS=Qr({},Uh,{dataTransfer:0}),XS=Wi(QS),ZS=Qr({},Ru,{relatedTarget:0}),Zf=Wi(ZS),ej=Qr({},tc,{animationName:0,elapsedTime:0,pseudoElement:0}),tj=Wi(ej),rj=Qr({},tc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nj=Wi(rj),ij=Qr({},tc,{data:0}),W1=Wi(ij),aj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oj[t])?!!e[t]:!1}function z0(){return lj}var cj=Qr({},Ru,{key:function(t){if(t.key){var e=aj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z0,charCode:function(t){return t.type==="keypress"?Wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uj=Wi(cj),dj=Qr({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H1=Wi(dj),hj=Qr({},Ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z0}),fj=Wi(hj),gj=Qr({},tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),pj=Wi(gj),mj=Qr({},Uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vj=Wi(mj),yj=[9,13,27,32],W0=ls&&"CompositionEvent"in window,Qc=null;ls&&"documentMode"in document&&(Qc=document.documentMode);var bj=ls&&"TextEvent"in window&&!Qc,kb=ls&&(!W0||Qc&&8<Qc&&11>=Qc),G1=" ",Y1=!1;function Eb(t,e){switch(t){case"keyup":return yj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xl=!1;function xj(t,e){switch(t){case"compositionend":return Fb(e);case"keypress":return e.which!==32?null:(Y1=!0,G1);case"textInput":return t=e.data,t===G1&&Y1?null:t;default:return null}}function _j(t,e){if(xl)return t==="compositionend"||!W0&&Eb(t,e)?(t=Pb(),zd=q0=Os=null,xl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kb&&e.locale!=="ko"?null:e.data;default:return null}}var wj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wj[t.type]:e==="textarea"}function Db(t,e,r,n){ub(n),e=dh(e,"onChange"),0<e.length&&(r=new $0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Xc=null,vu=null;function Sj(t){Wb(t,0)}function qh(t){var e=Sl(t);if(nb(e))return t}function jj(t,e){if(t==="change")return e}var Tb=!1;if(ls){var eg;if(ls){var tg="oninput"in document;if(!tg){var J1=document.createElement("div");J1.setAttribute("oninput","return;"),tg=typeof J1.oninput=="function"}eg=tg}else eg=!1;Tb=eg&&(!document.documentMode||9<document.documentMode)}function K1(){Xc&&(Xc.detachEvent("onpropertychange",Ib),vu=Xc=null)}function Ib(t){if(t.propertyName==="value"&&qh(vu)){var e=[];Db(e,vu,t,R0(t)),gb(Sj,e)}}function Nj(t,e,r){t==="focusin"?(K1(),Xc=e,vu=r,Xc.attachEvent("onpropertychange",Ib)):t==="focusout"&&K1()}function Cj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qh(vu)}function Lj(t,e){if(t==="click")return qh(e)}function Aj(t,e){if(t==="input"||t==="change")return qh(e)}function Pj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ya=typeof Object.is=="function"?Object.is:Pj;function yu(t,e){if(ya(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!np.call(e,i)||!ya(t[i],e[i]))return!1}return!0}function Q1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X1(t,e){var r=Q1(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Q1(r)}}function Rb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ob(){for(var t=window,e=ih();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ih(t.document)}return e}function H0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kj(t){var e=Ob(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Rb(r.ownerDocument.documentElement,r)){if(n!==null&&H0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=X1(r,s);var o=X1(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ej=ls&&"documentMode"in document&&11>=document.documentMode,_l=null,wp=null,Zc=null,Sp=!1;function Z1(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sp||_l==null||_l!==ih(n)||(n=_l,"selectionStart"in n&&H0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zc&&yu(Zc,n)||(Zc=n,n=dh(wp,"onSelect"),0<n.length&&(e=new $0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=_l)))}function md(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wl={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},rg={},Bb={};ls&&(Bb=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function $h(t){if(rg[t])return rg[t];if(!wl[t])return t;var e=wl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Bb)return rg[t]=e[r];return t}var Mb=$h("animationend"),Ub=$h("animationiteration"),qb=$h("animationstart"),$b=$h("transitionend"),zb=new Map,e2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(t,e){zb.set(t,e),Mo(e,[t])}for(var ng=0;ng<e2.length;ng++){var ig=e2[ng],Fj=ig.toLowerCase(),Dj=ig[0].toUpperCase()+ig.slice(1);Zs(Fj,"on"+Dj)}Zs(Mb,"onAnimationEnd");Zs(Ub,"onAnimationIteration");Zs(qb,"onAnimationStart");Zs("dblclick","onDoubleClick");Zs("focusin","onFocus");Zs("focusout","onBlur");Zs($b,"onTransitionEnd");$l("onMouseEnter",["mouseout","mouseover"]);$l("onMouseLeave",["mouseout","mouseover"]);$l("onPointerEnter",["pointerout","pointerover"]);$l("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yc));function t2(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,FS(n,e,void 0,t),t.currentTarget=null}function Wb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;t2(i,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;t2(i,l,u),s=c}}}if(sh)throw t=yp,sh=!1,yp=null,t}function $r(t,e){var r=e[Ap];r===void 0&&(r=e[Ap]=new Set);var n=t+"__bubble";r.has(n)||(Hb(e,t,2,!1),r.add(n))}function ag(t,e,r){var n=0;e&&(n|=4),Hb(r,t,n,e)}var vd="_reactListening"+Math.random().toString(36).slice(2);function bu(t){if(!t[vd]){t[vd]=!0,Xy.forEach(function(r){r!=="selectionchange"&&(Tj.has(r)||ag(r,!1,t),ag(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vd]||(e[vd]=!0,ag("selectionchange",!1,e))}}function Hb(t,e,r,n){switch(Ab(e)){case 1:var i=VS;break;case 4:i=JS;break;default:i=U0}r=i.bind(null,e,r,t),i=void 0,!vp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function sg(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=No(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}gb(function(){var u=s,d=R0(r),g=[];e:{var m=zb.get(t);if(m!==void 0){var f=$0,x=t;switch(t){case"keypress":if(Wd(r)===0)break e;case"keydown":case"keyup":f=uj;break;case"focusin":x="focus",f=Zf;break;case"focusout":x="blur",f=Zf;break;case"beforeblur":case"afterblur":f=Zf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=z1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=XS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fj;break;case Mb:case Ub:case qb:f=tj;break;case $b:f=pj;break;case"scroll":f=KS;break;case"wheel":f=vj;break;case"copy":case"cut":case"paste":f=nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=H1}var w=(e&4)!==0,N=!w&&t==="scroll",b=w?m!==null?m+"Capture":null:m;w=[];for(var S=u,j;S!==null;){j=S;var C=j.stateNode;if(j.tag===5&&C!==null&&(j=C,b!==null&&(C=fu(S,b),C!=null&&w.push(xu(S,C,j)))),N)break;S=S.return}0<w.length&&(m=new f(m,x,null,r,d),g.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",m&&r!==pp&&(x=r.relatedTarget||r.fromElement)&&(No(x)||x[cs]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(x=r.relatedTarget||r.toElement,f=u,x=x?No(x):null,x!==null&&(N=Uo(x),x!==N||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=u),f!==x)){if(w=z1,C="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=H1,C="onPointerLeave",b="onPointerEnter",S="pointer"),N=f==null?m:Sl(f),j=x==null?m:Sl(x),m=new w(C,S+"leave",f,r,d),m.target=N,m.relatedTarget=j,C=null,No(d)===u&&(w=new w(b,S+"enter",x,r,d),w.target=j,w.relatedTarget=N,C=w),N=C,f&&x)t:{for(w=f,b=x,S=0,j=w;j;j=al(j))S++;for(j=0,C=b;C;C=al(C))j++;for(;0<S-j;)w=al(w),S--;for(;0<j-S;)b=al(b),j--;for(;S--;){if(w===b||b!==null&&w===b.alternate)break t;w=al(w),b=al(b)}w=null}else w=null;f!==null&&r2(g,m,f,w,!1),x!==null&&N!==null&&r2(g,N,x,w,!0)}}e:{if(m=u?Sl(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var $=jj;else if(V1(m))if(Tb)$=Aj;else{$=Cj;var Z=Nj}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&($=Lj);if($&&($=$(t,u))){Db(g,$,r,d);break e}Z&&Z(t,m,u),t==="focusout"&&(Z=m._wrapperState)&&Z.controlled&&m.type==="number"&&up(m,"number",m.value)}switch(Z=u?Sl(u):window,t){case"focusin":(V1(Z)||Z.contentEditable==="true")&&(_l=Z,wp=u,Zc=null);break;case"focusout":Zc=wp=_l=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,Z1(g,r,d);break;case"selectionchange":if(Ej)break;case"keydown":case"keyup":Z1(g,r,d)}var V;if(W0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else xl?Eb(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(kb&&r.locale!=="ko"&&(xl||T!=="onCompositionStart"?T==="onCompositionEnd"&&xl&&(V=Pb()):(Os=d,q0="value"in Os?Os.value:Os.textContent,xl=!0)),Z=dh(u,T),0<Z.length&&(T=new W1(T,t,null,r,d),g.push({event:T,listeners:Z}),V?T.data=V:(V=Fb(r),V!==null&&(T.data=V)))),(V=bj?xj(t,r):_j(t,r))&&(u=dh(u,"onBeforeInput"),0<u.length&&(d=new W1("onBeforeInput","beforeinput",null,r,d),g.push({event:d,listeners:u}),d.data=V))}Wb(g,e)})}function xu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function dh(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fu(t,r),s!=null&&n.unshift(xu(t,s,i)),s=fu(t,e),s!=null&&n.push(xu(t,s,i))),t=t.return}return n}function al(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function r2(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=fu(r,s),c!=null&&o.unshift(xu(r,c,l))):i||(c=fu(r,s),c!=null&&o.push(xu(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Ij=/\r\n?/g,Rj=/\u0000|\uFFFD/g;function n2(t){return(typeof t=="string"?t:""+t).replace(Ij,`
`).replace(Rj,"")}function yd(t,e,r){if(e=n2(e),n2(t)!==e&&r)throw Error(Ft(425))}function hh(){}var jp=null,Np=null;function Cp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lp=typeof setTimeout=="function"?setTimeout:void 0,Oj=typeof clearTimeout=="function"?clearTimeout:void 0,i2=typeof Promise=="function"?Promise:void 0,Bj=typeof queueMicrotask=="function"?queueMicrotask:typeof i2<"u"?function(t){return i2.resolve(null).then(t).catch(Mj)}:Lp;function Mj(t){setTimeout(function(){throw t})}function og(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),mu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);mu(e)}function Hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var rc=Math.random().toString(36).slice(2),Ia="__reactFiber$"+rc,_u="__reactProps$"+rc,cs="__reactContainer$"+rc,Ap="__reactEvents$"+rc,Uj="__reactListeners$"+rc,qj="__reactHandles$"+rc;function No(t){var e=t[Ia];if(e)return e;for(var r=t.parentNode;r;){if(e=r[cs]||r[Ia]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=a2(t);t!==null;){if(r=t[Ia])return r;t=a2(t)}return e}t=r,r=t.parentNode}return null}function Ou(t){return t=t[Ia]||t[cs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ft(33))}function zh(t){return t[_u]||null}var Pp=[],jl=-1;function eo(t){return{current:t}}function Wr(t){0>jl||(t.current=Pp[jl],Pp[jl]=null,jl--)}function Mr(t,e){jl++,Pp[jl]=t.current,t.current=e}var Qs={},Zn=eo(Qs),xi=eo(!1),Fo=Qs;function zl(t,e){var r=t.type.contextTypes;if(!r)return Qs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _i(t){return t=t.childContextTypes,t!=null}function fh(){Wr(xi),Wr(Zn)}function s2(t,e,r){if(Zn.current!==Qs)throw Error(Ft(168));Mr(Zn,e),Mr(xi,r)}function Gb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Ft(108,NS(t)||"Unknown",i));return Qr({},r,n)}function gh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qs,Fo=Zn.current,Mr(Zn,t),Mr(xi,xi.current),!0}function o2(t,e,r){var n=t.stateNode;if(!n)throw Error(Ft(169));r?(t=Gb(t,e,Fo),n.__reactInternalMemoizedMergedChildContext=t,Wr(xi),Wr(Zn),Mr(Zn,t)):Wr(xi),Mr(xi,r)}var rs=null,Wh=!1,lg=!1;function Yb(t){rs===null?rs=[t]:rs.push(t)}function $j(t){Wh=!0,Yb(t)}function to(){if(!lg&&rs!==null){lg=!0;var t=0,e=kr;try{var r=rs;for(kr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}rs=null,Wh=!1}catch(i){throw rs!==null&&(rs=rs.slice(t+1)),yb(O0,to),i}finally{kr=e,lg=!1}}return null}var Nl=[],Cl=0,ph=null,mh=0,Ki=[],Qi=0,Do=null,is=1,as="";function bo(t,e){Nl[Cl++]=mh,Nl[Cl++]=ph,ph=t,mh=e}function Vb(t,e,r){Ki[Qi++]=is,Ki[Qi++]=as,Ki[Qi++]=Do,Do=t;var n=is;t=as;var i=32-pa(n)-1;n&=~(1<<i),r+=1;var s=32-pa(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,is=1<<32-pa(e)+i|r<<i|n,as=s+t}else is=1<<s|r<<i|n,as=t}function G0(t){t.return!==null&&(bo(t,1),Vb(t,1,0))}function Y0(t){for(;t===ph;)ph=Nl[--Cl],Nl[Cl]=null,mh=Nl[--Cl],Nl[Cl]=null;for(;t===Do;)Do=Ki[--Qi],Ki[Qi]=null,as=Ki[--Qi],Ki[Qi]=null,is=Ki[--Qi],Ki[Qi]=null}var Mi=null,Ri=null,Gr=!1,ga=null;function Jb(t,e){var r=Xi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function l2(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mi=t,Ri=Hs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mi=t,Ri=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Do!==null?{id:is,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Xi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Mi=t,Ri=null,!0):!1;default:return!1}}function kp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ep(t){if(Gr){var e=Ri;if(e){var r=e;if(!l2(t,e)){if(kp(t))throw Error(Ft(418));e=Hs(r.nextSibling);var n=Mi;e&&l2(t,e)?Jb(n,r):(t.flags=t.flags&-4097|2,Gr=!1,Mi=t)}}else{if(kp(t))throw Error(Ft(418));t.flags=t.flags&-4097|2,Gr=!1,Mi=t}}}function c2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mi=t}function bd(t){if(t!==Mi)return!1;if(!Gr)return c2(t),Gr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cp(t.type,t.memoizedProps)),e&&(e=Ri)){if(kp(t))throw Kb(),Error(Ft(418));for(;e;)Jb(t,e),e=Hs(e.nextSibling)}if(c2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ft(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ri=Hs(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ri=null}}else Ri=Mi?Hs(t.stateNode.nextSibling):null;return!0}function Kb(){for(var t=Ri;t;)t=Hs(t.nextSibling)}function Wl(){Ri=Mi=null,Gr=!1}function V0(t){ga===null?ga=[t]:ga.push(t)}var zj=fs.ReactCurrentBatchConfig;function Bc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ft(309));var n=r.stateNode}if(!n)throw Error(Ft(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ft(284));if(!r._owner)throw Error(Ft(290,t))}return t}function xd(t,e){throw t=Object.prototype.toString.call(e),Error(Ft(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function u2(t){var e=t._init;return e(t._payload)}function Qb(t){function e(b,S){if(t){var j=b.deletions;j===null?(b.deletions=[S],b.flags|=16):j.push(S)}}function r(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function n(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=Js(b,S),b.index=0,b.sibling=null,b}function s(b,S,j){return b.index=j,t?(j=b.alternate,j!==null?(j=j.index,j<S?(b.flags|=2,S):j):(b.flags|=2,S)):(b.flags|=1048576,S)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,S,j,C){return S===null||S.tag!==6?(S=pg(j,b.mode,C),S.return=b,S):(S=i(S,j),S.return=b,S)}function c(b,S,j,C){var $=j.type;return $===bl?d(b,S,j.props.children,C,j.key):S!==null&&(S.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Fs&&u2($)===S.type)?(C=i(S,j.props),C.ref=Bc(b,S,j),C.return=b,C):(C=Qd(j.type,j.key,j.props,null,b.mode,C),C.ref=Bc(b,S,j),C.return=b,C)}function u(b,S,j,C){return S===null||S.tag!==4||S.stateNode.containerInfo!==j.containerInfo||S.stateNode.implementation!==j.implementation?(S=mg(j,b.mode,C),S.return=b,S):(S=i(S,j.children||[]),S.return=b,S)}function d(b,S,j,C,$){return S===null||S.tag!==7?(S=Po(j,b.mode,C,$),S.return=b,S):(S=i(S,j),S.return=b,S)}function g(b,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return S=pg(""+S,b.mode,j),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cd:return j=Qd(S.type,S.key,S.props,null,b.mode,j),j.ref=Bc(b,null,S),j.return=b,j;case yl:return S=mg(S,b.mode,j),S.return=b,S;case Fs:var C=S._init;return g(b,C(S._payload),j)}if(Hc(S)||Dc(S))return S=Po(S,b.mode,j,null),S.return=b,S;xd(b,S)}return null}function m(b,S,j,C){var $=S!==null?S.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return $!==null?null:l(b,S,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case cd:return j.key===$?c(b,S,j,C):null;case yl:return j.key===$?u(b,S,j,C):null;case Fs:return $=j._init,m(b,S,$(j._payload),C)}if(Hc(j)||Dc(j))return $!==null?null:d(b,S,j,C,null);xd(b,j)}return null}function f(b,S,j,C,$){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(j)||null,l(S,b,""+C,$);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case cd:return b=b.get(C.key===null?j:C.key)||null,c(S,b,C,$);case yl:return b=b.get(C.key===null?j:C.key)||null,u(S,b,C,$);case Fs:var Z=C._init;return f(b,S,j,Z(C._payload),$)}if(Hc(C)||Dc(C))return b=b.get(j)||null,d(S,b,C,$,null);xd(S,C)}return null}function x(b,S,j,C){for(var $=null,Z=null,V=S,T=S=0,R=null;V!==null&&T<j.length;T++){V.index>T?(R=V,V=null):R=V.sibling;var z=m(b,V,j[T],C);if(z===null){V===null&&(V=R);break}t&&V&&z.alternate===null&&e(b,V),S=s(z,S,T),Z===null?$=z:Z.sibling=z,Z=z,V=R}if(T===j.length)return r(b,V),Gr&&bo(b,T),$;if(V===null){for(;T<j.length;T++)V=g(b,j[T],C),V!==null&&(S=s(V,S,T),Z===null?$=V:Z.sibling=V,Z=V);return Gr&&bo(b,T),$}for(V=n(b,V);T<j.length;T++)R=f(V,b,T,j[T],C),R!==null&&(t&&R.alternate!==null&&V.delete(R.key===null?T:R.key),S=s(R,S,T),Z===null?$=R:Z.sibling=R,Z=R);return t&&V.forEach(function(I){return e(b,I)}),Gr&&bo(b,T),$}function w(b,S,j,C){var $=Dc(j);if(typeof $!="function")throw Error(Ft(150));if(j=$.call(j),j==null)throw Error(Ft(151));for(var Z=$=null,V=S,T=S=0,R=null,z=j.next();V!==null&&!z.done;T++,z=j.next()){V.index>T?(R=V,V=null):R=V.sibling;var I=m(b,V,z.value,C);if(I===null){V===null&&(V=R);break}t&&V&&I.alternate===null&&e(b,V),S=s(I,S,T),Z===null?$=I:Z.sibling=I,Z=I,V=R}if(z.done)return r(b,V),Gr&&bo(b,T),$;if(V===null){for(;!z.done;T++,z=j.next())z=g(b,z.value,C),z!==null&&(S=s(z,S,T),Z===null?$=z:Z.sibling=z,Z=z);return Gr&&bo(b,T),$}for(V=n(b,V);!z.done;T++,z=j.next())z=f(V,b,T,z.value,C),z!==null&&(t&&z.alternate!==null&&V.delete(z.key===null?T:z.key),S=s(z,S,T),Z===null?$=z:Z.sibling=z,Z=z);return t&&V.forEach(function(G){return e(b,G)}),Gr&&bo(b,T),$}function N(b,S,j,C){if(typeof j=="object"&&j!==null&&j.type===bl&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case cd:e:{for(var $=j.key,Z=S;Z!==null;){if(Z.key===$){if($=j.type,$===bl){if(Z.tag===7){r(b,Z.sibling),S=i(Z,j.props.children),S.return=b,b=S;break e}}else if(Z.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Fs&&u2($)===Z.type){r(b,Z.sibling),S=i(Z,j.props),S.ref=Bc(b,Z,j),S.return=b,b=S;break e}r(b,Z);break}else e(b,Z);Z=Z.sibling}j.type===bl?(S=Po(j.props.children,b.mode,C,j.key),S.return=b,b=S):(C=Qd(j.type,j.key,j.props,null,b.mode,C),C.ref=Bc(b,S,j),C.return=b,b=C)}return o(b);case yl:e:{for(Z=j.key;S!==null;){if(S.key===Z)if(S.tag===4&&S.stateNode.containerInfo===j.containerInfo&&S.stateNode.implementation===j.implementation){r(b,S.sibling),S=i(S,j.children||[]),S.return=b,b=S;break e}else{r(b,S);break}else e(b,S);S=S.sibling}S=mg(j,b.mode,C),S.return=b,b=S}return o(b);case Fs:return Z=j._init,N(b,S,Z(j._payload),C)}if(Hc(j))return x(b,S,j,C);if(Dc(j))return w(b,S,j,C);xd(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,S!==null&&S.tag===6?(r(b,S.sibling),S=i(S,j),S.return=b,b=S):(r(b,S),S=pg(j,b.mode,C),S.return=b,b=S),o(b)):r(b,S)}return N}var Hl=Qb(!0),Xb=Qb(!1),vh=eo(null),yh=null,Ll=null,J0=null;function K0(){J0=Ll=yh=null}function Q0(t){var e=vh.current;Wr(vh),t._currentValue=e}function Fp(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Il(t,e){yh=t,J0=Ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yi=!0),t.firstContext=null)}function ea(t){var e=t._currentValue;if(J0!==t)if(t={context:t,memoizedValue:e,next:null},Ll===null){if(yh===null)throw Error(Ft(308));Ll=t,yh.dependencies={lanes:0,firstContext:t}}else Ll=Ll.next=t;return e}var Co=null;function X0(t){Co===null?Co=[t]:Co.push(t)}function Zb(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,X0(e)):(r.next=i.next,i.next=r),e.interleaved=r,us(t,n)}function us(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ds=!1;function Z0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function os(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Sr&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,us(t,r)}return i=n.interleaved,i===null?(e.next=e,X0(n)):(e.next=i.next,i.next=e),n.interleaved=e,us(t,r)}function Hd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,B0(t,r)}}function d2(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bh(t,e,r,n){var i=t.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var g=i.baseState;o=0,d=u=c=null,l=s;do{var m=l.lane,f=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,w=l;switch(m=e,f=r,w.tag){case 1:if(x=w.payload,typeof x=="function"){g=x.call(f,g,m);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,m=typeof x=="function"?x.call(f,g,m):x,m==null)break e;g=Qr({},g,m);break e;case 2:Ds=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=g):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=g),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Io|=o,t.lanes=o,t.memoizedState=g}}function h2(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ft(191,i));i.call(n)}}}var Bu={},Ba=eo(Bu),wu=eo(Bu),Su=eo(Bu);function Lo(t){if(t===Bu)throw Error(Ft(174));return t}function em(t,e){switch(Mr(Su,e),Mr(wu,t),Mr(Ba,Bu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hp(e,t)}Wr(Ba),Mr(Ba,e)}function Gl(){Wr(Ba),Wr(wu),Wr(Su)}function t5(t){Lo(Su.current);var e=Lo(Ba.current),r=hp(e,t.type);e!==r&&(Mr(wu,t),Mr(Ba,r))}function tm(t){wu.current===t&&(Wr(Ba),Wr(wu))}var Jr=eo(0);function xh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cg=[];function rm(){for(var t=0;t<cg.length;t++)cg[t]._workInProgressVersionPrimary=null;cg.length=0}var Gd=fs.ReactCurrentDispatcher,ug=fs.ReactCurrentBatchConfig,To=0,Kr=null,Nn=null,En=null,_h=!1,eu=!1,ju=0,Wj=0;function Wn(){throw Error(Ft(321))}function nm(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ya(t[r],e[r]))return!1;return!0}function im(t,e,r,n,i,s){if(To=s,Kr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gd.current=t===null||t.memoizedState===null?Vj:Jj,t=r(n,i),eu){s=0;do{if(eu=!1,ju=0,25<=s)throw Error(Ft(301));s+=1,En=Nn=null,e.updateQueue=null,Gd.current=Kj,t=r(n,i)}while(eu)}if(Gd.current=wh,e=Nn!==null&&Nn.next!==null,To=0,En=Nn=Kr=null,_h=!1,e)throw Error(Ft(300));return t}function am(){var t=ju!==0;return ju=0,t}function Da(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Kr.memoizedState=En=t:En=En.next=t,En}function ta(){if(Nn===null){var t=Kr.alternate;t=t!==null?t.memoizedState:null}else t=Nn.next;var e=En===null?Kr.memoizedState:En.next;if(e!==null)En=e,Nn=t;else{if(t===null)throw Error(Ft(310));Nn=t,t={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},En===null?Kr.memoizedState=En=t:En=En.next=t}return En}function Nu(t,e){return typeof e=="function"?e(t):e}function dg(t){var e=ta(),r=e.queue;if(r===null)throw Error(Ft(311));r.lastRenderedReducer=t;var n=Nn,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((To&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var g={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=g,o=n):c=c.next=g,Kr.lanes|=d,Io|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,ya(n,e.memoizedState)||(yi=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Kr.lanes|=s,Io|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function hg(t){var e=ta(),r=e.queue;if(r===null)throw Error(Ft(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ya(s,e.memoizedState)||(yi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function r5(){}function n5(t,e){var r=Kr,n=ta(),i=e(),s=!ya(n.memoizedState,i);if(s&&(n.memoizedState=i,yi=!0),n=n.queue,sm(s5.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||En!==null&&En.memoizedState.tag&1){if(r.flags|=2048,Cu(9,a5.bind(null,r,n,i,e),void 0,null),Dn===null)throw Error(Ft(349));To&30||i5(r,e,i)}return i}function i5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Kr.updateQueue,e===null?(e={lastEffect:null,stores:null},Kr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function a5(t,e,r,n){e.value=r,e.getSnapshot=n,o5(e)&&l5(t)}function s5(t,e,r){return r(function(){o5(e)&&l5(t)})}function o5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ya(t,r)}catch{return!0}}function l5(t){var e=us(t,1);e!==null&&ma(e,t,1,-1)}function f2(t){var e=Da();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:t},e.queue=t,t=t.dispatch=Yj.bind(null,Kr,t),[e.memoizedState,t]}function Cu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Kr.updateQueue,e===null?(e={lastEffect:null,stores:null},Kr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function c5(){return ta().memoizedState}function Yd(t,e,r,n){var i=Da();Kr.flags|=t,i.memoizedState=Cu(1|e,r,void 0,n===void 0?null:n)}function Hh(t,e,r,n){var i=ta();n=n===void 0?null:n;var s=void 0;if(Nn!==null){var o=Nn.memoizedState;if(s=o.destroy,n!==null&&nm(n,o.deps)){i.memoizedState=Cu(e,r,s,n);return}}Kr.flags|=t,i.memoizedState=Cu(1|e,r,s,n)}function g2(t,e){return Yd(8390656,8,t,e)}function sm(t,e){return Hh(2048,8,t,e)}function u5(t,e){return Hh(4,2,t,e)}function d5(t,e){return Hh(4,4,t,e)}function h5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function f5(t,e,r){return r=r!=null?r.concat([t]):null,Hh(4,4,h5.bind(null,e,t),r)}function om(){}function g5(t,e){var r=ta();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nm(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function p5(t,e){var r=ta();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nm(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function m5(t,e,r){return To&21?(ya(r,e)||(r=_b(),Kr.lanes|=r,Io|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yi=!0),t.memoizedState=r)}function Hj(t,e){var r=kr;kr=r!==0&&4>r?r:4,t(!0);var n=ug.transition;ug.transition={};try{t(!1),e()}finally{kr=r,ug.transition=n}}function v5(){return ta().memoizedState}function Gj(t,e,r){var n=Vs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},y5(t))b5(e,r);else if(r=Zb(t,e,r,n),r!==null){var i=li();ma(r,t,n,i),x5(r,e,n)}}function Yj(t,e,r){var n=Vs(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(y5(t))b5(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(i.hasEagerState=!0,i.eagerState=l,ya(l,o)){var c=e.interleaved;c===null?(i.next=i,X0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=Zb(t,e,i,n),r!==null&&(i=li(),ma(r,t,n,i),x5(r,e,n))}}function y5(t){var e=t.alternate;return t===Kr||e!==null&&e===Kr}function b5(t,e){eu=_h=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function x5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,B0(t,r)}}var wh={readContext:ea,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},Vj={readContext:ea,useCallback:function(t,e){return Da().memoizedState=[t,e===void 0?null:e],t},useContext:ea,useEffect:g2,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Yd(4194308,4,h5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Yd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yd(4,2,t,e)},useMemo:function(t,e){var r=Da();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Da();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Gj.bind(null,Kr,t),[n.memoizedState,t]},useRef:function(t){var e=Da();return t={current:t},e.memoizedState=t},useState:f2,useDebugValue:om,useDeferredValue:function(t){return Da().memoizedState=t},useTransition:function(){var t=f2(!1),e=t[0];return t=Hj.bind(null,t[1]),Da().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Kr,i=Da();if(Gr){if(r===void 0)throw Error(Ft(407));r=r()}else{if(r=e(),Dn===null)throw Error(Ft(349));To&30||i5(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,g2(s5.bind(null,n,s,t),[t]),n.flags|=2048,Cu(9,a5.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Da(),e=Dn.identifierPrefix;if(Gr){var r=as,n=is;r=(n&~(1<<32-pa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ju++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Wj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Jj={readContext:ea,useCallback:g5,useContext:ea,useEffect:sm,useImperativeHandle:f5,useInsertionEffect:u5,useLayoutEffect:d5,useMemo:p5,useReducer:dg,useRef:c5,useState:function(){return dg(Nu)},useDebugValue:om,useDeferredValue:function(t){var e=ta();return m5(e,Nn.memoizedState,t)},useTransition:function(){var t=dg(Nu)[0],e=ta().memoizedState;return[t,e]},useMutableSource:r5,useSyncExternalStore:n5,useId:v5,unstable_isNewReconciler:!1},Kj={readContext:ea,useCallback:g5,useContext:ea,useEffect:sm,useImperativeHandle:f5,useInsertionEffect:u5,useLayoutEffect:d5,useMemo:p5,useReducer:hg,useRef:c5,useState:function(){return hg(Nu)},useDebugValue:om,useDeferredValue:function(t){var e=ta();return Nn===null?e.memoizedState=t:m5(e,Nn.memoizedState,t)},useTransition:function(){var t=hg(Nu)[0],e=ta().memoizedState;return[t,e]},useMutableSource:r5,useSyncExternalStore:n5,useId:v5,unstable_isNewReconciler:!1};function da(t,e){if(t&&t.defaultProps){e=Qr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Dp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gh={isMounted:function(t){return(t=t._reactInternals)?Uo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=li(),i=Vs(t),s=os(n,i);s.payload=e,r!=null&&(s.callback=r),e=Gs(t,s,i),e!==null&&(ma(e,t,i,n),Hd(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=li(),i=Vs(t),s=os(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Gs(t,s,i),e!==null&&(ma(e,t,i,n),Hd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=li(),n=Vs(t),i=os(r,n);i.tag=2,e!=null&&(i.callback=e),e=Gs(t,i,n),e!==null&&(ma(e,t,n,r),Hd(e,t,n))}};function p2(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!yu(r,n)||!yu(i,s):!0}function _5(t,e,r){var n=!1,i=Qs,s=e.contextType;return typeof s=="object"&&s!==null?s=ea(s):(i=_i(e)?Fo:Zn.current,n=e.contextTypes,s=(n=n!=null)?zl(t,i):Qs),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function m2(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Gh.enqueueReplaceState(e,e.state,null)}function Tp(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Z0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ea(s):(s=_i(e)?Fo:Zn.current,i.context=zl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dp(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gh.enqueueReplaceState(i,i.state,null),bh(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yl(t,e){try{var r="",n=e;do r+=jS(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function fg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ip(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Qj=typeof WeakMap=="function"?WeakMap:Map;function w5(t,e,r){r=os(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jh||(jh=!0,Hp=n),Ip(t,e)},r}function S5(t,e,r){r=os(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Ip(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Ip(t,e),typeof n!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function v2(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Qj;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=d4.bind(null,t,e,r),e.then(t,t))}function y2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b2(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=os(-1,1),e.tag=2,Gs(r,e,1))),r.lanes|=1),t)}var Xj=fs.ReactCurrentOwner,yi=!1;function oi(t,e,r,n){e.child=t===null?Xb(e,null,r,n):Hl(e,t.child,r,n)}function x2(t,e,r,n,i){r=r.render;var s=e.ref;return Il(e,i),n=im(t,e,r,n,s,i),r=am(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ds(t,e,i)):(Gr&&r&&G0(e),e.flags|=1,oi(t,e,n,i),e.child)}function _2(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!pm(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,j5(t,e,s,n,i)):(t=Qd(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:yu,r(o,n)&&t.ref===e.ref)return ds(t,e,i)}return e.flags|=1,t=Js(s,n),t.ref=e.ref,t.return=e,e.child=t}function j5(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(yu(s,n)&&t.ref===e.ref)if(yi=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(yi=!0);else return e.lanes=t.lanes,ds(t,e,i)}return Rp(t,e,r,n,i)}function N5(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(Pl,Ii),Ii|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mr(Pl,Ii),Ii|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Mr(Pl,Ii),Ii|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Mr(Pl,Ii),Ii|=n;return oi(t,e,i,r),e.child}function C5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rp(t,e,r,n,i){var s=_i(r)?Fo:Zn.current;return s=zl(e,s),Il(e,i),r=im(t,e,r,n,s,i),n=am(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ds(t,e,i)):(Gr&&n&&G0(e),e.flags|=1,oi(t,e,r,i),e.child)}function w2(t,e,r,n,i){if(_i(r)){var s=!0;gh(e)}else s=!1;if(Il(e,i),e.stateNode===null)Vd(t,e),_5(e,r,n),Tp(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ea(u):(u=_i(r)?Fo:Zn.current,u=zl(e,u));var d=r.getDerivedStateFromProps,g=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&m2(e,o,n,u),Ds=!1;var m=e.memoizedState;o.state=m,bh(e,n,o,i),c=e.memoizedState,l!==n||m!==c||xi.current||Ds?(typeof d=="function"&&(Dp(e,r,d,n),c=e.memoizedState),(l=Ds||p2(e,r,l,n,m,c,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,e5(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:da(e.type,l),o.props=u,g=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ea(c):(c=_i(r)?Fo:Zn.current,c=zl(e,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==c)&&m2(e,o,n,c),Ds=!1,m=e.memoizedState,o.state=m,bh(e,n,o,i);var x=e.memoizedState;l!==g||m!==x||xi.current||Ds?(typeof f=="function"&&(Dp(e,r,f,n),x=e.memoizedState),(u=Ds||p2(e,r,u,n,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Op(t,e,r,n,s,i)}function Op(t,e,r,n,i,s){C5(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&o2(e,r,!1),ds(t,e,s);n=e.stateNode,Xj.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Hl(e,t.child,null,s),e.child=Hl(e,null,l,s)):oi(t,e,l,s),e.memoizedState=n.state,i&&o2(e,r,!0),e.child}function L5(t){var e=t.stateNode;e.pendingContext?s2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&s2(t,e.context,!1),em(t,e.containerInfo)}function S2(t,e,r,n,i){return Wl(),V0(i),e.flags|=256,oi(t,e,r,n),e.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function Mp(t){return{baseLanes:t,cachePool:null,transitions:null}}function A5(t,e,r){var n=e.pendingProps,i=Jr.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Mr(Jr,i&1),t===null)return Ep(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jh(o,n,0,null),t=Po(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Mp(r),e.memoizedState=Bp,t):lm(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Zj(t,e,o,n,l,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Js(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Js(l,s):(s=Po(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Mp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Bp,n}return s=t.child,t=s.sibling,n=Js(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function lm(t,e){return e=Jh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _d(t,e,r,n){return n!==null&&V0(n),Hl(e,t.child,null,r),t=lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zj(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=fg(Error(Ft(422))),_d(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Jh({mode:"visible",children:n.children},i,0,null),s=Po(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Hl(e,t.child,null,o),e.child.memoizedState=Mp(o),e.memoizedState=Bp,s);if(!(e.mode&1))return _d(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Ft(419)),n=fg(s,n,void 0),_d(t,e,o,n)}if(l=(o&t.childLanes)!==0,yi||l){if(n=Dn,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,us(t,i),ma(n,t,i,-1))}return gm(),n=fg(Error(Ft(421))),_d(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=h4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ri=Hs(i.nextSibling),Mi=e,Gr=!0,ga=null,t!==null&&(Ki[Qi++]=is,Ki[Qi++]=as,Ki[Qi++]=Do,is=t.id,as=t.overflow,Do=e),e=lm(e,n.children),e.flags|=4096,e)}function j2(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Fp(t.return,e,r)}function gg(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function P5(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(oi(t,e,n.children,r),n=Jr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j2(t,r,e);else if(t.tag===19)j2(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Mr(Jr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&xh(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),gg(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xh(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}gg(e,!0,r,null,s);break;case"together":gg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ds(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Io|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ft(153));if(e.child!==null){for(t=e.child,r=Js(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Js(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function e4(t,e,r){switch(e.tag){case 3:L5(e),Wl();break;case 5:t5(e);break;case 1:_i(e.type)&&gh(e);break;case 4:em(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Mr(vh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Mr(Jr,Jr.current&1),e.flags|=128,null):r&e.child.childLanes?A5(t,e,r):(Mr(Jr,Jr.current&1),t=ds(t,e,r),t!==null?t.sibling:null);Mr(Jr,Jr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return P5(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mr(Jr,Jr.current),n)break;return null;case 22:case 23:return e.lanes=0,N5(t,e,r)}return ds(t,e,r)}var k5,Up,E5,F5;k5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Up=function(){};E5=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Lo(Ba.current);var s=null;switch(r){case"input":i=lp(t,i),n=lp(t,n),s=[];break;case"select":i=Qr({},i,{value:void 0}),n=Qr({},n,{value:void 0}),s=[];break;case"textarea":i=dp(t,i),n=dp(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hh)}fp(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(du.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(du.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$r("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};F5=function(t,e,r,n){r!==n&&(e.flags|=4)};function Mc(t,e){if(!Gr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Hn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function t4(t,e,r){var n=e.pendingProps;switch(Y0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(e),null;case 1:return _i(e.type)&&fh(),Hn(e),null;case 3:return n=e.stateNode,Gl(),Wr(xi),Wr(Zn),rm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ga!==null&&(Vp(ga),ga=null))),Up(t,e),Hn(e),null;case 5:tm(e);var i=Lo(Su.current);if(r=e.type,t!==null&&e.stateNode!=null)E5(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ft(166));return Hn(e),null}if(t=Lo(Ba.current),bd(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ia]=e,n[_u]=s,t=(e.mode&1)!==0,r){case"dialog":$r("cancel",n),$r("close",n);break;case"iframe":case"object":case"embed":$r("load",n);break;case"video":case"audio":for(i=0;i<Yc.length;i++)$r(Yc[i],n);break;case"source":$r("error",n);break;case"img":case"image":case"link":$r("error",n),$r("load",n);break;case"details":$r("toggle",n);break;case"input":D1(n,s),$r("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},$r("invalid",n);break;case"textarea":I1(n,s),$r("invalid",n)}fp(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&yd(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&yd(n.textContent,l,t),i=["children",""+l]):du.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$r("scroll",n)}switch(r){case"input":ud(n),T1(n,s,!0);break;case"textarea":ud(n),R1(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=hh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ia]=e,t[_u]=n,k5(t,e,!1,!1),e.stateNode=t;e:{switch(o=gp(r,n),r){case"dialog":$r("cancel",t),$r("close",t),i=n;break;case"iframe":case"object":case"embed":$r("load",t),i=n;break;case"video":case"audio":for(i=0;i<Yc.length;i++)$r(Yc[i],t);i=n;break;case"source":$r("error",t),i=n;break;case"img":case"image":case"link":$r("error",t),$r("load",t),i=n;break;case"details":$r("toggle",t),i=n;break;case"input":D1(t,n),i=lp(t,n),$r("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Qr({},n,{value:void 0}),$r("invalid",t);break;case"textarea":I1(t,n),i=dp(t,n),$r("invalid",t);break;default:i=n}fp(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?cb(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ob(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hu(t,c):typeof c=="number"&&hu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(du.hasOwnProperty(s)?c!=null&&s==="onScroll"&&$r("scroll",t):c!=null&&F0(t,s,c,o))}switch(r){case"input":ud(t),T1(t,n,!1);break;case"textarea":ud(t),R1(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ks(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?El(t,!!n.multiple,s,!1):n.defaultValue!=null&&El(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hn(e),null;case 6:if(t&&e.stateNode!=null)F5(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ft(166));if(r=Lo(Su.current),Lo(Ba.current),bd(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ia]=e,(s=n.nodeValue!==r)&&(t=Mi,t!==null))switch(t.tag){case 3:yd(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yd(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ia]=e,e.stateNode=n}return Hn(e),null;case 13:if(Wr(Jr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gr&&Ri!==null&&e.mode&1&&!(e.flags&128))Kb(),Wl(),e.flags|=98560,s=!1;else if(s=bd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Ft(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ft(317));s[Ia]=e}else Wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hn(e),s=!1}else ga!==null&&(Vp(ga),ga=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Jr.current&1?Cn===0&&(Cn=3):gm())),e.updateQueue!==null&&(e.flags|=4),Hn(e),null);case 4:return Gl(),Up(t,e),t===null&&bu(e.stateNode.containerInfo),Hn(e),null;case 10:return Q0(e.type._context),Hn(e),null;case 17:return _i(e.type)&&fh(),Hn(e),null;case 19:if(Wr(Jr),s=e.memoizedState,s===null)return Hn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Mc(s,!1);else{if(Cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xh(t),o!==null){for(e.flags|=128,Mc(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Mr(Jr,Jr.current&1|2),e.child}t=t.sibling}s.tail!==null&&un()>Vl&&(e.flags|=128,n=!0,Mc(s,!1),e.lanes=4194304)}else{if(!n)if(t=xh(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Mc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Gr)return Hn(e),null}else 2*un()-s.renderingStartTime>Vl&&r!==1073741824&&(e.flags|=128,n=!0,Mc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=un(),e.sibling=null,r=Jr.current,Mr(Jr,n?r&1|2:r&1),e):(Hn(e),null);case 22:case 23:return fm(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ii&1073741824&&(Hn(e),e.subtreeFlags&6&&(e.flags|=8192)):Hn(e),null;case 24:return null;case 25:return null}throw Error(Ft(156,e.tag))}function r4(t,e){switch(Y0(e),e.tag){case 1:return _i(e.type)&&fh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gl(),Wr(xi),Wr(Zn),rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tm(e),null;case 13:if(Wr(Jr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ft(340));Wl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wr(Jr),null;case 4:return Gl(),null;case 10:return Q0(e.type._context),null;case 22:case 23:return fm(),null;case 24:return null;default:return null}}var wd=!1,Kn=!1,n4=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Al(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tn(t,e,n)}else r.current=null}function qp(t,e,r){try{r()}catch(n){tn(t,e,n)}}var N2=!1;function i4(t,e){if(jp=ch,t=Ob(),H0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,g=t,m=null;t:for(;;){for(var f;g!==r||i!==0&&g.nodeType!==3||(l=o+i),g!==s||n!==0&&g.nodeType!==3||(c=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(f=g.firstChild)!==null;)m=g,g=f;for(;;){if(g===t)break t;if(m===r&&++u===i&&(l=o),m===s&&++d===n&&(c=o),(f=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Np={focusedElem:t,selectionRange:r},ch=!1,Ht=e;Ht!==null;)if(e=Ht,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ht=t;else for(;Ht!==null;){e=Ht;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,N=x.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?w:da(e.type,w),N);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ft(163))}}catch(C){tn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ht=t;break}Ht=e.return}return x=N2,N2=!1,x}function tu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&qp(e,r,s)}i=i.next}while(i!==n)}}function Yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function $p(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function D5(t){var e=t.alternate;e!==null&&(t.alternate=null,D5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ia],delete e[_u],delete e[Ap],delete e[Uj],delete e[qj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function T5(t){return t.tag===5||t.tag===3||t.tag===4}function C2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||T5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=hh));else if(n!==4&&(t=t.child,t!==null))for(zp(t,e,r),t=t.sibling;t!==null;)zp(t,e,r),t=t.sibling}function Wp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Wp(t,e,r),t=t.sibling;t!==null;)Wp(t,e,r),t=t.sibling}var Un=null,ha=!1;function Ls(t,e,r){for(r=r.child;r!==null;)I5(t,e,r),r=r.sibling}function I5(t,e,r){if(Oa&&typeof Oa.onCommitFiberUnmount=="function")try{Oa.onCommitFiberUnmount(Mh,r)}catch{}switch(r.tag){case 5:Kn||Al(r,e);case 6:var n=Un,i=ha;Un=null,Ls(t,e,r),Un=n,ha=i,Un!==null&&(ha?(t=Un,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Un.removeChild(r.stateNode));break;case 18:Un!==null&&(ha?(t=Un,r=r.stateNode,t.nodeType===8?og(t.parentNode,r):t.nodeType===1&&og(t,r),mu(t)):og(Un,r.stateNode));break;case 4:n=Un,i=ha,Un=r.stateNode.containerInfo,ha=!0,Ls(t,e,r),Un=n,ha=i;break;case 0:case 11:case 14:case 15:if(!Kn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&qp(r,e,o),i=i.next}while(i!==n)}Ls(t,e,r);break;case 1:if(!Kn&&(Al(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){tn(r,e,l)}Ls(t,e,r);break;case 21:Ls(t,e,r);break;case 22:r.mode&1?(Kn=(n=Kn)||r.memoizedState!==null,Ls(t,e,r),Kn=n):Ls(t,e,r);break;default:Ls(t,e,r)}}function L2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new n4),e.forEach(function(n){var i=f4.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function la(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Un=l.stateNode,ha=!1;break e;case 3:Un=l.stateNode.containerInfo,ha=!0;break e;case 4:Un=l.stateNode.containerInfo,ha=!0;break e}l=l.return}if(Un===null)throw Error(Ft(160));I5(s,o,i),Un=null,ha=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){tn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R5(e,t),e=e.sibling}function R5(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(la(e,t),ka(t),n&4){try{tu(3,t,t.return),Yh(3,t)}catch(w){tn(t,t.return,w)}try{tu(5,t,t.return)}catch(w){tn(t,t.return,w)}}break;case 1:la(e,t),ka(t),n&512&&r!==null&&Al(r,r.return);break;case 5:if(la(e,t),ka(t),n&512&&r!==null&&Al(r,r.return),t.flags&32){var i=t.stateNode;try{hu(i,"")}catch(w){tn(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&ib(i,s),gp(l,o);var u=gp(l,s);for(o=0;o<c.length;o+=2){var d=c[o],g=c[o+1];d==="style"?cb(i,g):d==="dangerouslySetInnerHTML"?ob(i,g):d==="children"?hu(i,g):F0(i,d,g,u)}switch(l){case"input":cp(i,s);break;case"textarea":ab(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?El(i,!!s.multiple,f,!1):m!==!!s.multiple&&(s.defaultValue!=null?El(i,!!s.multiple,s.defaultValue,!0):El(i,!!s.multiple,s.multiple?[]:"",!1))}i[_u]=s}catch(w){tn(t,t.return,w)}}break;case 6:if(la(e,t),ka(t),n&4){if(t.stateNode===null)throw Error(Ft(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){tn(t,t.return,w)}}break;case 3:if(la(e,t),ka(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mu(e.containerInfo)}catch(w){tn(t,t.return,w)}break;case 4:la(e,t),ka(t);break;case 13:la(e,t),ka(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dm=un())),n&4&&L2(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Kn=(u=Kn)||d,la(e,t),Kn=u):la(e,t),ka(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ht=t,d=t.child;d!==null;){for(g=Ht=d;Ht!==null;){switch(m=Ht,f=m.child,m.tag){case 0:case 11:case 14:case 15:tu(4,m,m.return);break;case 1:Al(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){tn(n,r,w)}}break;case 5:Al(m,m.return);break;case 22:if(m.memoizedState!==null){P2(g);continue}}f!==null?(f.return=m,Ht=f):P2(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lb("display",o))}catch(w){tn(t,t.return,w)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(w){tn(t,t.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:la(e,t),ka(t),n&4&&L2(t);break;case 21:break;default:la(e,t),ka(t)}}function ka(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(T5(r)){var n=r;break e}r=r.return}throw Error(Ft(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(hu(i,""),n.flags&=-33);var s=C2(t);Wp(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=C2(t);zp(t,l,o);break;default:throw Error(Ft(161))}}catch(c){tn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function a4(t,e,r){Ht=t,O5(t)}function O5(t,e,r){for(var n=(t.mode&1)!==0;Ht!==null;){var i=Ht,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||wd;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Kn;l=wd;var u=Kn;if(wd=o,(Kn=c)&&!u)for(Ht=i;Ht!==null;)o=Ht,c=o.child,o.tag===22&&o.memoizedState!==null?k2(i):c!==null?(c.return=o,Ht=c):k2(i);for(;s!==null;)Ht=s,O5(s),s=s.sibling;Ht=i,wd=l,Kn=u}A2(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ht=s):A2(t)}}function A2(t){for(;Ht!==null;){var e=Ht;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kn||Yh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Kn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:da(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&h2(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}h2(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&mu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ft(163))}Kn||e.flags&512&&$p(e)}catch(m){tn(e,e.return,m)}}if(e===t){Ht=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ht=r;break}Ht=e.return}}function P2(t){for(;Ht!==null;){var e=Ht;if(e===t){Ht=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ht=r;break}Ht=e.return}}function k2(t){for(;Ht!==null;){var e=Ht;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Yh(4,e)}catch(c){tn(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){tn(e,i,c)}}var s=e.return;try{$p(e)}catch(c){tn(e,s,c)}break;case 5:var o=e.return;try{$p(e)}catch(c){tn(e,o,c)}}}catch(c){tn(e,e.return,c)}if(e===t){Ht=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ht=l;break}Ht=e.return}}var s4=Math.ceil,Sh=fs.ReactCurrentDispatcher,cm=fs.ReactCurrentOwner,Zi=fs.ReactCurrentBatchConfig,Sr=0,Dn=null,vn=null,qn=0,Ii=0,Pl=eo(0),Cn=0,Lu=null,Io=0,Vh=0,um=0,ru=null,mi=null,dm=0,Vl=1/0,es=null,jh=!1,Hp=null,Ys=null,Sd=!1,Bs=null,Nh=0,nu=0,Gp=null,Jd=-1,Kd=0;function li(){return Sr&6?un():Jd!==-1?Jd:Jd=un()}function Vs(t){return t.mode&1?Sr&2&&qn!==0?qn&-qn:zj.transition!==null?(Kd===0&&(Kd=_b()),Kd):(t=kr,t!==0||(t=window.event,t=t===void 0?16:Ab(t.type)),t):1}function ma(t,e,r,n){if(50<nu)throw nu=0,Gp=null,Error(Ft(185));Iu(t,r,n),(!(Sr&2)||t!==Dn)&&(t===Dn&&(!(Sr&2)&&(Vh|=r),Cn===4&&Is(t,qn)),wi(t,n),r===1&&Sr===0&&!(e.mode&1)&&(Vl=un()+500,Wh&&to()))}function wi(t,e){var r=t.callbackNode;zS(t,e);var n=lh(t,t===Dn?qn:0);if(n===0)r!==null&&M1(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&M1(r),e===1)t.tag===0?$j(E2.bind(null,t)):Yb(E2.bind(null,t)),Bj(function(){!(Sr&6)&&to()}),r=null;else{switch(wb(n)){case 1:r=O0;break;case 4:r=bb;break;case 16:r=oh;break;case 536870912:r=xb;break;default:r=oh}r=H5(r,B5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function B5(t,e){if(Jd=-1,Kd=0,Sr&6)throw Error(Ft(327));var r=t.callbackNode;if(Rl()&&t.callbackNode!==r)return null;var n=lh(t,t===Dn?qn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ch(t,n);else{e=n;var i=Sr;Sr|=2;var s=U5();(Dn!==t||qn!==e)&&(es=null,Vl=un()+500,Ao(t,e));do try{c4();break}catch(l){M5(t,l)}while(!0);K0(),Sh.current=s,Sr=i,vn!==null?e=0:(Dn=null,qn=0,e=Cn)}if(e!==0){if(e===2&&(i=bp(t),i!==0&&(n=i,e=Yp(t,i))),e===1)throw r=Lu,Ao(t,0),Is(t,n),wi(t,un()),r;if(e===6)Is(t,n);else{if(i=t.current.alternate,!(n&30)&&!o4(i)&&(e=Ch(t,n),e===2&&(s=bp(t),s!==0&&(n=s,e=Yp(t,s))),e===1))throw r=Lu,Ao(t,0),Is(t,n),wi(t,un()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Ft(345));case 2:xo(t,mi,es);break;case 3:if(Is(t,n),(n&130023424)===n&&(e=dm+500-un(),10<e)){if(lh(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){li(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lp(xo.bind(null,t,mi,es),e);break}xo(t,mi,es);break;case 4:if(Is(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-pa(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=un()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*s4(n/1960))-n,10<n){t.timeoutHandle=Lp(xo.bind(null,t,mi,es),n);break}xo(t,mi,es);break;case 5:xo(t,mi,es);break;default:throw Error(Ft(329))}}}return wi(t,un()),t.callbackNode===r?B5.bind(null,t):null}function Yp(t,e){var r=ru;return t.current.memoizedState.isDehydrated&&(Ao(t,e).flags|=256),t=Ch(t,e),t!==2&&(e=mi,mi=r,e!==null&&Vp(e)),t}function Vp(t){mi===null?mi=t:mi.push.apply(mi,t)}function o4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ya(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Is(t,e){for(e&=~um,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-pa(e),n=1<<r;t[r]=-1,e&=~n}}function E2(t){if(Sr&6)throw Error(Ft(327));Rl();var e=lh(t,0);if(!(e&1))return wi(t,un()),null;var r=Ch(t,e);if(t.tag!==0&&r===2){var n=bp(t);n!==0&&(e=n,r=Yp(t,n))}if(r===1)throw r=Lu,Ao(t,0),Is(t,e),wi(t,un()),r;if(r===6)throw Error(Ft(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xo(t,mi,es),wi(t,un()),null}function hm(t,e){var r=Sr;Sr|=1;try{return t(e)}finally{Sr=r,Sr===0&&(Vl=un()+500,Wh&&to())}}function Ro(t){Bs!==null&&Bs.tag===0&&!(Sr&6)&&Rl();var e=Sr;Sr|=1;var r=Zi.transition,n=kr;try{if(Zi.transition=null,kr=1,t)return t()}finally{kr=n,Zi.transition=r,Sr=e,!(Sr&6)&&to()}}function fm(){Ii=Pl.current,Wr(Pl)}function Ao(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Oj(r)),vn!==null)for(r=vn.return;r!==null;){var n=r;switch(Y0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fh();break;case 3:Gl(),Wr(xi),Wr(Zn),rm();break;case 5:tm(n);break;case 4:Gl();break;case 13:Wr(Jr);break;case 19:Wr(Jr);break;case 10:Q0(n.type._context);break;case 22:case 23:fm()}r=r.return}if(Dn=t,vn=t=Js(t.current,null),qn=Ii=e,Cn=0,Lu=null,um=Vh=Io=0,mi=ru=null,Co!==null){for(e=0;e<Co.length;e++)if(r=Co[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Co=null}return t}function M5(t,e){do{var r=vn;try{if(K0(),Gd.current=wh,_h){for(var n=Kr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_h=!1}if(To=0,En=Nn=Kr=null,eu=!1,ju=0,cm.current=null,r===null||r.return===null){Cn=1,Lu=e,vn=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=qn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=y2(o);if(f!==null){f.flags&=-257,b2(f,o,l,s,e),f.mode&1&&v2(s,u,e),e=f,c=u;var x=e.updateQueue;if(x===null){var w=new Set;w.add(c),e.updateQueue=w}else x.add(c);break e}else{if(!(e&1)){v2(s,u,e),gm();break e}c=Error(Ft(426))}}else if(Gr&&l.mode&1){var N=y2(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),b2(N,o,l,s,e),V0(Yl(c,l));break e}}s=c=Yl(c,l),Cn!==4&&(Cn=2),ru===null?ru=[s]:ru.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=w5(s,c,e);d2(s,b);break e;case 1:l=c;var S=s.type,j=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Ys===null||!Ys.has(j)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=S5(s,l,e);d2(s,C);break e}}s=s.return}while(s!==null)}$5(r)}catch($){e=$,vn===r&&r!==null&&(vn=r=r.return);continue}break}while(!0)}function U5(){var t=Sh.current;return Sh.current=wh,t===null?wh:t}function gm(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Dn===null||!(Io&268435455)&&!(Vh&268435455)||Is(Dn,qn)}function Ch(t,e){var r=Sr;Sr|=2;var n=U5();(Dn!==t||qn!==e)&&(es=null,Ao(t,e));do try{l4();break}catch(i){M5(t,i)}while(!0);if(K0(),Sr=r,Sh.current=n,vn!==null)throw Error(Ft(261));return Dn=null,qn=0,Cn}function l4(){for(;vn!==null;)q5(vn)}function c4(){for(;vn!==null&&!TS();)q5(vn)}function q5(t){var e=W5(t.alternate,t,Ii);t.memoizedProps=t.pendingProps,e===null?$5(t):vn=e,cm.current=null}function $5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=r4(r,e),r!==null){r.flags&=32767,vn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cn=6,vn=null;return}}else if(r=t4(r,e,Ii),r!==null){vn=r;return}if(e=e.sibling,e!==null){vn=e;return}vn=e=t}while(e!==null);Cn===0&&(Cn=5)}function xo(t,e,r){var n=kr,i=Zi.transition;try{Zi.transition=null,kr=1,u4(t,e,r,n)}finally{Zi.transition=i,kr=n}return null}function u4(t,e,r,n){do Rl();while(Bs!==null);if(Sr&6)throw Error(Ft(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ft(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(WS(t,s),t===Dn&&(vn=Dn=null,qn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sd||(Sd=!0,H5(oh,function(){return Rl(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Zi.transition,Zi.transition=null;var o=kr;kr=1;var l=Sr;Sr|=4,cm.current=null,i4(t,r),R5(r,t),kj(Np),ch=!!jp,Np=jp=null,t.current=r,a4(r),IS(),Sr=l,kr=o,Zi.transition=s}else t.current=r;if(Sd&&(Sd=!1,Bs=t,Nh=i),s=t.pendingLanes,s===0&&(Ys=null),BS(r.stateNode),wi(t,un()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jh)throw jh=!1,t=Hp,Hp=null,t;return Nh&1&&t.tag!==0&&Rl(),s=t.pendingLanes,s&1?t===Gp?nu++:(nu=0,Gp=t):nu=0,to(),null}function Rl(){if(Bs!==null){var t=wb(Nh),e=Zi.transition,r=kr;try{if(Zi.transition=null,kr=16>t?16:t,Bs===null)var n=!1;else{if(t=Bs,Bs=null,Nh=0,Sr&6)throw Error(Ft(331));var i=Sr;for(Sr|=4,Ht=t.current;Ht!==null;){var s=Ht,o=s.child;if(Ht.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ht=u;Ht!==null;){var d=Ht;switch(d.tag){case 0:case 11:case 15:tu(8,d,s)}var g=d.child;if(g!==null)g.return=d,Ht=g;else for(;Ht!==null;){d=Ht;var m=d.sibling,f=d.return;if(D5(d),d===u){Ht=null;break}if(m!==null){m.return=f,Ht=m;break}Ht=f}}}var x=s.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var N=w.sibling;w.sibling=null,w=N}while(w!==null)}}Ht=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ht=o;else e:for(;Ht!==null;){if(s=Ht,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tu(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Ht=b;break e}Ht=s.return}}var S=t.current;for(Ht=S;Ht!==null;){o=Ht;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,Ht=j;else e:for(o=S;Ht!==null;){if(l=Ht,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yh(9,l)}}catch($){tn(l,l.return,$)}if(l===o){Ht=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Ht=C;break e}Ht=l.return}}if(Sr=i,to(),Oa&&typeof Oa.onPostCommitFiberRoot=="function")try{Oa.onPostCommitFiberRoot(Mh,t)}catch{}n=!0}return n}finally{kr=r,Zi.transition=e}}return!1}function F2(t,e,r){e=Yl(r,e),e=w5(t,e,1),t=Gs(t,e,1),e=li(),t!==null&&(Iu(t,1,e),wi(t,e))}function tn(t,e,r){if(t.tag===3)F2(t,t,r);else for(;e!==null;){if(e.tag===3){F2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ys===null||!Ys.has(n))){t=Yl(r,t),t=S5(e,t,1),e=Gs(e,t,1),t=li(),e!==null&&(Iu(e,1,t),wi(e,t));break}}e=e.return}}function d4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=li(),t.pingedLanes|=t.suspendedLanes&r,Dn===t&&(qn&r)===r&&(Cn===4||Cn===3&&(qn&130023424)===qn&&500>un()-dm?Ao(t,0):um|=r),wi(t,e)}function z5(t,e){e===0&&(t.mode&1?(e=fd,fd<<=1,!(fd&130023424)&&(fd=4194304)):e=1);var r=li();t=us(t,e),t!==null&&(Iu(t,e,r),wi(t,r))}function h4(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),z5(t,r)}function f4(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ft(314))}n!==null&&n.delete(e),z5(t,r)}var W5;W5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||xi.current)yi=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return yi=!1,e4(t,e,r);yi=!!(t.flags&131072)}else yi=!1,Gr&&e.flags&1048576&&Vb(e,mh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Vd(t,e),t=e.pendingProps;var i=zl(e,Zn.current);Il(e,r),i=im(null,e,n,t,i,r);var s=am();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(n)?(s=!0,gh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Z0(e),i.updater=Gh,e.stateNode=i,i._reactInternals=e,Tp(e,n,t,r),e=Op(null,e,n,!0,s,r)):(e.tag=0,Gr&&s&&G0(e),oi(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Vd(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=p4(n),t=da(n,t),i){case 0:e=Rp(null,e,n,t,r);break e;case 1:e=w2(null,e,n,t,r);break e;case 11:e=x2(null,e,n,t,r);break e;case 14:e=_2(null,e,n,da(n.type,t),r);break e}throw Error(Ft(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:da(n,i),Rp(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:da(n,i),w2(t,e,n,i,r);case 3:e:{if(L5(e),t===null)throw Error(Ft(387));n=e.pendingProps,s=e.memoizedState,i=s.element,e5(t,e),bh(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Yl(Error(Ft(423)),e),e=S2(t,e,n,r,i);break e}else if(n!==i){i=Yl(Error(Ft(424)),e),e=S2(t,e,n,r,i);break e}else for(Ri=Hs(e.stateNode.containerInfo.firstChild),Mi=e,Gr=!0,ga=null,r=Xb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wl(),n===i){e=ds(t,e,r);break e}oi(t,e,n,r)}e=e.child}return e;case 5:return t5(e),t===null&&Ep(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Cp(n,i)?o=null:s!==null&&Cp(n,s)&&(e.flags|=32),C5(t,e),oi(t,e,o,r),e.child;case 6:return t===null&&Ep(e),null;case 13:return A5(t,e,r);case 4:return em(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Hl(e,null,n,r):oi(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:da(n,i),x2(t,e,n,i,r);case 7:return oi(t,e,e.pendingProps,r),e.child;case 8:return oi(t,e,e.pendingProps.children,r),e.child;case 12:return oi(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Mr(vh,n._currentValue),n._currentValue=o,s!==null)if(ya(s.value,o)){if(s.children===i.children&&!xi.current){e=ds(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=os(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Fp(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ft(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Fp(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}oi(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Il(e,r),i=ea(i),n=n(i),e.flags|=1,oi(t,e,n,r),e.child;case 14:return n=e.type,i=da(n,e.pendingProps),i=da(n.type,i),_2(t,e,n,i,r);case 15:return j5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:da(n,i),Vd(t,e),e.tag=1,_i(n)?(t=!0,gh(e)):t=!1,Il(e,r),_5(e,n,i),Tp(e,n,i,r),Op(null,e,n,!0,t,r);case 19:return P5(t,e,r);case 22:return N5(t,e,r)}throw Error(Ft(156,e.tag))};function H5(t,e){return yb(t,e)}function g4(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(t,e,r,n){return new g4(t,e,r,n)}function pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p4(t){if(typeof t=="function")return pm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===T0)return 11;if(t===I0)return 14}return 2}function Js(t,e){var r=t.alternate;return r===null?(r=Xi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Qd(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")pm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bl:return Po(r.children,i,s,e);case D0:o=8,i|=8;break;case ip:return t=Xi(12,r,e,i|2),t.elementType=ip,t.lanes=s,t;case ap:return t=Xi(13,r,e,i),t.elementType=ap,t.lanes=s,t;case sp:return t=Xi(19,r,e,i),t.elementType=sp,t.lanes=s,t;case tb:return Jh(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zy:o=10;break e;case eb:o=9;break e;case T0:o=11;break e;case I0:o=14;break e;case Fs:o=16,n=null;break e}throw Error(Ft(130,t==null?t:typeof t,""))}return e=Xi(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Po(t,e,r,n){return t=Xi(7,t,n,e),t.lanes=r,t}function Jh(t,e,r,n){return t=Xi(22,t,n,e),t.elementType=tb,t.lanes=r,t.stateNode={isHidden:!1},t}function pg(t,e,r){return t=Xi(6,t,null,e),t.lanes=r,t}function mg(t,e,r){return e=Xi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function m4(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kf(0),this.expirationTimes=Kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kf(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mm(t,e,r,n,i,s,o,l,c){return t=new m4(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z0(s),t}function v4(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function G5(t){if(!t)return Qs;t=t._reactInternals;e:{if(Uo(t)!==t||t.tag!==1)throw Error(Ft(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ft(171))}if(t.tag===1){var r=t.type;if(_i(r))return Gb(t,r,e)}return e}function Y5(t,e,r,n,i,s,o,l,c){return t=mm(r,n,!0,t,i,s,o,l,c),t.context=G5(null),r=t.current,n=li(),i=Vs(r),s=os(n,i),s.callback=e??null,Gs(r,s,i),t.current.lanes=i,Iu(t,i,n),wi(t,n),t}function Kh(t,e,r,n){var i=e.current,s=li(),o=Vs(i);return r=G5(r),e.context===null?e.context=r:e.pendingContext=r,e=os(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Gs(i,e,o),t!==null&&(ma(t,i,o,s),Hd(t,i,o)),o}function Lh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function vm(t,e){D2(t,e),(t=t.alternate)&&D2(t,e)}function y4(){return null}var V5=typeof reportError=="function"?reportError:function(t){console.error(t)};function ym(t){this._internalRoot=t}Qh.prototype.render=ym.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ft(409));Kh(t,e,null,null)};Qh.prototype.unmount=ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ro(function(){Kh(null,t,null,null)}),e[cs]=null}};function Qh(t){this._internalRoot=t}Qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ts.length&&e!==0&&e<Ts[r].priority;r++);Ts.splice(r,0,t),r===0&&Lb(t)}};function bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T2(){}function b4(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Lh(o);s.call(u)}}var o=Y5(e,n,t,0,null,!1,!1,"",T2);return t._reactRootContainer=o,t[cs]=o.current,bu(t.nodeType===8?t.parentNode:t),Ro(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Lh(c);l.call(u)}}var c=mm(t,0,!1,null,null,!1,!1,"",T2);return t._reactRootContainer=c,t[cs]=c.current,bu(t.nodeType===8?t.parentNode:t),Ro(function(){Kh(e,c,r,n)}),c}function Zh(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Lh(o);l.call(c)}}Kh(e,o,t,i)}else o=b4(r,e,t,i,n);return Lh(o)}Sb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Gc(e.pendingLanes);r!==0&&(B0(e,r|1),wi(e,un()),!(Sr&6)&&(Vl=un()+500,to()))}break;case 13:Ro(function(){var n=us(t,1);if(n!==null){var i=li();ma(n,t,1,i)}}),vm(t,1)}};M0=function(t){if(t.tag===13){var e=us(t,134217728);if(e!==null){var r=li();ma(e,t,134217728,r)}vm(t,134217728)}};jb=function(t){if(t.tag===13){var e=Vs(t),r=us(t,e);if(r!==null){var n=li();ma(r,t,e,n)}vm(t,e)}};Nb=function(){return kr};Cb=function(t,e){var r=kr;try{return kr=t,e()}finally{kr=r}};mp=function(t,e,r){switch(e){case"input":if(cp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=zh(n);if(!i)throw Error(Ft(90));nb(n),cp(n,i)}}}break;case"textarea":ab(t,r);break;case"select":e=r.value,e!=null&&El(t,!!r.multiple,e,!1)}};hb=hm;fb=Ro;var x4={usingClientEntryPoint:!1,Events:[Ou,Sl,zh,ub,db,hm]},Uc={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_4={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mb(t),t===null?null:t.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||y4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{Mh=jd.inject(_4),Oa=jd}catch{}}zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x4;zi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(e))throw Error(Ft(200));return v4(t,e,null,r)};zi.createRoot=function(t,e){if(!bm(t))throw Error(Ft(299));var r=!1,n="",i=V5;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=mm(t,1,!1,null,null,r,!1,n,i),t[cs]=e.current,bu(t.nodeType===8?t.parentNode:t),new ym(e)};zi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ft(188)):(t=Object.keys(t).join(","),Error(Ft(268,t)));return t=mb(e),t=t===null?null:t.stateNode,t};zi.flushSync=function(t){return Ro(t)};zi.hydrate=function(t,e,r){if(!Xh(e))throw Error(Ft(200));return Zh(null,t,e,!0,r)};zi.hydrateRoot=function(t,e,r){if(!bm(t))throw Error(Ft(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=V5;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Y5(e,null,t,1,r??null,i,!1,s,o),t[cs]=e.current,bu(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Qh(e)};zi.render=function(t,e,r){if(!Xh(e))throw Error(Ft(200));return Zh(null,t,e,!1,r)};zi.unmountComponentAtNode=function(t){if(!Xh(t))throw Error(Ft(40));return t._reactRootContainer?(Ro(function(){Zh(null,null,t,!1,function(){t._reactRootContainer=null,t[cs]=null})}),!0):!1};zi.unstable_batchedUpdates=hm;zi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Xh(r))throw Error(Ft(200));if(t==null||t._reactInternals===void 0)throw Error(Ft(38));return Zh(t,e,r,!1,n)};zi.version="18.3.1-next-f1338f8080-20240426";function J5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J5)}catch(t){console.error(t)}}J5(),Jy.exports=zi;var w4=Jy.exports,I2=w4;rp.createRoot=I2.createRoot,rp.hydrateRoot=I2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Au.apply(this,arguments)}var Ms;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ms||(Ms={}));const R2="popstate";function S4(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:l}=n.location;return Jp("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Q5(i)}return N4(e,r,null,t)}function Ln(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function K5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j4(){return Math.random().toString(36).substr(2,8)}function O2(t,e){return{usr:t.state,key:t.key,idx:e}}function Jp(t,e,r,n){return r===void 0&&(r=null),Au({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nc(e):e,{state:r,key:e&&e.key||n||j4()})}function Q5(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function nc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function N4(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,l=Ms.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Au({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function g(){l=Ms.Pop;let N=d(),b=N==null?null:N-u;u=N,c&&c({action:l,location:w.location,delta:b})}function m(N,b){l=Ms.Push;let S=Jp(w.location,N,b);u=d()+1;let j=O2(S,u),C=w.createHref(S);try{o.pushState(j,"",C)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(C)}s&&c&&c({action:l,location:w.location,delta:1})}function f(N,b){l=Ms.Replace;let S=Jp(w.location,N,b);u=d();let j=O2(S,u),C=w.createHref(S);o.replaceState(j,"",C),s&&c&&c({action:l,location:w.location,delta:0})}function x(N){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof N=="string"?N:Q5(N);return S=S.replace(/ $/,"%20"),Ln(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let w={get action(){return l},get location(){return t(i,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(R2,g),c=N,()=>{i.removeEventListener(R2,g),c=null}},createHref(N){return e(i,N)},createURL:x,encodeLocation(N){let b=x(N);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:f,go(N){return o.go(N)}};return w}var B2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(B2||(B2={}));function C4(t,e,r){return r===void 0&&(r="/"),L4(t,e,r)}function L4(t,e,r,n){let i=typeof e=="string"?nc(e):e,s=ex(i.pathname||"/",r);if(s==null)return null;let o=X5(t);A4(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=U4(s);l=O4(o[c],u)}return l}function X5(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ln(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ko([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(Ln(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),X5(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:I4(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of Z5(s.path))i(s,o,c)}),e}function Z5(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Z5(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function A4(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:R4(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const P4=/^:[\w-]+$/,k4=3,E4=2,F4=1,D4=10,T4=-2,M2=t=>t==="*";function I4(t,e){let r=t.split("/"),n=r.length;return r.some(M2)&&(n+=T4),e&&(n+=E4),r.filter(i=>!M2(i)).reduce((i,s)=>i+(P4.test(s)?k4:s===""?F4:D4),n)}function R4(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function O4(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",g=B4({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:ko([s,g.pathname]),pathnameBase:G4(ko([s,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(s=ko([s,g.pathnameBase]))}return o}function B4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=M4(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,d,g)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let w=l[g]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=l[g];return f&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function M4(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),K5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function U4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return K5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ex(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function q4(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?nc(t):t;return{pathname:r?r.startsWith("/")?r:$4(r,e):e,search:Y4(n),hash:V4(i)}}function $4(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function vg(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function z4(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function W4(t,e){let r=z4(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function H4(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=nc(t):(i=Au({},t),Ln(!i.pathname||!i.pathname.includes("?"),vg("?","pathname","search",i)),Ln(!i.pathname||!i.pathname.includes("#"),vg("#","pathname","hash",i)),Ln(!i.search||!i.search.includes("#"),vg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=r;else{let g=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}l=g>=0?e[g]:"/"}let c=q4(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ko=t=>t.join("/").replace(/\/\/+/g,"/"),G4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,V4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tx=["post","put","patch","delete"];new Set(tx);const K4=["get",...tx];new Set(K4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pu.apply(this,arguments)}const xm=v.createContext(null),Q4=v.createContext(null),ef=v.createContext(null),tf=v.createContext(null),ic=v.createContext({outlet:null,matches:[],isDataRoute:!1}),rx=v.createContext(null);function rf(){return v.useContext(tf)!=null}function di(){return rf()||Ln(!1),v.useContext(tf).location}function nx(t){v.useContext(ef).static||v.useLayoutEffect(t)}function Ur(){let{isDataRoute:t}=v.useContext(ic);return t?uN():X4()}function X4(){rf()||Ln(!1);let t=v.useContext(xm),{basename:e,future:r,navigator:n}=v.useContext(ef),{matches:i}=v.useContext(ic),{pathname:s}=di(),o=JSON.stringify(W4(i,r.v7_relativeSplatPath)),l=v.useRef(!1);return nx(()=>{l.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let g=H4(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ko([e,g.pathname])),(d.replace?n.replace:n.push)(g,d.state,d)},[e,n,o,s,t])}function Z4(t,e){return eN(t,e)}function eN(t,e,r,n){rf()||Ln(!1);let{navigator:i}=v.useContext(ef),{matches:s}=v.useContext(ic),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=di(),d;if(e){var g;let N=typeof e=="string"?nc(e):e;c==="/"||(g=N.pathname)!=null&&g.startsWith(c)||Ln(!1),d=N}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let N=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=C4(t,{pathname:f}),w=aN(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:ko([c,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:ko([c,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,r,n);return e&&w?v.createElement(tf.Provider,{value:{location:Pu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ms.Pop}},w):w}function tN(){let t=cN(),e=J4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:i},r):null,null)}const rN=v.createElement(tN,null);class nN extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?v.createElement(ic.Provider,{value:this.props.routeContext},v.createElement(rx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iN(t){let{routeContext:e,match:r,children:n}=t,i=v.useContext(xm);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(ic.Provider,{value:e},n)}function aN(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);d>=0||Ln(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let g=o[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=d),g.route.id){let{loaderData:m,errors:f}=r,x=g.route.loader&&m[g.route.id]===void 0&&(!f||f[g.route.id]===void 0);if(g.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,g,m)=>{let f,x=!1,w=null,N=null;r&&(f=l&&g.route.id?l[g.route.id]:void 0,w=g.route.errorElement||rN,c&&(u<0&&m===0?(dN("route-fallback"),x=!0,N=null):u===m&&(x=!0,N=g.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,m+1)),S=()=>{let j;return f?j=w:x?j=N:g.route.Component?j=v.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=d,v.createElement(iN,{match:g,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:j})};return r&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?v.createElement(nN,{location:r.location,revalidation:r.revalidation,component:w,error:f,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var ix=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ix||{}),ax=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ax||{});function sN(t){let e=v.useContext(xm);return e||Ln(!1),e}function oN(t){let e=v.useContext(Q4);return e||Ln(!1),e}function lN(t){let e=v.useContext(ic);return e||Ln(!1),e}function sx(t){let e=lN(),r=e.matches[e.matches.length-1];return r.route.id||Ln(!1),r.route.id}function cN(){var t;let e=v.useContext(rx),r=oN(),n=sx();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function uN(){let{router:t}=sN(ix.UseNavigateStable),e=sx(ax.UseNavigateStable),r=v.useRef(!1);return nx(()=>{r.current=!0}),v.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Pu({fromRouteId:e},s)))},[t,e])}const U2={};function dN(t,e,r){U2[t]||(U2[t]=!0)}function hN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vr(t){Ln(!1)}function fN(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ms.Pop,navigator:s,static:o=!1,future:l}=t;rf()&&Ln(!1);let c=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:s,static:o,future:Pu({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=nc(n));let{pathname:d="/",search:g="",hash:m="",state:f=null,key:x="default"}=n,w=v.useMemo(()=>{let N=ex(d,c);return N==null?null:{location:{pathname:N,search:g,hash:m,state:f,key:x},navigationType:i}},[c,d,g,m,f,x,i]);return w==null?null:v.createElement(ef.Provider,{value:u},v.createElement(tf.Provider,{children:r,value:w}))}function gN(t){let{children:e,location:r}=t;return Z4(Kp(e),r)}new Promise(()=>{});function Kp(t,e){e===void 0&&(e=[]);let r=[];return v.Children.forEach(t,(n,i)=>{if(!v.isValidElement(n))return;let s=[...e,i];if(n.type===v.Fragment){r.push.apply(r,Kp(n.props.children,s));return}n.type!==Vr&&Ln(!1),!n.props.index||!n.props.children||Ln(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Kp(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const pN="6";try{window.__reactRouterVersion=pN}catch{}const mN="startTransition",q2=dS[mN];function vN(t){let{basename:e,children:r,future:n,window:i}=t,s=v.useRef();s.current==null&&(s.current=S4({window:i,v5Compat:!0}));let o=s.current,[l,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=v.useCallback(g=>{u&&q2?q2(()=>c(g)):c(g)},[c,u]);return v.useLayoutEffect(()=>o.listen(d),[o,d]),v.useEffect(()=>hN(n),[n]),v.createElement(fN,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var $2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($2||($2={}));var z2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(z2||(z2={}));const yN="modulepreload",bN=function(t){return"/"+t},W2={},va=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=bN(c),c in W2)return;W2[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":yN,u||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),u)return new Promise((m,f)=>{g.addEventListener("load",m),g.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},xN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>va(async()=>{const{default:n}=await Promise.resolve().then(()=>ac);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class _m extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class _N extends _m{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class H2 extends _m{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class G2 extends _m{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qp||(Qp={}));var wN=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class SN{constructor(e,{headers:r={},customFetch:n,region:i=Qp.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=xN(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return wN(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const g=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(w=>{throw new _N(w)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new H2(g);if(!g.ok)throw new G2(g);let f=((n=g.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield g.json():f==="application/octet-stream"?x=yield g.blob():f==="text/event-stream"?x=g:f==="multipart/form-data"?x=yield g.formData():x=yield g.text(),{data:x,error:null,response:g}}catch(i){return{data:null,error:i,response:i instanceof G2||i instanceof H2?i.context:void 0}}})}}var vi={},wm={},nf={},Mu={},af={},sf={},jN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jl=jN();const NN=Jl.fetch,ox=Jl.fetch.bind(Jl),lx=Jl.Headers,CN=Jl.Request,LN=Jl.Response,ac=Object.freeze(Object.defineProperty({__proto__:null,Headers:lx,Request:CN,Response:LN,default:ox,fetch:NN},Symbol.toStringTag,{value:"Module"})),AN=Vw(ac);var of={};Object.defineProperty(of,"__esModule",{value:!0});let PN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};of.default=PN;var cx=Ui&&Ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sf,"__esModule",{value:!0});const kN=cx(AN),EN=cx(of);let FN=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=kN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c,u;let d=null,g=null,m=null,f=s.status,x=s.statusText;if(s.ok){if(this.method!=="HEAD"){const S=await s.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?g=S:g=JSON.parse(S))}const N=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),b=(c=s.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");N&&b&&b.length>1&&(m=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(d={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,f=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const N=await s.text();try{d=JSON.parse(N),Array.isArray(d)&&s.status===404&&(g=[],d=null,f=200,x="OK")}catch{s.status===404&&N===""?(f=204,x="No Content"):d={message:N}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,x="OK"),d&&this.shouldThrowOnError)throw new EN.default(d)}return{error:d,data:g,count:m,status:f,statusText:x}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};sf.default=FN;var DN=Ui&&Ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(af,"__esModule",{value:!0});const TN=DN(sf);let IN=class extends TN.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};af.default=IN;var RN=Ui&&Ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mu,"__esModule",{value:!0});const ON=RN(af);let BN=class extends ON.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Mu.default=BN;var MN=Ui&&Ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nf,"__esModule",{value:!0});const qc=MN(Mu);let UN=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new qc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var i;const s="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new qc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new qc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new qc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new qc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};nf.default=UN;var ux=Ui&&Ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wm,"__esModule",{value:!0});const qN=ux(nf),$N=ux(Mu);let zN=class dx{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new qN.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new dx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:s}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;n||i?(l=n?"HEAD":"GET",Object.entries(r).filter(([g,m])=>m!==void 0).map(([g,m])=>[g,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([g,m])=>{c.searchParams.append(g,m)})):(l="POST",u=r);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new $N.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};wm.default=zN;var sc=Ui&&Ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vi,"__esModule",{value:!0});vi.PostgrestError=vi.PostgrestBuilder=vi.PostgrestTransformBuilder=vi.PostgrestFilterBuilder=vi.PostgrestQueryBuilder=vi.PostgrestClient=void 0;const hx=sc(wm);vi.PostgrestClient=hx.default;const fx=sc(nf);vi.PostgrestQueryBuilder=fx.default;const gx=sc(Mu);vi.PostgrestFilterBuilder=gx.default;const px=sc(af);vi.PostgrestTransformBuilder=px.default;const mx=sc(sf);vi.PostgrestBuilder=mx.default;const vx=sc(of);vi.PostgrestError=vx.default;var WN=vi.default={PostgrestClient:hx.default,PostgrestQueryBuilder:fx.default,PostgrestFilterBuilder:gx.default,PostgrestTransformBuilder:px.default,PostgrestBuilder:mx.default,PostgrestError:vx.default};const{PostgrestClient:HN,PostgrestQueryBuilder:v8,PostgrestFilterBuilder:y8,PostgrestTransformBuilder:b8,PostgrestBuilder:x8,PostgrestError:_8}=WN;class GN{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const YN="2.15.1",VN=`realtime-js/${YN}`,JN="1.0.0",Xp=1e4,KN=1e3,QN=100;var iu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(iu||(iu={}));var Sn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Sn||(Sn={}));var fa;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(fa||(fa={}));var Zp;(function(t){t.websocket="websocket"})(Zp||(Zp={}));var So;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(So||(So={}));class XN{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+i));o=o+i;const c=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class yx{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Br;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Br||(Br={}));const Y2=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=ZN(o,t,e,i),s),{})},ZN=(t,e,r,n)=>{const i=e.find(l=>l.name===t),s=i==null?void 0:i.type,o=r[t];return s&&!n.includes(s)?bx(s,o):e0(o)},bx=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return n3(e,r)}switch(t){case Br.bool:return e3(e);case Br.float4:case Br.float8:case Br.int2:case Br.int4:case Br.int8:case Br.numeric:case Br.oid:return t3(e);case Br.json:case Br.jsonb:return r3(e);case Br.timestamp:return i3(e);case Br.abstime:case Br.date:case Br.daterange:case Br.int4range:case Br.int8range:case Br.money:case Br.reltime:case Br.text:case Br.time:case Br.timestamptz:case Br.timetz:case Br.tsrange:case Br.tstzrange:return e0(e);default:return e0(e)}},e0=t=>t,e3=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},t3=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},r3=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},n3=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>bx(e,l))}return t},i3=t=>typeof t=="string"?t.replace(" ","T"):t,xx=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class yg{constructor(e,r,n={},i=Xp){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var V2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(V2||(V2={}));class au{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=au.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=au.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=au.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(s,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const g=s[u];if(g){const m=d.map(N=>N.presence_ref),f=g.map(N=>N.presence_ref),x=d.filter(N=>f.indexOf(N.presence_ref)<0),w=g.filter(N=>m.indexOf(N.presence_ref)<0);x.length>0&&(l[u]=x),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const g=e[l].map(f=>f.presence_ref),m=d.filter(f=>g.indexOf(f.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(g=>g.presence_ref);u=u.filter(g=>d.indexOf(g.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var J2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(J2||(J2={}));var su;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(su||(su={}));var ts;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ts||(ts={}));class Sm{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Sn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new yg(this,fa.join,this.params,this.timeout),this.rejoinTimer=new yx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Sn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Sn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Sn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fa.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new au(this),this.broadcastEndpointURL=xx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Sn.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[su.PRESENCE]&&this.bindings[su.PRESENCE].length>0,d={},g={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(ts.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(ts.CLOSED)),this.updateJoinPayload(Object.assign({config:g},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){e==null||e(ts.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(f=x==null?void 0:x.length)!==null&&f!==void 0?f:0,N=[];for(let b=0;b<w;b++){const S=x[b],{filter:{event:j,schema:C,table:$,filter:Z}}=S,V=m&&m[b];if(V&&V.event===j&&V.schema===C&&V.table===$&&V.filter===Z)N.push(Object.assign(Object.assign({},S),{id:V.id}));else{this.unsubscribe(),this.state=Sn.errored,e==null||e(ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(ts.SUBSCRIBED);return}}).receive("error",m=>{this.state=Sn.errored,e==null||e(ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Sn.joined&&e===su.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Sn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new yg(this,fa.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Sn.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yg(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>QN){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=fa;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var x,w,N;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((N=(w=f.filter)===null||w===void 0?void 0:w.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var x,w,N,b,S,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,$=(x=f.filter)===null||x===void 0?void 0:x.event;return C&&((w=r.ids)===null||w===void 0?void 0:w.includes(C))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const C=(S=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return C==="*"||C===((j=r==null?void 0:r.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:w,table:N,commit_timestamp:b,type:S,errors:j}=x;m=Object.assign(Object.assign({},{schema:w,table:N,commit_timestamp:b,eventType:S,new:{},old:{},errors:j}),this._getPayloadRecords(x))}f.callback(m,n)})}_isClosed(){return this.state===Sn.closed}_isJoined(){return this.state===Sn.joined}_isJoining(){return this.state===Sn.joining}_isLeaving(){return this.state===Sn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Sm.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fa.close,{},e)}_onError(e){this._on(fa.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Sn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Y2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Y2(e.columns,e.old_record)),r}}const K2=()=>{},Nd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a3=[1e3,2e3,5e3,1e4],s3=1e4,o3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l3{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xp,this.transport=null,this.heartbeatIntervalMs=Nd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=K2,this.ref=0,this.reconnectTimer=null,this.logger=K2,this.conn=null,this.sendBuffer=[],this.serializer=new XN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>va(async()=>{const{default:l}=await Promise.resolve().then(()=>ac);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Zp.websocket}`,this.httpEndpoint=xx(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=GN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:JN}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case iu.connecting:return So.Connecting;case iu.open:return So.Open;case iu.closing:return So.Closing;default:return So.Closed}}isConnected(){return this.connectionState()===So.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new Sm(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(KN,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Nd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fa.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([o3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:VN};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(fa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new yx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Nd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,l,c,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Xp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Nd.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>a3[d-1]||s3,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,g)=>g(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class jm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class c3 extends jm{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class t0 extends jm{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var u3=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const _x=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>va(async()=>{const{default:n}=await Promise.resolve().then(()=>ac);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},d3=()=>u3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield va(()=>Promise.resolve().then(()=>ac),void 0)).Response:Response}),r0=t=>{if(Array.isArray(t))return t.map(r=>r0(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=r0(n)}),e},h3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qo=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const bg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),f3=(t,e,r)=>qo(void 0,void 0,void 0,function*(){const n=yield d3();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new c3(bg(i),s,o))}).catch(i=>{e(new t0(bg(i),i))}):e(new t0(bg(t),t))}),g3=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(h3(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Uu(t,e,r,n,i,s){return qo(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,g3(e,n,i,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>f3(c,l,n))})})}function Ah(t,e,r,n){return qo(this,void 0,void 0,function*(){return Uu(t,"GET",e,r,n)})}function Ta(t,e,r,n,i){return qo(this,void 0,void 0,function*(){return Uu(t,"POST",e,n,i,r)})}function n0(t,e,r,n,i){return qo(this,void 0,void 0,function*(){return Uu(t,"PUT",e,n,i,r)})}function p3(t,e,r,n){return qo(this,void 0,void 0,function*(){return Uu(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function wx(t,e,r,n,i){return qo(this,void 0,void 0,function*(){return Uu(t,"DELETE",e,n,i,r)})}var si=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const m3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Q2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class v3{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=_x(i)}uploadOrUpdate(e,r,n,i){return si(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Q2),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),g=yield(e=="PUT"?n0:Ta)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:g.Id,fullPath:g.Key},error:null}}catch(s){if(jn(s))return{data:null,error:s};throw s}})}upload(e,r,n){return si(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return si(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Q2.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const g=yield n0(this.fetch,l.toString(),c,{headers:d});return{data:{path:s,fullPath:g.Key},error:null}}catch(c){if(jn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return si(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Ta(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new jm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}update(e,r,n){return si(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return si(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(jn(i))return{data:null,error:i};throw i}})}copy(e,r,n){return si(this,void 0,void 0,function*(){try{return{data:{path:(yield Ta(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(jn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return si(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ta(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(jn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return si(this,void 0,void 0,function*(){try{const i=yield Ta(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(jn(i))return{data:null,error:i};throw i}})}download(e,r){return si(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ah(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(jn(l))return{data:null,error:l};throw l}})}info(e){return si(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ah(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:r0(n),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}exists(e){return si(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield p3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(jn(n)&&n instanceof t0){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return si(this,void 0,void 0,function*(){try{return{data:yield wx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}list(e,r,n){return si(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},m3),r),{prefix:e||""});return{data:yield Ta(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(jn(i))return{data:null,error:i};throw i}})}listV2(e,r){return si(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ta(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const y3="2.11.0",b3={"X-Client-Info":`storage-js/${y3}`};var sl=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class x3{constructor(e,r={},n,i){const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},b3),r),this.fetch=_x(n)}listBuckets(){return sl(this,void 0,void 0,function*(){try{return{data:yield Ah(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(jn(e))return{data:null,error:e};throw e}})}getBucket(e){return sl(this,void 0,void 0,function*(){try{return{data:yield Ah(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return sl(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return sl(this,void 0,void 0,function*(){try{return{data:yield n0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return sl(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return sl(this,void 0,void 0,function*(){try{return{data:yield wx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}}class _3 extends x3{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new v3(this.url,this.headers,e,this.fetch)}}const w3="2.56.0";let Vc="";typeof Deno<"u"?Vc="deno":typeof document<"u"?Vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vc="react-native":Vc="node";const S3={"X-Client-Info":`supabase-js-${Vc}/${w3}`},j3={headers:S3},N3={schema:"public"},C3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},L3={};var A3=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const P3=t=>{let e;return t?e=t:typeof fetch>"u"?e=ox:e=fetch,(...r)=>e(...r)},k3=()=>typeof Headers>"u"?lx:Headers,E3=(t,e,r)=>{const n=P3(r),i=k3();return(s,o)=>A3(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var F3=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function D3(t){return t.endsWith("/")?t:t+"/"}function T3(t,e){var r,n;const{db:i,auth:s,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:g}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},g),l),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>F3(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const Sx="2.71.1",gl=30*1e3,i0=3,xg=i0*gl,I3="http://localhost:9999",R3="supabase.auth.token",O3={"X-Client-Info":`gotrue-js/${Sx}`},a0="X-Supabase-Api-Version",jx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},B3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M3=10*60*1e3;class Nm extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function dr(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class U3 extends Nm{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function q3(t){return dr(t)&&t.name==="AuthApiError"}class Nx extends Nm{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class ro extends Nm{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Es extends ro{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $3(t){return dr(t)&&t.name==="AuthSessionMissingError"}class Cd extends ro{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ld extends ro{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends ro{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z3(t){return dr(t)&&t.name==="AuthImplicitGrantRedirectError"}class X2 extends ro{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class s0 extends ro{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function _g(t){return dr(t)&&t.name==="AuthRetryableFetchError"}class Z2 extends ro{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class o0 extends ro{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ph="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ev=` 	
\r=`.split(""),W3=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ev.length;e+=1)t[ev[e].charCodeAt(0)]=-2;for(let e=0;e<Ph.length;e+=1)t[Ph[e].charCodeAt(0)]=e;return t})();function tv(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ph[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ph[n]),e.queuedBits-=6}}function Cx(t,e,r){const n=W3[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rv(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{Y3(o,n,r)};for(let o=0;o<t.length;o+=1)Cx(t.charCodeAt(o),i,s);return e.join("")}function H3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function G3(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}H3(n,e)}}function Y3(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function V3(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Cx(t.charCodeAt(i),r,n);return new Uint8Array(e)}function J3(t){const e=[];return G3(t,r=>e.push(r)),new Uint8Array(e)}function K3(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>tv(i,r,n)),tv(null,r,n),e.join("")}function Q3(t){return Math.round(Date.now()/1e3)+t}function X3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ua=()=>typeof window<"u"&&typeof document<"u",vo={tested:!1,writable:!1},Lx=()=>{if(!ua())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vo.tested)return vo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vo.tested=!0,vo.writable=!0}catch{vo.tested=!0,vo.writable=!1}return vo.writable};function Z3(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const Ax=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>va(async()=>{const{default:n}=await Promise.resolve().then(()=>ac);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},eC=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},yo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},As=async(t,e)=>{await t.removeItem(e)};class lf{constructor(){this.promise=new lf.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}lf.promiseConstructor=Promise;function wg(t){const e=t.split(".");if(e.length!==3)throw new o0("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!B3.test(e[n]))throw new o0("JWT not in base64url format");return{header:JSON.parse(rv(e[0])),payload:JSON.parse(rv(e[1])),signature:V3(e[2]),raw:{header:e[0],payload:e[1]}}}async function tC(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rC(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function nC(t){return("0"+t.toString(16)).substr(-2)}function iC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,nC).join("")}async function aC(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function sC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await aC(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ol(t,e,r=!1){const n=iC();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await pl(t,`${e}-code-verifier`,i);const s=await sC(n);return[s,n===s?"plain":"s256"]}const oC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lC(t){const e=t.headers.get(a0);if(!e||!e.match(oC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function uC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ll(t){if(!dC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sg(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nv(t){return JSON.parse(JSON.stringify(t))}var hC=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const _o=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fC=[502,503,504];async function iv(t){var e;if(!eC(t))throw new s0(_o(t),0);if(fC.includes(t.status))throw new s0(_o(t),t.status);let r;try{r=await t.json()}catch(s){throw new Nx(_o(s),s)}let n;const i=lC(t);if(i&&i.getTime()>=jx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Z2(_o(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Es}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Z2(_o(r),t.status,r.weak_password.reasons);throw new U3(_o(r),t.status||500,n)}const gC=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function vr(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[a0]||(s[a0]=jx["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await pC(t,e,r+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function pC(t,e,r,n,i,s){const o=gC(e,n,i,s);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new s0(_o(c),0)}if(l.ok||await iv(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await iv(c)}}function Za(t){var e;let r=null;bC(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Q3(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function av(t){const e=Za(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mC(t){return{data:t,error:null}}function vC(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=hC(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function yC(t){return t}function bC(t){return t.access_token&&t.refresh_token&&t.expires_in}const jg=["global","local","others"];var xC=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class _C{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Ax(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=jg[0]){if(jg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jg.join(", ")}`);try{return await vr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await vr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rs})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=xC(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await vr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:vC,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(dr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await vr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rs})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await vr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:yC});if(d.error)throw d.error;const g=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);u[`${N}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},g),u),error:null}}catch(u){if(dr(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ll(e);try{return await vr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rs})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ll(e);try{return await vr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Rs})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ll(e);try{return await vr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rs})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ll(e.userId);try{const{data:r,error:n}=await vr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ll(e.userId),ll(e.id);try{return{data:await vr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}}}function sv(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function wC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cl={debug:!!(globalThis&&Lx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Px extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class SC extends Px{}async function jC(t,e,r){cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),cl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new SC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(cl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}wC();const NC={url:I3,storageKey:R3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:O3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ov(t,e,r){return await r()}const ul={};class ku{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ku.nextInstanceID,ku.nextInstanceID+=1,this.instanceID>0&&ua()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},NC),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _C({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ax(i.fetch),this.lock=i.lock||ov,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ua()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=jC:this.lock=ov,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Lx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sv(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=sv(this.memoryStorage)),ua()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=ul[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ul[this.storageKey]=Object.assign(Object.assign({},ul[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ul[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ul[this.storageKey]=Object.assign(Object.assign({},ul[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Z3(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ua()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),z3(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return dr(r)?{error:r}:{error:new Nx("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await vr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Za}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(dr(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:d,password:g,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await ol(this.storage,this.storageKey)),s=await vr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:g,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:Za})}else if("phone"in e){const{phone:d,password:g,options:m}=e;s=await vr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:g,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Za})}else throw new Ld("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(dr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:l}=e;r=await vr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:av})}else if("phone"in e){const{phone:s,password:o,options:l}=e;r=await vr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:av})}else throw new Ld("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Cd}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,i,s,o,l,c,u,d,g,m,f;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:N,wallet:b,statement:S,options:j}=e;let C;if(ua())if(typeof b=="object")C=b;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))C=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=b}const $=new URL((r=j==null?void 0:j.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const Z=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),S?{statement:S}:null));let V;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")V=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)V=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)x=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),w=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${$.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(i=(n=j==null?void 0:j.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=j==null?void 0:j.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((g=(d=j==null?void 0:j.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||g===void 0)&&g.length?["Resources",...j.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const Z=await C.signMessage(new TextEncoder().encode(x),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=Z}}try{const{data:N,error:b}=await vr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:K3(w)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Za});if(b)throw b;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Cd}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:b})}catch(N){if(dr(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const r=await yo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:o}=await vr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Za});if(await As(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Cd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(dr(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,l=await vr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Za}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Cd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ol(this.storage,this.storageKey));const{error:g}=await vr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await vr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ld("You must provide either an email or phone number.")}catch(l){if(dr(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await vr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Za});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(dr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await ol(this.storage,this.storageKey)),await vr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:mC})}catch(s){if(dr(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Es;const{error:i}=await vr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(dr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await vr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:l}=await vr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ld("You must provide either an email or phone number and a type")}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await yo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<xg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await yo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Sg()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await vr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rs}):await this._useSession(async r=>{var n,i,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Es}:await vr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Rs})})}catch(r){if(dr(r))return $3(r)&&(await this._removeSession(),await As(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Es;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ol(this.storage,this.storageKey));const{data:u,error:d}=await vr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Es;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=wg(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(dr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Es;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!ua())throw new Ad("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ad(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new X2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new X2("No code detected.");const{data:S,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!s||!l||!o||!u)throw new Ad("No session defined in URL");const d=Math.round(Date.now()/1e3),g=parseInt(l);let m=d+g;c&&(m=parseInt(c));const f=m-d;f*1e3<=gl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${g}s`);const x=m-g;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:w,error:N}=await this._getUser(s);if(N)throw N;const b={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:g,expires_at:m,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(dr(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await yo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(q3(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await As(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=X3(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await ol(this.storage,this.storageKey,!0));try{return await vr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(dr(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,l,c,u,d;const{data:g,error:m}=s;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await vr(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=g.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return ua()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(dr(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await vr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rC(async i=>(i>0&&await tC(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await vr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Za})),(i,s)=>{const o=200*Math.pow(2,i);return s&&_g(s)&&Date.now()+o-n<gl})}catch(n){if(this._debug(r,"error",n),dr(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ua()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await yo(this.storage,this.storageKey);if(i&&this.userStorage){let o=await yo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await pl(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Sg()}else if(i&&!i.user&&!i.user){const o=await yo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await As(this.storage,this.storageKey+"-user"),await pl(this.storage,this.storageKey,i)):i.user=Sg()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${xg}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),_g(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new lf;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Es;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),dr(s)){const o={session:null,error:s};return _g(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await pl(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=nv(i);await pl(this.storage,this.storageKey,s)}else{const i=nv(r);await pl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await As(this.storage,this.storageKey),await As(this.storage,this.storageKey+"-code-verifier"),await As(this.storage,this.storageKey+"-user"),this.userStorage&&await As(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ua()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/gl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${gl}ms, refresh threshold is ${i0} ticks`),i<=i0&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Px)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ua()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await ol(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await vr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await vr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:o,error:l}=await vr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(dr(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await vr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(dr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=wg(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+M3>i)return n;const{data:s,error:o}=await vr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};n=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:c}}=wg(n);r!=null&&r.allowExpired||cC(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const d=uC(i.alg),g=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,g,o,J3(`${l}.${c}`)))throw new o0("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}}}ku.nextInstanceID=0;const CC=ku;class LC extends CC{constructor(e){super(e)}}var AC=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(g){o(g)}}function c(d){try{u(n.throw(d))}catch(g){o(g)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class PC{constructor(e,r,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=D3(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:N3,realtime:L3,auth:Object.assign(Object.assign({},C3),{storageKey:u}),global:j3},g=T3(n??{},d);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=g.global.headers)!==null&&s!==void 0?s:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=g.auth)!==null&&o!==void 0?o:{},this.headers,g.global.fetch),this.fetch=E3(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new HN(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new _3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new SN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return AC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:l,debug:c},u,d){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LC({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),u),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new l3(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kC=(t,e,r)=>new PC(t,e,r);function EC(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}EC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const FC="https://aolsbxfulbvpiobqqsao.supabase.co",DC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbHNieGZ1bGJ2cGlvYnFxc2FvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5Njc4MjIsImV4cCI6MjA3MTU0MzgyMn0.gyDU9a8AvdOjkqTAxw6-p2F4DO3BlswxDXGTe-C6NVM",re=kC(FC,DC);function gn(){return a.jsx("nav",{className:"navigation",children:a.jsx("ul",{})})}/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IC=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),lv=t=>{const e=IC(t);return e.charAt(0).toUpperCase()+e.slice(1)},kx=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),RC=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...OC,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:kx("lucide",i),...!s&&!RC(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>v.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=(t,e)=>{const r=v.forwardRef(({className:n,...i},s)=>v.createElement(BC,{ref:s,iconNode:e,className:kx(`lucide-${TC(lv(t))}`,`lucide-${t}`,n),...i}));return r.displayName=lv(t),r};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],UC=Tn("arrow-left",MC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$C=Tn("calendar",qC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],WC=Tn("circle",zC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cv=Tn("download",HC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],uv=Tn("external-link",GC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],VC=Tn("file-text",YC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],KC=Tn("heart",JC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],XC=Tn("link",QC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],eL=Tn("megaphone",ZC);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rL=Tn("plus",tL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],dv=Tn("qr-code",nL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],aL=Tn("save",iL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ti=Tn("shield",sL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lL=Tn("square-pen",oL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uL=Tn("trash-2",cL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ng=Tn("trophy",dL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fL=Tn("upload",hL);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hv=Tn("user",gL);function Er({disabled:t=!1}){const e=Ur();return a.jsx("button",{className:"secondary-btn",disabled:t,onClick:()=>{t||e("/")},children:"Back to Home"})}const ei=()=>{const t=localStorage.getItem("activeButton");if(t){const e=document.querySelector(`.primary-btn[data-id="${t}"]`);e&&e.classList.add("active")}},br=t=>{document.querySelectorAll(".primary-btn").forEach(n=>n.classList.remove("active")),t.classList.add("active");const r=t.dataset.id;r&&localStorage.setItem("activeButton",r)};typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ei):ei());function oc({onLoadingStart:t,...e}){const r=Ur(),n=i=>{i&&i.currentTarget&&br(i.currentTarget),t&&t(),setTimeout(()=>{r("/photos-logo-publication")},1e3)};return a.jsx("button",{className:"primary-btn",...e,onClick:n,children:"Photos, Logo & Publications"})}const Oi="data:image/png;base64,Cg==",An=({error:t,onClose:e})=>t?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},onClick:e,children:a.jsxs("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",textAlign:"center",border:"3px solid #ff4444"},onClick:r=>r.stopPropagation(),children:[a.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#ff4444",marginBottom:"15px"},children:" Error"}),a.jsx("div",{style:{fontSize:"16px",color:"#333",marginBottom:"20px",lineHeight:"1.4"},children:t}),a.jsx("button",{style:{backgroundColor:"#ff4444",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"},onClick:e,children:"OK"})]})}):null,In=({success:t,onClose:e})=>t?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:e,children:a.jsxs("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",textAlign:"center",border:"3px solid #00ff00"},onClick:r=>r.stopPropagation(),children:[a.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#00aa00",marginBottom:"15px"},children:" Success"}),a.jsx("div",{style:{fontSize:"16px",color:"#333",marginBottom:"20px",lineHeight:"1.4"},children:t}),a.jsx("button",{style:{backgroundColor:"#00aa00",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"},onClick:e,children:"OK"})]})}):null,rn=({message:t="Loading..."})=>(v.useEffect(()=>{const e=document.createElement("style");return e.textContent=`
      @keyframes loadingBar {
        0% {
          transform: scaleX(0);
        }
        50% {
          transform: scaleX(0.7);
        }
        100% {
          transform: scaleX(1);
        }
      }
    `,document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(2px)"},children:a.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"2px solid #22c55e",borderRadius:"15px",padding:"30px 40px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",minWidth:"300px"},children:[a.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"4px",overflow:"hidden",position:"relative"},children:a.jsx("div",{style:{height:"100%",backgroundColor:"#22c55e",borderRadius:"4px",animation:"loadingBar 2s ease-in-out infinite",transformOrigin:"left"}})}),a.jsx("span",{style:{color:"#22c55e",fontWeight:"600",fontSize:"16px",textAlign:"center"},children:t})]})}));function pL(){const[t,e]=v.useState([]),[r,n]=v.useState(null),[i,s]=v.useState("Algerian Judo Federation"),[o,l]=v.useState(!1),[c,u]=v.useState(""),[d,g]=v.useState(""),m=Ur(),f=Oi;return v.useEffect(()=>{(async()=>{const{data:w,error:N}=await re.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!N&&w&&e(w)})()},[]),v.useEffect(()=>{(async()=>{const{data:w,error:N}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!N&&w&&w.length>0&&n(w[0].logo_url)})()},[]),a.jsxs("div",{className:"app-container",children:[a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[r?a.jsx("img",{src:r,alt:"Logo Fdration",className:"federation-logo"}):a.jsx("img",{src:f,alt:"Logo Fdration",className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:i||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"content",children:[a.jsx("h2",{children:"Welcome to the Federation Account"}),a.jsx("p",{children:"This is the Federation Account page."}),a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx(oc,{onLoadingStart:()=>l(!0)}),a.jsx("button",{className:"primary-btn",onClick:()=>{l(!0),m("/MemberListPageP")},children:"The Member List Add"}),a.jsx("button",{className:"primary-btn",onClick:()=>{l(!0),m("/TheLeagueList-Add")},children:"The League List Add"}),a.jsx("button",{className:"primary-btn",onClick:()=>{l(!0),m("/TheClubListAdd-Fed")},children:"The Club List Add"}),a.jsx("button",{className:"primary-btn",onClick:()=>{l(!0),m("/TheAthleteList-Add")},children:"The Athlete List Add"})]})]}),c&&a.jsx(An,{message:c,onClose:()=>u("")}),d&&a.jsx(In,{message:d,onClose:()=>g("")}),o&&a.jsx(rn,{}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function Pr(t){"@babel/helpers - typeof";return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(t)}var ba=Uint8Array,Bi=Uint16Array,Cm=Int32Array,Lm=new ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Am=new ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fv=new ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ex=function(t,e){for(var r=new Bi(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new Cm(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},Fx=Ex(Lm,2),mL=Fx.b,l0=Fx.r;mL[28]=258,l0[258]=28;var vL=Ex(Am,0),gv=vL.r,c0=new Bi(32768);for(var zr=0;zr<32768;++zr){var Ps=(zr&43690)>>1|(zr&21845)<<1;Ps=(Ps&52428)>>2|(Ps&13107)<<2,Ps=(Ps&61680)>>4|(Ps&3855)<<4,c0[zr]=((Ps&65280)>>8|(Ps&255)<<8)>>1}var ou=function(t,e,r){for(var n=t.length,i=0,s=new Bi(e);i<n;++i)t[i]&&++s[t[i]-1];var o=new Bi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(r){l=new Bi(1<<e);var c=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],g=o[t[i]-1]++<<d,m=g|(1<<d)-1;g<=m;++g)l[c0[g]>>c]=u}else for(l=new Bi(n),i=0;i<n;++i)t[i]&&(l[i]=c0[o[t[i]-1]++]>>15-t[i]);return l},Oo=new ba(288);for(var zr=0;zr<144;++zr)Oo[zr]=8;for(var zr=144;zr<256;++zr)Oo[zr]=9;for(var zr=256;zr<280;++zr)Oo[zr]=7;for(var zr=280;zr<288;++zr)Oo[zr]=8;var kh=new ba(32);for(var zr=0;zr<32;++zr)kh[zr]=5;var yL=ou(Oo,9,0),bL=ou(kh,5,0),Dx=function(t){return(t+7)/8|0},xL=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new ba(t.subarray(e,r))},Qa=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},$c=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Cg=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:Ix,l:0};if(i==1){var o=new ba(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function($,Z){return $.f-Z.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,g=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=i-1;)l=r[r[u].f<r[g].f?u++:g++],c=r[u!=d&&r[u].f<r[g].f?u++:g++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var m=s[0].s,n=1;n<i;++n)s[n].s>m&&(m=s[n].s);var f=new Bi(m+1),x=u0(r[d-1],f,0);if(x>e){var n=0,w=0,N=x-e,b=1<<N;for(s.sort(function(Z,V){return f[V.s]-f[Z.s]||Z.f-V.f});n<i;++n){var S=s[n].s;if(f[S]>e)w+=b-(1<<x-f[S]),f[S]=e;else break}for(w>>=N;w>0;){var j=s[n].s;f[j]<e?w-=1<<e-f[j]++-1:++n}for(;n>=0&&w;--n){var C=s[n].s;f[C]==e&&(--f[C],++w)}x=e}return{t:new ba(f),l:x}},u0=function(t,e,r){return t.s==-1?Math.max(u0(t.l,e,r+1),u0(t.r,e,r+1)):e[t.s]=r},pv=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Bi(++e),n=0,i=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[l]}return{c:r.subarray(0,n),n:e}},zc=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Tx=function(t,e,r){var n=r.length,i=Dx(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},mv=function(t,e,r,n,i,s,o,l,c,u,d){Qa(e,d++,r),++i[256];for(var g=Cg(i,15),m=g.t,f=g.l,x=Cg(s,15),w=x.t,N=x.l,b=pv(m),S=b.c,j=b.n,C=pv(w),$=C.c,Z=C.n,V=new Bi(19),T=0;T<S.length;++T)++V[S[T]&31];for(var T=0;T<$.length;++T)++V[$[T]&31];for(var R=Cg(V,7),z=R.t,I=R.l,G=19;G>4&&!z[fv[G-1]];--G);var de=u+5<<3,M=zc(i,Oo)+zc(s,kh)+o,U=zc(i,m)+zc(s,w)+o+14+3*G+zc(V,z)+2*V[16]+3*V[17]+7*V[18];if(c>=0&&de<=M&&de<=U)return Tx(e,d,t.subarray(c,c+u));var ve,ue,Y,se;if(Qa(e,d,1+(U<M)),d+=2,U<M){ve=ou(m,f,0),ue=m,Y=ou(w,N,0),se=w;var ke=ou(z,I,0);Qa(e,d,j-257),Qa(e,d+5,Z-1),Qa(e,d+10,G-4),d+=14;for(var T=0;T<G;++T)Qa(e,d+3*T,z[fv[T]]);d+=3*G;for(var be=[S,$],E=0;E<2;++E)for(var q=be[E],T=0;T<q.length;++T){var oe=q[T]&31;Qa(e,d,ke[oe]),d+=z[oe],oe>15&&(Qa(e,d,q[T]>>5&127),d+=q[T]>>12)}}else ve=yL,ue=Oo,Y=bL,se=kh;for(var T=0;T<l;++T){var me=n[T];if(me>255){var oe=me>>18&31;$c(e,d,ve[oe+257]),d+=ue[oe+257],oe>7&&(Qa(e,d,me>>23&31),d+=Lm[oe]);var Ne=me&31;$c(e,d,Y[Ne]),d+=se[Ne],Ne>3&&($c(e,d,me>>5&8191),d+=Am[Ne])}else $c(e,d,ve[me]),d+=ue[me]}return $c(e,d,ve[256]),d+ue[256]},_L=new Cm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ix=new ba(0),wL=function(t,e,r,n,i,s){var o=s.z||t.length,l=new ba(n+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(n,l.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var g=_L[e-1],m=g>>13,f=g&8191,x=(1<<r)-1,w=s.p||new Bi(32768),N=s.h||new Bi(x+1),b=Math.ceil(r/3),S=2*b,j=function(Oe){return(t[Oe]^t[Oe+1]<<b^t[Oe+2]<<S)&x},C=new Cm(25e3),$=new Bi(288),Z=new Bi(32),V=0,T=0,R=s.i||0,z=0,I=s.w||0,G=0;R+2<o;++R){var de=j(R),M=R&32767,U=N[de];if(w[M]=U,N[de]=M,I<=R){var ve=o-R;if((V>7e3||z>24576)&&(ve>423||!u)){d=mv(t,c,0,C,$,Z,T,z,G,R-G,d),z=V=T=0,G=R;for(var ue=0;ue<286;++ue)$[ue]=0;for(var ue=0;ue<30;++ue)Z[ue]=0}var Y=2,se=0,ke=f,be=M-U&32767;if(ve>2&&de==j(R-be))for(var E=Math.min(m,ve)-1,q=Math.min(32767,R),oe=Math.min(258,ve);be<=q&&--ke&&M!=U;){if(t[R+Y]==t[R+Y-be]){for(var me=0;me<oe&&t[R+me]==t[R+me-be];++me);if(me>Y){if(Y=me,se=be,me>E)break;for(var Ne=Math.min(be,me-2),Se=0,ue=0;ue<Ne;++ue){var Ce=R-be+ue&32767,Le=w[Ce],Me=Ce-Le&32767;Me>Se&&(Se=Me,U=Ce)}}}M=U,U=w[M],be+=M-U&32767}if(se){C[z++]=268435456|l0[Y]<<18|gv[se];var Ue=l0[Y]&31,at=gv[se]&31;T+=Lm[Ue]+Am[at],++$[257+Ue],++Z[at],I=R+Y,++V}else C[z++]=t[R],++$[t[R]]}}for(R=Math.max(R,I);R<o;++R)C[z++]=t[R],++$[t[R]];d=mv(t,c,u,C,$,Z,T,z,G,R-G,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=N,s.p=w,s.i=R,s.w=I)}else{for(var R=s.w||0;R<o+u;R+=65535){var Ve=R+65535;Ve>=o&&(c[d/8|0]=u,Ve=o),d=Tx(c,d+1,t.subarray(R,Ve))}s.i=o}return xL(l,0,n+Dx(d)+i)},Rx=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},SL=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ba(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return wL(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},Ox=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},jL=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Rx();i.p(e.dictionary),Ox(t,2,i.d())}};function d0(t,e){e||(e={});var r=Rx();r.p(t);var n=SL(t,e,e.dictionary?6:2,4);return jL(n,e),Ox(n,n.length-4,r.d()),n}var NL=typeof TextDecoder<"u"&&new TextDecoder,CL=0;try{NL.decode(Ix,{stream:!0}),CL=1}catch{}function LL(t){if(Array.isArray(t))return t}function AL(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function vv(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function PL(t,e){if(t){if(typeof t=="string")return vv(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vv(t,e):void 0}}function kL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yv(t,e){return LL(t)||AL(t,e)||PL(t,e)||kL()}function bv(t,e="utf8"){return new TextDecoder(e).decode(t)}const EL=new TextEncoder;function FL(t){return EL.encode(t)}const DL=1024*8,TL=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Lg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Pm{constructor(e=DL,r={}){Ar(this,"buffer");Ar(this,"byteLength");Ar(this,"byteOffset");Ar(this,"length");Ar(this,"offset");Ar(this,"lastWrittenByte");Ar(this,"littleEndian");Ar(this,"_data");Ar(this,"_mark");Ar(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof Pm)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=Lg[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===TL&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+n));l.reverse();const c=new Lg[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new Lg[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return bv(this.readBytes(e))}decodeText(e=1,r="utf8"){return bv(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(FL(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function lc(t){let e=t.length;for(;--e>=0;)t[e]=0}const IL=3,RL=258,Bx=29,OL=256,BL=OL+1+Bx,Mx=30,ML=512,UL=new Array((BL+2)*2);lc(UL);const qL=new Array(Mx*2);lc(qL);const $L=new Array(ML);lc($L);const zL=new Array(RL-IL+1);lc(zL);const WL=new Array(Bx);lc(WL);const HL=new Array(Mx);lc(HL);const GL=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+e[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var h0=GL;const YL=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},VL=new Uint32Array(YL()),JL=(t,e,r,n)=>{const i=VL,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var Ea=JL,f0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ux={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const KL=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var QL=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)KL(r,n)&&(t[n]=r[n])}}return t},XL=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let o=t[n];r.set(o,i),i+=o.length}return r},qx={assign:QL,flattenChunks:XL};let $x=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$x=!1}const Eu=new Uint8Array(256);for(let t=0;t<256;t++)Eu[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Eu[254]=Eu[254]=1;var ZL=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,o=t.length,l=0;for(i=0;i<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const eA=(t,e)=>{if(e<65534&&t.subarray&&$x)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var tA=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let o=t[n++];if(o<128){s[i++]=o;continue}let l=Eu[o];if(l>4){s[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return eA(s,i)},rA=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Eu[t[r]]>e?r:e},g0={string2buf:ZL,buf2string:tA,utf8border:rA};function nA(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var iA=nA;const Pd=16209,aA=16191;var sA=function(e,r){let n,i,s,o,l,c,u,d,g,m,f,x,w,N,b,S,j,C,$,Z,V,T,R,z;const I=e.state;n=e.next_in,R=e.input,i=n+(e.avail_in-5),s=e.next_out,z=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=I.dmax,u=I.wsize,d=I.whave,g=I.wnext,m=I.window,f=I.hold,x=I.bits,w=I.lencode,N=I.distcode,b=(1<<I.lenbits)-1,S=(1<<I.distbits)-1;e:do{x<15&&(f+=R[n++]<<x,x+=8,f+=R[n++]<<x,x+=8),j=w[f&b];t:for(;;){if(C=j>>>24,f>>>=C,x-=C,C=j>>>16&255,C===0)z[s++]=j&65535;else if(C&16){$=j&65535,C&=15,C&&(x<C&&(f+=R[n++]<<x,x+=8),$+=f&(1<<C)-1,f>>>=C,x-=C),x<15&&(f+=R[n++]<<x,x+=8,f+=R[n++]<<x,x+=8),j=N[f&S];r:for(;;){if(C=j>>>24,f>>>=C,x-=C,C=j>>>16&255,C&16){if(Z=j&65535,C&=15,x<C&&(f+=R[n++]<<x,x+=8,x<C&&(f+=R[n++]<<x,x+=8)),Z+=f&(1<<C)-1,Z>c){e.msg="invalid distance too far back",I.mode=Pd;break e}if(f>>>=C,x-=C,C=s-o,Z>C){if(C=Z-C,C>d&&I.sane){e.msg="invalid distance too far back",I.mode=Pd;break e}if(V=0,T=m,g===0){if(V+=u-C,C<$){$-=C;do z[s++]=m[V++];while(--C);V=s-Z,T=z}}else if(g<C){if(V+=u+g-C,C-=g,C<$){$-=C;do z[s++]=m[V++];while(--C);if(V=0,g<$){C=g,$-=C;do z[s++]=m[V++];while(--C);V=s-Z,T=z}}}else if(V+=g-C,C<$){$-=C;do z[s++]=m[V++];while(--C);V=s-Z,T=z}for(;$>2;)z[s++]=T[V++],z[s++]=T[V++],z[s++]=T[V++],$-=3;$&&(z[s++]=T[V++],$>1&&(z[s++]=T[V++]))}else{V=s-Z;do z[s++]=z[V++],z[s++]=z[V++],z[s++]=z[V++],$-=3;while($>2);$&&(z[s++]=z[V++],$>1&&(z[s++]=z[V++]))}}else if(C&64){e.msg="invalid distance code",I.mode=Pd;break e}else{j=N[(j&65535)+(f&(1<<C)-1)];continue r}break}}else if(C&64)if(C&32){I.mode=aA;break e}else{e.msg="invalid literal/length code",I.mode=Pd;break e}else{j=w[(j&65535)+(f&(1<<C)-1)];continue t}break}}while(n<i&&s<l);$=x>>3,n-=$,x-=$<<3,f&=(1<<x)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<l?257+(l-s):257-(s-l),I.hold=f,I.bits=x};const dl=15,xv=852,_v=592,wv=0,Ag=1,Sv=2,oA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),cA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),uA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dA=(t,e,r,n,i,s,o,l)=>{const c=l.bits;let u=0,d=0,g=0,m=0,f=0,x=0,w=0,N=0,b=0,S=0,j,C,$,Z,V,T=null,R;const z=new Uint16Array(dl+1),I=new Uint16Array(dl+1);let G=null,de,M,U;for(u=0;u<=dl;u++)z[u]=0;for(d=0;d<n;d++)z[e[r+d]]++;for(f=c,m=dl;m>=1&&z[m]===0;m--);if(f>m&&(f=m),m===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(g=1;g<m&&z[g]===0;g++);for(f<g&&(f=g),N=1,u=1;u<=dl;u++)if(N<<=1,N-=z[u],N<0)return-1;if(N>0&&(t===wv||m!==1))return-1;for(I[1]=0,u=1;u<dl;u++)I[u+1]=I[u]+z[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[I[e[r+d]]++]=d);if(t===wv?(T=G=o,R=20):t===Ag?(T=oA,G=lA,R=257):(T=cA,G=uA,R=0),S=0,d=0,u=g,V=s,x=f,w=0,$=-1,b=1<<f,Z=b-1,t===Ag&&b>xv||t===Sv&&b>_v)return 1;for(;;){de=u-w,o[d]+1<R?(M=0,U=o[d]):o[d]>=R?(M=G[o[d]-R],U=T[o[d]-R]):(M=96,U=0),j=1<<u-w,C=1<<x,g=C;do C-=j,i[V+(S>>w)+C]=de<<24|M<<16|U|0;while(C!==0);for(j=1<<u-1;S&j;)j>>=1;if(j!==0?(S&=j-1,S+=j):S=0,d++,--z[u]===0){if(u===m)break;u=e[r+o[d]]}if(u>f&&(S&Z)!==$){for(w===0&&(w=f),V+=g,x=u-w,N=1<<x;x+w<m&&(N-=z[x+w],!(N<=0));)x++,N<<=1;if(b+=1<<x,t===Ag&&b>xv||t===Sv&&b>_v)return 1;$=S&Z,i[$]=f<<24|x<<16|V-s|0}}return S!==0&&(i[V+S]=u-w<<24|64<<16|0),l.bits=f,0};var lu=dA;const hA=0,zx=1,Wx=2,{Z_FINISH:jv,Z_BLOCK:fA,Z_TREES:kd,Z_OK:Bo,Z_STREAM_END:gA,Z_NEED_DICT:pA,Z_STREAM_ERROR:ra,Z_DATA_ERROR:Hx,Z_MEM_ERROR:Gx,Z_BUF_ERROR:mA,Z_DEFLATED:Nv}=Ux,cf=16180,Cv=16181,Lv=16182,Av=16183,Pv=16184,kv=16185,Ev=16186,Fv=16187,Dv=16188,Tv=16189,Eh=16190,Xa=16191,Pg=16192,Iv=16193,kg=16194,Rv=16195,Ov=16196,Bv=16197,Mv=16198,Ed=16199,Fd=16200,Uv=16201,qv=16202,$v=16203,zv=16204,Wv=16205,Eg=16206,Hv=16207,Gv=16208,Hr=16209,Yx=16210,Vx=16211,vA=852,yA=592,bA=15,xA=bA,Yv=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function _A(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $o=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<cf||e.mode>Vx?1:0},Jx=t=>{if($o(t))return ra;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=cf,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(vA),e.distcode=e.distdyn=new Int32Array(yA),e.sane=1,e.back=-1,Bo},Kx=t=>{if($o(t))return ra;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Jx(t)},Qx=(t,e)=>{let r;if($o(t))return ra;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ra:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Kx(t))},Xx=(t,e)=>{if(!t)return ra;const r=new _A;t.state=r,r.strm=t,r.window=null,r.mode=cf;const n=Qx(t,e);return n!==Bo&&(t.state=null),n},wA=t=>Xx(t,xA);let Vv=!0,Fg,Dg;const SA=t=>{if(Vv){Fg=new Int32Array(512),Dg=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(lu(zx,t.lens,0,288,Fg,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;lu(Wx,t.lens,0,32,Dg,0,t.work,{bits:5}),Vv=!1}t.lencode=Fg,t.lenbits=9,t.distcode=Dg,t.distbits=5},Zx=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},jA=(t,e)=>{let r,n,i,s,o,l,c,u,d,g,m,f,x,w,N=0,b,S,j,C,$,Z,V,T;const R=new Uint8Array(4);let z,I;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($o(t)||!t.output||!t.input&&t.avail_in!==0)return ra;r=t.state,r.mode===Xa&&(r.mode=Pg),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,g=l,m=c,T=Bo;e:for(;;)switch(r.mode){case cf:if(r.wrap===0){r.mode=Pg;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,R[0]=u&255,R[1]=u>>>8&255,r.check=Ea(r.check,R,2,0),u=0,d=0,r.mode=Cv;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Hr;break}if((u&15)!==Nv){t.msg="unknown compression method",r.mode=Hr;break}if(u>>>=4,d-=4,V=(u&15)+8,r.wbits===0&&(r.wbits=V),V>15||V>r.wbits){t.msg="invalid window size",r.mode=Hr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?Tv:Xa,u=0,d=0;break;case Cv:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==Nv){t.msg="unknown compression method",r.mode=Hr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Hr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,r.check=Ea(r.check,R,2,0)),u=0,d=0,r.mode=Lv;case Lv:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,R[2]=u>>>16&255,R[3]=u>>>24&255,r.check=Ea(r.check,R,4,0)),u=0,d=0,r.mode=Av;case Av:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,r.check=Ea(r.check,R,2,0)),u=0,d=0,r.mode=Pv;case Pv:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,r.check=Ea(r.check,R,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=kv;case kv:if(r.flags&1024&&(f=r.length,f>l&&(f=l),f&&(r.head&&(V=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),V)),r.flags&512&&r.wrap&4&&(r.check=Ea(r.check,n,f,s)),l-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=Ev;case Ev:if(r.flags&2048){if(l===0)break e;f=0;do V=n[s+f++],r.head&&V&&r.length<65536&&(r.head.name+=String.fromCharCode(V));while(V&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Ea(r.check,n,f,s)),l-=f,s+=f,V)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Fv;case Fv:if(r.flags&4096){if(l===0)break e;f=0;do V=n[s+f++],r.head&&V&&r.length<65536&&(r.head.comment+=String.fromCharCode(V));while(V&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Ea(r.check,n,f,s)),l-=f,s+=f,V)break e}else r.head&&(r.head.comment=null);r.mode=Dv;case Dv:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Hr;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Xa;break;case Tv:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=Yv(u),u=0,d=0,r.mode=Eh;case Eh:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,pA;t.adler=r.check=1,r.mode=Xa;case Xa:if(e===fA||e===kd)break e;case Pg:if(r.last){u>>>=d&7,d-=d&7,r.mode=Eg;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=Iv;break;case 1:if(SA(r),r.mode=Ed,e===kd){u>>>=2,d-=2;break e}break;case 2:r.mode=Ov;break;case 3:t.msg="invalid block type",r.mode=Hr}u>>>=2,d-=2;break;case Iv:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Hr;break}if(r.length=u&65535,u=0,d=0,r.mode=kg,e===kd)break e;case kg:r.mode=Rv;case Rv:if(f=r.length,f){if(f>l&&(f=l),f>c&&(f=c),f===0)break e;i.set(n.subarray(s,s+f),o),l-=f,s+=f,c-=f,o+=f,r.length-=f;break}r.mode=Xa;break;case Ov:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Hr;break}r.have=0,r.mode=Bv;case Bv:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[G[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},T=lu(hA,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,T){t.msg="invalid code lengths set",r.mode=Hr;break}r.have=0,r.mode=Mv;case Mv:for(;r.have<r.nlen+r.ndist;){for(;N=r.lencode[u&(1<<r.lenbits)-1],b=N>>>24,S=N>>>16&255,j=N&65535,!(b<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(j<16)u>>>=b,d-=b,r.lens[r.have++]=j;else{if(j===16){for(I=b+2;d<I;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=b,d-=b,r.have===0){t.msg="invalid bit length repeat",r.mode=Hr;break}V=r.lens[r.have-1],f=3+(u&3),u>>>=2,d-=2}else if(j===17){for(I=b+3;d<I;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=b,d-=b,V=0,f=3+(u&7),u>>>=3,d-=3}else{for(I=b+7;d<I;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=b,d-=b,V=0,f=11+(u&127),u>>>=7,d-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Hr;break}for(;f--;)r.lens[r.have++]=V}}if(r.mode===Hr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Hr;break}if(r.lenbits=9,z={bits:r.lenbits},T=lu(zx,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,T){t.msg="invalid literal/lengths set",r.mode=Hr;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},T=lu(Wx,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,T){t.msg="invalid distances set",r.mode=Hr;break}if(r.mode=Ed,e===kd)break e;case Ed:r.mode=Fd;case Fd:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,sA(t,m),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===Xa&&(r.back=-1);break}for(r.back=0;N=r.lencode[u&(1<<r.lenbits)-1],b=N>>>24,S=N>>>16&255,j=N&65535,!(b<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(S&&!(S&240)){for(C=b,$=S,Z=j;N=r.lencode[Z+((u&(1<<C+$)-1)>>C)],b=N>>>24,S=N>>>16&255,j=N&65535,!(C+b<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=C,d-=C,r.back+=C}if(u>>>=b,d-=b,r.back+=b,r.length=j,S===0){r.mode=Wv;break}if(S&32){r.back=-1,r.mode=Xa;break}if(S&64){t.msg="invalid literal/length code",r.mode=Hr;break}r.extra=S&15,r.mode=Uv;case Uv:if(r.extra){for(I=r.extra;d<I;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=qv;case qv:for(;N=r.distcode[u&(1<<r.distbits)-1],b=N>>>24,S=N>>>16&255,j=N&65535,!(b<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(S&240)){for(C=b,$=S,Z=j;N=r.distcode[Z+((u&(1<<C+$)-1)>>C)],b=N>>>24,S=N>>>16&255,j=N&65535,!(C+b<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=C,d-=C,r.back+=C}if(u>>>=b,d-=b,r.back+=b,S&64){t.msg="invalid distance code",r.mode=Hr;break}r.offset=j,r.extra=S&15,r.mode=$v;case $v:if(r.extra){for(I=r.extra;d<I;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Hr;break}r.mode=zv;case zv:if(c===0)break e;if(f=m-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Hr;break}f>r.wnext?(f-=r.wnext,x=r.wsize-f):x=r.wnext-f,f>r.length&&(f=r.length),w=r.window}else w=i,x=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do i[o++]=w[x++];while(--f);r.length===0&&(r.mode=Fd);break;case Wv:if(c===0)break e;i[o++]=r.length,c--,r.mode=Fd;break;case Eg:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(m-=c,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?Ea(r.check,i,m,o-m):h0(r.check,i,m,o-m)),m=c,r.wrap&4&&(r.flags?u:Yv(u))!==r.check){t.msg="incorrect data check",r.mode=Hr;break}u=0,d=0}r.mode=Hv;case Hv:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Hr;break}u=0,d=0}r.mode=Gv;case Gv:T=gA;break e;case Hr:T=Hx;break e;case Yx:return Gx;case Vx:default:return ra}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||m!==t.avail_out&&r.mode<Hr&&(r.mode<Eg||e!==jv))&&Zx(t,t.output,t.next_out,m-t.avail_out),g-=t.avail_in,m-=t.avail_out,t.total_in+=g,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?Ea(r.check,i,m,t.next_out-m):h0(r.check,i,m,t.next_out-m)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Xa?128:0)+(r.mode===Ed||r.mode===kg?256:0),(g===0&&m===0||e===jv)&&T===Bo&&(T=mA),T},NA=t=>{if($o(t))return ra;let e=t.state;return e.window&&(e.window=null),t.state=null,Bo},CA=(t,e)=>{if($o(t))return ra;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Bo):ra},LA=(t,e)=>{const r=e.length;let n,i,s;return $o(t)||(n=t.state,n.wrap!==0&&n.mode!==Eh)?ra:n.mode===Eh&&(i=1,i=h0(i,e,r,0),i!==n.check)?Hx:(s=Zx(t,e,r,r),s?(n.mode=Yx,Gx):(n.havedict=1,Bo))};var AA=Kx,PA=Qx,kA=Jx,EA=wA,FA=Xx,DA=jA,TA=NA,IA=CA,RA=LA,OA="pako inflate (from Nodeca project)",ns={inflateReset:AA,inflateReset2:PA,inflateResetKeep:kA,inflateInit:EA,inflateInit2:FA,inflate:DA,inflateEnd:TA,inflateGetHeader:IA,inflateSetDictionary:RA,inflateInfo:OA};function BA(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var MA=BA;const e_=Object.prototype.toString,{Z_NO_FLUSH:UA,Z_FINISH:qA,Z_OK:Fu,Z_STREAM_END:Tg,Z_NEED_DICT:Ig,Z_STREAM_ERROR:$A,Z_DATA_ERROR:Jv,Z_MEM_ERROR:zA}=Ux;function qu(t){this.options=qx.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iA,this.strm.avail_out=0;let r=ns.inflateInit2(this.strm,e.windowBits);if(r!==Fu)throw new Error(f0[r]);if(this.header=new MA,ns.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=g0.string2buf(e.dictionary):e_.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=ns.inflateSetDictionary(this.strm,e.dictionary),r!==Fu)))throw new Error(f0[r])}qu.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?qA:UA,e_.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=ns.inflate(r,o),s===Ig&&i&&(s=ns.inflateSetDictionary(r,i),s===Fu?s=ns.inflate(r,o):s===Jv&&(s=Ig));r.avail_in>0&&s===Tg&&r.state.wrap>0&&t[r.next_in]!==0;)ns.inflateReset(r),s=ns.inflate(r,o);switch(s){case $A:case Jv:case Ig:case zA:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===Tg))if(this.options.to==="string"){let c=g0.utf8border(r.output,r.next_out),u=r.next_out-c,d=g0.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===Fu&&l===0)){if(s===Tg)return s=ns.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};qu.prototype.onData=function(t){this.chunks.push(t)};qu.prototype.onEnd=function(t){t===Fu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qx.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function WA(t,e){const r=new qu(e);if(r.push(t),r.err)throw r.msg||f0[r.err];return r.result}var HA=qu,GA=WA,YA={Inflate:HA,inflate:GA};const{Inflate:VA,inflate:JA}=YA;var Kv=VA,KA=JA;const t_=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;t_[t]=e}const Qv=4294967295;function QA(t,e,r){let n=t;for(let i=0;i<r;i++)n=t_[(n^e[i])&255]^n>>>8;return n}function XA(t,e){return(QA(Qv,t,e)^Qv)>>>0}function Xv(t,e,r){const n=t.readUint32(),i=XA(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function r_(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function n_(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function i_(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function a_(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function s_(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+ZA(e[s-i],r[s],r[s-i])&255}}function ZA(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return i<=s&&i<=o?t:s<=o?e:r}function e6(t,e,r,n,i,s){switch(t){case 0:r_(e,r,i);break;case 1:n_(e,r,i,s);break;case 2:i_(e,r,n,i);break;case 3:a_(e,r,n,i,s);break;case 4:s_(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const t6=new Uint16Array([255]),r6=new Uint8Array(t6.buffer),n6=r6[0]===255;function i6(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*i,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const g=o[d],m=Math.ceil((r-g.x)/g.xStep),f=Math.ceil((n-g.y)/g.yStep);if(m<=0||f<=0)continue;const x=m*l,w=new Uint8Array(x);for(let N=0;N<f;N++){const b=e[u++],S=e.subarray(u,u+x);u+=x;const j=new Uint8Array(x);e6(b,S,j,w,x,l),w.set(j);for(let C=0;C<m;C++){const $=g.x+C*g.xStep,Z=g.y+N*g.yStep;if(!($>=r||Z>=n))for(let V=0;V<l;V++)c[(Z*r+$)*l+V]=j[C*l+V]}}}if(s===16){const d=new Uint16Array(c.buffer);if(n6)for(let g=0;g<d.length;g++)d[g]=a6(d[g]);return d}else return c}function a6(t){return(t&255)<<8|t>>8&255}const s6=new Uint16Array([255]),o6=new Uint8Array(s6.buffer),l6=o6[0]===255,c6=new Uint8Array(0);function Zv(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,l=Math.ceil(s/8*i*r),c=new Uint8Array(n*l);let u=c6,d=0,g,m;for(let f=0;f<n;f++){switch(g=e.subarray(d+1,d+1+l),m=c.subarray(f*l,(f+1)*l),e[d]){case 0:r_(g,m,l);break;case 1:n_(g,m,l,o);break;case 2:i_(g,m,u,l);break;case 3:a_(g,m,u,l,o);break;case 4:s_(g,m,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=m,d+=l+1}if(s===16){const f=new Uint16Array(c.buffer);if(l6)for(let x=0;x<f.length;x++)f[x]=u6(f[x]);return f}else return c}function u6(t){return(t&255)<<8|t>>8&255}const Xd=Uint8Array.of(137,80,78,71,13,10,26,10);function ey(t){if(!d6(t.readBytes(Xd.length)))throw new Error("wrong PNG signature")}function d6(t){if(t.length<Xd.length)return!1;for(let e=0;e<Xd.length;e++)if(t[e]!==Xd[e])return!1;return!0}const h6="tEXt",f6=0,o_=new TextDecoder("latin1");function g6(t){if(m6(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const p6=/^[\u0000-\u00FF]*$/;function m6(t){if(!p6.test(t))throw new Error("invalid latin1 text")}function v6(t,e,r){const n=l_(e);t[n]=y6(e,r-n.length-1)}function l_(t){for(t.mark();t.readByte()!==f6;);const e=t.offset;t.reset();const r=o_.decode(t.readBytes(e-t.offset-1));return t.skip(1),g6(r),r}function y6(t,e){return o_.decode(t.readBytes(e))}const Ti={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Rg={UNKNOWN:-1,DEFLATE:0},ty={UNKNOWN:-1,ADAPTIVE:0},Og={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Dd={NONE:0,BACKGROUND:1,PREVIOUS:2},Bg={SOURCE:0,OVER:1};class b6 extends Pm{constructor(r,n={}){super(r);Ar(this,"_checkCrc");Ar(this,"_inflator");Ar(this,"_png");Ar(this,"_apng");Ar(this,"_end");Ar(this,"_hasPalette");Ar(this,"_palette");Ar(this,"_hasTransparency");Ar(this,"_transparency");Ar(this,"_compressionMethod");Ar(this,"_filterMethod");Ar(this,"_interlaceMethod");Ar(this,"_colorType");Ar(this,"_isAnimated");Ar(this,"_numberOfFrames");Ar(this,"_numberOfPlays");Ar(this,"_frames");Ar(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new Kv,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Rg.UNKNOWN,this._filterMethod=ty.UNKNOWN,this._interlaceMethod=Og.UNKNOWN,this._colorType=Ti.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ey(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(ey(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case h6:v6(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Xv(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Xv(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=x6(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Ti.GREYSCALE:i=1;break;case Ti.TRUECOLOUR:i=3;break;case Ti.INDEXED_COLOUR:i=1;break;case Ti.GREYSCALE_ALPHA:i=2;break;case Ti.TRUECOLOUR_ALPHA:i=4;break;case Ti.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Rg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ti.GREYSCALE:case Ti.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ti.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ti.UNKNOWN:case Ti.GREYSCALE_ALPHA:case Ti.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=l_(this),i=this.readUint8();if(i!==Rg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:KA(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=Zv({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case Dd.NONE:break;case Dd.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case Dd.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case Bg.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case Bg.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const g=n.data[u+this._png.channels-1]/i,m=d%(this._png.channels-1)===0?1:n.data[u+d],f=Math.floor(g*m+(1-g)*r.data[c+d]);r.data[c+d]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==ty.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Og.NO_INTERLACE)this._png.data=Zv({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Og.ADAM7)this._png.data=i6({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Dd.NONE,blendOp:Bg.SOURCE,data:r}),this._inflator=new Kv,this._writingDataChunks=!1}}function x6(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var ry;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(ry||(ry={}));function _6(t,e){return new b6(t,e).decode()}var ar=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Mg(){ar.console&&typeof ar.console.log=="function"&&ar.console.log.apply(ar.console,arguments)}var Tr={log:Mg,warn:function(t){ar.console&&(typeof ar.console.warn=="function"?ar.console.warn.apply(ar.console,arguments):Mg.call(null,arguments))},error:function(t){ar.console&&(typeof ar.console.error=="function"?ar.console.error.apply(ar.console,arguments):Mg(t))}};function Ug(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){wo(n.response,e,r)},n.onerror=function(){Tr.error("could not download file")},n.send()}function ny(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Td(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var wo=ar.saveAs||((typeof window>"u"?"undefined":Pr(window))!=="object"||window!==ar?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=ar.URL||ar.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?ny(i.href)?Ug(t,e,r):Td(i,i.target="_blank"):Td(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Td(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(ny(t))Ug(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Td(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Pr(s)!=="object"&&(Tr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Ug(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(ar.HTMLElement)||ar.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Pr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=ar.URL||ar.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function c_(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var Zd=ar.atob.bind(ar),iy=ar.btoa.bind(ar);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function qg(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=Gn(r,n,i,s,e[0],7,-680876936),s=Gn(s,r,n,i,e[1],12,-389564586),i=Gn(i,s,r,n,e[2],17,606105819),n=Gn(n,i,s,r,e[3],22,-1044525330),r=Gn(r,n,i,s,e[4],7,-176418897),s=Gn(s,r,n,i,e[5],12,1200080426),i=Gn(i,s,r,n,e[6],17,-1473231341),n=Gn(n,i,s,r,e[7],22,-45705983),r=Gn(r,n,i,s,e[8],7,1770035416),s=Gn(s,r,n,i,e[9],12,-1958414417),i=Gn(i,s,r,n,e[10],17,-42063),n=Gn(n,i,s,r,e[11],22,-1990404162),r=Gn(r,n,i,s,e[12],7,1804603682),s=Gn(s,r,n,i,e[13],12,-40341101),i=Gn(i,s,r,n,e[14],17,-1502002290),r=Yn(r,n=Gn(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Yn(s,r,n,i,e[6],9,-1069501632),i=Yn(i,s,r,n,e[11],14,643717713),n=Yn(n,i,s,r,e[0],20,-373897302),r=Yn(r,n,i,s,e[5],5,-701558691),s=Yn(s,r,n,i,e[10],9,38016083),i=Yn(i,s,r,n,e[15],14,-660478335),n=Yn(n,i,s,r,e[4],20,-405537848),r=Yn(r,n,i,s,e[9],5,568446438),s=Yn(s,r,n,i,e[14],9,-1019803690),i=Yn(i,s,r,n,e[3],14,-187363961),n=Yn(n,i,s,r,e[8],20,1163531501),r=Yn(r,n,i,s,e[13],5,-1444681467),s=Yn(s,r,n,i,e[2],9,-51403784),i=Yn(i,s,r,n,e[7],14,1735328473),r=Vn(r,n=Yn(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Vn(s,r,n,i,e[8],11,-2022574463),i=Vn(i,s,r,n,e[11],16,1839030562),n=Vn(n,i,s,r,e[14],23,-35309556),r=Vn(r,n,i,s,e[1],4,-1530992060),s=Vn(s,r,n,i,e[4],11,1272893353),i=Vn(i,s,r,n,e[7],16,-155497632),n=Vn(n,i,s,r,e[10],23,-1094730640),r=Vn(r,n,i,s,e[13],4,681279174),s=Vn(s,r,n,i,e[0],11,-358537222),i=Vn(i,s,r,n,e[3],16,-722521979),n=Vn(n,i,s,r,e[6],23,76029189),r=Vn(r,n,i,s,e[9],4,-640364487),s=Vn(s,r,n,i,e[12],11,-421815835),i=Vn(i,s,r,n,e[15],16,530742520),r=Jn(r,n=Vn(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Jn(s,r,n,i,e[7],10,1126891415),i=Jn(i,s,r,n,e[14],15,-1416354905),n=Jn(n,i,s,r,e[5],21,-57434055),r=Jn(r,n,i,s,e[12],6,1700485571),s=Jn(s,r,n,i,e[3],10,-1894986606),i=Jn(i,s,r,n,e[10],15,-1051523),n=Jn(n,i,s,r,e[1],21,-2054922799),r=Jn(r,n,i,s,e[8],6,1873313359),s=Jn(s,r,n,i,e[15],10,-30611744),i=Jn(i,s,r,n,e[6],15,-1560198380),n=Jn(n,i,s,r,e[13],21,1309151649),r=Jn(r,n,i,s,e[4],6,-145523070),s=Jn(s,r,n,i,e[11],10,-1120210379),i=Jn(i,s,r,n,e[2],15,718787259),n=Jn(n,i,s,r,e[9],21,-343485551),t[0]=Us(r,t[0]),t[1]=Us(n,t[1]),t[2]=Us(i,t[2]),t[3]=Us(s,t[3])}function uf(t,e,r,n,i,s){return e=Us(Us(e,t),Us(n,s)),Us(e<<i|e>>>32-i,r)}function Gn(t,e,r,n,i,s,o){return uf(e&r|~e&n,t,e,i,s,o)}function Yn(t,e,r,n,i,s,o){return uf(e&n|r&~n,t,e,i,s,o)}function Vn(t,e,r,n,i,s,o){return uf(e^r^n,t,e,i,s,o)}function Jn(t,e,r,n,i,s,o){return uf(r^(e|~n),t,e,i,s,o)}function u_(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)qg(n,w6(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(qg(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,qg(n,i),n}function w6(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var ay="0123456789abcdef".split("");function S6(t){for(var e="",r=0;r<4;r++)e+=ay[t>>8*r+4&15]+ay[t>>8*r&15];return e}function j6(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function p0(t){return u_(t).map(j6).join("")}var N6=function(t){for(var e=0;e<t.length;e++)t[e]=S6(t[e]);return t.join("")}(u_("hello"))!="5d41402abc4b2a76b9719d911017c592";function Us(t,e){if(N6){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function m0(t,e){var r,n,i,s;if(t!==r){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var g=e.length,m=0,f=0,x="";for(c=0;c<g;c++)f=(f+(d=l[m=(m+1)%256]))%256,l[m]=l[f],l[f]=d,o=l[(l[m]+l[f])%256],x+=String.fromCharCode(e.charCodeAt(c)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var sy={print:4,modify:8,copy:16,"annot-forms":32};function ml(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(sy.perm!==void 0)throw new Error("Invalid permission: "+l);i+=sy[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=p0(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=m0(this.encryptionKey,this.padding)}function vl(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function oy(t){if(Pr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){ar.console&&Tr.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Fh(t){if(!(this instanceof Fh))return new Fh(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function d_(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function jo(t,e,r,n,i){if(!(this instanceof jo))return new jo(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,d_.call(this,n,i)}function kl(t,e,r,n,i){if(!(this instanceof kl))return new kl(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,d_.call(this,n,i)}function Tt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Pr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=oy;var x="1.3",w=f.__private__.getPdfVersion=function(){return x};f.__private__.setPdfVersion=function(y){x=y};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return N};var b=f.__private__.getPageFormat=function(y){return N[y]};i=i||"a4";var S="compat",j="advanced",C=S;function $(){this.saveGraphicsState(),le(new nt(Pt,0,0,-Pt,0,Ci()*Pt).toString()+" cm"),this.setFontSize(this.getFontSize()/Pt),u="n",C=j}function Z(){this.restoreGraphicsState(),u="S",C=S}var V=f.__private__.combineFontStyleAndFontWeight=function(y,B){if(y=="bold"&&B=="normal"||y=="bold"&&B==400||y=="normal"&&B=="italic"||y=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(y=B==400||B==="normal"?y==="italic"?"italic":"normal":B!=700&&B!=="bold"||y!=="normal"?(B==700?"bold":B)+""+y:"bold"),y};f.advancedAPI=function(y){var B=C===S;return B&&$.call(this),typeof y!="function"||(y(this),B&&Z.call(this)),this},f.compatAPI=function(y){var B=C===j;return B&&Z.call(this),typeof y!="function"||(y(this),B&&$.call(this)),this},f.isAdvancedAPI=function(){return C===j};var T,R=function(y){if(C!==j)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=f.roundToPrecision=f.__private__.roundToPrecision=function(y,B){var pe=e||B;if(isNaN(y)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(pe).replace(/0+$/,"")};T=f.hpf=f.__private__.hpf=typeof c=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return z(y,c)}:c==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return z(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return z(y,16)};var I=f.f2=f.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return z(y,2)},G=f.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return z(y,3)},de=f.scale=f.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return C===S?y*Pt:C===j?y:void 0},M=function(y){return de(function(B){return C===S?Ci()-B:C===j?B:void 0}(y))};f.__private__.setPrecision=f.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var U,ve="00000000000000000000000000000000",ue=f.__private__.getFileId=function(){return ve},Y=f.__private__.setFileId=function(y){return ve=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():ve.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(jr=new ml(d.userPermissions,d.userPassword,d.ownerPassword,ve)),ve};f.setFileId=function(y){return Y(y),this},f.getFileId=function(){return ue()};var se=f.__private__.convertDateToPDFDate=function(y){var B=y.getTimezoneOffset(),pe=B<0?"+":"-",Fe=Math.floor(Math.abs(B/60)),qe=Math.abs(B%60),ft=[pe,oe(Fe),"'",oe(qe),"'"].join("");return["D:",y.getFullYear(),oe(y.getMonth()+1),oe(y.getDate()),oe(y.getHours()),oe(y.getMinutes()),oe(y.getSeconds()),ft].join("")},ke=f.__private__.convertPDFDateToDate=function(y){var B=parseInt(y.substr(2,4),10),pe=parseInt(y.substr(6,2),10)-1,Fe=parseInt(y.substr(8,2),10),qe=parseInt(y.substr(10,2),10),ft=parseInt(y.substr(12,2),10),_t=parseInt(y.substr(14,2),10);return new Date(B,pe,Fe,qe,ft,_t,0)},be=f.__private__.setCreationDate=function(y){var B;if(y===void 0&&(y=new Date),y instanceof Date)B=se(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=y}return U=B},E=f.__private__.getCreationDate=function(y){var B=U;return y==="jsDate"&&(B=ke(U)),B};f.setCreationDate=function(y){return be(y),this},f.getCreationDate=function(y){return E(y)};var q,oe=f.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},me=f.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},Ne=0,Se=[],Ce=[],Le=0,Me=[],Ue=[],at=!1,Ve=Ce;f.__private__.setCustomOutputDestination=function(y){at=!0,Ve=y};var Oe=function(y){at||(Ve=y)};f.__private__.resetCustomOutputDestination=function(){at=!1,Ve=Ce};var le=f.__private__.out=function(y){return y=y.toString(),Le+=y.length+1,Ve.push(y),Ve},Ct=f.__private__.write=function(y){return le(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Et=f.__private__.getArrayBuffer=function(y){for(var B=y.length,pe=new ArrayBuffer(B),Fe=new Uint8Array(pe);B--;)Fe[B]=y.charCodeAt(B);return pe},He=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return He};var $e=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(y){return $e=C===j?y/Pt:y,this};var pt,ct=f.__private__.getFontSize=f.getFontSize=function(){return C===S?$e:$e*Pt},jt=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(y){return jt=y,this},f.__private__.getR2L=f.getR2L=function(){return jt};var At,Wt=f.__private__.setZoomMode=function(y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))pt=y;else if(isNaN(y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');pt=y}else pt=parseInt(y,10)};f.__private__.getZoomMode=function(){return pt};var st,St=f.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');At=y};f.__private__.getPageMode=function(){return At};var zt=f.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');st=y};f.__private__.getLayoutMode=function(){return st},f.__private__.setDisplayMode=f.setDisplayMode=function(y,B,pe){return Wt(y),zt(B),St(pe),this};var bt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(y){if(Object.keys(bt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return bt[y]},f.__private__.getDocumentProperties=function(){return bt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(y){for(var B in bt)bt.hasOwnProperty(B)&&y[B]&&(bt[B]=y[B]);return this},f.__private__.setDocumentProperty=function(y,B){if(Object.keys(bt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return bt[y]=B};var Dt,Pt,Ot,wt,Xt,Te={},It={},ot=[],Rt={},ht={},Ye={},tr={},_e=null,Je=0,vt=[],ce=new oy(f),W=t.hotfixes||[],Ee={},Ge={},Be=[],nt=function y(B,pe,Fe,qe,ft,_t){if(!(this instanceof y))return new y(B,pe,Fe,qe,ft,_t);isNaN(B)&&(B=1),isNaN(pe)&&(pe=0),isNaN(Fe)&&(Fe=0),isNaN(qe)&&(qe=1),isNaN(ft)&&(ft=0),isNaN(_t)&&(_t=0),this._matrix=[B,pe,Fe,qe,ft,_t]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(y)},nt.prototype.multiply=function(y){var B=y.sx*this.sx+y.shy*this.shx,pe=y.sx*this.shy+y.shy*this.sy,Fe=y.shx*this.sx+y.sy*this.shx,qe=y.shx*this.shy+y.sy*this.sy,ft=y.tx*this.sx+y.ty*this.shx+this.tx,_t=y.tx*this.shy+y.ty*this.sy+this.ty;return new nt(B,pe,Fe,qe,ft,_t)},nt.prototype.decompose=function(){var y=this.sx,B=this.shy,pe=this.shx,Fe=this.sy,qe=this.tx,ft=this.ty,_t=Math.sqrt(y*y+B*B),Vt=(y/=_t)*pe+(B/=_t)*Fe;pe-=y*Vt,Fe-=B*Vt;var Qt=Math.sqrt(pe*pe+Fe*Fe);return Vt/=Qt,y*(Fe/=Qt)<B*(pe/=Qt)&&(y=-y,B=-B,Vt=-Vt,_t=-_t),{scale:new nt(_t,0,0,Qt,0,0),translate:new nt(1,0,0,1,qe,ft),rotate:new nt(y,B,-B,y,0,0),skew:new nt(1,0,Vt,1,0,0)}},nt.prototype.toString=function(y){return this.join(" ")},nt.prototype.inversed=function(){var y=this.sx,B=this.shy,pe=this.shx,Fe=this.sy,qe=this.tx,ft=this.ty,_t=1/(y*Fe-B*pe),Vt=Fe*_t,Qt=-B*_t,ir=-pe*_t,ur=y*_t;return new nt(Vt,Qt,ir,ur,-Vt*qe-ir*ft,-Qt*qe-ur*ft)},nt.prototype.applyToPoint=function(y){var B=y.x*this.sx+y.y*this.shx+this.tx,pe=y.x*this.shy+y.y*this.sy+this.ty;return new co(B,pe)},nt.prototype.applyToRectangle=function(y){var B=this.applyToPoint(y),pe=this.applyToPoint(new co(y.x+y.w,y.y+y.h));return new pc(B.x,B.y,pe.x-B.x,pe.y-B.y)},nt.prototype.clone=function(){var y=this.sx,B=this.shy,pe=this.shx,Fe=this.sy,qe=this.tx,ft=this.ty;return new nt(y,B,pe,Fe,qe,ft)},f.Matrix=nt;var Mt=f.matrixMult=function(y,B){return B.multiply(y)},ut=new nt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=ut;var kt=function(y,B){if(!ht[y]){var pe=(B instanceof jo?"Sh":"P")+(Object.keys(Rt).length+1).toString(10);B.id=pe,ht[y]=pe,Rt[pe]=B,ce.publish("addPattern",B)}};f.ShadingPattern=jo,f.TilingPattern=kl,f.addShadingPattern=function(y,B){return R("addShadingPattern()"),kt(y,B),this},f.beginTilingPattern=function(y){R("beginTilingPattern()"),mc(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},f.endTilingPattern=function(y,B){R("endTilingPattern()"),B.stream=Ue[q].join(`
`),kt(y,B),ce.publish("endTilingPattern",B),Be.pop().restore()};var X,te=f.__private__.newObject=function(){var y=je();return ze(y,!0),y},je=f.__private__.newObjectDeferred=function(){return Ne++,Se[Ne]=function(){return Le},Ne},ze=function(y,B){return B=typeof B=="boolean"&&B,Se[y]=Le,B&&le(y+" 0 obj"),y},Lt=f.__private__.newAdditionalObject=function(){var y={objId:je(),content:""};return Me.push(y),y},qt=je(),Xe=je(),rr=f.__private__.decodeColorString=function(y){var B=y.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length!==5||B[4]!=="k"&&B[4]!=="K"||(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var pe=parseFloat(B[0]);B=[pe,pe,pe,"r"]}for(var Fe="#",qe=0;qe<3;qe++)Fe+=("0"+Math.floor(255*parseFloat(B[qe])).toString(16)).slice(-2);return Fe},L=f.__private__.encodeColorString=function(y){var B;typeof y=="string"&&(y={ch1:y});var pe=y.ch1,Fe=y.ch2,qe=y.ch3,ft=y.ch4,_t=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var Vt=new c_(pe);if(Vt.ok)pe=Vt.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var Qt=parseInt(pe.substr(1),16);pe=Qt>>16&255,Fe=Qt>>8&255,qe=255&Qt}if(Fe===void 0||ft===void 0&&pe===Fe&&Fe===qe)B=typeof pe=="string"?pe+" "+_t[0]:y.precision===2?I(pe/255)+" "+_t[0]:G(pe/255)+" "+_t[0];else if(ft===void 0||Pr(ft)==="object"){if(ft&&!isNaN(ft.a)&&ft.a===0)return["1.","1.","1.",_t[1]].join(" ");B=typeof pe=="string"?[pe,Fe,qe,_t[1]].join(" "):y.precision===2?[I(pe/255),I(Fe/255),I(qe/255),_t[1]].join(" "):[G(pe/255),G(Fe/255),G(qe/255),_t[1]].join(" ")}else B=typeof pe=="string"?[pe,Fe,qe,ft,_t[2]].join(" "):y.precision===2?[I(pe),I(Fe),I(qe),I(ft),_t[2]].join(" "):[G(pe),G(Fe),G(qe),G(ft),_t[2]].join(" ");return B},A=f.__private__.getFilters=function(){return o},K=f.__private__.putStream=function(y){var B=(y=y||{}).data||"",pe=y.filters||A(),Fe=y.alreadyAppliedFilters||[],qe=y.addLength1||!1,ft=B.length,_t=y.objectId,Vt=function(yn){return yn};if(d!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Vt=jr.encryptor(_t,0));var Qt={};pe===!0&&(pe=["FlateEncode"]);var ir=y.additionalKeyValues||[],ur=(Qt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(B,pe):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(Fe)?Fe.join(" "):Fe.toString());if(Qt.data.length!==0&&(ir.push({key:"Length",value:Qt.data.length}),qe===!0&&ir.push({key:"Length1",value:ft})),ur.length!=0)if(ur.split("/").length-1==1)ir.push({key:"Filter",value:ur});else{ir.push({key:"Filter",value:"["+ur+"]"});for(var Nr=0;Nr<ir.length;Nr+=1)if(ir[Nr].key==="DecodeParms"){for(var Yr=[],pn=0;pn<Qt.reverseChain.split("/").length-1;pn+=1)Yr.push("null");Yr.push(ir[Nr].value),ir[Nr].value="["+Yr.join(" ")+"]"}}le("<<");for(var Fr=0;Fr<ir.length;Fr++)le("/"+ir[Fr].key+" "+ir[Fr].value);le(">>"),Qt.data.length!==0&&(le("stream"),le(Vt(Qt.data)),le("endstream"))},ae=f.__private__.putPage=function(y){var B=y.number,pe=y.data,Fe=y.objId,qe=y.contentsObjId;ze(Fe,!0),le("<</Type /Page"),le("/Parent "+y.rootDictionaryObjId+" 0 R"),le("/Resources "+y.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(T(y.mediaBox.bottomLeftX))+" "+parseFloat(T(y.mediaBox.bottomLeftY))+" "+T(y.mediaBox.topRightX)+" "+T(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&le("/CropBox ["+T(y.cropBox.bottomLeftX)+" "+T(y.cropBox.bottomLeftY)+" "+T(y.cropBox.topRightX)+" "+T(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&le("/BleedBox ["+T(y.bleedBox.bottomLeftX)+" "+T(y.bleedBox.bottomLeftY)+" "+T(y.bleedBox.topRightX)+" "+T(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&le("/TrimBox ["+T(y.trimBox.bottomLeftX)+" "+T(y.trimBox.bottomLeftY)+" "+T(y.trimBox.topRightX)+" "+T(y.trimBox.topRightY)+"]"),y.artBox!==null&&le("/ArtBox ["+T(y.artBox.bottomLeftX)+" "+T(y.artBox.bottomLeftY)+" "+T(y.artBox.topRightX)+" "+T(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&le("/UserUnit "+y.userUnit),ce.publish("putPage",{objId:Fe,pageContext:vt[B],pageNumber:B,page:pe}),le("/Contents "+qe+" 0 R"),le(">>"),le("endobj");var ft=pe.join(`
`);return C===j&&(ft+=`
Q`),ze(qe,!0),K({data:ft,filters:A(),objectId:qe}),le("endobj"),Fe},Pe=f.__private__.putPages=function(){var y,B,pe=[];for(y=1;y<=Je;y++)vt[y].objId=je(),vt[y].contentsObjId=je();for(y=1;y<=Je;y++)pe.push(ae({number:y,data:Ue[y],objId:vt[y].objId,contentsObjId:vt[y].contentsObjId,mediaBox:vt[y].mediaBox,cropBox:vt[y].cropBox,bleedBox:vt[y].bleedBox,trimBox:vt[y].trimBox,artBox:vt[y].artBox,userUnit:vt[y].userUnit,rootDictionaryObjId:qt,resourceDictionaryObjId:Xe}));ze(qt,!0),le("<</Type /Pages");var Fe="/Kids [";for(B=0;B<Je;B++)Fe+=pe[B]+" 0 R ";le(Fe+"]"),le("/Count "+Je),le(">>"),le("endobj"),ce.publish("postPutPages")},tt=function(y){ce.publish("putFont",{font:y,out:le,newObject:te,putStream:K}),y.isAlreadyPutted!==!0&&(y.objectNumber=te(),le("<<"),le("/Type /Font"),le("/BaseFont /"+vl(y.postScriptName)),le("/Subtype /Type1"),typeof y.encoding=="string"&&le("/Encoding /"+y.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},D=function(y){y.objectNumber=te();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[T(y.x),T(y.y),T(y.x+y.width),T(y.y+y.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var pe=y.pages[1].join(`
`);K({data:pe,additionalKeyValues:B,objectId:y.objectNumber}),le("endobj")},xe=function(y,B){B||(B=21);var pe=te(),Fe=function(_t,Vt){var Qt,ir=[],ur=1/(Vt-1);for(Qt=0;Qt<1;Qt+=ur)ir.push(Qt);if(ir.push(1),_t[0].offset!=0){var Nr={offset:0,color:_t[0].color};_t.unshift(Nr)}if(_t[_t.length-1].offset!=1){var Yr={offset:1,color:_t[_t.length-1].color};_t.push(Yr)}for(var pn="",Fr=0,yn=0;yn<ir.length;yn++){for(Qt=ir[yn];Qt>_t[Fr+1].offset;)Fr++;var mn=_t[Fr].offset,Rn=(Qt-mn)/(_t[Fr+1].offset-mn),za=_t[Fr].color,ms=_t[Fr+1].color;pn+=me(Math.round((1-Rn)*za[0]+Rn*ms[0]).toString(16))+me(Math.round((1-Rn)*za[1]+Rn*ms[1]).toString(16))+me(Math.round((1-Rn)*za[2]+Rn*ms[2]).toString(16))}return pn.trim()}(y.colors,B),qe=[];qe.push({key:"FunctionType",value:"0"}),qe.push({key:"Domain",value:"[0.0 1.0]"}),qe.push({key:"Size",value:"["+B+"]"}),qe.push({key:"BitsPerSample",value:"8"}),qe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),K({data:Fe,additionalKeyValues:qe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),le("endobj"),y.objectNumber=te(),le("<< /ShadingType "+y.type),le("/ColorSpace /DeviceRGB");var ft="/Coords ["+T(parseFloat(y.coords[0]))+" "+T(parseFloat(y.coords[1]))+" ";y.type===2?ft+=T(parseFloat(y.coords[2]))+" "+T(parseFloat(y.coords[3])):ft+=T(parseFloat(y.coords[2]))+" "+T(parseFloat(y.coords[3]))+" "+T(parseFloat(y.coords[4]))+" "+T(parseFloat(y.coords[5])),le(ft+="]"),y.matrix&&le("/Matrix ["+y.matrix.toString()+"]"),le("/Function "+pe+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},ye=function(y,B){var pe=je(),Fe=te();B.push({resourcesOid:pe,objectOid:Fe}),y.objectNumber=Fe;var qe=[];qe.push({key:"Type",value:"/Pattern"}),qe.push({key:"PatternType",value:"1"}),qe.push({key:"PaintType",value:"1"}),qe.push({key:"TilingType",value:"1"}),qe.push({key:"BBox",value:"["+y.boundingBox.map(T).join(" ")+"]"}),qe.push({key:"XStep",value:T(y.xStep)}),qe.push({key:"YStep",value:T(y.yStep)}),qe.push({key:"Resources",value:pe+" 0 R"}),y.matrix&&qe.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),K({data:y.stream,additionalKeyValues:qe,objectId:y.objectNumber}),le("endobj")},F=function(y){for(var B in y.objectNumber=te(),le("<<"),y)switch(B){case"opacity":le("/ca "+I(y[B]));break;case"stroke-opacity":le("/CA "+I(y[B]))}le(">>"),le("endobj")},ie=function(y){ze(y.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var B in le("/Font <<"),Te)Te.hasOwnProperty(B)&&(g===!1||g===!0&&m.hasOwnProperty(B))&&le("/"+B+" "+Te[B].objectNumber+" 0 R");le(">>")}(),function(){if(Object.keys(Rt).length>0){for(var B in le("/Shading <<"),Rt)Rt.hasOwnProperty(B)&&Rt[B]instanceof jo&&Rt[B].objectNumber>=0&&le("/"+B+" "+Rt[B].objectNumber+" 0 R");ce.publish("putShadingPatternDict"),le(">>")}}(),function(B){if(Object.keys(Rt).length>0){for(var pe in le("/Pattern <<"),Rt)Rt.hasOwnProperty(pe)&&Rt[pe]instanceof f.TilingPattern&&Rt[pe].objectNumber>=0&&Rt[pe].objectNumber<B&&le("/"+pe+" "+Rt[pe].objectNumber+" 0 R");ce.publish("putTilingPatternDict"),le(">>")}}(y.objectOid),function(){if(Object.keys(Ye).length>0){var B;for(B in le("/ExtGState <<"),Ye)Ye.hasOwnProperty(B)&&Ye[B].objectNumber>=0&&le("/"+B+" "+Ye[B].objectNumber+" 0 R");ce.publish("putGStateDict"),le(">>")}}(),function(){for(var B in le("/XObject <<"),Ee)Ee.hasOwnProperty(B)&&Ee[B].objectNumber>=0&&le("/"+B+" "+Ee[B].objectNumber+" 0 R");ce.publish("putXobjectDict"),le(">>")}(),le(">>"),le("endobj")},P=function(y){It[y.fontName]=It[y.fontName]||{},It[y.fontName][y.fontStyle]=y.id},Q=function(y,B,pe,Fe,qe){var ft={id:"F"+(Object.keys(Te).length+1).toString(10),postScriptName:y,fontName:B,fontStyle:pe,encoding:Fe,isStandardFont:qe||!1,metadata:{}};return ce.publish("addFont",{font:ft,instance:this}),Te[ft.id]=ft,P(ft),ft.id},he=f.__private__.pdfEscape=f.pdfEscape=function(y,B){return function(pe,Fe){var qe,ft,_t,Vt,Qt,ir,ur,Nr,Yr;if(_t=(Fe=Fe||{}).sourceEncoding||"Unicode",Qt=Fe.outputEncoding,(Fe.autoencode||Qt)&&Te[Dt].metadata&&Te[Dt].metadata[_t]&&Te[Dt].metadata[_t].encoding&&(Vt=Te[Dt].metadata[_t].encoding,!Qt&&Te[Dt].encoding&&(Qt=Te[Dt].encoding),!Qt&&Vt.codePages&&(Qt=Vt.codePages[0]),typeof Qt=="string"&&(Qt=Vt[Qt]),Qt)){for(ur=!1,ir=[],qe=0,ft=pe.length;qe<ft;qe++)(Nr=Qt[pe.charCodeAt(qe)])?ir.push(String.fromCharCode(Nr)):ir.push(pe[qe]),ir[qe].charCodeAt(0)>>8&&(ur=!0);pe=ir.join("")}for(qe=pe.length;ur===void 0&&qe!==0;)pe.charCodeAt(qe-1)>>8&&(ur=!0),qe--;if(!ur)return pe;for(ir=Fe.noBOM?[]:[254,255],qe=0,ft=pe.length;qe<ft;qe++){if((Yr=(Nr=pe.charCodeAt(qe))>>8)>>8)throw new Error("Character at position "+qe+" of string '"+pe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ir.push(Yr),ir.push(Nr-(Yr<<8))}return String.fromCharCode.apply(void 0,ir)}(y,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},we=f.__private__.beginPage=function(y){Ue[++Je]=[],vt[Je]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},rt(Je),Oe(Ue[q])},Ae=function(y,B){var pe,Fe,qe;switch(r=B||r,typeof y=="string"&&(pe=b(y.toLowerCase()),Array.isArray(pe)&&(Fe=pe[0],qe=pe[1])),Array.isArray(y)&&(Fe=y[0]*Pt,qe=y[1]*Pt),isNaN(Fe)&&(Fe=i[0],qe=i[1]),(Fe>14400||qe>14400)&&(Tr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Fe=Math.min(14400,Fe),qe=Math.min(14400,qe)),i=[Fe,qe],r.substr(0,1)){case"l":qe>Fe&&(i=[qe,Fe]);break;case"p":Fe>qe&&(i=[qe,Fe])}we(i),xf(dc),le(Go),fc!==0&&le(fc+" J"),gc!==0&&le(gc+" j"),ce.publish("addPage",{pageNumber:Je})},Ie=function(y){y>0&&y<=Je&&(Ue.splice(y,1),vt.splice(y,1),Je--,q>Je&&(q=Je),this.setPage(q))},rt=function(y){y>0&&y<=Je&&(q=y)},yt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Ue.length-1},Bt=function(y,B,pe){var Fe,qe=void 0;return pe=pe||{},y=y!==void 0?y:Te[Dt].fontName,B=B!==void 0?B:Te[Dt].fontStyle,Fe=y.toLowerCase(),It[Fe]!==void 0&&It[Fe][B]!==void 0?qe=It[Fe][B]:It[y]!==void 0&&It[y][B]!==void 0?qe=It[y][B]:pe.disableWarning===!1&&Tr.warn("Unable to look up font label for font '"+y+"', '"+B+"'. Refer to getFontList() for available fonts."),qe||pe.noFallback||(qe=It.times[B])==null&&(qe=It.times.normal),qe},Ze=f.__private__.putInfo=function(){var y=te(),B=function(Fe){return Fe};for(var pe in d!==null&&(B=jr.encryptor(y,0)),le("<<"),le("/Producer ("+he(B("jsPDF "+Tt.version))+")"),bt)bt.hasOwnProperty(pe)&&bt[pe]&&le("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+he(B(bt[pe]))+")");le("/CreationDate ("+he(B(U))+")"),le(">>"),le("endobj")},mt=f.__private__.putCatalog=function(y){var B=(y=y||{}).rootDictionaryObjId||qt;switch(te(),le("<<"),le("/Type /Catalog"),le("/Pages "+B+" 0 R"),pt||(pt="fullwidth"),pt){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+pt;pe.substr(pe.length-1)==="%"&&(pt=parseInt(pt)/100),typeof pt=="number"&&le("/OpenAction [3 0 R /XYZ null null "+I(pt)+"]")}switch(st||(st="continuous"),st){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}At&&le("/PageMode /"+At),ce.publish("putCatalog"),le(">>"),le("endobj")},it=f.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(Ne+1)),le("/Root "+Ne+" 0 R"),le("/Info "+(Ne-1)+" 0 R"),d!==null&&le("/Encrypt "+jr.oid+" 0 R"),le("/ID [ <"+ve+"> <"+ve+"> ]"),le(">>")},$t=f.__private__.putHeader=function(){le("%PDF-"+x),le("%")},er=f.__private__.putXRef=function(){var y="0000000000";le("xref"),le("0 "+(Ne+1)),le("0000000000 65535 f ");for(var B=1;B<=Ne;B++)typeof Se[B]=="function"?le((y+Se[B]()).slice(-10)+" 00000 n "):Se[B]!==void 0?le((y+Se[B]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},nr=f.__private__.buildDocument=function(){var y;Ne=0,Le=0,Ce=[],Se=[],Me=[],qt=je(),Xe=je(),Oe(Ce),ce.publish("buildDocument"),$t(),Pe(),function(){ce.publish("putAdditionalObjects");for(var pe=0;pe<Me.length;pe++){var Fe=Me[pe];ze(Fe.objId,!0),le(Fe.content),le("endobj")}ce.publish("postPutAdditionalObjects")}(),y=[],function(){for(var pe in Te)Te.hasOwnProperty(pe)&&(g===!1||g===!0&&m.hasOwnProperty(pe))&&tt(Te[pe])}(),function(){var pe;for(pe in Ye)Ye.hasOwnProperty(pe)&&F(Ye[pe])}(),function(){for(var pe in Ee)Ee.hasOwnProperty(pe)&&D(Ee[pe])}(),function(pe){var Fe;for(Fe in Rt)Rt.hasOwnProperty(Fe)&&(Rt[Fe]instanceof jo?xe(Rt[Fe]):Rt[Fe]instanceof kl&&ye(Rt[Fe],pe))}(y),ce.publish("putResources"),y.forEach(ie),ie({resourcesOid:Xe,objectOid:Number.MAX_SAFE_INTEGER}),ce.publish("postPutResources"),d!==null&&(jr.oid=te(),le("<<"),le("/Filter /Standard"),le("/V "+jr.v),le("/R "+jr.r),le("/U <"+jr.toHexString(jr.U)+">"),le("/O <"+jr.toHexString(jr.O)+">"),le("/P "+jr.P),le(">>"),le("endobj")),Ze(),mt();var B=Le;return er(),it(),le("startxref"),le(""+B),le("%%EOF"),Oe(Ue[q]),Ce.join(`
`)},mr=f.__private__.getBlob=function(y){return new Blob([Et(y)],{type:"application/pdf"})},sr=f.output=f.__private__.output=(X=function(y,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",y){case void 0:return nr();case"save":f.save(B.filename);break;case"arraybuffer":return Et(nr());case"blob":return mr(nr());case"bloburi":case"bloburl":if(ar.URL!==void 0&&typeof ar.URL.createObjectURL=="function")return ar.URL&&ar.URL.createObjectURL(mr(nr()))||void 0;Tr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",Fe=nr();try{pe=iy(Fe)}catch{pe=iy(unescape(encodeURIComponent(Fe)))}return"data:application/pdf;filename="+B.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ar)==="[object Window]"){var qe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ft=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(qe=B.pdfObjectUrl,ft="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+qe+'"'+ft+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",Vt=ar.open();return Vt!==null&&Vt.document.write(_t),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ar)==="[object Window]"){var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',ir=ar.open();if(ir!==null){ir.document.write(Qt);var ur=this;ir.document.documentElement.querySelector("#pdfViewer").onload=function(){ir.document.title=B.filename,ir.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ur.output("bloburl"))}}return ir}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ar)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Nr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Yr=ar.open();if(Yr!==null&&(Yr.document.write(Nr),Yr.document.title=B.filename),Yr||typeof safari>"u")return Yr;break;case"datauri":case"dataurl":return ar.document.location.href=this.output("datauristring",B);default:return null}},X.foo=function(){try{return X.apply(this,arguments)}catch(pe){var y=pe.stack||"";~y.indexOf(" at ")&&(y=y.split(" at ")[1]);var B="Error in function "+y.split(`
`)[0].split("<")[0]+": "+pe.message;if(!ar.console)throw new Error(B);ar.console.error(B,pe),ar.alert&&alert(B)}},X.foo.bar=X,X.foo),nn=function(y){return Array.isArray(W)===!0&&W.indexOf(y)>-1};switch(n){case"pt":Pt=1;break;case"mm":Pt=72/25.4;break;case"cm":Pt=72/2.54;break;case"in":Pt=72;break;case"px":Pt=nn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pt=12;break;case"ex":Pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Pt=n}var jr=null;be(),Y();var hr=f.__private__.getPageInfo=f.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vt[y].objId,pageNumber:y,pageContext:vt[y]}},wa=f.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in vt)if(vt[B].objId===y)break;return hr(B)},na=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:vt[q].objId,pageNumber:q,pageContext:vt[q]}};f.addPage=function(){return Ae.apply(this,arguments),this},f.setPage=function(){return rt.apply(this,arguments),Oe.call(this,Ue[q]),this},f.insertPage=function(y){return this.addPage(),this.movePage(q,y),this},f.movePage=function(y,B){var pe,Fe;if(y>B){pe=Ue[y],Fe=vt[y];for(var qe=y;qe>B;qe--)Ue[qe]=Ue[qe-1],vt[qe]=vt[qe-1];Ue[B]=pe,vt[B]=Fe,this.setPage(B)}else if(y<B){pe=Ue[y],Fe=vt[y];for(var ft=y;ft<B;ft++)Ue[ft]=Ue[ft+1],vt[ft]=vt[ft+1];Ue[B]=pe,vt[B]=Fe,this.setPage(B)}return this},f.deletePage=function(){return Ie.apply(this,arguments),this},f.__private__.text=f.text=function(y,B,pe,Fe,qe){var ft,_t,Vt,Qt,ir,ur,Nr,Yr,pn,Fr=(Fe=Fe||{}).scope||this;if(typeof y=="number"&&typeof B=="number"&&(typeof pe=="string"||Array.isArray(pe))){var yn=pe;pe=B,B=y,y=yn}if(arguments[3]instanceof nt==0?(Vt=arguments[4],Qt=arguments[5],Pr(Nr=arguments[3])==="object"&&Nr!==null||(typeof Vt=="string"&&(Qt=Vt,Vt=null),typeof Nr=="string"&&(Qt=Nr,Nr=null),typeof Nr=="number"&&(Vt=Nr,Nr=null),Fe={flags:Nr,angle:Vt,align:Qt})):(R("The transform parameter of text() with a Matrix value"),pn=qe),isNaN(B)||isNaN(pe)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Fr;var mn,Rn="",za=typeof Fe.lineHeightFactor=="number"?Fe.lineHeightFactor:so,ms=Fr.internal.scaleFactor;function Lf(Ir){return Ir=Ir.split("	").join(Array(Fe.TabLen||9).join(" ")),he(Ir,Nr)}function zu(Ir){for(var Rr,sn=Ir.concat(),on=[],Ya=sn.length;Ya--;)typeof(Rr=sn.shift())=="string"?on.push(Rr):Array.isArray(Ir)&&(Rr.length===1||Rr[1]===void 0&&Rr[2]===void 0)?on.push(Rr[0]):on.push([Rr[0],Rr[1],Rr[2]]);return on}function ho(Ir,Rr){var sn;if(typeof Ir=="string")sn=Rr(Ir)[0];else if(Array.isArray(Ir)){for(var on,Ya,nl=Ir.concat(),Pa=[],Cc=nl.length;Cc--;)typeof(on=nl.shift())=="string"?Pa.push(Rr(on)[0]):Array.isArray(on)&&typeof on[0]=="string"&&(Ya=Rr(on[0],on[1],on[2]),Pa.push([Ya[0],Ya[1],Ya[2]]));sn=Pa}return sn}var ia=!1,bc=!0;if(typeof y=="string")ia=!0;else if(Array.isArray(y)){var Ko=y.concat();_t=[];for(var vs,Pn=Ko.length;Pn--;)(typeof(vs=Ko.shift())!="string"||Array.isArray(vs)&&typeof vs[0]!="string")&&(bc=!1);ia=bc}if(ia===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var Wa=$e/Fr.internal.scaleFactor,Ha=Wa*(za-1);switch(Fe.baseline){case"bottom":pe-=Ha;break;case"top":pe+=Wa-Ha;break;case"hanging":pe+=Wa-2*Ha;break;case"middle":pe+=Wa/2-Ha}if((ur=Fe.maxWidth||0)>0&&(typeof y=="string"?y=Fr.splitTextToSize(y,ur):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(Ir,Rr){return Ir.concat(Fr.splitTextToSize(Rr,ur))},[]))),ft={text:y,x:B,y:pe,options:Fe,mutex:{pdfEscape:he,activeFontKey:Dt,fonts:Te,activeFontSize:$e}},ce.publish("preProcessText",ft),y=ft.text,Vt=(Fe=ft.options).angle,pn instanceof nt==0&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,Fe.rotationDirection===0&&(Vt=-Vt),C===j&&(Vt=-Vt);var Qo=Math.cos(Vt),xc=Math.sin(Vt);pn=new nt(Qo,xc,-xc,Qo,0,0)}else Vt&&Vt instanceof nt&&(pn=Vt);C!==j||pn||(pn=ut),(ir=Fe.charSpace||Vo)!==void 0&&(Rn+=T(de(ir))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yr=Fe.horizontalScale)!==void 0&&(Rn+=T(100*Yr)+` Tz
`),Fe.lang;var ri=-1,Wu=Fe.renderingMode!==void 0?Fe.renderingMode:Fe.stroke,Xo=Fr.internal.getCurrentPageInfo().pageContext;switch(Wu){case 0:case!1:case"fill":ri=0;break;case 1:case!0:case"stroke":ri=1;break;case 2:case"fillThenStroke":ri=2;break;case 3:case"invisible":ri=3;break;case 4:case"fillAndAddForClipping":ri=4;break;case 5:case"strokeAndAddPathForClipping":ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ri=6;break;case 7:case"addToPathForClipping":ri=7}var Hu=Xo.usedRenderingMode!==void 0?Xo.usedRenderingMode:-1;ri!==-1?Rn+=ri+` Tr
`:Hu!==-1&&(Rn+=`0 Tr
`),ri!==-1&&(Xo.usedRenderingMode=ri),Qt=Fe.align||"left";var bn,Yi=$e*za,_c=Fr.internal.pageSize.getWidth(),wc=Te[Dt];ir=Fe.charSpace||Vo,ur=Fe.maxWidth||0,Nr=Object.assign({autoencode:!0,noBOM:!0},Fe.flags);var ys=[],Zo=function(Ir){return Fr.getStringUnitWidth(Ir,{font:wc,charSpace:ir,fontSize:$e,doKerning:!1})*$e/ms};if(Object.prototype.toString.call(y)==="[object Array]"){var hi;_t=zu(y),Qt!=="left"&&(bn=_t.map(Zo));var fi,fo=0;if(Qt==="right"){B-=bn[0],y=[],Pn=_t.length;for(var Na=0;Na<Pn;Na++)Na===0?(fi=qa(B),hi=$a(pe)):(fi=de(fo-bn[Na]),hi=-Yi),y.push([_t[Na],fi,hi]),fo=bn[Na]}else if(Qt==="center"){B-=bn[0]/2,y=[],Pn=_t.length;for(var bs=0;bs<Pn;bs++)bs===0?(fi=qa(B),hi=$a(pe)):(fi=de((fo-bn[bs])/2),hi=-Yi),y.push([_t[bs],fi,hi]),fo=bn[bs]}else if(Qt==="left"){y=[],Pn=_t.length;for(var Sc=0;Sc<Pn;Sc++)y.push(_t[Sc])}else if(Qt==="justify"&&wc.encoding==="Identity-H"){y=[],Pn=_t.length,ur=ur!==0?ur:_c;for(var xs=0,an=0;an<Pn;an++)if(hi=an===0?$a(pe):-Yi,fi=an===0?qa(B):xs,an<Pn-1){var Af=de((ur-bn[an])/(_t[an].split(" ").length-1)),Ca=_t[an].split(" ");y.push([Ca[0]+" ",fi,hi]),xs=0;for(var La=1;La<Ca.length;La++){var el=(Zo(Ca[La-1]+" "+Ca[La])-Zo(Ca[La]))*ms+Af;La==Ca.length-1?y.push([Ca[La],el,0]):y.push([Ca[La]+" ",el,0]),xs-=el}}else y.push([_t[an],fi,hi]);y.push(["",xs,0])}else{if(Qt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],Pn=_t.length,ur=ur!==0?ur:_c,an=0;an<Pn;an++)hi=an===0?$a(pe):-Yi,fi=an===0?qa(B):0,an<Pn-1?ys.push(T(de((ur-bn[an])/(_t[an].split(" ").length-1)))):ys.push(0),y.push([_t[an],fi,hi])}}(typeof Fe.R2L=="boolean"?Fe.R2L:jt)===!0&&(y=ho(y,function(Ir,Rr,sn){return[Ir.split("").reverse().join(""),Rr,sn]})),ft={text:y,x:B,y:pe,options:Fe,mutex:{pdfEscape:he,activeFontKey:Dt,fonts:Te,activeFontSize:$e}},ce.publish("postProcessText",ft),y=ft.text,mn=ft.mutex.isHex||!1;var jc=Te[Dt].encoding;jc!=="WinAnsiEncoding"&&jc!=="StandardEncoding"||(y=ho(y,function(Ir,Rr,sn){return[Lf(Ir),Rr,sn]})),_t=zu(y),y=[];for(var tl,rl,go,po=Array.isArray(_t[0])?1:0,Ga="",Nc=function(Ir,Rr,sn){var on="";return sn instanceof nt?(sn=typeof Fe.angle=="number"?Mt(sn,new nt(1,0,0,1,Ir,Rr)):Mt(new nt(1,0,0,1,Ir,Rr),sn),C===j&&(sn=Mt(new nt(1,0,0,-1,0,0),sn)),on=sn.join(" ")+` Tm
`):on=T(Ir)+" "+T(Rr)+` Td
`,on},Li=0;Li<_t.length;Li++){switch(Ga="",po){case 1:go=(mn?"<":"(")+_t[Li][0]+(mn?">":")"),tl=parseFloat(_t[Li][1]),rl=parseFloat(_t[Li][2]);break;case 0:go=(mn?"<":"(")+_t[Li]+(mn?">":")"),tl=qa(B),rl=$a(pe)}ys!==void 0&&ys[Li]!==void 0&&(Ga=ys[Li]+` Tw
`),Li===0?y.push(Ga+Nc(tl,rl,pn)+go):po===0?y.push(Ga+go):po===1&&y.push(Ga+Nc(tl,rl,pn)+go)}y=po===0?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var Aa=`BT
/`;return Aa+=Dt+" "+$e+` Tf
`,Aa+=T($e*za)+` TL
`,Aa+=oo+`
`,Aa+=Rn,Aa+=y,le(Aa+="ET"),m[Dt]=!0,Fr};var Wo=f.__private__.clip=f.clip=function(y){return le(y==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Wo("evenodd")},f.__private__.discardPath=f.discardPath=function(){return le("n"),this};var Ni=f.__private__.isValidStyle=function(y){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(B=!0),B};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(y){return Ni(y)&&(u=y),this};var io=f.__private__.getStyle=f.getStyle=function(y){var B=u;switch(y){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=y}return B},Ho=f.close=function(){return le("h"),this};f.stroke=function(){return le("S"),this},f.fill=function(y){return Sa("f",y),this},f.fillEvenOdd=function(y){return Sa("f*",y),this},f.fillStroke=function(y){return Sa("B",y),this},f.fillStrokeEvenOdd=function(y){return Sa("B*",y),this};var Sa=function(y,B){Pr(B)==="object"?vf(B,y):le(y)},cc=function(y){y===null||C===j&&y===void 0||(y=io(y),le(y))};function mf(y,B,pe,Fe,qe){var ft=new kl(B||this.boundingBox,pe||this.xStep,Fe||this.yStep,this.gState,qe||this.matrix);ft.stream=this.stream;var _t=y+"$$"+this.cloneIndex+++"$$";return kt(_t,ft),ft}var vf=function(y,B){var pe=ht[y.key],Fe=Rt[pe];if(Fe instanceof jo)le("q"),le(yf(B)),Fe.gState&&f.setGState(Fe.gState),le(y.matrix.toString()+" cm"),le("/"+pe+" sh"),le("Q");else if(Fe instanceof kl){var qe=new nt(1,0,0,-1,0,Ci());y.matrix&&(qe=qe.multiply(y.matrix||ut),pe=mf.call(Fe,y.key,y.boundingBox,y.xStep,y.yStep,qe).id),le("q"),le("/Pattern cs"),le("/"+pe+" scn"),Fe.gState&&f.setGState(Fe.gState),le(B),le("Q")}},yf=function(y){switch(y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},uc=f.moveTo=function(y,B){return le(T(de(y))+" "+T(M(B))+" m"),this},ao=f.lineTo=function(y,B){return le(T(de(y))+" "+T(M(B))+" l"),this},ps=f.curveTo=function(y,B,pe,Fe,qe,ft){return le([T(de(y)),T(M(B)),T(de(pe)),T(M(Fe)),T(de(qe)),T(M(ft)),"c"].join(" ")),this};f.__private__.line=f.line=function(y,B,pe,Fe,qe){if(isNaN(y)||isNaN(B)||isNaN(pe)||isNaN(Fe)||!Ni(qe))throw new Error("Invalid arguments passed to jsPDF.line");return C===S?this.lines([[pe-y,Fe-B]],y,B,[1,1],qe||"S"):this.lines([[pe-y,Fe-B]],y,B,[1,1]).stroke()},f.__private__.lines=f.lines=function(y,B,pe,Fe,qe,ft){var _t,Vt,Qt,ir,ur,Nr,Yr,pn,Fr,yn,mn,Rn;if(typeof y=="number"&&(Rn=pe,pe=B,B=y,y=Rn),Fe=Fe||[1,1],ft=ft||!1,isNaN(B)||isNaN(pe)||!Array.isArray(y)||!Array.isArray(Fe)||!Ni(qe)||typeof ft!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(uc(B,pe),_t=Fe[0],Vt=Fe[1],ir=y.length,yn=B,mn=pe,Qt=0;Qt<ir;Qt++)(ur=y[Qt]).length===2?(yn=ur[0]*_t+yn,mn=ur[1]*Vt+mn,ao(yn,mn)):(Nr=ur[0]*_t+yn,Yr=ur[1]*Vt+mn,pn=ur[2]*_t+yn,Fr=ur[3]*Vt+mn,yn=ur[4]*_t+yn,mn=ur[5]*Vt+mn,ps(Nr,Yr,pn,Fr,yn,mn));return ft&&Ho(),cc(qe),this},f.path=function(y){for(var B=0;B<y.length;B++){var pe=y[B],Fe=pe.c;switch(pe.op){case"m":uc(Fe[0],Fe[1]);break;case"l":ao(Fe[0],Fe[1]);break;case"c":ps.apply(this,Fe);break;case"h":Ho()}}return this},f.__private__.rect=f.rect=function(y,B,pe,Fe,qe){if(isNaN(y)||isNaN(B)||isNaN(pe)||isNaN(Fe)||!Ni(qe))throw new Error("Invalid arguments passed to jsPDF.rect");return C===S&&(Fe=-Fe),le([T(de(y)),T(M(B)),T(de(pe)),T(de(Fe)),"re"].join(" ")),cc(qe),this},f.__private__.triangle=f.triangle=function(y,B,pe,Fe,qe,ft,_t){if(isNaN(y)||isNaN(B)||isNaN(pe)||isNaN(Fe)||isNaN(qe)||isNaN(ft)||!Ni(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-y,Fe-B],[qe-pe,ft-Fe],[y-qe,B-ft]],y,B,[1,1],_t,!0),this},f.__private__.roundedRect=f.roundedRect=function(y,B,pe,Fe,qe,ft,_t){if(isNaN(y)||isNaN(B)||isNaN(pe)||isNaN(Fe)||isNaN(qe)||isNaN(ft)||!Ni(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return qe=Math.min(qe,.5*pe),ft=Math.min(ft,.5*Fe),this.lines([[pe-2*qe,0],[qe*Vt,0,qe,ft-ft*Vt,qe,ft],[0,Fe-2*ft],[0,ft*Vt,-qe*Vt,ft,-qe,ft],[2*qe-pe,0],[-qe*Vt,0,-qe,-ft*Vt,-qe,-ft],[0,2*ft-Fe],[0,-ft*Vt,qe*Vt,-ft,qe,-ft]],y+qe,B,[1,1],_t,!0),this},f.__private__.ellipse=f.ellipse=function(y,B,pe,Fe,qe){if(isNaN(y)||isNaN(B)||isNaN(pe)||isNaN(Fe)||!Ni(qe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ft=4/3*(Math.SQRT2-1)*pe,_t=4/3*(Math.SQRT2-1)*Fe;return uc(y+pe,B),ps(y+pe,B-_t,y+ft,B-Fe,y,B-Fe),ps(y-ft,B-Fe,y-pe,B-_t,y-pe,B),ps(y-pe,B+_t,y-ft,B+Fe,y,B+Fe),ps(y+ft,B+Fe,y+pe,B+_t,y+pe,B),cc(qe),this},f.__private__.circle=f.circle=function(y,B,pe,Fe){if(isNaN(y)||isNaN(B)||isNaN(pe)||!Ni(Fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,B,pe,pe,Fe)},f.setFont=function(y,B,pe){return pe&&(B=V(B,pe)),Dt=Bt(y,B,{disableWarning:!1}),this};var bf=f.__private__.getFont=f.getFont=function(){return Te[Bt.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var y,B,pe={};for(y in It)if(It.hasOwnProperty(y))for(B in pe[y]=[],It[y])It[y].hasOwnProperty(B)&&pe[y].push(B);return pe},f.addFont=function(y,B,pe,Fe,qe){var ft=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ft.indexOf(arguments[3])!==-1?qe=arguments[3]:arguments[3]&&ft.indexOf(arguments[3])==-1&&(pe=V(pe,Fe)),Q.call(this,y,B,pe,qe=qe||"Identity-H")};var so,dc=t.lineWidth||.200025,or=f.__private__.getLineWidth=f.getLineWidth=function(){return dc},xf=f.__private__.setLineWidth=f.setLineWidth=function(y){return dc=y,le(T(de(y))+" w"),this};f.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(y,B){if(y=y||[],B=B||0,isNaN(B)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(pe){return T(de(pe))}).join(" "),B=T(de(B)),le("["+y+"] "+B+" d"),this};var _f=f.__private__.getLineHeight=f.getLineHeight=function(){return $e*so};f.__private__.getLineHeight=f.getLineHeight=function(){return $e*so};var wf=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(so=y),this},Sf=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return so};wf(t.lineHeight);var qa=f.__private__.getHorizontalCoordinate=function(y){return de(y)},$a=f.__private__.getVerticalCoordinate=function(y){return C===j?y:vt[q].mediaBox.topRightY-vt[q].mediaBox.bottomLeftY-de(y)},jf=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(y){return T(qa(y))},Nf=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(y){return T($a(y))},Go=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return rr(Go)},f.__private__.setStrokeColor=f.setDrawColor=function(y,B,pe,Fe){return Go=L({ch1:y,ch2:B,ch3:pe,ch4:Fe,pdfColorType:"draw",precision:2}),le(Go),this};var hc=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return rr(hc)},f.__private__.setFillColor=f.setFillColor=function(y,B,pe,Fe){return hc=L({ch1:y,ch2:B,ch3:pe,ch4:Fe,pdfColorType:"fill",precision:2}),le(hc),this};var oo=t.textColor||"0 g",Yo=f.__private__.getTextColor=f.getTextColor=function(){return rr(oo)};f.__private__.setTextColor=f.setTextColor=function(y,B,pe,Fe){return oo=L({ch1:y,ch2:B,ch3:pe,ch4:Fe,pdfColorType:"text",precision:3}),this};var Vo=t.charSpace,Cf=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Vo||0)};f.__private__.setCharSpace=f.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vo=y,this};var fc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(y){var B=f.CapJoinStyles[y];if(B===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fc=B,le(B+" J"),this};var gc=0;f.__private__.setLineJoin=f.setLineJoin=function(y){var B=f.CapJoinStyles[y];if(B===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gc=B,le(B+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(T(de(y))+" M"),this},f.GState=Fh,f.setGState=function(y){(y=typeof y=="string"?Ye[tr[y]]:lo(null,y)).equals(_e)||(le("/"+y.id+" gs"),_e=y)};var lo=function(y,B){if(!y||!tr[y]){var pe=!1;for(var Fe in Ye)if(Ye.hasOwnProperty(Fe)&&Ye[Fe].equals(B)){pe=!0;break}if(pe)B=Ye[Fe];else{var qe="GS"+(Object.keys(Ye).length+1).toString(10);Ye[qe]=B,B.id=qe}return y&&(tr[y]=B.id),ce.publish("addGState",B),B}};f.addGState=function(y,B){return lo(y,B),this},f.saveGraphicsState=function(){return le("q"),ot.push({key:Dt,size:$e,color:oo}),this},f.restoreGraphicsState=function(){le("Q");var y=ot.pop();return Dt=y.key,$e=y.size,oo=y.color,_e=null,this},f.setCurrentTransformationMatrix=function(y){return le(y.toString()+" cm"),this},f.comment=function(y){return le("#"+y),this};var co=function(y,B){var pe=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(ft){isNaN(ft)||(pe=parseFloat(ft))}});var Fe=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Fe},set:function(ft){isNaN(ft)||(Fe=parseFloat(ft))}});var qe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return qe},set:function(ft){qe=ft.toString()}}),this},pc=function(y,B,pe,Fe){co.call(this,y,B),this.type="rect";var qe=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return qe},set:function(_t){isNaN(_t)||(qe=parseFloat(_t))}});var ft=Fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ft},set:function(_t){isNaN(_t)||(ft=parseFloat(_t))}}),this},Jo=function(){this.page=Je,this.currentPage=q,this.pages=Ue.slice(0),this.pagesContext=vt.slice(0),this.x=Ot,this.y=wt,this.matrix=Xt,this.width=vc(q),this.height=Ci(q),this.outputDestination=Ve,this.id="",this.objectNumber=-1};Jo.prototype.restore=function(){Je=this.page,q=this.currentPage,vt=this.pagesContext,Ue=this.pages,Ot=this.x,wt=this.y,Xt=this.matrix,yc(q,this.width),ja(q,this.height),Ve=this.outputDestination};var mc=function(y,B,pe,Fe,qe){Be.push(new Jo),Je=q=0,Ue=[],Ot=y,wt=B,Xt=qe,we([pe,Fe])};for(var uo in f.beginFormObject=function(y,B,pe,Fe,qe){return mc(y,B,pe,Fe,qe),this},f.endFormObject=function(y){return function(B){if(Ge[B])Be.pop().restore();else{var pe=new Jo,Fe="Xo"+(Object.keys(Ee).length+1).toString(10);pe.id=Fe,Ge[B]=Fe,Ee[Fe]=pe,ce.publish("addFormObject",pe),Be.pop().restore()}}(y),this},f.doFormObject=function(y,B){var pe=Ee[Ge[y]];return le("q"),le(B.toString()+" cm"),le("/"+pe.id+" Do"),le("Q"),this},f.getFormObject=function(y){var B=Ee[Ge[y]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},f.save=function(y,B){return y=y||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(wo(mr(nr()),y),typeof wo.unload=="function"&&ar.setTimeout&&setTimeout(wo.unload,911),this):new Promise(function(pe,Fe){try{var qe=wo(mr(nr()),y);typeof wo.unload=="function"&&ar.setTimeout&&setTimeout(wo.unload,911),pe(qe)}catch(ft){Fe(ft.message)}})},Tt.API)Tt.API.hasOwnProperty(uo)&&(uo==="events"&&Tt.API.events.length?function(y,B){var pe,Fe,qe;for(qe=B.length-1;qe!==-1;qe--)pe=B[qe][0],Fe=B[qe][1],y.subscribe.apply(y,[pe].concat(typeof Fe=="function"?[Fe]:Fe))}(ce,Tt.API.events):f[uo]=Tt.API[uo]);var vc=f.getPageWidth=function(y){return(vt[y=y||q].mediaBox.topRightX-vt[y].mediaBox.bottomLeftX)/Pt},yc=f.setPageWidth=function(y,B){vt[y].mediaBox.topRightX=B*Pt+vt[y].mediaBox.bottomLeftX},Ci=f.getPageHeight=function(y){return(vt[y=y||q].mediaBox.topRightY-vt[y].mediaBox.bottomLeftY)/Pt},ja=f.setPageHeight=function(y,B){vt[y].mediaBox.topRightY=B*Pt+vt[y].mediaBox.bottomLeftY};return f.internal={pdfEscape:he,getStyle:io,getFont:bf,getFontSize:ct,getCharSpace:Cf,getTextColor:Yo,getLineHeight:_f,getLineHeightFactor:Sf,getLineWidth:or,write:Ct,getHorizontalCoordinate:qa,getVerticalCoordinate:$a,getCoordinateString:jf,getVerticalCoordinateString:Nf,collections:{},newObject:te,newAdditionalObject:Lt,newObjectDeferred:je,newObjectDeferredBegin:ze,getFilters:A,putStream:K,events:ce,scaleFactor:Pt,pageSize:{getWidth:function(){return vc(q)},setWidth:function(y){yc(q,y)},getHeight:function(){return Ci(q)},setHeight:function(y){ja(q,y)}},encryptionOptions:d,encryption:jr,getEncryptor:function(y){return d!==null?jr.encryptor(y,0):function(B){return B}},output:sr,getNumberOfPages:yt,pages:Ue,out:le,f2:I,f3:G,getPageInfo:hr,getPageInfoByObjId:wa,getCurrentPageInfo:na,getPDFVersion:w,Point:co,Rectangle:pc,Matrix:nt,hasHotfix:nn},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return vc(q)},set:function(y){yc(q,y)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ci(q)},set:function(y){ja(q,y)},enumerable:!0,configurable:!0}),(function(y){for(var B=0,pe=He.length;B<pe;B++){var Fe=Q.call(this,y[B][0],y[B][1],y[B][2],He[B][3],!0);g===!1&&(m[Fe]=!0);var qe=y[B][0].split("-");P({id:Fe,fontName:qe[0],fontStyle:qe[1]||""})}ce.publish("addFonts",{fonts:Te,dictionary:It})}).call(f,He),Dt="F1",Ae(i,r),ce.publish("initialized"),f}ml.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},ml.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ml.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},ml.prototype.processOwnerPassword=function(t,e){return m0(p0(e).substr(0,5),t)},ml.prototype.encryptor=function(t,e){var r=p0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return m0(r,n)}},Fh.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Pr(t)!==Pr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Tt.API={events:[]},Tt.version="3.0.2";var en=Tt.API,km=1,zo=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hl=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},lr=function(t){return t.toFixed(2)},ks=function(t){return t.toFixed(5)};en.__acroform__={};var ji=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},ly=function(t){return t*km},Fa=function(t){var e=new f_,r=Yt.internal.getHeight(t)||0,n=Yt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(lr(n)),Number(lr(r))],e},C6=en.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},L6=en.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},A6=en.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},dn=en.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A6(t,e-1)},hn=en.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return C6(t,e-1)},fn=en.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return L6(t,e-1)},P6=en.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(i+o)||0,c.upperRight_Y=n(s)||0,[Number(lr(c.lowerLeft_X)),Number(lr(c.lowerLeft_Y)),Number(lr(c.upperRight_X)),Number(lr(c.upperRight_Y))]},k6=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=v0(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+lr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Fa(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},v0=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=r,o=Yt.internal.getHeight(t)||0;o=o<0?-o:o;var l=Yt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(I,G,de){if(I+1<i.length){var M=G+" "+i[I+1][0];return Id(M,t,de).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,g=Id("3",t,s).height,m=t.multiline?o-s:(o-g)/2,f=m+=2,x=0,w=0,N=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Id(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var b="",S=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var C=!1;if(i[j].length!==1&&N!==i[j].length-1){if((g+2)*(S+2)+2>o)continue e;b+=i[j][N],C=!0,w=j,j--}else{b=(b+=i[j][N]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var $=parseInt(j),Z=c($,b,s),V=j>=i.length-1;if(Z&&!V){b+=" ",N=0;continue}if(Z||V){if(V)w=$;else if(t.multiline&&(g+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(S+2)+2>o)continue e;w=$}}for(var T="",R=x;R<=w;R++){var z=i[R];if(t.multiline){if(R===w){T+=z[N]+" ",N=(N+1)%z.length;continue}if(R===x){T+=z[z.length-1]+" ";continue}}T+=z[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,d=Id(T,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=lr(u)+" "+lr(f)+` Td
`,e+="("+zo(T)+`) Tj
`,e+=-lr(u)+` 0 Td
`,f=-(s+2),d=0,x=C?w:w+1,S++,b=""}break}return n.text=e,n.fontSize=s,n},Id=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},E6={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},F6=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},D6=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(xa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(E6)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");km=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new g_,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&F6(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=P6(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Yt.createDefaultAppearanceStream(l),Pr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=k6(l);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var g="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var f=l.appearanceStreamContent[m];if(g+="/"+m+" ",g+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var x=f[o];typeof x=="function"&&(x=x.call(i,l)),g+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=f)=="function"&&(x=x.call(i,l)),g+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&function(w,N){for(var b in w)if(w.hasOwnProperty(b)){var S=b,j=w[b];N.internal.newObjectDeferredBegin(j.objId,!0),Pr(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete w[S]}}(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},h_=en.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Pr(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+zo(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$g=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+zo(n(t))+")"},Ra=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ra.prototype.toString=function(){return this.objId+" 0 R"},Ra.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ra.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:h_(i,this.objId,this.scope)}):i instanceof Ra?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var f_=function(){Ra.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ji(f_,Ra);var g_=function(){Ra.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+zo(r(t))+")"}},set:function(r){t=r}})};ji(g_,Ra);var xa=function t(){Ra.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dn(e,3)},set:function(b){b?this.F=hn(e,3):this.F=fn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');r=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Dh)return;s="FieldObject"+t.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+zo(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/km:u},set:function(b){u=b}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(b){d=b}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Dh||this instanceof Eo))return $g(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=b}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Fn==0?$g(m,this.objId,this.scope):m},set:function(b){b=b.toString(),m=this instanceof Fn==0?b.substr(0,1)==="("?hl(b.substr(1,b.length-2)):hl(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fn==1?hl(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Fn==1?"/"+b:b}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Fn==0?$g(f,this.objId,this.scope):f},set:function(b){b=b.toString(),f=this instanceof Fn==0?b.substr(0,1)==="("?hl(b.substr(1,b.length-2)):hl(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fn==1?hl(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof Fn==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(b){b=!!b,w=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(b){x=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,1)},set:function(b){b?this.Ff=hn(this.Ff,1):this.Ff=fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,2)},set:function(b){b?this.Ff=hn(this.Ff,2):this.Ff=fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,3)},set:function(b){b?this.Ff=hn(this.Ff,3):this.Ff=fn(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');N=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(N){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};ji(xa,Ra);var Ol=function(){xa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return h_(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,18)},set:function(r){r?this.Ff=hn(this.Ff,18):this.Ff=fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=hn(this.Ff,19):this.Ff=fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,20)},set:function(r){r?(this.Ff=hn(this.Ff,20),e.sort()):this.Ff=fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,22)},set:function(r){r?this.Ff=hn(this.Ff,22):this.Ff=fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(r){r?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,27)},set:function(r){r?this.Ff=hn(this.Ff,27):this.Ff=fn(this.Ff,27)}}),this.hasAppearanceStream=!1};ji(Ol,xa);var Bl=function(){Ol.call(this),this.fontName="helvetica",this.combo=!1};ji(Bl,Ol);var Ml=function(){Bl.call(this),this.combo=!0};ji(Ml,Bl);var eh=function(){Ml.call(this),this.edit=!0};ji(eh,Ml);var Fn=function(){xa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,15)},set:function(r){r?this.Ff=hn(this.Ff,15):this.Ff=fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,16)},set:function(r){r?this.Ff=hn(this.Ff,16):this.Ff=fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,17)},set:function(r){r?this.Ff=hn(this.Ff,17):this.Ff=fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(r){r?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+zo(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Pr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ji(Fn,xa);var th=function(){Fn.call(this),this.pushButton=!0};ji(th,Fn);var Ul=function(){Fn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ji(Ul,Fn);var Dh=function(){var t,e;xa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+zo(i(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Pr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ji(Dh,xa),Ul.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Ul.prototype.createOption=function(t){var e=new Dh;return e.Parent=this,e.optionName=t,this.Kids.push(e),T6.call(this.scope,e),e};var rh=function(){Fn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yt.CheckBox.createAppearanceStream()};ji(rh,Fn);var Eo=function(){xa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,13)},set:function(e){e?this.Ff=hn(this.Ff,13):this.Ff=fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,21)},set:function(e){e?this.Ff=hn(this.Ff,21):this.Ff=fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(e){e?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,24)},set:function(e){e?this.Ff=hn(this.Ff,24):this.Ff=fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,25)},set:function(e){e?this.Ff=hn(this.Ff,25):this.Ff=fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(e){e?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ji(Eo,xa);var nh=function(){Eo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,14)},set:function(t){t?this.Ff=hn(this.Ff,14):this.Ff=fn(this.Ff,14)}}),this.password=!0};ji(nh,Eo);var Yt={CheckBox:{createAppearanceStream:function(){return{N:{On:Yt.CheckBox.YesNormal},D:{On:Yt.CheckBox.YesPushDown,Off:Yt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Fa(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=v0(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+lr(Yt.internal.getWidth(t))+" "+lr(Yt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+lr(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Fa(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=Yt.internal.getHeight(t),o=Yt.internal.getWidth(t),l=v0(t,t.caption);return i.push("1 g"),i.push("0 0 "+lr(o)+" "+lr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+lr(o-1)+" "+lr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+lr(l.fontSize)+" Tf "+n),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Fa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+lr(Yt.internal.getWidth(t))+" "+lr(Yt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Yt.RadioButton.Circle.YesNormal,e.D[t]=Yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Fa(t);e.scope=t.scope;var r=[],n=Yt.internal.getWidth(t)<=Yt.internal.getHeight(t)?Yt.internal.getWidth(t)/4:Yt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Yt.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ks(Yt.internal.getWidth(t)/2)+" "+ks(Yt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Fa(t);e.scope=t.scope;var r=[],n=Yt.internal.getWidth(t)<=Yt.internal.getHeight(t)?Yt.internal.getWidth(t)/4:Yt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Yt.internal.Bezier_C).toFixed(5)),o=Number((n*Yt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ks(Yt.internal.getWidth(t)/2)+" "+ks(Yt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ks(Yt.internal.getWidth(t)/2)+" "+ks(Yt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Fa(t);e.scope=t.scope;var r=[],n=Yt.internal.getWidth(t)<=Yt.internal.getHeight(t)?Yt.internal.getWidth(t)/4:Yt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Yt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ks(Yt.internal.getWidth(t)/2)+" "+ks(Yt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Yt.RadioButton.Cross.YesNormal,e.D[t]=Yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Fa(t);e.scope=t.scope;var r=[],n=Yt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+lr(Yt.internal.getWidth(t)-2)+" "+lr(Yt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(lr(n.x1.x)+" "+lr(n.x1.y)+" m"),r.push(lr(n.x2.x)+" "+lr(n.x2.y)+" l"),r.push(lr(n.x4.x)+" "+lr(n.x4.y)+" m"),r.push(lr(n.x3.x)+" "+lr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Fa(t);e.scope=t.scope;var r=Yt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+lr(Yt.internal.getWidth(t))+" "+lr(Yt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+lr(Yt.internal.getWidth(t)-2)+" "+lr(Yt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(lr(r.x1.x)+" "+lr(r.x1.y)+" m"),n.push(lr(r.x2.x)+" "+lr(r.x2.y)+" l"),n.push(lr(r.x4.x)+" "+lr(r.x4.y)+" m"),n.push(lr(r.x3.x)+" "+lr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Fa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+lr(Yt.internal.getWidth(t))+" "+lr(Yt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Yt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Yt.internal.getWidth(t),r=Yt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Yt.internal.getWidth=function(t){var e=0;return Pr(t)==="object"&&(e=ly(t.Rect[2])),e},Yt.internal.getHeight=function(t){var e=0;return Pr(t)==="object"&&(e=ly(t.Rect[3])),e};var T6=en.addField=function(t){if(D6(this,t),!(t instanceof xa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};en.AcroFormChoiceField=Ol,en.AcroFormListBox=Bl,en.AcroFormComboBox=Ml,en.AcroFormEditBox=eh,en.AcroFormButton=Fn,en.AcroFormPushButton=th,en.AcroFormRadioButton=Ul,en.AcroFormCheckBox=rh,en.AcroFormTextField=Eo,en.AcroFormPasswordField=nh,en.AcroFormAppearance=Yt,en.AcroForm={ChoiceField:Ol,ListBox:Bl,ComboBox:Ml,EditBox:eh,Button:Fn,PushButton:th,RadioButton:Ul,CheckBox:rh,TextField:Eo,PasswordField:nh,Appearance:Yt},Tt.AcroForm={ChoiceField:Ol,ListBox:Bl,ComboBox:Ml,EditBox:eh,Button:Fn,PushButton:th,RadioButton:Ul,CheckBox:rh,TextField:Eo,PasswordField:nh,Appearance:Yt};Tt.AcroForm;function p_(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(I,G){var de,M,U,ve,ue,Y=r;if((G=G||r)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(Z(I))for(ue in n)for(U=n[ue],de=0;de<U.length;de+=1){for(ve=!0,M=0;M<U[de].length;M+=1)if(U[de][M]!==void 0&&U[de][M]!==I[M]){ve=!1;break}if(ve===!0){Y=ue;break}}else for(ue in n)for(U=n[ue],de=0;de<U.length;de+=1){for(ve=!0,M=0;M<U[de].length;M+=1)if(U[de][M]!==void 0&&U[de][M]!==I.charCodeAt(M)){ve=!1;break}if(ve===!0){Y=ue;break}}return Y===r&&G!==r&&(Y=G),Y},s=function I(G){for(var de=this.internal.write,M=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var ve=[];if(ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Image"}),ve.push({key:"Width",value:G.width}),ve.push({key:"Height",value:G.height}),G.colorSpace===b.INDEXED?ve.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(ve.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===b.DEVICE_CMYK&&ve.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ve.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&ve.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var ue="",Y=0,se=G.transparency.length;Y<se;Y++)ue+=G.transparency[Y]+" "+G.transparency[Y]+" ";ve.push({key:"Mask",value:"["+ue+"]"})}G.sMask!==void 0&&ve.push({key:"SMask",value:G.objectId+1+" 0 R"});var ke=G.filter!==void 0?["/"+G.filter]:void 0;if(M({data:G.data,additionalKeyValues:ve,alreadyAppliedFilters:ke,objectId:G.objectId}),de("endobj"),"sMask"in G&&G.sMask!==void 0){var be=(G.predictor!=null?"/Predictor "+G.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+G.width,E={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:be,data:G.sMask};"filter"in G&&(E.filter=G.filter),I.call(this,E)}if(G.colorSpace===b.INDEXED){var q=this.internal.newObject();M({data:T(new Uint8Array(G.palette)),objectId:q}),de("endobj")}},o=function(){var I=this.internal.collections[e+"images"];for(var G in I)s.call(this,I[G])},l=function(){var I,G=this.internal.collections[e+"images"],de=this.internal.write;for(var M in G)de("/I"+(I=G[M]).index,I.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var I=this.internal.collections[e+"images"];return c.call(this),I},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(I){return typeof t["process"+I.toUpperCase()]=="function"},m=function(I){return Pr(I)==="object"&&I.nodeType===1},f=function(I,G){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var de=""+I.getAttribute("src");if(de.indexOf("data:image/")===0)return Zd(unescape(de).split("base64,").pop());var M=t.loadFile(de,!0);if(M!==void 0)return M}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var U;switch(G){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;default:U="image/jpeg"}return Zd(I.toDataURL(U,1).split("base64,").pop())}},x=function(I){var G=this.internal.collections[e+"images"];if(G){for(var de in G)if(I===G[de].alias)return G[de]}},w=function(I,G,de){return I||G||(I=-96,G=-96),I<0&&(I=-1*de.width*72/I/this.internal.scaleFactor),G<0&&(G=-1*de.height*72/G/this.internal.scaleFactor),I===0&&(I=G*de.width/de.height),G===0&&(G=I*de.height/de.width),[I,G]},N=function(I,G,de,M,U,ve){var ue=w.call(this,de,M,U),Y=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ke=u.call(this);if(de=ue[0],M=ue[1],ke[U.index]=U,ve){ve*=Math.PI/180;var be=Math.cos(ve),E=Math.sin(ve),q=function(me){return me.toFixed(4)},oe=[q(be),q(E),q(-1*E),q(be),0,0,"cm"]}this.internal.write("q"),ve?(this.internal.write([1,"0","0",1,Y(I),se(G+M),"cm"].join(" ")),this.internal.write(oe.join(" ")),this.internal.write([Y(de),"0","0",Y(M),"0","0","cm"].join(" "))):this.internal.write([Y(de),"0","0",Y(M),Y(I),se(G+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(I){var G,de,M=0;if(typeof I=="string")for(de=I.length,G=0;G<de;G++)M=(M<<5)-M+I.charCodeAt(G),M|=0;else if(Z(I))for(de=I.byteLength/2,G=0;G<de;G++)M=(M<<5)-M+I[G],M|=0;return M},C=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var G=!0;return I.length===0&&(G=!1),I.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(G=!1),G},$=t.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var G=I.indexOf(",");return G<0?null:I.substring(0,G).trim().endsWith("base64")?I.substring(G+1):null};t.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var Z=t.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},V=t.__addimage__.binaryStringToUint8Array=function(I){for(var G=I.length,de=new Uint8Array(G),M=0;M<G;M++)de[M]=I.charCodeAt(M);return de},T=t.__addimage__.arrayBufferToBinaryString=function(I){for(var G="",de=Z(I)?I:new Uint8Array(I),M=0;M<de.length;M+=8192)G+=String.fromCharCode.apply(null,de.subarray(M,M+8192));return G};t.addImage=function(){var I,G,de,M,U,ve,ue,Y,se;if(typeof arguments[1]=="number"?(G=r,de=arguments[1],M=arguments[2],U=arguments[3],ve=arguments[4],ue=arguments[5],Y=arguments[6],se=arguments[7]):(G=arguments[1],de=arguments[2],M=arguments[3],U=arguments[4],ve=arguments[5],ue=arguments[6],Y=arguments[7],se=arguments[8]),Pr(I=arguments[0])==="object"&&!m(I)&&"imageData"in I){var ke=I;I=ke.imageData,G=ke.format||G||r,de=ke.x||de||0,M=ke.y||M||0,U=ke.w||ke.width||U,ve=ke.h||ke.height||ve,ue=ke.alias||ue,Y=ke.compression||Y,se=ke.rotation||ke.angle||se}var be=this.internal.getFilters();if(Y===void 0&&be.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(de)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var E=R.call(this,I,G,ue,Y);return N.call(this,de,M,U,ve,E,se),this};var R=function(I,G,de,M){var U,ve,ue;if(typeof I=="string"&&i(I)===r){I=unescape(I);var Y=z(I,!1);(Y!==""||(Y=t.loadFile(I,!0))!==void 0)&&(I=Y)}if(m(I)&&(I=f(I,G)),G=i(I,G),!g(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((ue=de)==null||ue.length===0)&&(de=function(se){return typeof se=="string"||Z(se)?j(se):Z(se.data)?j(se.data):null}(I)),(U=x.call(this,de))||(I instanceof Uint8Array||G==="RGBA"||(ve=I,I=V(I)),U=this["process"+G.toUpperCase()](I,d.call(this),de,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in t.image_compression?se:S.NONE}(M),ve)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},z=t.__addimage__.convertBase64ToBinaryString=function(I,G){G=typeof G!="boolean"||G;var de,M="";if(typeof I=="string"){var U;de=(U=$(I))!==null&&U!==void 0?U:I;try{M=Zd(de)}catch(ve){if(G)throw C(de)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ve.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};t.getImageProperties=function(I){var G,de,M="";if(m(I)&&(I=f(I)),typeof I=="string"&&i(I)===r&&((M=z(I,!1))===""&&(M=t.loadFile(I)||""),I=M),de=i(I),!g(de))throw new Error("addImage does not support files of type '"+de+"', please ensure that a plugin for '"+de+"' support is added.");if(I instanceof Uint8Array||(I=V(I)),!(G=this["process"+de.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=de,G}})(Tt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Tt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,g=0;g<u.length&&!d;g++)switch((n=u[g]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var f=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(w.objId),S=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(b(n.contents))+")",s+=" /Popup "+N.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+f(b(S))+") >>",w.content=s;var j=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+j,n.open&&(s+=" /Open true"),s+=" >>",N.content=s,this.internal.write(w.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(x(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var $=this.annotations._nameMap[n.options.name];n.options.pageNumber=$.page,n.options.top=$.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var Z=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+Z+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+i),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,i,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,i,s),i+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,i-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Tt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=t.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(w){var N=0,b=r,S="",j=0;for(N=0;N<w.length;N+=1)b[w.charCodeAt(N)]!==void 0?(j++,typeof(b=b[w.charCodeAt(N)])=="number"&&(S+=String.fromCharCode(b),b=r,j=0),N===w.length-1&&(b=r,S+=w.charAt(N-(j-1)),N-=j-1,j=0)):(b=r,S+=w.charAt(N-j),N-=j,j=0);return S};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(w,N,b){return o(w)?s(w)===!1?-1:!u(w)||!o(N)&&!o(b)||!o(b)&&l(N)||l(w)&&!o(N)||l(w)&&c(N)||l(w)&&l(N)?0:d(w)&&o(N)&&!l(N)&&o(b)&&u(b)?3:l(w)||!o(b)?1:2:-1},f=function(w){var N=0,b=0,S=0,j="",C="",$="",Z=(w=w||"").split("\\s+"),V=[];for(N=0;N<Z.length;N+=1){for(V.push(""),b=0;b<Z[N].length;b+=1)j=Z[N][b],C=Z[N][b-1],$=Z[N][b+1],o(j)?(S=m(j,C,$),V[N]+=S!==-1?String.fromCharCode(e[j.charCodeAt(0)][S]):j):V[N]+=j;V[N]=g(V[N])}return V.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var w,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(N)){var S=0;for(b=[],S=0;S<N.length;S+=1)Array.isArray(N[S])?b.push([f(N[S][0]),N[S][1],N[S][2]]):b.push([f(N[S])]);w=b}else w=f(N);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",x])}(Tt.API),Tt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Tt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(w){x=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),g=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,f=0,x=0,w=0,N=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=u.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,C){return j.concat(N.splitTextToSize(C,b))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)f<(w=this.getStringUnitWidth(c[S],{font:g})*d)&&(f=w);return f!==0&&(x=c.length),{w:f/=m,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,g,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var f,x,w,N,b=[],S=[],j=[],C={},$={},Z=[],V=[],T=(m=m||{}).autoSize||!1,R=m.printHeaders!==!1,z=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,I=m.margins||Object.assign({width:this.getPageWidth()},e),G=typeof m.padding=="number"?m.padding:3,de=m.headerBackgroundColor||"#c8c8c8",M=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=de,this.internal.__cell__.headerTextColor=M,this.setFontSize(z),g==null)S=b=Object.keys(d[0]),j=b.map(function(){return"left"});else if(Array.isArray(g)&&Pr(g[0])==="object")for(b=g.map(function(ke){return ke.name}),S=g.map(function(ke){return ke.prompt||ke.name||""}),j=g.map(function(ke){return ke.align||"left"}),f=0;f<g.length;f+=1)$[g[f].name]=.7499990551181103*g[f].width;else Array.isArray(g)&&typeof g[0]=="string"&&(S=b=g,j=b.map(function(){return"left"}));if(T||Array.isArray(g)&&typeof g[0]=="string")for(f=0;f<b.length;f+=1){for(C[N=b[f]]=d.map(function(ke){return ke[N]}),this.setFont(void 0,"bold"),Z.push(this.getTextDimensions(S[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=C[N],this.setFont(void 0,"normal"),w=0;w<x.length;w+=1)Z.push(this.getTextDimensions(x[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);$[N]=Math.max.apply(null,Z)+G+G,Z=[]}if(R){var U={};for(f=0;f<b.length;f+=1)U[b[f]]={},U[b[f]].text=S[f],U[b[f]].align=j[f];var ve=l.call(this,U,$);V=b.map(function(ke){return new s(c,u,$[ke],ve,U[ke].text,void 0,U[ke].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var ue=g.reduce(function(ke,be){return ke[be.name]=be.align,ke},{});for(f=0;f<d.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:d[f]},this);var Y=l.call(this,d[f],$);for(w=0;w<b.length;w+=1){var se=d[f][b[w]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:w,data:se},this),o.call(this,new s(c,u,$[b[w]],Y,se,f+2,ue[b[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var x=c[f];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*g/m+d+d},this).reduce(function(f,x){return Math.max(f,x)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Tt.API);var m_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},v_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],y0=p_(v_),y_=[100,200,300,400,500,600,700,800,900],I6=p_(y_);function zg(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return m_[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof y0[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function cy(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var R6={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dy(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function hy(t){return t.trimLeft()}function O6(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function B6(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Rd,fy,gy,fl,Od,py,my,vy,Wg=["times"];function yy(t,e,r,n){var i=4,s=xy;switch(n){case Tt.API.image_compression.FAST:i=1,s=by;break;case Tt.API.image_compression.MEDIUM:i=6,s=_y;break;case Tt.API.image_compression.SLOW:i=9,s=wy}t=function(l,c,u,d){for(var g,m=l.length/c,f=new Uint8Array(l.length+m),x=[M6,by,xy,_y,wy],w=0;w<m;w+=1){var N=w*c,b=l.subarray(N,N+c);if(d)f.set(d(b,u,g),N+w);else{for(var S=x.length,j=[],C=0;C<S;C+=1)j[C]=x[C](b,u,g);var $=q6(j.concat());f.set(j[$],N+w)}g=b}return f}(t,e,r,s);var o=d0(t,{level:i});return Tt.API.__addimage__.arrayBufferToBinaryString(o)}function M6(t){var e=Array.apply([],t);return e.unshift(0),e}function by(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function xy(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;i[s+1]=t[s]-o+256&255}return i}function _y(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;i[s+1]=t[s]+256-(o+l>>>1)&255}return i}function wy(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var o=U6(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function U6(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function q6(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Hg(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),o=(1<<r)-1;return b_(t,i)>>s&o}function Sy(t,e,r,n){var i=r*n,s=Math.floor(i/8),o=16-(i-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,g){if(d+1<u.byteLength)u.setUint16(d,g,!1);else{var m=g>>8&255;u.setUint8(d,m)}})(t,s,b_(t,s)&~(l<<o)&65535|c)}function b_(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function $6(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],g=0,m=null,f=0,x=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];g=t[e++]|t[e++]<<8,m=t[e++],1&w||(m=null),f=w>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var N=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,C=t[e++],$=C>>6&1,Z=1<<1+(7&C),V=l,T=c,R=!1;C>>7&&(R=!0,V=e,T=Z,e+=3*Z);var z=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}d.push({x:N,y:b,width:S,height:j,has_local_palette:R,palette_offset:V,palette_size:T,data_offset:z,data_length:e-z,transparent_index:m,interlaced:!!$,delay:g,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(G){if(G<0||G>=d.length)throw new Error("Frame index out of range.");return d[G]},this.decodeAndBlitFrameBGRA=function(G,de){var M=this.frameInfo(G),U=M.width*M.height,ve=new Uint8Array(U);jy(t,M.data_offset,ve,U);var ue=M.palette_offset,Y=M.transparent_index;Y===null&&(Y=256);var se=M.width,ke=r-se,be=se,E=4*(M.y*r+M.x),q=4*((M.y+M.height)*r+M.x),oe=E,me=4*ke;M.interlaced===!0&&(me+=4*r*7);for(var Ne=8,Se=0,Ce=ve.length;Se<Ce;++Se){var Le=ve[Se];if(be===0&&(be=se,(oe+=me)>=q&&(me=4*ke+4*r*(Ne-1),oe=E+(se+ke)*(Ne<<1),Ne>>=1)),Le===Y)oe+=4;else{var Me=t[ue+3*Le],Ue=t[ue+3*Le+1],at=t[ue+3*Le+2];de[oe++]=at,de[oe++]=Ue,de[oe++]=Me,de[oe++]=255}--be}},this.decodeAndBlitFrameRGBA=function(G,de){var M=this.frameInfo(G),U=M.width*M.height,ve=new Uint8Array(U);jy(t,M.data_offset,ve,U);var ue=M.palette_offset,Y=M.transparent_index;Y===null&&(Y=256);var se=M.width,ke=r-se,be=se,E=4*(M.y*r+M.x),q=4*((M.y+M.height)*r+M.x),oe=E,me=4*ke;M.interlaced===!0&&(me+=4*r*7);for(var Ne=8,Se=0,Ce=ve.length;Se<Ce;++Se){var Le=ve[Se];if(be===0&&(be=se,(oe+=me)>=q&&(me=4*ke+4*r*(Ne-1),oe=E+(se+ke)*(Ne<<1),Ne>>=1)),Le===Y)oe+=4;else{var Me=t[ue+3*Le],Ue=t[ue+3*Le+1],at=t[ue+3*Le+2];de[oe++]=Me,de[oe++]=Ue,de[oe++]=at,de[oe++]=255}--be}}}function jy(t,e,r,n){for(var i=t[e++],s=1<<i,o=s+1,l=o+1,c=i+1,u=(1<<c)-1,d=0,g=0,m=0,f=t[e++],x=new Int32Array(4096),w=null;;){for(;d<16&&f!==0;)g|=t[e++]<<d,d+=8,f===1?f=t[e++]:--f;if(d<c)break;var N=g&u;if(g>>=c,d-=c,N!==s){if(N===o)break;for(var b=N<l?N:w,S=0,j=b;j>s;)j=x[j]>>8,++S;var C=j;if(m+S+(b!==N?1:0)>n)return void Tr.log("Warning, gif stream longer than expected.");r[m++]=C;var $=m+=S;for(b!==N&&(r[m++]=C),j=b;S--;)j=x[j],r[--$]=255&j,j>>=8;w!==null&&l<4096&&(x[l++]=w<<8|C,l>=u+1&&c<12&&(++c,u=u<<1|1)),w=N}else l=o+1,u=(1<<(c=i+1))-1,w=null}return m!==n&&Tr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gg(t){var e,r,n,i,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),g=new Array(65535),m=new Array(65535),f=new Array(64),x=new Array(64),w=[],N=0,b=7,S=new Array(64),j=new Array(64),C=new Array(64),$=new Array(256),Z=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],de=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ve(E,q){for(var oe=0,me=0,Ne=new Array,Se=1;Se<=16;Se++){for(var Ce=1;Ce<=E[Se];Ce++)Ne[q[me]]=[],Ne[q[me]][0]=oe,Ne[q[me]][1]=Se,me++,oe++;oe*=2}return Ne}function ue(E){for(var q=E[0],oe=E[1]-1;oe>=0;)q&1<<oe&&(N|=1<<b),oe--,--b<0&&(N==255?(Y(255),Y(0)):Y(N),b=7,N=0)}function Y(E){w.push(E)}function se(E){Y(E>>8&255),Y(255&E)}function ke(E,q,oe,me,Ne){for(var Se,Ce=Ne[0],Le=Ne[240],Me=function($e,pt){var ct,jt,At,Wt,st,St,zt,bt,Dt,Pt,Ot=0;for(Dt=0;Dt<8;++Dt){ct=$e[Ot],jt=$e[Ot+1],At=$e[Ot+2],Wt=$e[Ot+3],st=$e[Ot+4],St=$e[Ot+5],zt=$e[Ot+6];var wt=ct+(bt=$e[Ot+7]),Xt=ct-bt,Te=jt+zt,It=jt-zt,ot=At+St,Rt=At-St,ht=Wt+st,Ye=Wt-st,tr=wt+ht,_e=wt-ht,Je=Te+ot,vt=Te-ot;$e[Ot]=tr+Je,$e[Ot+4]=tr-Je;var ce=.707106781*(vt+_e);$e[Ot+2]=_e+ce,$e[Ot+6]=_e-ce;var W=.382683433*((tr=Ye+Rt)-(vt=It+Xt)),Ee=.5411961*tr+W,Ge=1.306562965*vt+W,Be=.707106781*(Je=Rt+It),nt=Xt+Be,Mt=Xt-Be;$e[Ot+5]=Mt+Ee,$e[Ot+3]=Mt-Ee,$e[Ot+1]=nt+Ge,$e[Ot+7]=nt-Ge,Ot+=8}for(Ot=0,Dt=0;Dt<8;++Dt){ct=$e[Ot],jt=$e[Ot+8],At=$e[Ot+16],Wt=$e[Ot+24],st=$e[Ot+32],St=$e[Ot+40],zt=$e[Ot+48];var ut=ct+(bt=$e[Ot+56]),kt=ct-bt,X=jt+zt,te=jt-zt,je=At+St,ze=At-St,Lt=Wt+st,qt=Wt-st,Xe=ut+Lt,rr=ut-Lt,L=X+je,A=X-je;$e[Ot]=Xe+L,$e[Ot+32]=Xe-L;var K=.707106781*(A+rr);$e[Ot+16]=rr+K,$e[Ot+48]=rr-K;var ae=.382683433*((Xe=qt+ze)-(A=te+kt)),Pe=.5411961*Xe+ae,tt=1.306562965*A+ae,D=.707106781*(L=ze+te),xe=kt+D,ye=kt-D;$e[Ot+40]=ye+Pe,$e[Ot+24]=ye-Pe,$e[Ot+8]=xe+tt,$e[Ot+56]=xe-tt,Ot++}for(Dt=0;Dt<64;++Dt)Pt=$e[Dt]*pt[Dt],f[Dt]=Pt>0?Pt+.5|0:Pt-.5|0;return f}(E,q),Ue=0;Ue<64;++Ue)x[V[Ue]]=Me[Ue];var at=x[0]-oe;oe=x[0],at==0?ue(me[0]):(ue(me[m[Se=32767+at]]),ue(g[Se]));for(var Ve=63;Ve>0&&x[Ve]==0;)Ve--;if(Ve==0)return ue(Ce),oe;for(var Oe,le=1;le<=Ve;){for(var Ct=le;x[le]==0&&le<=Ve;)++le;var Et=le-Ct;if(Et>=16){Oe=Et>>4;for(var He=1;He<=Oe;++He)ue(Le);Et&=15}Se=32767+x[le],ue(Ne[(Et<<4)+m[Se]]),ue(g[Se]),le++}return Ve!=63&&ue(Ce),oe}function be(E){E=Math.min(Math.max(E,1),100),s!=E&&(function(q){for(var oe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var Ne=o((oe[me]*q+50)/100);Ne=Math.min(Math.max(Ne,1),255),l[V[me]]=Ne}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var Le=o((Se[Ce]*q+50)/100);Le=Math.min(Math.max(Le,1),255),c[V[Ce]]=Le}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,at=0;at<8;at++)for(var Ve=0;Ve<8;Ve++)u[Ue]=1/(l[V[Ue]]*Me[at]*Me[Ve]*8),d[Ue]=1/(c[V[Ue]]*Me[at]*Me[Ve]*8),Ue++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),s=E)}this.encode=function(E,q){q&&be(q),w=new Array,N=0,b=7,se(65496),se(65504),se(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),se(1),se(1),Y(0),Y(0),function(){se(65499),se(132),Y(0);for(var jt=0;jt<64;jt++)Y(l[jt]);Y(1);for(var At=0;At<64;At++)Y(c[At])}(),function(jt,At){se(65472),se(17),Y(8),se(At),se(jt),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(E.width,E.height),function(){se(65476),se(418),Y(0);for(var jt=0;jt<16;jt++)Y(T[jt+1]);for(var At=0;At<=11;At++)Y(R[At]);Y(16);for(var Wt=0;Wt<16;Wt++)Y(z[Wt+1]);for(var st=0;st<=161;st++)Y(I[st]);Y(1);for(var St=0;St<16;St++)Y(G[St+1]);for(var zt=0;zt<=11;zt++)Y(de[zt]);Y(17);for(var bt=0;bt<16;bt++)Y(M[bt+1]);for(var Dt=0;Dt<=161;Dt++)Y(U[Dt])}(),se(65498),se(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var oe=0,me=0,Ne=0;N=0,b=7,this.encode.displayName="_encode_";for(var Se,Ce,Le,Me,Ue,at,Ve,Oe,le,Ct=E.data,Et=E.width,He=E.height,$e=4*Et,pt=0;pt<He;){for(Se=0;Se<$e;){for(Ue=$e*pt+Se,Ve=-1,Oe=0,le=0;le<64;le++)at=Ue+(Oe=le>>3)*$e+(Ve=4*(7&le)),pt+Oe>=He&&(at-=$e*(pt+1+Oe-He)),Se+Ve>=$e&&(at-=Se+Ve-$e+4),Ce=Ct[at++],Le=Ct[at++],Me=Ct[at++],S[le]=(Z[Ce]+Z[Le+256|0]+Z[Me+512|0]>>16)-128,j[le]=(Z[Ce+768|0]+Z[Le+1024|0]+Z[Me+1280|0]>>16)-128,C[le]=(Z[Ce+1280|0]+Z[Le+1536|0]+Z[Me+1792|0]>>16)-128;oe=ke(S,u,oe,e,n),me=ke(j,d,me,r,i),Ne=ke(C,d,Ne,r,i),Se+=32}pt+=8}if(b>=0){var ct=[];ct[1]=b+1,ct[0]=(1<<b+1)-1,ue(ct)}return se(65497),new Uint8Array(w)},t=t||50,function(){for(var E=String.fromCharCode,q=0;q<256;q++)$[q]=E(q)}(),e=ve(T,R),r=ve(G,de),n=ve(z,I),i=ve(M,U),function(){for(var E=1,q=2,oe=1;oe<=15;oe++){for(var me=E;me<q;me++)m[32767+me]=oe,g[32767+me]=[],g[32767+me][1]=oe,g[32767+me][0]=me;for(var Ne=-(q-1);Ne<=-E;Ne++)m[32767+Ne]=oe,g[32767+Ne]=[],g[32767+Ne][1]=oe,g[32767+Ne][0]=q-1+Ne;E<<=1,q<<=1}}(),function(){for(var E=0;E<256;E++)Z[E]=19595*E,Z[E+256|0]=38470*E,Z[E+512|0]=7471*E+32768,Z[E+768|0]=-11059*E,Z[E+1024|0]=-21709*E,Z[E+1280|0]=32768*E+8421375,Z[E+1536|0]=-27439*E,Z[E+1792|0]=-5329*E}(),be(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ca(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ny(t){function e(R){if(!R)throw Error("assert :P")}function r(R,z,I){for(var G=0;4>G;G++)if(R[z+G]!=I.charCodeAt(G))return!0;return!1}function n(R,z,I,G,de){for(var M=0;M<de;M++)R[z+M]=I[G+M]}function i(R,z,I,G){for(var de=0;de<G;de++)R[z+de]=I}function s(R){return new Int32Array(R)}function o(R,z){for(var I=[],G=0;G<R;G++)I.push(new z);return I}function l(R,z){var I=[];return function G(de,M,U){for(var ve=U[M],ue=0;ue<ve&&(de.push(U.length>M+1?[]:new z),!(U.length<M+1));ue++)G(de[ue],M+1,U)}(I,0,R),I}var c=function(){var R=this;function z(h,p){for(var _=1<<p-1>>>0;h&_;)_>>>=1;return _?(h&_-1)+_:h}function I(h,p,_,k,O){e(!(k%_));do h[p+(k-=_)]=O;while(0<k)}function G(h,p,_,k,O){if(e(2328>=O),512>=O)var H=s(512);else if((H=s(O))==null)return 0;return function(J,ee,ne,fe,De,Qe){var ge,Re,We=ee,lt=1<<ne,Ke=s(16),dt=s(16);for(e(De!=0),e(fe!=null),e(J!=null),e(0<ne),Re=0;Re<De;++Re){if(15<fe[Re])return 0;++Ke[fe[Re]]}if(Ke[0]==De)return 0;for(dt[1]=0,ge=1;15>ge;++ge){if(Ke[ge]>1<<ge)return 0;dt[ge+1]=dt[ge]+Ke[ge]}for(Re=0;Re<De;++Re)ge=fe[Re],0<fe[Re]&&(Qe[dt[ge]++]=Re);if(dt[15]==1)return(fe=new de).g=0,fe.value=Qe[0],I(J,We,1,lt,fe),lt;var gt,Nt=-1,xt=lt-1,Zt=0,Gt=1,fr=1,Jt=1<<ne;for(Re=0,ge=1,De=2;ge<=ne;++ge,De<<=1){if(Gt+=fr<<=1,0>(fr-=Ke[ge]))return 0;for(;0<Ke[ge];--Ke[ge])(fe=new de).g=ge,fe.value=Qe[Re++],I(J,We+Zt,De,Jt,fe),Zt=z(Zt,ge)}for(ge=ne+1,De=2;15>=ge;++ge,De<<=1){if(Gt+=fr<<=1,0>(fr-=Ke[ge]))return 0;for(;0<Ke[ge];--Ke[ge]){if(fe=new de,(Zt&xt)!=Nt){for(We+=Jt,gt=1<<(Nt=ge)-ne;15>Nt&&!(0>=(gt-=Ke[Nt]));)++Nt,gt<<=1;lt+=Jt=1<<(gt=Nt-ne),J[ee+(Nt=Zt&xt)].g=gt+ne,J[ee+Nt].value=We-ee-Nt}fe.g=ge-ne,fe.value=Qe[Re++],I(J,We+(Zt>>ne),De,Jt,fe),Zt=z(Zt,ge)}}return Gt!=2*dt[15]-1?0:lt}(h,p,_,k,O,H)}function de(){this.value=this.g=0}function M(){this.value=this.g=0}function U(){this.G=o(5,de),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Na,M)}function ve(h,p,_,k){e(h!=null),e(p!=null),e(2147483648>k),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=p,h.pa=_,h.Jd=p,h.Yc=_+k,h.Zc=4<=k?_+k-4+1:_,Ce(h)}function ue(h,p){for(var _=0;0<p--;)_|=Me(h,128)<<p;return _}function Y(h,p){var _=ue(h,p);return Le(h)?-_:_}function se(h,p,_,k){var O,H=0;for(e(h!=null),e(p!=null),e(4294967288>k),h.Sb=k,h.Ra=0,h.u=0,h.h=0,4<k&&(k=4),O=0;O<k;++O)H+=p[_+O]<<8*O;h.Ra=H,h.bb=k,h.oa=p,h.pa=_}function ke(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<xs-8>>>0,++h.bb,h.u-=8;me(h)&&(h.h=1,h.u=0)}function be(h,p){if(e(0<=p),!h.h&&p<=Sc){var _=oe(h)&bs[p];return h.u+=p,ke(h),_}return h.h=1,h.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function oe(h){return h.Ra>>>(h.u&xs-1)>>>0}function me(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>xs}function Ne(h,p){h.u=p,h.h=me(h)}function Se(h){h.u>=an&&(e(h.u>=an),ke(h))}function Ce(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Le(h){return ue(h,1)}function Me(h,p){var _=h.Ca;0>h.b&&Ce(h);var k=h.b,O=_*p>>>8,H=(h.I>>>k>O)+0;for(H?(_-=O,h.I-=O+1<<k>>>0):_=O+1,k=_,O=0;256<=k;)O+=8,k>>=8;return k=7^O+Af[k],h.b-=k,h.Ca=(_<<k)-1,H}function Ue(h,p,_){h[p+0]=_>>24&255,h[p+1]=_>>16&255,h[p+2]=_>>8&255,h[p+3]=255&_}function at(h,p){return h[p+0]|h[p+1]<<8}function Ve(h,p){return at(h,p)|h[p+2]<<16}function Oe(h,p){return at(h,p)|at(h,p+2)<<16}function le(h,p){var _=1<<p;return e(h!=null),e(0<p),h.X=s(_),h.X==null?0:(h.Mb=32-p,h.Xa=p,1)}function Ct(h,p){e(h!=null),e(p!=null),e(h.Xa==p.Xa),n(p.X,0,h.X,0,1<<p.Xa)}function Et(){this.X=[],this.Xa=this.Mb=0}function He(h,p,_,k){e(_!=null),e(k!=null);var O=_[0],H=k[0];return O==0&&(O=(h*H+p/2)/p),H==0&&(H=(p*O+h/2)/h),0>=O||0>=H?0:(_[0]=O,k[0]=H,1)}function $e(h,p){return h+(1<<p)-1>>>p}function pt(h,p){return((4278255360&h)+(4278255360&p)>>>0&4278255360)+((16711935&h)+(16711935&p)>>>0&16711935)>>>0}function ct(h,p){R[p]=function(_,k,O,H,J,ee,ne){var fe;for(fe=0;fe<J;++fe){var De=R[h](ee[ne+fe-1],O,H+fe);ee[ne+fe]=pt(_[k+fe],De)}}}function jt(){this.ud=this.hd=this.jd=0}function At(h,p){return((4278124286&(h^p))>>>1)+(h&p)>>>0}function Wt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function st(h,p){return Wt(h+(h-p+.5>>1))}function St(h,p,_){return Math.abs(p-_)-Math.abs(h-_)}function zt(h,p,_,k,O,H,J){for(k=H[J-1],_=0;_<O;++_)H[J+_]=k=pt(h[p+_],k)}function bt(h,p,_,k,O){var H;for(H=0;H<_;++H){var J=h[p+H],ee=J>>8&255,ne=16711935&(ne=(ne=16711935&J)+((ee<<16)+ee));k[O+H]=(4278255360&J)+ne>>>0}}function Dt(h,p){p.jd=255&h,p.hd=h>>8&255,p.ud=h>>16&255}function Pt(h,p,_,k,O,H){var J;for(J=0;J<k;++J){var ee=p[_+J],ne=ee>>>8,fe=ee,De=255&(De=(De=ee>>>16)+((h.jd<<24>>24)*(ne<<24>>24)>>>5));fe=255&(fe=(fe+=(h.hd<<24>>24)*(ne<<24>>24)>>>5)+((h.ud<<24>>24)*(De<<24>>24)>>>5)),O[H+J]=(4278255360&ee)+(De<<16)+fe}}function Ot(h,p,_,k,O){R[p]=function(H,J,ee,ne,fe,De,Qe,ge,Re){for(ne=Qe;ne<ge;++ne)for(Qe=0;Qe<Re;++Qe)fe[De++]=O(ee[k(H[J++])])},R[h]=function(H,J,ee,ne,fe,De,Qe){var ge=8>>H.b,Re=H.Ea,We=H.K[0],lt=H.w;if(8>ge)for(H=(1<<H.b)-1,lt=(1<<ge)-1;J<ee;++J){var Ke,dt=0;for(Ke=0;Ke<Re;++Ke)Ke&H||(dt=k(ne[fe++])),De[Qe++]=O(We[dt&lt]),dt>>=ge}else R["VP8LMapColor"+_](ne,fe,We,lt,De,Qe,J,ee,Re)}}function wt(h,p,_,k,O){for(_=p+_;p<_;){var H=h[p++];k[O++]=H>>16&255,k[O++]=H>>8&255,k[O++]=255&H}}function Xt(h,p,_,k,O){for(_=p+_;p<_;){var H=h[p++];k[O++]=H>>16&255,k[O++]=H>>8&255,k[O++]=255&H,k[O++]=H>>24&255}}function Te(h,p,_,k,O){for(_=p+_;p<_;){var H=(J=h[p++])>>16&240|J>>12&15,J=240&J|J>>28&15;k[O++]=H,k[O++]=J}}function It(h,p,_,k,O){for(_=p+_;p<_;){var H=(J=h[p++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;k[O++]=H,k[O++]=J}}function ot(h,p,_,k,O){for(_=p+_;p<_;){var H=h[p++];k[O++]=255&H,k[O++]=H>>8&255,k[O++]=H>>16&255}}function Rt(h,p,_,k,O,H){if(H==0)for(_=p+_;p<_;)Ue(k,((H=h[p++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),O+=32;else n(k,O,h,p,_)}function ht(h,p){R[p][0]=R[h+"0"],R[p][1]=R[h+"1"],R[p][2]=R[h+"2"],R[p][3]=R[h+"3"],R[p][4]=R[h+"4"],R[p][5]=R[h+"5"],R[p][6]=R[h+"6"],R[p][7]=R[h+"7"],R[p][8]=R[h+"8"],R[p][9]=R[h+"9"],R[p][10]=R[h+"10"],R[p][11]=R[h+"11"],R[p][12]=R[h+"12"],R[p][13]=R[h+"13"],R[p][14]=R[h+"0"],R[p][15]=R[h+"0"]}function Ye(h){return h==Ef||h==Ff||h==Qu||h==Df}function tr(){this.eb=[],this.size=this.A=this.fb=0}function _e(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Je(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tr,this.f.kb=new _e,this.sd=null}function vt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ce(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function W(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Ee(h,p){var _=h.T,k=p.ba.f.RGBA,O=k.eb,H=k.fb+h.ka*k.A,J=Ji[p.ba.S],ee=h.y,ne=h.O,fe=h.f,De=h.N,Qe=h.ea,ge=h.W,Re=p.cc,We=p.dc,lt=p.Mc,Ke=p.Nc,dt=h.ka,gt=h.ka+h.T,Nt=h.U,xt=Nt+1>>1;for(dt==0?J(ee,ne,null,null,fe,De,Qe,ge,fe,De,Qe,ge,O,H,null,null,Nt):(J(p.ec,p.fc,ee,ne,Re,We,lt,Ke,fe,De,Qe,ge,O,H-k.A,O,H,Nt),++_);dt+2<gt;dt+=2)Re=fe,We=De,lt=Qe,Ke=ge,De+=h.Rc,ge+=h.Rc,H+=2*k.A,J(ee,(ne+=2*h.fa)-h.fa,ee,ne,Re,We,lt,Ke,fe,De,Qe,ge,O,H-k.A,O,H,Nt);return ne+=h.fa,h.j+gt<h.o?(n(p.ec,p.fc,ee,ne,Nt),n(p.cc,p.dc,fe,De,xt),n(p.Mc,p.Nc,Qe,ge,xt),_--):1&gt||J(ee,ne,null,null,fe,De,Qe,ge,fe,De,Qe,ge,O,H+k.A,null,null,Nt),_}function Ge(h,p,_){var k=h.F,O=[h.J];if(k!=null){var H=h.U,J=p.ba.S,ee=J==Ku||J==Qu;p=p.ba.f.RGBA;var ne=[0],fe=h.ka;ne[0]=h.T,h.Kb&&(fe==0?--ne[0]:(--fe,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(ne[0]=h.o-h.j-fe));var De=p.eb;fe=p.fb+fe*p.A,h=Qm(k,O[0],h.width,H,ne,De,fe+(ee?0:3),p.A),e(_==ne),h&&Ye(J)&&Lc(De,fe,ee,H,ne,p.A)}return 0}function Be(h){var p=h.ma,_=p.ba.S,k=11>_,O=_==Vu||_==Ju||_==Ku||_==kf||_==12||Ye(_);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!hi(p.Oa,h,O?11:12))return 0;if(O&&Ye(_)&&bc(),h.da)alert("todo:use_scaling");else{if(k){if(p.Ib=W,h.Kb){if(_=h.U+1>>1,p.memory=s(h.U+2*_),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+h.U,p.Mc=p.cc,p.Nc=p.dc+_,p.Ib=Ee,bc()}}else alert("todo:EmitYUV");O&&(p.Jb=Ge,k&&ho())}if(k&&!f1){for(h=0;256>h;++h)Cw[h]=89858*(h-128)+Zu>>Xu,Pw[h]=-22014*(h-128)+Zu,Aw[h]=-45773*(h-128),Lw[h]=113618*(h-128)+Zu>>Xu;for(h=Pc;h<Rf;++h)p=76283*(h-16)+Zu>>Xu,kw[h-Pc]=bn(p,255),Ew[h-Pc]=bn(p+8>>4,15);f1=1}return 1}function nt(h){var p=h.ma,_=h.U,k=h.T;return e(!(1&h.ka)),0>=_||0>=k?0:(_=p.Ib(h,p),p.Jb!=null&&p.Jb(h,p,_),p.Dc+=_,1)}function Mt(h){h.ma.memory=null}function ut(h,p,_,k){return be(h,8)!=47?0:(p[0]=be(h,14)+1,_[0]=be(h,14)+1,k[0]=be(h,1),be(h,3)!=0?0:!h.h)}function kt(h,p){if(4>h)return h+1;var _=h-2>>1;return(2+(1&h)<<_)+be(p,_)+1}function X(h,p){return 120<p?p-120:1<=(_=((_=hw[p-1])>>4)*h+(8-(15&_)))?_:1;var _}function te(h,p,_){var k=oe(_),O=h[p+=255&k].g-8;return 0<O&&(Ne(_,_.u+8),k=oe(_),p+=h[p].value,p+=k&(1<<O)-1),Ne(_,_.u+h[p].g),h[p].value}function je(h,p,_){return _.g+=h.g,_.value+=h.value<<p>>>0,e(8>=_.g),h.g}function ze(h,p,_){var k=h.xc;return e((p=k==0?0:h.vc[h.md*(_>>k)+(p>>k)])<h.Wb),h.Ya[p]}function Lt(h,p,_,k){var O=h.ab,H=h.c*p,J=h.C;p=J+p;var ee=_,ne=k;for(k=h.Ta,_=h.Ua;0<O--;){var fe=h.gc[O],De=J,Qe=p,ge=ee,Re=ne,We=(ne=k,ee=_,fe.Ea);switch(e(De<Qe),e(Qe<=fe.nc),fe.hc){case 2:el(ge,Re,(Qe-De)*We,ne,ee);break;case 0:var lt=De,Ke=Qe,dt=ne,gt=ee,Nt=(Jt=fe).Ea;lt==0&&(Ca(ge,Re,null,null,1,dt,gt),zt(ge,Re+1,0,0,Nt-1,dt,gt+1),Re+=Nt,gt+=Nt,++lt);for(var xt=1<<Jt.b,Zt=xt-1,Gt=$e(Nt,Jt.b),fr=Jt.K,Jt=Jt.w+(lt>>Jt.b)*Gt;lt<Ke;){var xr=fr,xn=Jt,gr=1;for(La(ge,Re,dt,gt-Nt,1,dt,gt);gr<Nt;){var Kt=(gr&~Zt)+xt;Kt>Nt&&(Kt=Nt),(0,po[xr[xn++]>>8&15])(ge,Re+ +gr,dt,gt+gr-Nt,Kt-gr,dt,gt+gr),gr=Kt}Re+=Nt,gt+=Nt,++lt&Zt||(Jt+=Gt)}Qe!=fe.nc&&n(ne,ee-We,ne,ee+(Qe-De-1)*We,We);break;case 1:for(We=ge,Ke=Re,Nt=(ge=fe.Ea)-(gt=ge&~(dt=(Re=1<<fe.b)-1)),lt=$e(ge,fe.b),xt=fe.K,fe=fe.w+(De>>fe.b)*lt;De<Qe;){for(Zt=xt,Gt=fe,fr=new jt,Jt=Ke+gt,xr=Ke+ge;Ke<Jt;)Dt(Zt[Gt++],fr),Ga(fr,We,Ke,Re,ne,ee),Ke+=Re,ee+=Re;Ke<xr&&(Dt(Zt[Gt++],fr),Ga(fr,We,Ke,Nt,ne,ee),Ke+=Nt,ee+=Nt),++De&dt||(fe+=lt)}break;case 3:if(ge==ne&&Re==ee&&0<fe.b){for(Ke=ne,ge=We=ee+(Qe-De)*We-(gt=(Qe-De)*$e(fe.Ea,fe.b)),Re=ne,dt=ee,lt=[],gt=(Nt=gt)-1;0<=gt;--gt)lt[gt]=Re[dt+gt];for(gt=Nt-1;0<=gt;--gt)Ke[ge+gt]=lt[gt];jc(fe,De,Qe,ne,We,ne,ee)}else jc(fe,De,Qe,ge,Re,ne,ee)}ee=k,ne=_}ne!=_&&n(k,_,ee,ne,H)}function qt(h,p){var _=h.V,k=h.Ba+h.c*h.C,O=p-h.C;if(e(p<=h.l.o),e(16>=O),0<O){var H=h.l,J=h.Ta,ee=h.Ua,ne=H.width;if(Lt(h,O,_,k),O=ee=[ee],e((_=h.C)<(k=p)),e(H.v<H.va),k>H.o&&(k=H.o),_<H.j){var fe=H.j-_;_=H.j,O[0]+=fe*ne}if(_>=k?_=0:(O[0]+=4*H.v,H.ka=_-H.j,H.U=H.va-H.v,H.T=k-_,_=1),_){if(ee=ee[0],11>(_=h.ca).S){var De=_.f.RGBA,Qe=(k=_.S,O=H.U,H=H.T,fe=De.eb,De.A),ge=H;for(De=De.fb+h.Ma*De.A;0<ge--;){var Re=J,We=ee,lt=O,Ke=fe,dt=De;switch(k){case Yu:Nc(Re,We,lt,Ke,dt);break;case Vu:Li(Re,We,lt,Ke,dt);break;case Ef:Li(Re,We,lt,Ke,dt),Lc(Ke,dt,0,lt,1,0);break;case i1:Rr(Re,We,lt,Ke,dt);break;case Ju:Rt(Re,We,lt,Ke,dt,1);break;case Ff:Rt(Re,We,lt,Ke,dt,1),Lc(Ke,dt,0,lt,1,0);break;case Ku:Rt(Re,We,lt,Ke,dt,0);break;case Qu:Rt(Re,We,lt,Ke,dt,0),Lc(Ke,dt,1,lt,1,0);break;case kf:Aa(Re,We,lt,Ke,dt);break;case Df:Aa(Re,We,lt,Ke,dt),Km(Ke,dt,lt,1,0);break;case a1:Ir(Re,We,lt,Ke,dt);break;default:e(0)}ee+=ne,De+=Qe}h.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=_.height)}}h.C=p,e(h.C<=h.i)}function Xe(h){var p;if(0<h.ua)return 0;for(p=0;p<h.Wb;++p){var _=h.Ya[p].G,k=h.Ya[p].H;if(0<_[1][k[1]+0].g||0<_[2][k[2]+0].g||0<_[3][k[3]+0].g)return 0}return 1}function rr(h,p,_,k,O,H){if(h.Z!=0){var J=h.qd,ee=h.rd;for(e(ws[h.Z]!=null);p<_;++p)ws[h.Z](J,ee,k,O,k,O,H),J=k,ee=O,O+=H;h.qd=J,h.rd=ee}}function L(h,p){var _=h.l.ma,k=_.Z==0||_.Z==1?h.l.j:h.C;if(k=h.C<k?k:h.C,e(p<=h.l.o),p>k){var O=h.l.width,H=_.ca,J=_.tb+O*k,ee=h.V,ne=h.Ba+h.c*k,fe=h.gc;e(h.ab==1),e(fe[0].hc==3),rl(fe[0],k,p,ee,ne,H,J),rr(_,k,p,H,J,O)}h.C=h.Ma=p}function A(h,p,_,k,O,H,J){var ee=h.$/k,ne=h.$%k,fe=h.m,De=h.s,Qe=_+h.$,ge=Qe;O=_+k*O;var Re=_+k*H,We=280+De.ua,lt=h.Pb?ee:16777216,Ke=0<De.ua?De.Wa:null,dt=De.wc,gt=Qe<Re?ze(De,ne,ee):null;e(h.C<H),e(Re<=O);var Nt=!1;e:for(;;){for(;Nt||Qe<Re;){var xt=0;if(ee>=lt){var Zt=Qe-_;e((lt=h).Pb),lt.wd=lt.m,lt.xd=Zt,0<lt.s.ua&&Ct(lt.s.Wa,lt.s.vb),lt=ee+gw}if(ne&dt||(gt=ze(De,ne,ee)),e(gt!=null),gt.Qb&&(p[Qe]=gt.qb,Nt=!0),!Nt)if(Se(fe),gt.jc){xt=fe,Zt=p;var Gt=Qe,fr=gt.pd[oe(xt)&Na-1];e(gt.jc),256>fr.g?(Ne(xt,xt.u+fr.g),Zt[Gt]=fr.value,xt=0):(Ne(xt,xt.u+fr.g-256),e(256<=fr.value),xt=fr.value),xt==0&&(Nt=!0)}else xt=te(gt.G[0],gt.H[0],fe);if(fe.h)break;if(Nt||256>xt){if(!Nt)if(gt.nd)p[Qe]=(gt.qb|xt<<8)>>>0;else{if(Se(fe),Nt=te(gt.G[1],gt.H[1],fe),Se(fe),Zt=te(gt.G[2],gt.H[2],fe),Gt=te(gt.G[3],gt.H[3],fe),fe.h)break;p[Qe]=(Gt<<24|Nt<<16|xt<<8|Zt)>>>0}if(Nt=!1,++Qe,++ne>=k&&(ne=0,++ee,J!=null&&ee<=H&&!(ee%16)&&J(h,ee),Ke!=null))for(;ge<Qe;)xt=p[ge++],Ke.X[(506832829*xt&4294967295)>>>Ke.Mb]=xt}else if(280>xt){if(xt=kt(xt-256,fe),Zt=te(gt.G[4],gt.H[4],fe),Se(fe),Zt=X(k,Zt=kt(Zt,fe)),fe.h)break;if(Qe-_<Zt||O-Qe<xt)break e;for(Gt=0;Gt<xt;++Gt)p[Qe+Gt]=p[Qe+Gt-Zt];for(Qe+=xt,ne+=xt;ne>=k;)ne-=k,++ee,J!=null&&ee<=H&&!(ee%16)&&J(h,ee);if(e(Qe<=O),ne&dt&&(gt=ze(De,ne,ee)),Ke!=null)for(;ge<Qe;)xt=p[ge++],Ke.X[(506832829*xt&4294967295)>>>Ke.Mb]=xt}else{if(!(xt<We))break e;for(Nt=xt-280,e(Ke!=null);ge<Qe;)xt=p[ge++],Ke.X[(506832829*xt&4294967295)>>>Ke.Mb]=xt;xt=Qe,e(!(Nt>>>(Zt=Ke).Xa)),p[xt]=Zt.X[Nt],Nt=!0}Nt||e(fe.h==me(fe))}if(h.Pb&&fe.h&&Qe<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ct(h.s.vb,h.s.Wa);else{if(fe.h)break e;J!=null&&J(h,ee>H?H:ee),h.a=0,h.$=Qe-_}return 1}return h.a=3,0}function K(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var p=h.Wa;p!=null&&(p.X=null),h.vb=null,e(h!=null)}function ae(){var h=new Yr;return h==null?null:(h.a=0,h.xb=l1,ht("Predictor","VP8LPredictors"),ht("Predictor","VP8LPredictors_C"),ht("PredictorAdd","VP8LPredictorsAdd"),ht("PredictorAdd","VP8LPredictorsAdd_C"),el=bt,Ga=Pt,Nc=wt,Li=Xt,Aa=Te,Ir=It,Rr=ot,R.VP8LMapColor32b=tl,R.VP8LMapColor8b=go,h)}function Pe(h,p,_,k,O){var H=1,J=[h],ee=[p],ne=k.m,fe=k.s,De=null,Qe=0;e:for(;;){if(_)for(;H&&be(ne,1);){var ge=J,Re=ee,We=k,lt=1,Ke=We.m,dt=We.gc[We.ab],gt=be(Ke,2);if(We.Oc&1<<gt)H=0;else{switch(We.Oc|=1<<gt,dt.hc=gt,dt.Ea=ge[0],dt.nc=Re[0],dt.K=[null],++We.ab,e(4>=We.ab),gt){case 0:case 1:dt.b=be(Ke,3)+2,lt=Pe($e(dt.Ea,dt.b),$e(dt.nc,dt.b),0,We,dt.K),dt.K=dt.K[0];break;case 3:var Nt,xt=be(Ke,8)+1,Zt=16<xt?0:4<xt?1:2<xt?2:3;if(ge[0]=$e(dt.Ea,Zt),dt.b=Zt,Nt=lt=Pe(xt,1,0,We,dt.K)){var Gt,fr=xt,Jt=dt,xr=1<<(8>>Jt.b),xn=s(xr);if(xn==null)Nt=0;else{var gr=Jt.K[0],Kt=Jt.w;for(xn[0]=Jt.K[0][0],Gt=1;Gt<1*fr;++Gt)xn[Gt]=pt(gr[Kt+Gt],xn[Gt-1]);for(;Gt<4*xr;++Gt)xn[Gt]=0;Jt.K[0]=null,Jt.K[0]=xn,Nt=1}}lt=Nt;break;case 2:break;default:e(0)}H=lt}}if(J=J[0],ee=ee[0],H&&be(ne,1)&&!(H=1<=(Qe=be(ne,4))&&11>=Qe)){k.a=3;break e}var Ut;if(Ut=H)t:{var ln,cr,_r,qr=k,On=J,ni=ee,Xr=Qe,zn=_,ii=qr.m,_n=qr.s,wr=[null],Cr=1,Zr=0,Lr=fw[Xr];r:for(;;){if(zn&&be(ii,1)){var Bn=be(ii,3)+2,sa=$e(On,Bn),cn=$e(ni,Bn),gi=sa*cn;if(!Pe(sa,cn,0,qr,wr))break r;for(wr=wr[0],_n.xc=Bn,ln=0;ln<gi;++ln){var Dr=wr[ln]>>8&65535;wr[ln]=Dr,Dr>=Cr&&(Cr=Dr+1)}}if(ii.h)break r;for(cr=0;5>cr;++cr){var wn=s1[cr];!cr&&0<Xr&&(wn+=1<<Xr),Zr<wn&&(Zr=wn)}var Pi=o(Cr*Lr,de),ai=Cr,ki=o(ai,U);if(ki==null)var Ei=null;else e(65536>=ai),Ei=ki;var pi=s(Zr);if(Ei==null||pi==null||Pi==null){qr.a=1;break r}var Fi=Pi;for(ln=_r=0;ln<Cr;++ln){var Or=Ei[ln],Di=Or.G,oa=Or.H,mo=0,Ja=1,Mn=0;for(cr=0;5>cr;++cr){wn=s1[cr],Di[cr]=Fi,oa[cr]=_r,!cr&&0<Xr&&(wn+=1<<Xr);i:{var td,Of=wn,rd=qr,kc=pi,Tw=Fi,Iw=_r,Bf=0,Ss=rd.m,Rw=be(Ss,1);if(i(kc,0,0,Of),Rw){var Ow=be(Ss,1)+1,Bw=be(Ss,1),m1=be(Ss,Bw==0?1:8);kc[m1]=1,Ow==2&&(kc[m1=be(Ss,8)]=1);var nd=1}else{var v1=s(19),y1=be(Ss,4)+4;if(19<y1){rd.a=3;var id=0;break i}for(td=0;td<y1;++td)v1[dw[td]]=be(Ss,3);var Mf=void 0,Ec=void 0,b1=rd,Mw=v1,ad=Of,x1=kc,Uf=0,js=b1.m,_1=8,w1=o(128,de);n:for(;G(w1,0,7,Mw,19);){if(be(js,1)){var Uw=2+2*be(js,3);if((Mf=2+be(js,Uw))>ad)break n}else Mf=ad;for(Ec=0;Ec<ad&&Mf--;){Se(js);var S1=w1[0+(127&oe(js))];Ne(js,js.u+S1.g);var il=S1.value;if(16>il)x1[Ec++]=il,il!=0&&(_1=il);else{var qw=il==16,j1=il-16,$w=cw[j1],N1=be(js,lw[j1])+$w;if(Ec+N1>ad)break n;for(var zw=qw?_1:0;0<N1--;)x1[Ec++]=zw}}Uf=1;break n}Uf||(b1.a=3),nd=Uf}(nd=nd&&!Ss.h)&&(Bf=G(Tw,Iw,8,kc,Of)),nd&&Bf!=0?id=Bf:(rd.a=3,id=0)}if(id==0)break r;if(Ja&&uw[cr]==1&&(Ja=Fi[_r].g==0),mo+=Fi[_r].g,_r+=id,3>=cr){var Fc,qf=pi[0];for(Fc=1;Fc<wn;++Fc)pi[Fc]>qf&&(qf=pi[Fc]);Mn+=qf}}if(Or.nd=Ja,Or.Qb=0,Ja&&(Or.qb=(Di[3][oa[3]+0].value<<24|Di[1][oa[1]+0].value<<16|Di[2][oa[2]+0].value)>>>0,mo==0&&256>Di[0][oa[0]+0].value&&(Or.Qb=1,Or.qb+=Di[0][oa[0]+0].value<<8)),Or.jc=!Or.Qb&&6>Mn,Or.jc){var sd,Ka=Or;for(sd=0;sd<Na;++sd){var Ns=sd,Cs=Ka.pd[Ns],od=Ka.G[0][Ka.H[0]+Ns];256<=od.value?(Cs.g=od.g+256,Cs.value=od.value):(Cs.g=0,Cs.value=0,Ns>>=je(od,8,Cs),Ns>>=je(Ka.G[1][Ka.H[1]+Ns],16,Cs),Ns>>=je(Ka.G[2][Ka.H[2]+Ns],0,Cs),je(Ka.G[3][Ka.H[3]+Ns],24,Cs))}}}_n.vc=wr,_n.Wb=Cr,_n.Ya=Ei,_n.yc=Pi,Ut=1;break t}Ut=0}if(!(H=Ut)){k.a=3;break e}if(0<Qe){if(fe.ua=1<<Qe,!le(fe.Wa,Qe)){k.a=1,H=0;break e}}else fe.ua=0;var $f=k,C1=J,Ww=ee,zf=$f.s,Wf=zf.xc;if($f.c=C1,$f.i=Ww,zf.md=$e(C1,Wf),zf.wc=Wf==0?-1:(1<<Wf)-1,_){k.xb=_w;break e}if((De=s(J*ee))==null){k.a=1,H=0;break e}H=(H=A(k,De,0,J,ee,ee,null))&&!ne.h;break e}return H?(O!=null?O[0]=De:(e(De==null),e(_)),k.$=0,_||K(fe)):K(fe),H}function tt(h,p){var _=h.c*h.i,k=_+p+16*p;return e(h.c<=p),h.V=s(k),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+_+p,1)}function D(h,p){var _=h.C,k=p-_,O=h.V,H=h.Ba+h.c*_;for(e(p<=h.l.o);0<k;){var J=16<k?16:k,ee=h.l.ma,ne=h.l.width,fe=ne*J,De=ee.ca,Qe=ee.tb+ne*_,ge=h.Ta,Re=h.Ua;Lt(h,J,O,H),Xm(ge,Re,De,Qe,fe),rr(ee,_,_+J,De,Qe,ne),k-=J,O+=J*h.c,_+=J}e(_==p),h.C=h.Ma=p}function xe(){this.ub=this.yd=this.td=this.Rb=0}function ye(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function F(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ie(){this.Yb=function(){var h=[];return function p(_,k,O){for(var H=O[k],J=0;J<H&&(_.push(O.length>k+1?[]:0),!(O.length<k+1));J++)p(_[J],k+1,O)}(h,0,[3,11]),h}()}function P(){this.jb=s(3),this.Wc=l([4,8],ie),this.Xc=l([4,17],ie)}function Q(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function he(){this.ld=this.La=this.dd=this.tc=0}function we(){this.Na=this.la=0}function Ae(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ie(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rt(){this.uc=this.M=this.Nb=0,this.wa=Array(new he),this.Y=0,this.ya=Array(new Ie),this.aa=0,this.l=new Ze}function yt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Bt(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new xe,this.Kc=new ye,this.ed=new Q,this.Qa=new F,this.Ic=this.$c=this.Aa=0,this.D=new rt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,E),this.ia=0,this.pb=o(4,Ae),this.Pa=new P,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new yt),this.Hd=0,this.rb=Array(new we),this.sb=0,this.wa=Array(new he),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ie),this.L=this.aa=0,this.gd=l([4,2],he),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ze(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function mt(){var h=new Bt;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Ac||(Ac=nr)),h}function it(h,p,_){return h.a==0&&(h.a=p,h.sc=_,h.cb=0),0}function $t(h,p,_){return 3<=_&&h[p+0]==157&&h[p+1]==1&&h[p+2]==42}function er(h,p){if(h==null)return 0;if(h.a=0,h.sc="OK",p==null)return it(h,2,"null VP8Io passed to VP8GetHeaders()");var _=p.data,k=p.w,O=p.ha;if(4>O)return it(h,7,"Truncated header.");var H=_[k+0]|_[k+1]<<8|_[k+2]<<16,J=h.Od;if(J.Rb=!(1&H),J.td=H>>1&7,J.yd=H>>4&1,J.ub=H>>5,3<J.td)return it(h,3,"Incorrect keyframe parameters.");if(!J.yd)return it(h,4,"Frame not displayable.");k+=3,O-=3;var ee=h.Kc;if(J.Rb){if(7>O)return it(h,7,"cannot parse picture header");if(!$t(_,k,O))return it(h,3,"Bad code word");ee.c=16383&(_[k+4]<<8|_[k+3]),ee.Td=_[k+4]>>6,ee.i=16383&(_[k+6]<<8|_[k+5]),ee.Ud=_[k+6]>>6,k+=7,O-=7,h.za=ee.c+15>>4,h.Ub=ee.i+15>>4,p.width=ee.c,p.height=ee.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i((H=h.Pa).jb,0,255,H.jb.length),e((H=h.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,i(H.Zb,0,0,H.Zb.length),i(H.Lb,0,0,H.Lb)}if(J.ub>O)return it(h,7,"bad partition length");ve(H=h.m,_,k,J.ub),k+=J.ub,O-=J.ub,J.Rb&&(ee.Ld=Le(H),ee.Kd=Le(H)),ee=h.Qa;var ne,fe=h.Pa;if(e(H!=null),e(ee!=null),ee.Cb=Le(H),ee.Cb){if(ee.Bb=Le(H),Le(H)){for(ee.Fb=Le(H),ne=0;4>ne;++ne)ee.Zb[ne]=Le(H)?Y(H,7):0;for(ne=0;4>ne;++ne)ee.Lb[ne]=Le(H)?Y(H,6):0}if(ee.Bb)for(ne=0;3>ne;++ne)fe.jb[ne]=Le(H)?ue(H,8):255}else ee.Bb=0;if(H.Ka)return it(h,3,"cannot parse segment header");if((ee=h.ed).zd=Le(H),ee.Tb=ue(H,6),ee.wb=ue(H,3),ee.Pc=Le(H),ee.Pc&&Le(H)){for(fe=0;4>fe;++fe)Le(H)&&(ee.vd[fe]=Y(H,6));for(fe=0;4>fe;++fe)Le(H)&&(ee.od[fe]=Y(H,6))}if(h.L=ee.Tb==0?0:ee.zd?1:2,H.Ka)return it(h,3,"cannot parse filter header");var De=O;if(O=ne=k,k=ne+De,ee=De,h.Xb=(1<<ue(h.m,2))-1,De<3*(fe=h.Xb))_=7;else{for(ne+=3*fe,ee-=3*fe,De=0;De<fe;++De){var Qe=_[O+0]|_[O+1]<<8|_[O+2]<<16;Qe>ee&&(Qe=ee),ve(h.Jc[+De],_,ne,Qe),ne+=Qe,ee-=Qe,O+=3}ve(h.Jc[+fe],_,ne,ee),_=ne<k?0:5}if(_!=0)return it(h,_,"cannot parse partitions");for(_=ue(ne=h.m,7),O=Le(ne)?Y(ne,4):0,k=Le(ne)?Y(ne,4):0,ee=Le(ne)?Y(ne,4):0,fe=Le(ne)?Y(ne,4):0,ne=Le(ne)?Y(ne,4):0,De=h.Qa,Qe=0;4>Qe;++Qe){if(De.Cb){var ge=De.Zb[Qe];De.Fb||(ge+=_)}else{if(0<Qe){h.pb[Qe]=h.pb[0];continue}ge=_}var Re=h.pb[Qe];Re.Sc[0]=Tf[bn(ge+O,127)],Re.Sc[1]=If[bn(ge+0,127)],Re.Eb[0]=2*Tf[bn(ge+k,127)],Re.Eb[1]=101581*If[bn(ge+ee,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=Tf[bn(ge+fe,117)],Re.Qc[1]=If[bn(ge+ne,127)],Re.lc=ge+ne}if(!J.Rb)return it(h,4,"Not a key frame.");for(Le(H),J=h.Pa,_=0;4>_;++_){for(O=0;8>O;++O)for(k=0;3>k;++k)for(ee=0;11>ee;++ee)fe=Me(H,bw[_][O][k][ee])?ue(H,8):vw[_][O][k][ee],J.Wc[_][O].Yb[k][ee]=fe;for(O=0;17>O;++O)J.Xc[_][O]=J.Wc[_][xw[O]]}return h.kc=Le(H),h.kc&&(h.Bd=ue(H,8)),h.cb=1}function nr(h,p,_,k,O,H,J){var ee=p[O].Yb[_];for(_=0;16>O;++O){if(!Me(h,ee[_+0]))return O;for(;!Me(h,ee[_+1]);)if(ee=p[++O].Yb[0],_=0,O==16)return 16;var ne=p[O+1].Yb;if(Me(h,ee[_+2])){var fe=h,De=0;if(Me(fe,(ge=ee)[(Qe=_)+3]))if(Me(fe,ge[Qe+6])){for(ee=0,Qe=2*(De=Me(fe,ge[Qe+8]))+(ge=Me(fe,ge[Qe+9+De])),De=0,ge=pw[Qe];ge[ee];++ee)De+=De+Me(fe,ge[ee]);De+=3+(8<<Qe)}else Me(fe,ge[Qe+7])?(De=7+2*Me(fe,165),De+=Me(fe,145)):De=5+Me(fe,159);else De=Me(fe,ge[Qe+4])?3+Me(fe,ge[Qe+5]):2;ee=ne[2]}else De=1,ee=ne[1];ne=J+mw[O],0>(fe=h).b&&Ce(fe);var Qe,ge=fe.b,Re=(Qe=fe.Ca>>1)-(fe.I>>ge)>>31;--fe.b,fe.Ca+=Re,fe.Ca|=1,fe.I-=(Qe+1&Re)<<ge,H[ne]=((De^Re)-Re)*k[(0<O)+0]}return 16}function mr(h){var p=h.rb[h.sb-1];p.la=0,p.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function sr(h,p,_,k,O){O=h[p+_+32*k]+(O>>3),h[p+_+32*k]=-256&O?0>O?0:255:O}function nn(h,p,_,k,O,H){sr(h,p,0,_,k+O),sr(h,p,1,_,k+H),sr(h,p,2,_,k-H),sr(h,p,3,_,k-O)}function jr(h){return(20091*h>>16)+h}function hr(h,p,_,k){var O,H=0,J=s(16);for(O=0;4>O;++O){var ee=h[p+0]+h[p+8],ne=h[p+0]-h[p+8],fe=(35468*h[p+4]>>16)-jr(h[p+12]),De=jr(h[p+4])+(35468*h[p+12]>>16);J[H+0]=ee+De,J[H+1]=ne+fe,J[H+2]=ne-fe,J[H+3]=ee-De,H+=4,p++}for(O=H=0;4>O;++O)ee=(h=J[H+0]+4)+J[H+8],ne=h-J[H+8],fe=(35468*J[H+4]>>16)-jr(J[H+12]),sr(_,k,0,0,ee+(De=jr(J[H+4])+(35468*J[H+12]>>16))),sr(_,k,1,0,ne+fe),sr(_,k,2,0,ne-fe),sr(_,k,3,0,ee-De),H++,k+=32}function wa(h,p,_,k){var O=h[p+0]+4,H=35468*h[p+4]>>16,J=jr(h[p+4]),ee=35468*h[p+1]>>16;nn(_,k,0,O+J,h=jr(h[p+1]),ee),nn(_,k,1,O+H,h,ee),nn(_,k,2,O-H,h,ee),nn(_,k,3,O-J,h,ee)}function na(h,p,_,k,O){hr(h,p,_,k),O&&hr(h,p+16,_,k+4)}function Wo(h,p,_,k){on(h,p+0,_,k,1),on(h,p+32,_,k+128,1)}function Ni(h,p,_,k){var O;for(h=h[p+0]+4,O=0;4>O;++O)for(p=0;4>p;++p)sr(_,k,p,O,h)}function io(h,p,_,k){h[p+0]&&Pa(h,p+0,_,k),h[p+16]&&Pa(h,p+16,_,k+4),h[p+32]&&Pa(h,p+32,_,k+128),h[p+48]&&Pa(h,p+48,_,k+128+4)}function Ho(h,p,_,k){var O,H=s(16);for(O=0;4>O;++O){var J=h[p+0+O]+h[p+12+O],ee=h[p+4+O]+h[p+8+O],ne=h[p+4+O]-h[p+8+O],fe=h[p+0+O]-h[p+12+O];H[0+O]=J+ee,H[8+O]=J-ee,H[4+O]=fe+ne,H[12+O]=fe-ne}for(O=0;4>O;++O)J=(h=H[0+4*O]+3)+H[3+4*O],ee=H[1+4*O]+H[2+4*O],ne=H[1+4*O]-H[2+4*O],fe=h-H[3+4*O],_[k+0]=J+ee>>3,_[k+16]=fe+ne>>3,_[k+32]=J-ee>>3,_[k+48]=fe-ne>>3,k+=64}function Sa(h,p,_){var k,O=p-32,H=Ai,J=255-h[O-1];for(k=0;k<_;++k){var ee,ne=H,fe=J+h[p-1];for(ee=0;ee<_;++ee)h[p+ee]=ne[fe+h[O+ee]];p+=32}}function cc(h,p){Sa(h,p,4)}function mf(h,p){Sa(h,p,8)}function vf(h,p){Sa(h,p,16)}function yf(h,p){var _;for(_=0;16>_;++_)n(h,p+32*_,h,p-32,16)}function uc(h,p){var _;for(_=16;0<_;--_)i(h,p,h[p-1],16),p+=32}function ao(h,p,_){var k;for(k=0;16>k;++k)i(p,_+32*k,h,16)}function ps(h,p){var _,k=16;for(_=0;16>_;++_)k+=h[p-1+32*_]+h[p+_-32];ao(k>>5,h,p)}function bf(h,p){var _,k=8;for(_=0;16>_;++_)k+=h[p-1+32*_];ao(k>>4,h,p)}function so(h,p){var _,k=8;for(_=0;16>_;++_)k+=h[p+_-32];ao(k>>4,h,p)}function dc(h,p){ao(128,h,p)}function or(h,p,_){return h+2*p+_+2>>2}function xf(h,p){var _,k=p-32;for(k=new Uint8Array([or(h[k-1],h[k+0],h[k+1]),or(h[k+0],h[k+1],h[k+2]),or(h[k+1],h[k+2],h[k+3]),or(h[k+2],h[k+3],h[k+4])]),_=0;4>_;++_)n(h,p+32*_,k,0,k.length)}function _f(h,p){var _=h[p-1],k=h[p-1+32],O=h[p-1+64],H=h[p-1+96];Ue(h,p+0,16843009*or(h[p-1-32],_,k)),Ue(h,p+32,16843009*or(_,k,O)),Ue(h,p+64,16843009*or(k,O,H)),Ue(h,p+96,16843009*or(O,H,H))}function wf(h,p){var _,k=4;for(_=0;4>_;++_)k+=h[p+_-32]+h[p-1+32*_];for(k>>=3,_=0;4>_;++_)i(h,p+32*_,k,4)}function Sf(h,p){var _=h[p-1+0],k=h[p-1+32],O=h[p-1+64],H=h[p-1-32],J=h[p+0-32],ee=h[p+1-32],ne=h[p+2-32],fe=h[p+3-32];h[p+0+96]=or(k,O,h[p-1+96]),h[p+1+96]=h[p+0+64]=or(_,k,O),h[p+2+96]=h[p+1+64]=h[p+0+32]=or(H,_,k),h[p+3+96]=h[p+2+64]=h[p+1+32]=h[p+0+0]=or(J,H,_),h[p+3+64]=h[p+2+32]=h[p+1+0]=or(ee,J,H),h[p+3+32]=h[p+2+0]=or(ne,ee,J),h[p+3+0]=or(fe,ne,ee)}function qa(h,p){var _=h[p+1-32],k=h[p+2-32],O=h[p+3-32],H=h[p+4-32],J=h[p+5-32],ee=h[p+6-32],ne=h[p+7-32];h[p+0+0]=or(h[p+0-32],_,k),h[p+1+0]=h[p+0+32]=or(_,k,O),h[p+2+0]=h[p+1+32]=h[p+0+64]=or(k,O,H),h[p+3+0]=h[p+2+32]=h[p+1+64]=h[p+0+96]=or(O,H,J),h[p+3+32]=h[p+2+64]=h[p+1+96]=or(H,J,ee),h[p+3+64]=h[p+2+96]=or(J,ee,ne),h[p+3+96]=or(ee,ne,ne)}function $a(h,p){var _=h[p-1+0],k=h[p-1+32],O=h[p-1+64],H=h[p-1-32],J=h[p+0-32],ee=h[p+1-32],ne=h[p+2-32],fe=h[p+3-32];h[p+0+0]=h[p+1+64]=H+J+1>>1,h[p+1+0]=h[p+2+64]=J+ee+1>>1,h[p+2+0]=h[p+3+64]=ee+ne+1>>1,h[p+3+0]=ne+fe+1>>1,h[p+0+96]=or(O,k,_),h[p+0+64]=or(k,_,H),h[p+0+32]=h[p+1+96]=or(_,H,J),h[p+1+32]=h[p+2+96]=or(H,J,ee),h[p+2+32]=h[p+3+96]=or(J,ee,ne),h[p+3+32]=or(ee,ne,fe)}function jf(h,p){var _=h[p+0-32],k=h[p+1-32],O=h[p+2-32],H=h[p+3-32],J=h[p+4-32],ee=h[p+5-32],ne=h[p+6-32],fe=h[p+7-32];h[p+0+0]=_+k+1>>1,h[p+1+0]=h[p+0+64]=k+O+1>>1,h[p+2+0]=h[p+1+64]=O+H+1>>1,h[p+3+0]=h[p+2+64]=H+J+1>>1,h[p+0+32]=or(_,k,O),h[p+1+32]=h[p+0+96]=or(k,O,H),h[p+2+32]=h[p+1+96]=or(O,H,J),h[p+3+32]=h[p+2+96]=or(H,J,ee),h[p+3+64]=or(J,ee,ne),h[p+3+96]=or(ee,ne,fe)}function Nf(h,p){var _=h[p-1+0],k=h[p-1+32],O=h[p-1+64],H=h[p-1+96];h[p+0+0]=_+k+1>>1,h[p+2+0]=h[p+0+32]=k+O+1>>1,h[p+2+32]=h[p+0+64]=O+H+1>>1,h[p+1+0]=or(_,k,O),h[p+3+0]=h[p+1+32]=or(k,O,H),h[p+3+32]=h[p+1+64]=or(O,H,H),h[p+3+64]=h[p+2+64]=h[p+0+96]=h[p+1+96]=h[p+2+96]=h[p+3+96]=H}function Go(h,p){var _=h[p-1+0],k=h[p-1+32],O=h[p-1+64],H=h[p-1+96],J=h[p-1-32],ee=h[p+0-32],ne=h[p+1-32],fe=h[p+2-32];h[p+0+0]=h[p+2+32]=_+J+1>>1,h[p+0+32]=h[p+2+64]=k+_+1>>1,h[p+0+64]=h[p+2+96]=O+k+1>>1,h[p+0+96]=H+O+1>>1,h[p+3+0]=or(ee,ne,fe),h[p+2+0]=or(J,ee,ne),h[p+1+0]=h[p+3+32]=or(_,J,ee),h[p+1+32]=h[p+3+64]=or(k,_,J),h[p+1+64]=h[p+3+96]=or(O,k,_),h[p+1+96]=or(H,O,k)}function hc(h,p){var _;for(_=0;8>_;++_)n(h,p+32*_,h,p-32,8)}function oo(h,p){var _;for(_=0;8>_;++_)i(h,p,h[p-1],8),p+=32}function Yo(h,p,_){var k;for(k=0;8>k;++k)i(p,_+32*k,h,8)}function Vo(h,p){var _,k=8;for(_=0;8>_;++_)k+=h[p+_-32]+h[p-1+32*_];Yo(k>>4,h,p)}function Cf(h,p){var _,k=4;for(_=0;8>_;++_)k+=h[p+_-32];Yo(k>>3,h,p)}function fc(h,p){var _,k=4;for(_=0;8>_;++_)k+=h[p-1+32*_];Yo(k>>3,h,p)}function gc(h,p){Yo(128,h,p)}function lo(h,p,_){var k=h[p-_],O=h[p+0],H=3*(O-k)+Pf[1020+h[p-2*_]-h[p+_]],J=Gu[112+(H+4>>3)];h[p-_]=Ai[255+k+Gu[112+(H+3>>3)]],h[p+0]=Ai[255+O-J]}function co(h,p,_,k){var O=h[p+0],H=h[p+_];return Vi[255+h[p-2*_]-h[p-_]]>k||Vi[255+H-O]>k}function pc(h,p,_,k){return 4*Vi[255+h[p-_]-h[p+0]]+Vi[255+h[p-2*_]-h[p+_]]<=k}function Jo(h,p,_,k,O){var H=h[p-3*_],J=h[p-2*_],ee=h[p-_],ne=h[p+0],fe=h[p+_],De=h[p+2*_],Qe=h[p+3*_];return 4*Vi[255+ee-ne]+Vi[255+J-fe]>k?0:Vi[255+h[p-4*_]-H]<=O&&Vi[255+H-J]<=O&&Vi[255+J-ee]<=O&&Vi[255+Qe-De]<=O&&Vi[255+De-fe]<=O&&Vi[255+fe-ne]<=O}function mc(h,p,_,k){var O=2*k+1;for(k=0;16>k;++k)pc(h,p+k,_,O)&&lo(h,p+k,_)}function uo(h,p,_,k){var O=2*k+1;for(k=0;16>k;++k)pc(h,p+k*_,1,O)&&lo(h,p+k*_,1)}function vc(h,p,_,k){var O;for(O=3;0<O;--O)mc(h,p+=4*_,_,k)}function yc(h,p,_,k){var O;for(O=3;0<O;--O)uo(h,p+=4,_,k)}function Ci(h,p,_,k,O,H,J,ee){for(H=2*H+1;0<O--;){if(Jo(h,p,_,H,J))if(co(h,p,_,ee))lo(h,p,_);else{var ne=h,fe=p,De=_,Qe=ne[fe-2*De],ge=ne[fe-De],Re=ne[fe+0],We=ne[fe+De],lt=ne[fe+2*De],Ke=27*(gt=Pf[1020+3*(Re-ge)+Pf[1020+Qe-We]])+63>>7,dt=18*gt+63>>7,gt=9*gt+63>>7;ne[fe-3*De]=Ai[255+ne[fe-3*De]+gt],ne[fe-2*De]=Ai[255+Qe+dt],ne[fe-De]=Ai[255+ge+Ke],ne[fe+0]=Ai[255+Re-Ke],ne[fe+De]=Ai[255+We-dt],ne[fe+2*De]=Ai[255+lt-gt]}p+=k}}function ja(h,p,_,k,O,H,J,ee){for(H=2*H+1;0<O--;){if(Jo(h,p,_,H,J))if(co(h,p,_,ee))lo(h,p,_);else{var ne=h,fe=p,De=_,Qe=ne[fe-De],ge=ne[fe+0],Re=ne[fe+De],We=Gu[112+(4+(lt=3*(ge-Qe))>>3)],lt=Gu[112+(lt+3>>3)],Ke=We+1>>1;ne[fe-2*De]=Ai[255+ne[fe-2*De]+Ke],ne[fe-De]=Ai[255+Qe+lt],ne[fe+0]=Ai[255+ge-We],ne[fe+De]=Ai[255+Re-Ke]}p+=k}}function y(h,p,_,k,O,H){Ci(h,p,_,1,16,k,O,H)}function B(h,p,_,k,O,H){Ci(h,p,1,_,16,k,O,H)}function pe(h,p,_,k,O,H){var J;for(J=3;0<J;--J)ja(h,p+=4*_,_,1,16,k,O,H)}function Fe(h,p,_,k,O,H){var J;for(J=3;0<J;--J)ja(h,p+=4,1,_,16,k,O,H)}function qe(h,p,_,k,O,H,J,ee){Ci(h,p,O,1,8,H,J,ee),Ci(_,k,O,1,8,H,J,ee)}function ft(h,p,_,k,O,H,J,ee){Ci(h,p,1,O,8,H,J,ee),Ci(_,k,1,O,8,H,J,ee)}function _t(h,p,_,k,O,H,J,ee){ja(h,p+4*O,O,1,8,H,J,ee),ja(_,k+4*O,O,1,8,H,J,ee)}function Vt(h,p,_,k,O,H,J,ee){ja(h,p+4,1,O,8,H,J,ee),ja(_,k+4,1,O,8,H,J,ee)}function Qt(){this.ba=new Je,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ce,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ir(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ur(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nr(){this.ua=0,this.Wa=new Et,this.vb=new Et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new de}function Yr(){this.xb=this.a=0,this.l=new Ze,this.ca=new Je,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nr,this.ab=0,this.gc=o(4,ur),this.Oc=0}function pn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ze,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fr(h,p,_,k,O,H,J){for(h=h==null?0:h[p+0],p=0;p<J;++p)O[H+p]=h+_[k+p]&255,h=O[H+p]}function yn(h,p,_,k,O,H,J){var ee;if(h==null)Fr(null,null,_,k,O,H,J);else for(ee=0;ee<J;++ee)O[H+ee]=h[p+ee]+_[k+ee]&255}function mn(h,p,_,k,O,H,J){if(h==null)Fr(null,null,_,k,O,H,J);else{var ee,ne=h[p+0],fe=ne,De=ne;for(ee=0;ee<J;++ee)fe=De+(ne=h[p+ee])-fe,De=_[k+ee]+(-256&fe?0>fe?0:255:fe)&255,fe=ne,O[H+ee]=De}}function Rn(h,p,_,k){var O=p.width,H=p.o;if(e(h!=null&&p!=null),0>_||0>=k||_+k>H)return null;if(!h.Cc){if(h.ga==null){var J;if(h.ga=new pn,(J=h.ga==null)||(J=p.width*p.o,e(h.Gb.length==0),h.Gb=s(J),h.Uc=0,h.Gb==null?J=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,J=1),J=!J),!J){J=h.ga;var ee=h.Fa,ne=h.P,fe=h.qc,De=h.mb,Qe=h.nb,ge=ne+1,Re=fe-1,We=J.l;if(e(ee!=null&&De!=null&&p!=null),ws[0]=null,ws[1]=Fr,ws[2]=yn,ws[3]=mn,J.ca=De,J.tb=Qe,J.c=p.width,J.i=p.height,e(0<J.c&&0<J.i),1>=fe)p=0;else if(J.$a=3&ee[ne+0],J.Z=ee[ne+0]>>2&3,J.Lc=ee[ne+0]>>4&3,ne=ee[ne+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||ne)p=0;else if(We.put=nt,We.ac=Be,We.bc=Mt,We.ma=J,We.width=p.width,We.height=p.height,We.Da=p.Da,We.v=p.v,We.va=p.va,We.j=p.j,We.o=p.o,J.$a)e:{e(J.$a==1),p=ae();t:for(;;){if(p==null){p=0;break e}if(e(J!=null),J.mc=p,p.c=J.c,p.i=J.i,p.l=J.l,p.l.ma=J,p.l.width=J.c,p.l.height=J.i,p.a=0,se(p.m,ee,ge,Re),!Pe(J.c,J.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&Xe(p.s)?(J.ic=1,ee=p.c*p.i,p.Ta=null,p.Ua=0,p.V=s(ee),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(J.ic=0,p=tt(p,J.c)),!p))break t;p=1;break e}J.mc=null,p=0}else p=Re>=J.c*J.i;J=!p}if(J)return null;h.ga.Lc!=1?h.Ga=0:k=H-_}e(h.ga!=null),e(_+k<=H);e:{if(p=(ee=h.ga).c,H=ee.l.o,ee.$a==0){if(ge=h.rc,Re=h.Vc,We=h.Fa,ne=h.P+1+_*p,fe=h.mb,De=h.nb+_*p,e(ne<=h.P+h.qc),ee.Z!=0)for(e(ws[ee.Z]!=null),J=0;J<k;++J)ws[ee.Z](ge,Re,We,ne,fe,De,p),ge=fe,Re=De,De+=p,ne+=p;else for(J=0;J<k;++J)n(fe,De,We,ne,p),ge=fe,Re=De,De+=p,ne+=p;h.rc=ge,h.Vc=Re}else{if(e(ee.mc!=null),p=_+k,e((J=ee.mc)!=null),e(p<=J.i),J.C>=p)p=1;else if(ee.ic||ho(),ee.ic){ee=J.V,ge=J.Ba,Re=J.c;var lt=J.i,Ke=(We=1,ne=J.$/Re,fe=J.$%Re,De=J.m,Qe=J.s,J.$),dt=Re*lt,gt=Re*p,Nt=Qe.wc,xt=Ke<gt?ze(Qe,fe,ne):null;e(Ke<=dt),e(p<=lt),e(Xe(Qe));t:for(;;){for(;!De.h&&Ke<gt;){if(fe&Nt||(xt=ze(Qe,fe,ne)),e(xt!=null),Se(De),256>(lt=te(xt.G[0],xt.H[0],De)))ee[ge+Ke]=lt,++Ke,++fe>=Re&&(fe=0,++ne<=p&&!(ne%16)&&L(J,ne));else{if(!(280>lt)){We=0;break t}lt=kt(lt-256,De);var Zt,Gt=te(xt.G[4],xt.H[4],De);if(Se(De),!(Ke>=(Gt=X(Re,Gt=kt(Gt,De)))&&dt-Ke>=lt)){We=0;break t}for(Zt=0;Zt<lt;++Zt)ee[ge+Ke+Zt]=ee[ge+Ke+Zt-Gt];for(Ke+=lt,fe+=lt;fe>=Re;)fe-=Re,++ne<=p&&!(ne%16)&&L(J,ne);Ke<gt&&fe&Nt&&(xt=ze(Qe,fe,ne))}e(De.h==me(De))}L(J,ne>p?p:ne);break t}!We||De.h&&Ke<dt?(We=0,J.a=De.h?5:3):J.$=Ke,p=We}else p=A(J,J.V,J.Ba,J.c,J.i,p,D);if(!p){k=0;break e}}_+k>=H&&(h.Cc=1),k=1}if(!k)return null;if(h.Cc&&((k=h.ga)!=null&&(k.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+_*O}function za(h,p,_,k,O,H){for(;0<O--;){var J,ee=h,ne=p+(_?1:0),fe=h,De=p+(_?0:3);for(J=0;J<k;++J){var Qe=fe[De+4*J];Qe!=255&&(Qe*=32897,ee[ne+4*J+0]=ee[ne+4*J+0]*Qe>>23,ee[ne+4*J+1]=ee[ne+4*J+1]*Qe>>23,ee[ne+4*J+2]=ee[ne+4*J+2]*Qe>>23)}p+=H}}function ms(h,p,_,k,O){for(;0<k--;){var H;for(H=0;H<_;++H){var J=h[p+2*H+0],ee=15&(fe=h[p+2*H+1]),ne=4369*ee,fe=(240&fe|fe>>4)*ne>>16;h[p+2*H+0]=(240&J|J>>4)*ne>>16&240|(15&J|J<<4)*ne>>16>>4&15,h[p+2*H+1]=240&fe|ee}p+=O}}function Lf(h,p,_,k,O,H,J,ee){var ne,fe,De=255;for(fe=0;fe<O;++fe){for(ne=0;ne<k;++ne){var Qe=h[p+ne];H[J+4*ne]=Qe,De&=Qe}p+=_,J+=ee}return De!=255}function zu(h,p,_,k,O){var H;for(H=0;H<O;++H)_[k+H]=h[p+H]>>8}function ho(){Lc=za,Km=ms,Qm=Lf,Xm=zu}function ia(h,p,_){R[h]=function(k,O,H,J,ee,ne,fe,De,Qe,ge,Re,We,lt,Ke,dt,gt,Nt){var xt,Zt=Nt-1>>1,Gt=ee[ne+0]|fe[De+0]<<16,fr=Qe[ge+0]|Re[We+0]<<16;e(k!=null);var Jt=3*Gt+fr+131074>>2;for(p(k[O+0],255&Jt,Jt>>16,lt,Ke),H!=null&&(Jt=3*fr+Gt+131074>>2,p(H[J+0],255&Jt,Jt>>16,dt,gt)),xt=1;xt<=Zt;++xt){var xr=ee[ne+xt]|fe[De+xt]<<16,xn=Qe[ge+xt]|Re[We+xt]<<16,gr=Gt+xr+fr+xn+524296,Kt=gr+2*(xr+fr)>>3;Jt=Kt+Gt>>1,Gt=(gr=gr+2*(Gt+xn)>>3)+xr>>1,p(k[O+2*xt-1],255&Jt,Jt>>16,lt,Ke+(2*xt-1)*_),p(k[O+2*xt-0],255&Gt,Gt>>16,lt,Ke+(2*xt-0)*_),H!=null&&(Jt=gr+fr>>1,Gt=Kt+xn>>1,p(H[J+2*xt-1],255&Jt,Jt>>16,dt,gt+(2*xt-1)*_),p(H[J+2*xt+0],255&Gt,Gt>>16,dt,gt+(2*xt+0)*_)),Gt=xr,fr=xn}1&Nt||(Jt=3*Gt+fr+131074>>2,p(k[O+Nt-1],255&Jt,Jt>>16,lt,Ke+(Nt-1)*_),H!=null&&(Jt=3*fr+Gt+131074>>2,p(H[J+Nt-1],255&Jt,Jt>>16,dt,gt+(Nt-1)*_)))}}function bc(){Ji[Yu]=ww,Ji[Vu]=c1,Ji[i1]=Sw,Ji[Ju]=u1,Ji[Ku]=d1,Ji[kf]=h1,Ji[a1]=jw,Ji[Ef]=c1,Ji[Ff]=u1,Ji[Qu]=d1,Ji[Df]=h1}function Ko(h){return h&-16384?0>h?0:255:h>>Nw}function vs(h,p){return Ko((19077*h>>8)+(26149*p>>8)-14234)}function Pn(h,p,_){return Ko((19077*h>>8)-(6419*p>>8)-(13320*_>>8)+8708)}function Wa(h,p){return Ko((19077*h>>8)+(33050*p>>8)-17685)}function Ha(h,p,_,k,O){k[O+0]=vs(h,_),k[O+1]=Pn(h,p,_),k[O+2]=Wa(h,p)}function Qo(h,p,_,k,O){k[O+0]=Wa(h,p),k[O+1]=Pn(h,p,_),k[O+2]=vs(h,_)}function xc(h,p,_,k,O){var H=Pn(h,p,_);p=H<<3&224|Wa(h,p)>>3,k[O+0]=248&vs(h,_)|H>>5,k[O+1]=p}function ri(h,p,_,k,O){var H=240&Wa(h,p)|15;k[O+0]=240&vs(h,_)|Pn(h,p,_)>>4,k[O+1]=H}function Wu(h,p,_,k,O){k[O+0]=255,Ha(h,p,_,k,O+1)}function Xo(h,p,_,k,O){Qo(h,p,_,k,O),k[O+3]=255}function Hu(h,p,_,k,O){Ha(h,p,_,k,O),k[O+3]=255}function bn(h,p){return 0>h?0:h>p?p:h}function Yi(h,p,_){R[h]=function(k,O,H,J,ee,ne,fe,De,Qe){for(var ge=De+(-2&Qe)*_;De!=ge;)p(k[O+0],H[J+0],ee[ne+0],fe,De),p(k[O+1],H[J+0],ee[ne+0],fe,De+_),O+=2,++J,++ne,De+=2*_;1&Qe&&p(k[O+0],H[J+0],ee[ne+0],fe,De)}}function _c(h,p,_){return _==0?h==0?p==0?6:5:p==0?4:0:_}function wc(h,p,_,k,O){switch(h>>>30){case 3:on(p,_,k,O,0);break;case 2:Ya(p,_,k,O);break;case 1:Pa(p,_,k,O)}}function ys(h,p){var _,k,O=p.M,H=p.Nb,J=h.oc,ee=h.pc+40,ne=h.oc,fe=h.pc+584,De=h.oc,Qe=h.pc+600;for(_=0;16>_;++_)J[ee+32*_-1]=129;for(_=0;8>_;++_)ne[fe+32*_-1]=129,De[Qe+32*_-1]=129;for(0<O?J[ee-1-32]=ne[fe-1-32]=De[Qe-1-32]=129:(i(J,ee-32-1,127,21),i(ne,fe-32-1,127,9),i(De,Qe-32-1,127,9)),k=0;k<h.za;++k){var ge=p.ya[p.aa+k];if(0<k){for(_=-1;16>_;++_)n(J,ee+32*_-4,J,ee+32*_+12,4);for(_=-1;8>_;++_)n(ne,fe+32*_-4,ne,fe+32*_+4,4),n(De,Qe+32*_-4,De,Qe+32*_+4,4)}var Re=h.Gd,We=h.Hd+k,lt=ge.ad,Ke=ge.Hc;if(0<O&&(n(J,ee-32,Re[We].y,0,16),n(ne,fe-32,Re[We].f,0,8),n(De,Qe-32,Re[We].ea,0,8)),ge.Za){var dt=J,gt=ee-32+16;for(0<O&&(k>=h.za-1?i(dt,gt,Re[We].y[15],4):n(dt,gt,Re[We+1].y,0,4)),_=0;4>_;_++)dt[gt+128+_]=dt[gt+256+_]=dt[gt+384+_]=dt[gt+0+_];for(_=0;16>_;++_,Ke<<=2)dt=J,gt=ee+g1[_],aa[ge.Ob[_]](dt,gt),wc(Ke,lt,16*+_,dt,gt)}else if(dt=_c(k,O,ge.Ob[0]),_s[dt](J,ee),Ke!=0)for(_=0;16>_;++_,Ke<<=2)wc(Ke,lt,16*+_,J,ee+g1[_]);for(_=ge.Gc,dt=_c(k,O,ge.Dd),Va[dt](ne,fe),Va[dt](De,Qe),Ke=lt,dt=ne,gt=fe,255&(ge=0|_)&&(170&ge?nl(Ke,256,dt,gt):Cc(Ke,256,dt,gt)),ge=De,Ke=Qe,255&(_>>=8)&&(170&_?nl(lt,320,ge,Ke):Cc(lt,320,ge,Ke)),O<h.Ub-1&&(n(Re[We].y,0,J,ee+480,16),n(Re[We].f,0,ne,fe+224,8),n(Re[We].ea,0,De,Qe+224,8)),_=8*H*h.B,Re=h.sa,We=h.ta+16*k+16*H*h.R,lt=h.qa,ge=h.ra+8*k+_,Ke=h.Ha,dt=h.Ia+8*k+_,_=0;16>_;++_)n(Re,We+_*h.R,J,ee+32*_,16);for(_=0;8>_;++_)n(lt,ge+_*h.B,ne,fe+32*_,8),n(Ke,dt+_*h.B,De,Qe+32*_,8)}}function Zo(h,p,_,k,O,H,J,ee,ne){var fe=[0],De=[0],Qe=0,ge=ne!=null?ne.kd:0,Re=ne??new ir;if(h==null||12>_)return 7;Re.data=h,Re.w=p,Re.ha=_,p=[p],_=[_],Re.gb=[Re.gb];e:{var We=p,lt=_,Ke=Re.gb;if(e(h!=null),e(lt!=null),e(Ke!=null),Ke[0]=0,12<=lt[0]&&!r(h,We[0],"RIFF")){if(r(h,We[0]+8,"WEBP")){Ke=3;break e}var dt=Oe(h,We[0]+4);if(12>dt||4294967286<dt){Ke=3;break e}if(ge&&dt>lt[0]-8){Ke=7;break e}Ke[0]=dt,We[0]+=12,lt[0]-=12}Ke=0}if(Ke!=0)return Ke;for(dt=0<Re.gb[0],_=_[0];;){e:{var gt=h;lt=p,Ke=_;var Nt=fe,xt=De,Zt=We=[0];if((Jt=Qe=[Qe])[0]=0,8>Ke[0])Ke=7;else{if(!r(gt,lt[0],"VP8X")){if(Oe(gt,lt[0]+4)!=10){Ke=3;break e}if(18>Ke[0]){Ke=7;break e}var Gt=Oe(gt,lt[0]+8),fr=1+Ve(gt,lt[0]+12);if(2147483648<=fr*(gt=1+Ve(gt,lt[0]+15))){Ke=3;break e}Zt!=null&&(Zt[0]=Gt),Nt!=null&&(Nt[0]=fr),xt!=null&&(xt[0]=gt),lt[0]+=18,Ke[0]-=18,Jt[0]=1}Ke=0}}if(Qe=Qe[0],We=We[0],Ke!=0)return Ke;if(lt=!!(2&We),!dt&&Qe)return 3;if(H!=null&&(H[0]=!!(16&We)),J!=null&&(J[0]=lt),ee!=null&&(ee[0]=0),J=fe[0],We=De[0],Qe&&lt&&ne==null){Ke=0;break}if(4>_){Ke=7;break}if(dt&&Qe||!dt&&!Qe&&!r(h,p[0],"ALPH")){_=[_],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{Gt=h,Ke=p,dt=_;var Jt=Re.gb;Nt=Re.na,xt=Re.P,Zt=Re.Sa,fr=22,e(Gt!=null),e(dt!=null),gt=Ke[0];var xr=dt[0];for(e(Nt!=null),e(Zt!=null),Nt[0]=null,xt[0]=null,Zt[0]=0;;){if(Ke[0]=gt,dt[0]=xr,8>xr){Ke=7;break e}var xn=Oe(Gt,gt+4);if(4294967286<xn){Ke=3;break e}var gr=8+xn+1&-2;if(fr+=gr,0<Jt&&fr>Jt){Ke=3;break e}if(!r(Gt,gt,"VP8 ")||!r(Gt,gt,"VP8L")){Ke=0;break e}if(xr[0]<gr){Ke=7;break e}r(Gt,gt,"ALPH")||(Nt[0]=Gt,xt[0]=gt+8,Zt[0]=xn),gt+=gr,xr-=gr}}if(_=_[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],Ke!=0)break}_=[_],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(Jt=h,Ke=p,dt=_,Nt=Re.gb[0],xt=Re.Ja,Zt=Re.xa,Gt=Ke[0],gt=!r(Jt,Gt,"VP8 "),fr=!r(Jt,Gt,"VP8L"),e(Jt!=null),e(dt!=null),e(xt!=null),e(Zt!=null),8>dt[0])Ke=7;else{if(gt||fr){if(Jt=Oe(Jt,Gt+4),12<=Nt&&Jt>Nt-12){Ke=3;break e}if(ge&&Jt>dt[0]-8){Ke=7;break e}xt[0]=Jt,Ke[0]+=8,dt[0]-=8,Zt[0]=fr}else Zt[0]=5<=dt[0]&&Jt[Gt+0]==47&&!(Jt[Gt+4]>>5),xt[0]=dt[0];Ke=0}if(_=_[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],p=p[0],Ke!=0)break;if(4294967286<Re.Ja)return 3;if(ee==null||lt||(ee[0]=Re.xa?2:1),J=[J],We=[We],Re.xa){if(5>_){Ke=7;break}ee=J,ge=We,lt=H,h==null||5>_?h=0:5<=_&&h[p+0]==47&&!(h[p+4]>>5)?(dt=[0],Jt=[0],Nt=[0],se(xt=new q,h,p,_),ut(xt,dt,Jt,Nt)?(ee!=null&&(ee[0]=dt[0]),ge!=null&&(ge[0]=Jt[0]),lt!=null&&(lt[0]=Nt[0]),h=1):h=0):h=0}else{if(10>_){Ke=7;break}ee=We,h==null||10>_||!$t(h,p+3,_-3)?h=0:(ge=h[p+0]|h[p+1]<<8|h[p+2]<<16,lt=16383&(h[p+7]<<8|h[p+6]),h=16383&(h[p+9]<<8|h[p+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=Re.Ja||!lt||!h?h=0:(J&&(J[0]=lt),ee&&(ee[0]=h),h=1))}if(!h||(J=J[0],We=We[0],Qe&&(fe[0]!=J||De[0]!=We)))return 3;ne!=null&&(ne[0]=Re,ne.offset=p-ne.w,e(4294967286>p-ne.w),e(ne.offset==ne.ha-_));break}return Ke==0||Ke==7&&Qe&&ne==null?(H!=null&&(H[0]|=Re.na!=null&&0<Re.na.length),k!=null&&(k[0]=J),O!=null&&(O[0]=We),0):Ke}function hi(h,p,_){var k=p.width,O=p.height,H=0,J=0,ee=k,ne=O;if(p.Da=h!=null&&0<h.Da,p.Da&&(ee=h.cd,ne=h.bd,H=h.v,J=h.j,11>_||(H&=-2,J&=-2),0>H||0>J||0>=ee||0>=ne||H+ee>k||J+ne>O))return 0;if(p.v=H,p.j=J,p.va=H+ee,p.o=J+ne,p.U=ee,p.T=ne,p.da=h!=null&&0<h.da,p.da){if(!He(ee,ne,_=[h.ib],H=[h.hb]))return 0;p.ib=_[0],p.hb=H[0]}return p.ob=h!=null&&h.ob,p.Kb=h==null||!h.Sd,p.da&&(p.ob=p.ib<3*k/4&&p.hb<3*O/4,p.Kb=0),1}function fi(h){if(h==null)return 2;if(11>h.S){var p=h.f.RGBA;p.fb+=(h.height-1)*p.A,p.A=-p.A}else p=h.f.kb,h=h.height,p.O+=(h-1)*p.fa,p.fa=-p.fa,p.N+=(h-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(h-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(h-1)*p.lb,p.lb=-p.lb);return 0}function fo(h,p,_,k){if(k==null||0>=h||0>=p)return 2;if(_!=null){if(_.Da){var O=_.cd,H=_.bd,J=-2&_.v,ee=-2&_.j;if(0>J||0>ee||0>=O||0>=H||J+O>h||ee+H>p)return 2;h=O,p=H}if(_.da){if(!He(h,p,O=[_.ib],H=[_.hb]))return 2;h=O[0],p=H[0]}}k.width=h,k.height=p;e:{var ne=k.width,fe=k.height;if(h=k.S,0>=ne||0>=fe||!(h>=Yu&&13>h))h=2;else{if(0>=k.Rd&&k.sd==null){J=H=O=p=0;var De=(ee=ne*p1[h])*fe;if(11>h||(H=(fe+1)/2*(p=(ne+1)/2),h==12&&(J=(O=ne)*fe)),(fe=s(De+2*H+J))==null){h=1;break e}k.sd=fe,11>h?((ne=k.f.RGBA).eb=fe,ne.fb=0,ne.A=ee,ne.size=De):((ne=k.f.kb).y=fe,ne.O=0,ne.fa=ee,ne.Fd=De,ne.f=fe,ne.N=0+De,ne.Ab=p,ne.Cd=H,ne.ea=fe,ne.W=0+De+H,ne.Db=p,ne.Ed=H,h==12&&(ne.F=fe,ne.J=0+De+2*H),ne.Tc=J,ne.lb=O)}if(p=1,O=k.S,H=k.width,J=k.height,O>=Yu&&13>O)if(11>O)h=k.f.RGBA,p&=(ee=Math.abs(h.A))*(J-1)+H<=h.size,p&=ee>=H*p1[O],p&=h.eb!=null;else{h=k.f.kb,ee=(H+1)/2,De=(J+1)/2,ne=Math.abs(h.fa),fe=Math.abs(h.Ab);var Qe=Math.abs(h.Db),ge=Math.abs(h.lb),Re=ge*(J-1)+H;p&=ne*(J-1)+H<=h.Fd,p&=fe*(De-1)+ee<=h.Cd,p=(p&=Qe*(De-1)+ee<=h.Ed)&ne>=H&fe>=ee&Qe>=ee,p&=h.y!=null,p&=h.f!=null,p&=h.ea!=null,O==12&&(p&=ge>=H,p&=Re<=h.Tc,p&=h.F!=null)}else p=0;h=p?0:2}}return h!=0||_!=null&&_.fd&&(h=fi(k)),h}var Na=64,bs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sc=24,xs=32,an=8,Af=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ct("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(h){return h},R.Predictor2=function(h,p,_){return p[_+0]},R.Predictor3=function(h,p,_){return p[_+1]},R.Predictor4=function(h,p,_){return p[_-1]},R.Predictor5=function(h,p,_){return At(At(h,p[_+1]),p[_+0])},R.Predictor6=function(h,p,_){return At(h,p[_-1])},R.Predictor7=function(h,p,_){return At(h,p[_+0])},R.Predictor8=function(h,p,_){return At(p[_-1],p[_+0])},R.Predictor9=function(h,p,_){return At(p[_+0],p[_+1])},R.Predictor10=function(h,p,_){return At(At(h,p[_-1]),At(p[_+0],p[_+1]))},R.Predictor11=function(h,p,_){var k=p[_+0];return 0>=St(k>>24&255,h>>24&255,(p=p[_-1])>>24&255)+St(k>>16&255,h>>16&255,p>>16&255)+St(k>>8&255,h>>8&255,p>>8&255)+St(255&k,255&h,255&p)?k:h},R.Predictor12=function(h,p,_){var k=p[_+0];return(Wt((h>>24&255)+(k>>24&255)-((p=p[_-1])>>24&255))<<24|Wt((h>>16&255)+(k>>16&255)-(p>>16&255))<<16|Wt((h>>8&255)+(k>>8&255)-(p>>8&255))<<8|Wt((255&h)+(255&k)-(255&p)))>>>0},R.Predictor13=function(h,p,_){var k=p[_-1];return(st((h=At(h,p[_+0]))>>24&255,k>>24&255)<<24|st(h>>16&255,k>>16&255)<<16|st(h>>8&255,k>>8&255)<<8|st(255&h,255&k))>>>0};var Ca=R.PredictorAdd0;R.PredictorAdd1=zt,ct("Predictor2","PredictorAdd2"),ct("Predictor3","PredictorAdd3"),ct("Predictor4","PredictorAdd4"),ct("Predictor5","PredictorAdd5"),ct("Predictor6","PredictorAdd6"),ct("Predictor7","PredictorAdd7"),ct("Predictor8","PredictorAdd8"),ct("Predictor9","PredictorAdd9"),ct("Predictor10","PredictorAdd10"),ct("Predictor11","PredictorAdd11"),ct("Predictor12","PredictorAdd12"),ct("Predictor13","PredictorAdd13");var La=R.PredictorAdd2;Ot("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var el,jc=R.ColorIndexInverseTransform,tl=R.MapARGB,rl=R.VP8LColorIndexInverseTransformAlpha,go=R.MapAlpha,po=R.VP8LPredictorsAdd=[];po.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Ga,Nc,Li,Aa,Ir,Rr,sn,on,Ya,nl,Pa,Cc,Bm,Mm,Um,qm,$m,zm,Wm,Hm,Gm,Ym,Vm,Jm,Lc,Km,Qm,Xm,Zm=s(511),e1=s(2041),t1=s(225),r1=s(767),n1=0,Pf=e1,Gu=t1,Ai=r1,Vi=Zm,Yu=0,Vu=1,i1=2,Ju=3,Ku=4,kf=5,a1=6,Ef=7,Ff=8,Qu=9,Df=10,lw=[2,3,7],cw=[3,3,11],s1=[280,256,256,256,40],uw=[0,1,1,1,0],dw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hw=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],fw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],gw=8,Tf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],If=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ac=null,pw=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mw=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],o1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vw=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yw=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bw=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xw=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_s=[],aa=[],Va=[],_w=1,l1=2,ws=[],Ji=[];ia("UpsampleRgbLinePair",Ha,3),ia("UpsampleBgrLinePair",Qo,3),ia("UpsampleRgbaLinePair",Hu,4),ia("UpsampleBgraLinePair",Xo,4),ia("UpsampleArgbLinePair",Wu,4),ia("UpsampleRgba4444LinePair",ri,2),ia("UpsampleRgb565LinePair",xc,2);var ww=R.UpsampleRgbLinePair,Sw=R.UpsampleBgrLinePair,c1=R.UpsampleRgbaLinePair,u1=R.UpsampleBgraLinePair,d1=R.UpsampleArgbLinePair,h1=R.UpsampleRgba4444LinePair,jw=R.UpsampleRgb565LinePair,Xu=16,Zu=1<<Xu-1,Pc=-227,Rf=482,Nw=6,f1=0,Cw=s(256),Lw=s(256),Aw=s(256),Pw=s(256),kw=s(Rf-Pc),Ew=s(Rf-Pc);Yi("YuvToRgbRow",Ha,3),Yi("YuvToBgrRow",Qo,3),Yi("YuvToRgbaRow",Hu,4),Yi("YuvToBgraRow",Xo,4),Yi("YuvToArgbRow",Wu,4),Yi("YuvToRgba4444Row",ri,2),Yi("YuvToRgb565Row",xc,2);var g1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ed=[0,2,8],Fw=[8,7,6,4,4,2,2,2,1,1,1,1],Dw=1;this.WebPDecodeRGBA=function(h,p,_,k,O){var H=Vu,J=new Qt,ee=new Je;J.ba=ee,ee.S=H,ee.width=[ee.width],ee.height=[ee.height];var ne=ee.width,fe=ee.height,De=new vt;if(De==null||h==null)var Qe=2;else e(De!=null),Qe=Zo(h,p,_,De.width,De.height,De.Pd,De.Qd,De.format,null);if(Qe!=0?ne=0:(ne!=null&&(ne[0]=De.width[0]),fe!=null&&(fe[0]=De.height[0]),ne=1),ne){ee.width=ee.width[0],ee.height=ee.height[0],k!=null&&(k[0]=ee.width),O!=null&&(O[0]=ee.height);e:{if(k=new Ze,(O=new ir).data=h,O.w=p,O.ha=_,O.kd=1,p=[0],e(O!=null),((h=Zo(O.data,O.w,O.ha,null,null,null,p,null,O))==0||h==7)&&p[0]&&(h=4),(p=h)==0){if(e(J!=null),k.data=O.data,k.w=O.w+O.offset,k.ha=O.ha-O.offset,k.put=nt,k.ac=Be,k.bc=Mt,k.ma=J,O.xa){if((h=ae())==null){J=1;break e}if(function(ge,Re){var We=[0],lt=[0],Ke=[0];t:for(;;){if(ge==null)return 0;if(Re==null)return ge.a=2,0;if(ge.l=Re,ge.a=0,se(ge.m,Re.data,Re.w,Re.ha),!ut(ge.m,We,lt,Ke)){ge.a=3;break t}if(ge.xb=l1,Re.width=We[0],Re.height=lt[0],!Pe(We[0],lt[0],1,ge,null))break t;return 1}return e(ge.a!=0),0}(h,k)){if(k=(p=fo(k.width,k.height,J.Oa,J.ba))==0){t:{k=h;r:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((_=k.l)!=null),e((O=_.ma)!=null),k.xb!=0){if(k.ca=O.ba,k.tb=O.tb,e(k.ca!=null),!hi(O.Oa,_,Ju)){k.a=2;break r}if(!tt(k,_.width)||_.da)break r;if((_.da||Ye(k.ca.S))&&ho(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&ho()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!le(k.s.vb,k.s.Wa.Xa)){k.a=1;break r}k.xb=0}if(!A(k,k.V,k.Ba,k.c,k.i,_.o,qt))break r;O.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(p=h.a)}else p=h.a}else{if((h=new mt)==null){J=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,er(h,k)){if((p=fo(k.width,k.height,J.Oa,J.ba))==0){if(h.Aa=0,_=J.Oa,e((O=h)!=null),_!=null){if(0<(ne=0>(ne=_.Md)?0:100<ne?255:255*ne/100)){for(fe=De=0;4>fe;++fe)12>(Qe=O.pb[fe]).lc&&(Qe.ia=ne*Fw[0>Qe.lc?0:Qe.lc]>>3),De|=Qe.ia;De&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=_.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(ge,Re){if(ge==null)return 0;if(Re==null)return it(ge,2,"NULL VP8Io parameter in VP8Decode().");if(!ge.cb&&!er(ge,Re))return 0;if(e(ge.cb),Re.ac==null||Re.ac(Re)){Re.ob&&(ge.L=0);var We=ed[ge.L];if(ge.L==2?(ge.yb=0,ge.zb=0):(ge.yb=Re.v-We>>4,ge.zb=Re.j-We>>4,0>ge.yb&&(ge.yb=0),0>ge.zb&&(ge.zb=0)),ge.Va=Re.o+15+We>>4,ge.Hb=Re.va+15+We>>4,ge.Hb>ge.za&&(ge.Hb=ge.za),ge.Va>ge.Ub&&(ge.Va=ge.Ub),0<ge.L){var lt=ge.ed;for(We=0;4>We;++We){var Ke;if(ge.Qa.Cb){var dt=ge.Qa.Lb[We];ge.Qa.Fb||(dt+=lt.Tb)}else dt=lt.Tb;for(Ke=0;1>=Ke;++Ke){var gt=ge.gd[We][Ke],Nt=dt;if(lt.Pc&&(Nt+=lt.vd[0],Ke&&(Nt+=lt.od[0])),0<(Nt=0>Nt?0:63<Nt?63:Nt)){var xt=Nt;0<lt.wb&&(xt=4<lt.wb?xt>>2:xt>>1)>9-lt.wb&&(xt=9-lt.wb),1>xt&&(xt=1),gt.dd=xt,gt.tc=2*Nt+xt,gt.ld=40<=Nt?2:15<=Nt?1:0}else gt.tc=0;gt.La=Ke}}}We=0}else it(ge,6,"Frame setup failed"),We=ge.a;if(We=We==0){if(We){ge.$c=0,0<ge.Aa||(ge.Ic=Dw);t:{We=ge.Ic,lt=4*(xt=ge.za);var Zt=32*xt,Gt=xt+1,fr=0<ge.L?xt*(0<ge.Aa?2:1):0,Jt=(ge.Aa==2?2:1)*xt;if((gt=lt+832+(Ke=3*(16*We+ed[ge.L])/2*Zt)+(dt=ge.Fa!=null&&0<ge.Fa.length?ge.Kc.c*ge.Kc.i:0))!=gt)We=0;else{if(gt>ge.Vb){if(ge.Vb=0,ge.Ec=s(gt),ge.Fc=0,ge.Ec==null){We=it(ge,1,"no memory during frame initialization.");break t}ge.Vb=gt}gt=ge.Ec,Nt=ge.Fc,ge.Ac=gt,ge.Bc=Nt,Nt+=lt,ge.Gd=o(Zt,yt),ge.Hd=0,ge.rb=o(Gt+1,we),ge.sb=1,ge.wa=fr?o(fr,he):null,ge.Y=0,ge.D.Nb=0,ge.D.wa=ge.wa,ge.D.Y=ge.Y,0<ge.Aa&&(ge.D.Y+=xt),e(!0),ge.oc=gt,ge.pc=Nt,Nt+=832,ge.ya=o(Jt,Ie),ge.aa=0,ge.D.ya=ge.ya,ge.D.aa=ge.aa,ge.Aa==2&&(ge.D.aa+=xt),ge.R=16*xt,ge.B=8*xt,xt=(Zt=ed[ge.L])*ge.R,Zt=Zt/2*ge.B,ge.sa=gt,ge.ta=Nt+xt,ge.qa=ge.sa,ge.ra=ge.ta+16*We*ge.R+Zt,ge.Ha=ge.qa,ge.Ia=ge.ra+8*We*ge.B+Zt,ge.$c=0,Nt+=Ke,ge.mb=dt?gt:null,ge.nb=dt?Nt:null,e(Nt+dt<=ge.Fc+ge.Vb),mr(ge),i(ge.Ac,ge.Bc,0,lt),We=1}}if(We){if(Re.ka=0,Re.y=ge.sa,Re.O=ge.ta,Re.f=ge.qa,Re.N=ge.ra,Re.ea=ge.Ha,Re.Vd=ge.Ia,Re.fa=ge.R,Re.Rc=ge.B,Re.F=null,Re.J=0,!n1){for(We=-255;255>=We;++We)Zm[255+We]=0>We?-We:We;for(We=-1020;1020>=We;++We)e1[1020+We]=-128>We?-128:127<We?127:We;for(We=-112;112>=We;++We)t1[112+We]=-16>We?-16:15<We?15:We;for(We=-255;510>=We;++We)r1[255+We]=0>We?0:255<We?255:We;n1=1}sn=Ho,on=na,nl=Wo,Pa=Ni,Cc=io,Ya=wa,Bm=y,Mm=B,Um=qe,qm=ft,$m=pe,zm=Fe,Wm=_t,Hm=Vt,Gm=mc,Ym=uo,Vm=vc,Jm=yc,aa[0]=wf,aa[1]=cc,aa[2]=xf,aa[3]=_f,aa[4]=Sf,aa[5]=$a,aa[6]=qa,aa[7]=jf,aa[8]=Go,aa[9]=Nf,_s[0]=ps,_s[1]=vf,_s[2]=yf,_s[3]=uc,_s[4]=bf,_s[5]=so,_s[6]=dc,Va[0]=Vo,Va[1]=mf,Va[2]=hc,Va[3]=oo,Va[4]=fc,Va[5]=Cf,Va[6]=gc,We=1}else We=0}We&&(We=function(xr,xn){for(xr.M=0;xr.M<xr.Va;++xr.M){var gr,Kt=xr.Jc[xr.M&xr.Xb],Ut=xr.m,ln=xr;for(gr=0;gr<ln.za;++gr){var cr=Ut,_r=ln,qr=_r.Ac,On=_r.Bc+4*gr,ni=_r.zc,Xr=_r.ya[_r.aa+gr];if(_r.Qa.Bb?Xr.$b=Me(cr,_r.Pa.jb[0])?2+Me(cr,_r.Pa.jb[2]):Me(cr,_r.Pa.jb[1]):Xr.$b=0,_r.kc&&(Xr.Ad=Me(cr,_r.Bd)),Xr.Za=!Me(cr,145)+0,Xr.Za){var zn=Xr.Ob,ii=0;for(_r=0;4>_r;++_r){var _n,wr=ni[0+_r];for(_n=0;4>_n;++_n){wr=yw[qr[On+_n]][wr];for(var Cr=o1[Me(cr,wr[0])];0<Cr;)Cr=o1[2*Cr+Me(cr,wr[Cr])];wr=-Cr,qr[On+_n]=wr}n(zn,ii,qr,On,4),ii+=4,ni[0+_r]=wr}}else wr=Me(cr,156)?Me(cr,128)?1:3:Me(cr,163)?2:0,Xr.Ob[0]=wr,i(qr,On,wr,4),i(ni,0,wr,4);Xr.Dd=Me(cr,142)?Me(cr,114)?Me(cr,183)?1:3:2:0}if(ln.m.Ka)return it(xr,7,"Premature end-of-partition0 encountered.");for(;xr.ja<xr.za;++xr.ja){if(ln=Kt,cr=(Ut=xr).rb[Ut.sb-1],qr=Ut.rb[Ut.sb+Ut.ja],gr=Ut.ya[Ut.aa+Ut.ja],On=Ut.kc?gr.Ad:0)cr.la=qr.la=0,gr.Za||(cr.Na=qr.Na=0),gr.Hc=0,gr.Gc=0,gr.ia=0;else{var Zr,Lr;if(cr=qr,qr=ln,On=Ut.Pa.Xc,ni=Ut.ya[Ut.aa+Ut.ja],Xr=Ut.pb[ni.$b],_r=ni.ad,zn=0,ii=Ut.rb[Ut.sb-1],wr=_n=0,i(_r,zn,0,384),ni.Za)var Bn=0,sa=On[3];else{Cr=s(16);var cn=cr.Na+ii.Na;if(cn=Ac(qr,On[1],cn,Xr.Eb,0,Cr,0),cr.Na=ii.Na=(0<cn)+0,1<cn)sn(Cr,0,_r,zn);else{var gi=Cr[0]+3>>3;for(Cr=0;256>Cr;Cr+=16)_r[zn+Cr]=gi}Bn=1,sa=On[0]}var Dr=15&cr.la,wn=15&ii.la;for(Cr=0;4>Cr;++Cr){var Pi=1&wn;for(gi=Lr=0;4>gi;++gi)Dr=Dr>>1|(Pi=(cn=Ac(qr,sa,cn=Pi+(1&Dr),Xr.Sc,Bn,_r,zn))>Bn)<<7,Lr=Lr<<2|(3<cn?3:1<cn?2:_r[zn+0]!=0),zn+=16;Dr>>=4,wn=wn>>1|Pi<<7,_n=(_n<<8|Lr)>>>0}for(sa=Dr,Bn=wn>>4,Zr=0;4>Zr;Zr+=2){for(Lr=0,Dr=cr.la>>4+Zr,wn=ii.la>>4+Zr,Cr=0;2>Cr;++Cr){for(Pi=1&wn,gi=0;2>gi;++gi)cn=Pi+(1&Dr),Dr=Dr>>1|(Pi=0<(cn=Ac(qr,On[2],cn,Xr.Qc,0,_r,zn)))<<3,Lr=Lr<<2|(3<cn?3:1<cn?2:_r[zn+0]!=0),zn+=16;Dr>>=2,wn=wn>>1|Pi<<5}wr|=Lr<<4*Zr,sa|=Dr<<4<<Zr,Bn|=(240&wn)<<Zr}cr.la=sa,ii.la=Bn,ni.Hc=_n,ni.Gc=wr,ni.ia=43690&wr?0:Xr.ia,On=!(_n|wr)}if(0<Ut.L&&(Ut.wa[Ut.Y+Ut.ja]=Ut.gd[gr.$b][gr.Za],Ut.wa[Ut.Y+Ut.ja].La|=!On),ln.Ka)return it(xr,7,"Premature end-of-file encountered.")}if(mr(xr),Ut=xn,ln=1,gr=(Kt=xr).D,cr=0<Kt.L&&Kt.M>=Kt.zb&&Kt.M<=Kt.Va,Kt.Aa==0)t:{if(gr.M=Kt.M,gr.uc=cr,ys(Kt,gr),ln=1,gr=(Lr=Kt.D).Nb,cr=(wr=ed[Kt.L])*Kt.R,qr=wr/2*Kt.B,Cr=16*gr*Kt.R,gi=8*gr*Kt.B,On=Kt.sa,ni=Kt.ta-cr+Cr,Xr=Kt.qa,_r=Kt.ra-qr+gi,zn=Kt.Ha,ii=Kt.Ia-qr+gi,wn=(Dr=Lr.M)==0,_n=Dr>=Kt.Va-1,Kt.Aa==2&&ys(Kt,Lr),Lr.uc)for(Pi=(cn=Kt).D.M,e(cn.D.uc),Lr=cn.yb;Lr<cn.Hb;++Lr){Bn=Lr,sa=Pi;var ai=(ki=(Mn=cn).D).Nb;Zr=Mn.R;var ki=ki.wa[ki.Y+Bn],Ei=Mn.sa,pi=Mn.ta+16*ai*Zr+16*Bn,Fi=ki.dd,Or=ki.tc;if(Or!=0)if(e(3<=Or),Mn.L==1)0<Bn&&Ym(Ei,pi,Zr,Or+4),ki.La&&Jm(Ei,pi,Zr,Or),0<sa&&Gm(Ei,pi,Zr,Or+4),ki.La&&Vm(Ei,pi,Zr,Or);else{var Di=Mn.B,oa=Mn.qa,mo=Mn.ra+8*ai*Di+8*Bn,Ja=Mn.Ha,Mn=Mn.Ia+8*ai*Di+8*Bn;ai=ki.ld,0<Bn&&(Mm(Ei,pi,Zr,Or+4,Fi,ai),qm(oa,mo,Ja,Mn,Di,Or+4,Fi,ai)),ki.La&&(zm(Ei,pi,Zr,Or,Fi,ai),Hm(oa,mo,Ja,Mn,Di,Or,Fi,ai)),0<sa&&(Bm(Ei,pi,Zr,Or+4,Fi,ai),Um(oa,mo,Ja,Mn,Di,Or+4,Fi,ai)),ki.La&&($m(Ei,pi,Zr,Or,Fi,ai),Wm(oa,mo,Ja,Mn,Di,Or,Fi,ai))}}if(Kt.ia&&alert("todo:DitherRow"),Ut.put!=null){if(Lr=16*Dr,Dr=16*(Dr+1),wn?(Ut.y=Kt.sa,Ut.O=Kt.ta+Cr,Ut.f=Kt.qa,Ut.N=Kt.ra+gi,Ut.ea=Kt.Ha,Ut.W=Kt.Ia+gi):(Lr-=wr,Ut.y=On,Ut.O=ni,Ut.f=Xr,Ut.N=_r,Ut.ea=zn,Ut.W=ii),_n||(Dr-=wr),Dr>Ut.o&&(Dr=Ut.o),Ut.F=null,Ut.J=null,Kt.Fa!=null&&0<Kt.Fa.length&&Lr<Dr&&(Ut.J=Rn(Kt,Ut,Lr,Dr-Lr),Ut.F=Kt.mb,Ut.F==null&&Ut.F.length==0)){ln=it(Kt,3,"Could not decode alpha data.");break t}Lr<Ut.j&&(wr=Ut.j-Lr,Lr=Ut.j,e(!(1&wr)),Ut.O+=Kt.R*wr,Ut.N+=Kt.B*(wr>>1),Ut.W+=Kt.B*(wr>>1),Ut.F!=null&&(Ut.J+=Ut.width*wr)),Lr<Dr&&(Ut.O+=Ut.v,Ut.N+=Ut.v>>1,Ut.W+=Ut.v>>1,Ut.F!=null&&(Ut.J+=Ut.v),Ut.ka=Lr-Ut.j,Ut.U=Ut.va-Ut.v,Ut.T=Dr-Lr,ln=Ut.put(Ut))}gr+1!=Kt.Ic||_n||(n(Kt.sa,Kt.ta-cr,On,ni+16*Kt.R,cr),n(Kt.qa,Kt.ra-qr,Xr,_r+8*Kt.B,qr),n(Kt.Ha,Kt.Ia-qr,zn,ii+8*Kt.B,qr))}if(!ln)return it(xr,6,"Output aborted.")}return 1}(ge,Re)),Re.bc!=null&&Re.bc(Re),We&=1}return We?(ge.cb=0,We):0})(h,k)||(p=h.a)}}else p=h.a}p==0&&J.Oa!=null&&J.Oa.fd&&(p=fi(J.ba))}J=p}H=J!=0?null:11>H?ee.f.RGBA.eb:ee.f.kb.y}else H=null;return H};var p1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(R,z){for(var I="",G=0;G<4;G++)I+=String.fromCharCode(R[z++]);return I}function d(R,z){return R[z+0]|R[z+1]<<8}function g(R,z){return(R[z+0]|R[z+1]<<8|R[z+2]<<16)>>>0}function m(R,z){return(R[z+0]|R[z+1]<<8|R[z+2]<<16|R[z+3]<<24)>>>0}new c;var f=[0],x=[0],w=[],N=new c,b=t,S=function(R,z){var I={},G=0,de=!1,M=0,U=0;if(I.frames=[],!function(E,q){for(var oe=0;oe<4;oe++)if(E[q+oe]!="RIFF".charCodeAt(oe))return!0;return!1}(R,z)){for(m(R,z+=4),z+=8;z<R.length;){var ve=u(R,z),ue=m(R,z+=4);z+=4;var Y=ue+(1&ue);switch(ve){case"VP8 ":case"VP8L":I.frames[G]===void 0&&(I.frames[G]={}),(be=I.frames[G]).src_off=de?U:z-8,be.src_size=M+ue+8,G++,de&&(de=!1,M=0,U=0);break;case"VP8X":(be=I.header={}).feature_flags=R[z];var se=z+4;be.canvas_width=1+g(R,se),se+=3,be.canvas_height=1+g(R,se),se+=3;break;case"ALPH":de=!0,M=Y+8,U=z-8;break;case"ANIM":(be=I.header).bgcolor=m(R,z),se=z+4,be.loop_count=d(R,se),se+=2;break;case"ANMF":var ke,be;(be=I.frames[G]={}).offset_x=2*g(R,z),z+=3,be.offset_y=2*g(R,z),z+=3,be.width=1+g(R,z),z+=3,be.height=1+g(R,z),z+=3,be.duration=g(R,z),z+=3,ke=R[z++],be.dispose=1&ke,be.blend=ke>>1&1}ve!="ANMF"&&(z+=Y)}return I}}(b,0);S.response=b,S.rgbaoutput=!0,S.dataurl=!1;var j=S.header?S.header:null,C=S.frames?S.frames:null;if(j){j.loop_counter=j.loop_count,f=[j.canvas_height],x=[j.canvas_width];for(var $=0;$<C.length&&C[$].blend!=0;$++);}var Z=C[0],V=N.WebPDecodeRGBA(b,Z.src_off,Z.src_size,x,f);Z.rgba=V,Z.imgwidth=x[0],Z.imgheight=f[0];for(var T=0;T<x[0]*f[0]*4;T++)w[T]=V[T];return this.width=x,this.height=f,this.data=w,this}(function(t){var e,r,n,i,s,o,l,c,u,d=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new c,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var g=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=E;Object.defineProperty(this,"pdf",{get:function(){return q}});var oe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return oe},set:function(Oe){oe=!!Oe}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(Oe){me=!!Oe}});var Ne=0;Object.defineProperty(this,"posX",{get:function(){return Ne},set:function(Oe){isNaN(Oe)||(Ne=Oe)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(Oe){isNaN(Oe)||(Se=Oe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Oe){var le;typeof Oe=="number"?le=[Oe,Oe,Oe,Oe]:((le=new Array(4))[0]=Oe[0],le[1]=Oe.length>=2?Oe[1]:le[0],le[2]=Oe.length>=3?Oe[2]:le[0],le[3]=Oe.length>=4?Oe[3]:le[1]),u.margin=le}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(Oe){Ce=Oe}});var Le=0;Object.defineProperty(this,"lastBreak",{get:function(){return Le},set:function(Oe){Le=Oe}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(Oe){Me=Oe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Oe){Oe instanceof d&&(u=Oe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Oe){u.path=Oe}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(Oe){Ue=Oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Oe){var le;le=m(Oe),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Oe){var le=m(Oe);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Oe){["butt","round","square"].indexOf(Oe)!==-1&&(this.ctx.lineCap=Oe,this.pdf.setLineCap(Oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Oe){isNaN(Oe)||(this.ctx.lineWidth=Oe,this.pdf.setLineWidth(Oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Oe){["bevel","round","miter"].indexOf(Oe)!==-1&&(this.ctx.lineJoin=Oe,this.pdf.setLineJoin(Oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Oe){isNaN(Oe)||(this.ctx.miterLimit=Oe,this.pdf.setMiterLimit(Oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Oe){this.ctx.textBaseline=Oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Oe){["right","end","center","left","start"].indexOf(Oe)!==-1&&(this.ctx.textAlign=Oe)}});var at=null,Ve=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ve},set:function(Oe){at=null,Ve=Oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Oe){var le;if(this.ctx.font=Oe,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Oe))!==null){var Ct=le[1];le[2];var Et=le[3],He=le[4];le[5];var $e=le[6],pt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(He)[2];He=Math.floor(pt==="px"?parseFloat(He)*this.pdf.internal.scaleFactor:pt==="em"?parseFloat(He)*this.pdf.getFontSize():parseFloat(He)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(He);var ct=function(Pt){var Ot,wt,Xt=[],Te=Pt.trim();if(Te==="")return Wg;if(Te in uy)return[uy[Te]];for(;Te!=="";){switch(wt=null,Ot=(Te=hy(Te)).charAt(0)){case'"':case"'":wt=O6(Te.substring(1),Ot);break;default:wt=B6(Te)}if(wt===null||(Xt.push(wt[0]),(Te=hy(wt[1]))!==""&&Te.charAt(0)!==","))return Wg;Te=Te.replace(/^,/,"")}return Xt}($e);if(this.fontFaces){var jt=function(Pt,Ot){if(at===null){var wt=function(Xt){var Te=[];return Object.keys(Xt).forEach(function(It){Xt[It].forEach(function(ot){var Rt=null;switch(ot){case"bold":Rt={family:It,weight:"bold"};break;case"italic":Rt={family:It,style:"italic"};break;case"bolditalic":Rt={family:It,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:It}}Rt!==null&&(Rt.ref={name:It,style:ot},Te.push(Rt))})}),Te}(Pt.getFontList());at=function(Xt){for(var Te={},It=0;It<Xt.length;++It){var ot=zg(Xt[It]),Rt=ot.family,ht=ot.stretch,Ye=ot.style,tr=ot.weight;Te[Rt]=Te[Rt]||{},Te[Rt][ht]=Te[Rt][ht]||{},Te[Rt][ht][Ye]=Te[Rt][ht][Ye]||{},Te[Rt][ht][Ye][tr]=ot}return Te}(wt.concat(Ot))}return at}(this.pdf,this.fontFaces),At=ct.map(function(Pt){return{family:Pt,stretch:"normal",weight:Et,style:Ct}}),Wt=function(Pt,Ot,wt){for(var Xt=(wt=wt||{}).defaultFontFamily||"times",Te=Object.assign({},R6,wt.genericFontFamilies||{}),It=null,ot=null,Rt=0;Rt<Ot.length;++Rt)if(Te[(It=zg(Ot[Rt])).family]&&(It.family=Te[It.family]),Pt.hasOwnProperty(It.family)){ot=Pt[It.family];break}if(!(ot=ot||Pt[Xt]))throw new Error("Could not find a font-family for the rule '"+dy(It)+"' and default family '"+Xt+"'.");if(ot=function(ht,Ye){if(Ye[ht])return Ye[ht];var tr=y0[ht],_e=tr<=y0.normal?-1:1,Je=cy(Ye,v_,tr,_e);if(!Je)throw new Error("Could not find a matching font-stretch value for "+ht);return Je}(It.stretch,ot),ot=function(ht,Ye){if(Ye[ht])return Ye[ht];for(var tr=m_[ht],_e=0;_e<tr.length;++_e)if(Ye[tr[_e]])return Ye[tr[_e]];throw new Error("Could not find a matching font-style for "+ht)}(It.style,ot),!(ot=function(ht,Ye){if(Ye[ht])return Ye[ht];if(ht===400&&Ye[500])return Ye[500];if(ht===500&&Ye[400])return Ye[400];var tr=I6[ht],_e=cy(Ye,y_,tr,ht<400?-1:1);if(!_e)throw new Error("Could not find a matching font-weight for value "+ht);return _e}(It.weight,ot)))throw new Error("Failed to resolve a font for the rule '"+dy(It)+"'.");return ot}(jt,At);this.pdf.setFont(Wt.ref.name,Wt.ref.style)}else{var st="";(Et==="bold"||parseInt(Et,10)>=700||Ct==="bold")&&(st="bold"),Ct==="italic"&&(st+="italic"),st.length===0&&(st="normal");for(var St="",zt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<ct.length;bt++){if(this.pdf.internal.getFont(ct[bt],st,{noFallback:!0,disableWarning:!0})!==void 0){St=ct[bt];break}if(st==="bolditalic"&&this.pdf.internal.getFont(ct[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)St=ct[bt],st="bold";else if(this.pdf.internal.getFont(ct[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){St=ct[bt],st="normal";break}}if(St===""){for(var Dt=0;Dt<ct.length;Dt++)if(zt[ct[Dt]]){St=zt[ct[Dt]];break}}St=St===""?"Times":St,this.pdf.setFont(St,st)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Oe){this.ctx.globalCompositeOperation=Oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Oe){this.ctx.globalAlpha=Oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Oe){this.ctx.lineDashOffset=Oe,be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Oe){this.ctx.lineDash=Oe,be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Oe){this.ctx.ignoreClearRect=!!Oe}})};g.prototype.setLineDash=function(E){this.lineDash=E},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){C.call(this,"fill",!1)},g.prototype.stroke=function(){C.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(E,q){if(isNaN(E)||isNaN(q))throw Tr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var oe=this.ctx.transform.applyToPoint(new o(E,q));this.path.push({type:"mt",x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(E,q)},g.prototype.closePath=function(){var E=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Pr(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){E=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},g.prototype.lineTo=function(E,q){if(isNaN(E)||isNaN(q))throw Tr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var oe=this.ctx.transform.applyToPoint(new o(E,q));this.path.push({type:"lt",x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},g.prototype.quadraticCurveTo=function(E,q,oe,me){if(isNaN(oe)||isNaN(me)||isNaN(E)||isNaN(q))throw Tr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ne=this.ctx.transform.applyToPoint(new o(oe,me)),Se=this.ctx.transform.applyToPoint(new o(E,q));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new o(Ne.x,Ne.y)},g.prototype.bezierCurveTo=function(E,q,oe,me,Ne,Se){if(isNaN(Ne)||isNaN(Se)||isNaN(E)||isNaN(q)||isNaN(oe)||isNaN(me))throw Tr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new o(Ne,Se)),Le=this.ctx.transform.applyToPoint(new o(E,q)),Me=this.ctx.transform.applyToPoint(new o(oe,me));this.path.push({type:"bct",x1:Le.x,y1:Le.y,x2:Me.x,y2:Me.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new o(Ce.x,Ce.y)},g.prototype.arc=function(E,q,oe,me,Ne,Se){if(isNaN(E)||isNaN(q)||isNaN(oe)||isNaN(me)||isNaN(Ne))throw Tr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new o(E,q));E=Ce.x,q=Ce.y;var Le=this.ctx.transform.applyToPoint(new o(0,oe)),Me=this.ctx.transform.applyToPoint(new o(0,0));oe=Math.sqrt(Math.pow(Le.x-Me.x,2)+Math.pow(Le.y-Me.y,2))}Math.abs(Ne-me)>=2*Math.PI&&(me=0,Ne=2*Math.PI),this.path.push({type:"arc",x:E,y:q,radius:oe,startAngle:me,endAngle:Ne,counterclockwise:Se})},g.prototype.arcTo=function(E,q,oe,me,Ne){throw new Error("arcTo not implemented.")},g.prototype.rect=function(E,q,oe,me){if(isNaN(E)||isNaN(q)||isNaN(oe)||isNaN(me))throw Tr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,q),this.lineTo(E+oe,q),this.lineTo(E+oe,q+me),this.lineTo(E,q+me),this.lineTo(E,q),this.lineTo(E+oe,q),this.lineTo(E,q)},g.prototype.fillRect=function(E,q,oe,me){if(isNaN(E)||isNaN(q)||isNaN(oe)||isNaN(me))throw Tr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var Ne={};this.lineCap!=="butt"&&(Ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,q,oe,me),this.fill(),Ne.hasOwnProperty("lineCap")&&(this.lineCap=Ne.lineCap),Ne.hasOwnProperty("lineJoin")&&(this.lineJoin=Ne.lineJoin)}},g.prototype.strokeRect=function(E,q,oe,me){if(isNaN(E)||isNaN(q)||isNaN(oe)||isNaN(me))throw Tr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(E,q,oe,me),this.stroke())},g.prototype.clearRect=function(E,q,oe,me){if(isNaN(E)||isNaN(q)||isNaN(oe)||isNaN(me))throw Tr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,q,oe,me))},g.prototype.save=function(E){E=typeof E!="boolean"||E;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,oe=0;oe<this.pdf.internal.getNumberOfPages();oe++)this.pdf.setPage(oe+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},g.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,oe=0;oe<this.pdf.internal.getNumberOfPages();oe++)this.pdf.setPage(oe+1),this.pdf.internal.out("Q");this.pdf.setPage(q),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(E){var q,oe,me,Ne;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))q=0,oe=0,me=0,Ne=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(Se!==null)q=parseInt(Se[1]),oe=parseInt(Se[2]),me=parseInt(Se[3]),Ne=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)q=parseInt(Se[1]),oe=parseInt(Se[2]),me=parseInt(Se[3]),Ne=parseFloat(Se[4]);else{if(Ne=1,typeof E=="string"&&E.charAt(0)!=="#"){var Ce=new c_(E);E=Ce.ok?Ce.toHex():"#000000"}E.length===4?(q=E.substring(1,2),q+=q,oe=E.substring(2,3),oe+=oe,me=E.substring(3,4),me+=me):(q=E.substring(1,3),oe=E.substring(3,5),me=E.substring(5,7)),q=parseInt(q,16),oe=parseInt(oe,16),me=parseInt(me,16)}}return{r:q,g:oe,b:me,a:Ne,style:E}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(E,q,oe,me){if(isNaN(q)||isNaN(oe)||typeof E!="string")throw Tr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!f.call(this)){var Ne=Y(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;G.call(this,{text:E,x:q,y:oe,scale:Se,angle:Ne,align:this.textAlign,maxWidth:me})}},g.prototype.strokeText=function(E,q,oe,me){if(isNaN(q)||isNaN(oe)||typeof E!="string")throw Tr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){me=isNaN(me)?void 0:me;var Ne=Y(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;G.call(this,{text:E,x:q,y:oe,scale:Se,renderingMode:"stroke",angle:Ne,align:this.textAlign,maxWidth:me})}},g.prototype.measureText=function(E){if(typeof E!="string")throw Tr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,oe=this.pdf.internal.scaleFactor,me=q.internal.getFontSize(),Ne=q.getStringUnitWidth(E)*me/q.internal.scaleFactor;return new function(Se){var Ce=(Se=Se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this}({width:Ne*=Math.round(96*oe/72*1e4)/1e4})},g.prototype.scale=function(E,q){if(isNaN(E)||isNaN(q))throw Tr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var oe=new c(E,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(oe)},g.prototype.rotate=function(E){if(isNaN(E))throw Tr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},g.prototype.translate=function(E,q){if(isNaN(E)||isNaN(q))throw Tr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var oe=new c(1,0,0,1,E,q);this.ctx.transform=this.ctx.transform.multiply(oe)},g.prototype.transform=function(E,q,oe,me,Ne,Se){if(isNaN(E)||isNaN(q)||isNaN(oe)||isNaN(me)||isNaN(Ne)||isNaN(Se))throw Tr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new c(E,q,oe,me,Ne,Se);this.ctx.transform=this.ctx.transform.multiply(Ce)},g.prototype.setTransform=function(E,q,oe,me,Ne,Se){E=isNaN(E)?1:E,q=isNaN(q)?0:q,oe=isNaN(oe)?0:oe,me=isNaN(me)?1:me,Ne=isNaN(Ne)?0:Ne,Se=isNaN(Se)?0:Se,this.ctx.transform=new c(E,q,oe,me,Ne,Se)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(E,q,oe,me,Ne,Se,Ce,Le,Me){var Ue=this.pdf.getImageProperties(E),at=1,Ve=1,Oe=1,le=1;me!==void 0&&Le!==void 0&&(Oe=Le/me,le=Me/Ne,at=Ue.width/me*Le/me,Ve=Ue.height/Ne*Me/Ne),Se===void 0&&(Se=q,Ce=oe,q=0,oe=0),me!==void 0&&Le===void 0&&(Le=me,Me=Ne),me===void 0&&Le===void 0&&(Le=Ue.width,Me=Ue.height);for(var Ct,Et=this.ctx.transform.decompose(),He=Y(Et.rotate.shx),$e=new c,pt=($e=($e=($e=$e.multiply(Et.translate)).multiply(Et.skew)).multiply(Et.scale)).applyToRectangle(new l(Se-q*Oe,Ce-oe*le,me*at,Ne*Ve)),ct=N.call(this,pt),jt=[],At=0;At<ct.length;At+=1)jt.indexOf(ct[At])===-1&&jt.push(ct[At]);if(j(jt),this.autoPaging)for(var Wt=jt[0],st=jt[jt.length-1],St=Wt;St<st+1;St++){this.pdf.setPage(St);var zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=St===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ot=St===1?0:Dt+(St-2)*Pt;if(this.ctx.clip_path.length!==0){var wt=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ct,this.posX+this.margin[3],-Ot+bt+this.ctx.prevPageLastElemOffset),$.call(this,"fill",!0),this.path=wt}var Xt=JSON.parse(JSON.stringify(pt));Xt=S([Xt],this.posX+this.margin[3],-Ot+bt+this.ctx.prevPageLastElemOffset)[0];var Te=(St>Wt||St<st)&&w.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,Pt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,He),Te&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,He)};var N=function(E,q,oe){var me=[];q=q||this.pdf.internal.pageSize.width,oe=oe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ne=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":me.push(Math.floor((E.y+Ne)/oe)+1);break;case"arc":me.push(Math.floor((E.y+Ne-E.radius)/oe)+1),me.push(Math.floor((E.y+Ne+E.radius)/oe)+1);break;case"qct":var Se=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);me.push(Math.floor((Se.y+Ne)/oe)+1),me.push(Math.floor((Se.y+Se.h+Ne)/oe)+1);break;case"bct":var Ce=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);me.push(Math.floor((Ce.y+Ne)/oe)+1),me.push(Math.floor((Ce.y+Ce.h+Ne)/oe)+1);break;case"rect":me.push(Math.floor((E.y+Ne)/oe)+1),me.push(Math.floor((E.y+E.h+Ne)/oe)+1)}for(var Le=0;Le<me.length;Le+=1)for(;this.pdf.internal.getNumberOfPages()<me[Le];)b.call(this);return me},b=function(){var E=this.fillStyle,q=this.strokeStyle,oe=this.font,me=this.lineCap,Ne=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=q,this.font=oe,this.lineCap=me,this.lineWidth=Ne,this.lineJoin=Se},S=function(E,q,oe){for(var me=0;me<E.length;me++)switch(E[me].type){case"bct":E[me].x2+=q,E[me].y2+=oe;case"qct":E[me].x1+=q,E[me].y1+=oe;default:E[me].x+=q,E[me].y+=oe}return E},j=function(E){return E.sort(function(q,oe){return q-oe})},C=function(E,q){for(var oe,me,Ne=this.fillStyle,Se=this.strokeStyle,Ce=this.lineCap,Le=this.lineWidth,Me=Math.abs(Le*this.ctx.transform.scaleX),Ue=this.lineJoin,at=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),Oe=[],le=0;le<Ve.length;le++)if(Ve[le].x!==void 0)for(var Ct=N.call(this,Ve[le]),Et=0;Et<Ct.length;Et+=1)Oe.indexOf(Ct[Et])===-1&&Oe.push(Ct[Et]);for(var He=0;He<Oe.length;He++)for(;this.pdf.internal.getNumberOfPages()<Oe[He];)b.call(this);if(j(Oe),this.autoPaging)for(var $e=Oe[0],pt=Oe[Oe.length-1],ct=$e;ct<pt+1;ct++){this.pdf.setPage(ct),this.fillStyle=Ne,this.strokeStyle=Se,this.lineCap=Ce,this.lineWidth=Me,this.lineJoin=Ue;var jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=ct===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=ct===1?0:Wt+(ct-2)*st;if(this.ctx.clip_path.length!==0){var zt=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(oe,this.posX+this.margin[3],-St+At+this.ctx.prevPageLastElemOffset),$.call(this,E,!0),this.path=zt}if(me=JSON.parse(JSON.stringify(at)),this.path=S(me,this.posX+this.margin[3],-St+At+this.ctx.prevPageLastElemOffset),q===!1||ct===0){var bt=(ct>$e||ct<pt)&&w.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,st,null).clip().discardPath()),$.call(this,E,q),bt&&this.pdf.restoreGraphicsState()}this.lineWidth=Le}else this.lineWidth=Me,$.call(this,E,q),this.lineWidth=Le;this.path=at},$=function(E,q){if((E!=="stroke"||q||!x.call(this))&&(E==="stroke"||q||!f.call(this))){for(var oe,me,Ne=[],Se=this.path,Ce=0;Ce<Se.length;Ce++){var Le=Se[Ce];switch(Le.type){case"begin":Ne.push({begin:!0});break;case"close":Ne.push({close:!0});break;case"mt":Ne.push({start:Le,deltas:[],abs:[]});break;case"lt":var Me=Ne.length;if(Se[Ce-1]&&!isNaN(Se[Ce-1].x)&&(oe=[Le.x-Se[Ce-1].x,Le.y-Se[Ce-1].y],Me>0)){for(;Me>=0;Me--)if(Ne[Me-1].close!==!0&&Ne[Me-1].begin!==!0){Ne[Me-1].deltas.push(oe),Ne[Me-1].abs.push(Le);break}}break;case"bct":oe=[Le.x1-Se[Ce-1].x,Le.y1-Se[Ce-1].y,Le.x2-Se[Ce-1].x,Le.y2-Se[Ce-1].y,Le.x-Se[Ce-1].x,Le.y-Se[Ce-1].y],Ne[Ne.length-1].deltas.push(oe);break;case"qct":var Ue=Se[Ce-1].x+2/3*(Le.x1-Se[Ce-1].x),at=Se[Ce-1].y+2/3*(Le.y1-Se[Ce-1].y),Ve=Le.x+2/3*(Le.x1-Le.x),Oe=Le.y+2/3*(Le.y1-Le.y),le=Le.x,Ct=Le.y;oe=[Ue-Se[Ce-1].x,at-Se[Ce-1].y,Ve-Se[Ce-1].x,Oe-Se[Ce-1].y,le-Se[Ce-1].x,Ct-Se[Ce-1].y],Ne[Ne.length-1].deltas.push(oe);break;case"arc":Ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ne[Ne.length-1].abs)&&Ne[Ne.length-1].abs.push(Le)}}me=q?null:E==="stroke"?"stroke":"fill";for(var Et=!1,He=0;He<Ne.length;He++)if(Ne[He].arc)for(var $e=Ne[He].abs,pt=0;pt<$e.length;pt++){var ct=$e[pt];ct.type==="arc"?T.call(this,ct.x,ct.y,ct.radius,ct.startAngle,ct.endAngle,ct.counterclockwise,void 0,q,!Et):de.call(this,ct.x,ct.y),Et=!0}else if(Ne[He].close===!0)this.pdf.internal.out("h"),Et=!1;else if(Ne[He].begin!==!0){var jt=Ne[He].start.x,At=Ne[He].start.y;M.call(this,Ne[He].deltas,jt,At),Et=!0}me&&R.call(this,me),q&&z.call(this)}},Z=function(E){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,oe=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-oe;case"top":return E+q-oe;case"hanging":return E+q-2*oe;case"middle":return E+q/2-oe;default:return E}},V=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(q,oe){this.colorStops.push([q,oe])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(E,q,oe,me,Ne,Se,Ce,Le,Me){for(var Ue=ve.call(this,oe,me,Ne,Se),at=0;at<Ue.length;at++){var Ve=Ue[at];at===0&&(Me?I.call(this,Ve.x1+E,Ve.y1+q):de.call(this,Ve.x1+E,Ve.y1+q)),U.call(this,E,q,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}Le?z.call(this):R.call(this,Ce)},R=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(E,q){this.pdf.internal.out(r(E)+" "+n(q)+" m")},G=function(E){var q;switch(E.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var oe=this.pdf.getTextDimensions(E.text),me=Z.call(this,E.y),Ne=V.call(this,me)-oe.h,Se=this.ctx.transform.applyToPoint(new o(E.x,me)),Ce=this.ctx.transform.decompose(),Le=new c;Le=(Le=(Le=Le.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var Me,Ue,at,Ve=this.ctx.transform.applyToRectangle(new l(E.x,me,oe.w,oe.h)),Oe=Le.applyToRectangle(new l(E.x,Ne,oe.w,oe.h)),le=N.call(this,Oe),Ct=[],Et=0;Et<le.length;Et+=1)Ct.indexOf(le[Et])===-1&&Ct.push(le[Et]);if(j(Ct),this.autoPaging)for(var He=Ct[0],$e=Ct[Ct.length-1],pt=He;pt<$e+1;pt++){this.pdf.setPage(pt);var ct=pt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[2],Wt=At-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],St=st-this.margin[3],zt=pt===1?0:jt+(pt-2)*Wt;if(this.ctx.clip_path.length!==0){var bt=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Me,this.posX+this.margin[3],-1*zt+ct),$.call(this,"fill",!0),this.path=bt}var Dt=S([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-zt+ct+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*E.scale),at=this.lineWidth,this.lineWidth=at*E.scale);var Pt=this.autoPaging!=="text";if(Pt||Dt.y+Dt.h<=At){if(Pt||Dt.y>=ct&&Dt.x<=st){var Ot=Pt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||st-Dt.x)[0],wt=S([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-zt+ct+this.ctx.prevPageLastElemOffset)[0],Xt=Pt&&(pt>He||pt<$e)&&w.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,Wt,null).clip().discardPath()),this.pdf.text(Ot,wt.x,wt.y,{angle:E.angle,align:q,renderingMode:E.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else Dt.y<At&&(this.ctx.prevPageLastElemOffset+=At-Dt.y);E.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=at)}else E.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*E.scale),at=this.lineWidth,this.lineWidth=at*E.scale),this.pdf.text(E.text,Se.x+this.posX,Se.y+this.posY,{angle:E.angle,align:q,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=at)},de=function(E,q,oe,me){oe=oe||0,me=me||0,this.pdf.internal.out(r(E+oe)+" "+n(q+me)+" l")},M=function(E,q,oe){return this.pdf.lines(E,q,oe,null,null)},U=function(E,q,oe,me,Ne,Se,Ce,Le){this.pdf.internal.out([e(i(oe+E)),e(s(me+q)),e(i(Ne+E)),e(s(Se+q)),e(i(Ce+E)),e(s(Le+q)),"c"].join(" "))},ve=function(E,q,oe,me){for(var Ne=2*Math.PI,Se=Math.PI/2;q>oe;)q-=Ne;var Ce=Math.abs(oe-q);Ce<Ne&&me&&(Ce=Ne-Ce);for(var Le=[],Me=me?-1:1,Ue=q;Ce>1e-5;){var at=Ue+Me*Math.min(Ce,Se);Le.push(ue.call(this,E,Ue,at)),Ce-=Math.abs(at-Ue),Ue=at}return Le},ue=function(E,q,oe){var me=(oe-q)/2,Ne=E*Math.cos(me),Se=E*Math.sin(me),Ce=Ne,Le=-Se,Me=Ce*Ce+Le*Le,Ue=Me+Ce*Ne+Le*Se,at=4/3*(Math.sqrt(2*Me*Ue)-Ue)/(Ce*Se-Le*Ne),Ve=Ce-at*Le,Oe=Le+at*Ce,le=Ve,Ct=-Oe,Et=me+q,He=Math.cos(Et),$e=Math.sin(Et);return{x1:E*Math.cos(q),y1:E*Math.sin(q),x2:Ve*He-Oe*$e,y2:Ve*$e+Oe*He,x3:le*He-Ct*$e,y3:le*$e+Ct*He,x4:E*Math.cos(oe),y4:E*Math.sin(oe)}},Y=function(E){return 180*E/Math.PI},se=function(E,q,oe,me,Ne,Se){var Ce=E+.5*(oe-E),Le=q+.5*(me-q),Me=Ne+.5*(oe-Ne),Ue=Se+.5*(me-Se),at=Math.min(E,Ne,Ce,Me),Ve=Math.max(E,Ne,Ce,Me),Oe=Math.min(q,Se,Le,Ue),le=Math.max(q,Se,Le,Ue);return new l(at,Oe,Ve-at,le-Oe)},ke=function(E,q,oe,me,Ne,Se,Ce,Le){var Me,Ue,at,Ve,Oe,le,Ct,Et,He,$e,pt,ct,jt,At,Wt=oe-E,st=me-q,St=Ne-oe,zt=Se-me,bt=Ce-Ne,Dt=Le-Se;for(Ue=0;Ue<41;Ue++)He=(Ct=(at=E+(Me=Ue/40)*Wt)+Me*((Oe=oe+Me*St)-at))+Me*(Oe+Me*(Ne+Me*bt-Oe)-Ct),$e=(Et=(Ve=q+Me*st)+Me*((le=me+Me*zt)-Ve))+Me*(le+Me*(Se+Me*Dt-le)-Et),Ue==0?(pt=He,ct=$e,jt=He,At=$e):(pt=Math.min(pt,He),ct=Math.min(ct,$e),jt=Math.max(jt,He),At=Math.max(At,$e));return new l(Math.round(pt),Math.round(ct),Math.round(jt-pt),Math.round(At-ct))},be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,q,oe=(E=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:q}));this.prevLineDash!==oe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=oe)}}})(Tt.API),function(t){var e=function(o){var l,c,u,d,g,m,f,x,w,N;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(g=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(m=(g=((g=((g=((g=(g-(N=g%85))/85)-(w=g%85))/85)-(x=g%85))/85)-(f=g%85))/85)%85,c.push(m+33,f+33,x+33,w+33,N+33)):c.push(122);return function(b,S){for(var j=S;j>0;j--)b.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,g,m=String,f="length",x=255,w="charCodeAt",N="slice",b="replace";for(o[N](-2),o=o[N](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),u=[],d=0,g=(o+=l="uuuuu"[N](o[f]%5||5))[f];g>d;d+=5)c=52200625*(o[w](d)-33)+614125*(o[w](d+1)-33)+7225*(o[w](d+2)-33)+85*(o[w](d+3)-33)+(o[w](d+4)-33),u.push(x&c>>24,x&c>>16,x&c>>8,x&c);return function(S,j){for(var C=j;C>0;C--)S.pop()}(u,l[f]),m.fromCharCode.apply(m,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=d0(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Tt.API),function(t){t.loadFile=function(e,r,n){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var g=new XMLHttpRequest,m=0,f=function(x){var w=x.length,N=[],b=String.fromCharCode;for(m=0;m<w;m+=1)N.push(b(255&x.charCodeAt(m)));return N.join("")};if(g.open("GET",c,!u),g.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(g.onload=function(){g.status===200?d(f(this.responseText)):d(void 0)}),g.send(null),u&&g.status===200)return f(g.responseText)}(i,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Tt.API),function(t){function e(){return(ar.html2canvas?Promise.resolve(ar.html2canvas):va(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(ar.DOMPurify?Promise.resolve(ar.DOMPurify):va(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Pr(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(l(g,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var x=d[f],w=x.src.find(function(N){return N.format==="truetype"});w&&u.addFont(w.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,u.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,g){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return u.updateProgress(null,d),m}).then(d,g).then(function(m){return u.updateProgress(1),m})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),m=u.call(g,l,c);return o.convert(m,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Tt.getPageSize=function(l,c,u){if(Pr(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var g,m=(""+u).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+c}var x,w=0,N=0;if(f.hasOwnProperty(m))w=f[m][1]/g,N=f[m][0]/g;else try{w=u[1],N=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",N>w&&(x=N,N=w,w=x);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>N&&(x=N,N=w,w=x)}return{width:N,height:w,unit:c,k:g,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(zg):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Tt.API),Tt.API.addJS=function(t){return gy=t,this.internal.events.subscribe("postPutResources",function(){Rd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+gy+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Rd!==void 0&&fy!==void 0&&this.internal.out("/Names <</JavaScript "+Rd+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var g=r.internal.newObject();d.push(g);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var o={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(Tt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(g){for(var m,f=256*g.charCodeAt(4)+g.charCodeAt(5),x=g.length,w={width:0,height:0,numcomponents:1},N=4;N<x;N+=2){if(N+=f,e.indexOf(g.charCodeAt(N+1))!==-1){m=256*g.charCodeAt(N+5)+g.charCodeAt(N+6),w={width:256*g.charCodeAt(N+7)+g.charCodeAt(N+8),height:m,numcomponents:g.charCodeAt(N+9)};break}f=256*g.charCodeAt(N+2)+g.charCodeAt(N+3)}return w}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:i}}return d}}(Tt.API),Tt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=_6(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;i=u&&c===1?function(V){for(var T=V.width,R=V.height,z=V.data,I=V.palette,G=V.depth,de=!1,M=[],U=[],ve=void 0,ue=!1,Y=0,se=0;se<I.length;se++){var ke=yv(I[se],4),be=ke[0],E=ke[1],q=ke[2],oe=ke[3];M.push(be,E,q),oe!=null&&(oe===0?(Y++,U.length<1&&U.push(se)):oe<255&&(ue=!0))}if(ue||Y>1){de=!0,U=void 0;var me=T*R;ve=new Uint8Array(me);for(var Ne=new DataView(z.buffer),Se=0;Se<me;Se++){var Ce=Hg(Ne,Se,G),Le=yv(I[Ce],4)[3];ve[Se]=Le}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:z,alphaBytes:ve,needSMask:de,palette:M,mask:U}}(s):c===2||c===4?function(V){for(var T=V.data,R=V.width,z=V.height,I=V.channels,G=V.depth,de=I===2?"DeviceGray":"DeviceRGB",M=I-1,U=R*z,ve=M,ue=U*ve,Y=1*U,se=Math.ceil(ue*G/8),ke=Math.ceil(Y*G/8),be=new Uint8Array(se),E=new Uint8Array(ke),q=new DataView(T.buffer),oe=new DataView(be.buffer),me=new DataView(E.buffer),Ne=!1,Se=0;Se<U;Se++){for(var Ce=Se*I,Le=0;Le<ve;Le++)Sy(oe,Hg(q,Ce+Le,G),Se*ve+Le,G);var Me=Hg(q,Ce+ve,G);Me<(1<<G)-1&&(Ne=!0),Sy(me,Me,1*Se,G)}return{colorSpace:de,colorsPerPixel:M,colorBytes:be,alphaBytes:E,needSMask:Ne}}(s):function(V){var T=V.data,R=V.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:T instanceof Uint8Array?T:new Uint8Array(T.buffer),needSMask:!1}}(s);var g,m,f,x=i,w=x.colorSpace,N=x.colorsPerPixel,b=x.colorBytes,S=x.alphaBytes,j=x.needSMask,C=x.palette,$=x.mask,Z=null;return n!==Tt.API.image_compression.NONE&&typeof d0=="function"?(Z=function(V){var T;switch(V){case Tt.API.image_compression.FAST:T=11;break;case Tt.API.image_compression.MEDIUM:T=13;break;case Tt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(n),g=this.decode.FLATE_DECODE,m="/Predictor ".concat(Z," "),t=yy(b,o*N,N,n),j&&(f=yy(S,o,1,n))):(g=void 0,m="",t=b,j&&(f=S)),m+="/Colors ".concat(N," /BitsPerComponent ").concat(d," /Columns ").concat(o),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:g,decodeParameters:m,transparency:$,palette:C,sMask:f,predictor:Z,width:o,height:l,bitsPerComponent:d,colorSpace:w}}},function(t){t.processGIF89A=function(e,r,n,i){var s=new $6(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new Gg(100).encode(u,100);return t.processJPEG.call(this,d,r,n,i)},t.processGIF87A=t.processGIF89A}(Tt.API),ca.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ca.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Tr.log("bit decode error:"+r)}},ca.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},ca.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},ca.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ca.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},ca.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},ca.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},ca.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=o}},ca.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var s=new ca(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new Gg(100).encode(c,100);return t.processJPEG.call(this,u,r,n,i)}}(Tt.API),Ny.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var s=new Ny(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new Gg(100).encode(c,100);return t.processJPEG.call(this,u,r,n,i)}}(Tt.API),Tt.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,u=0;u<i;u+=4){var d=n[u],g=n[u+1],m=n[u+2],f=n[u+3];s[l++]=d,s[l++]=g,s[l++]=m,o[c++]=f}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Tt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fl=Tt.API,Od=fl.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,g=e.doKerning!==!1,m=0,f=t.length,x=0,w=l[0]||c,N=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(m=g&&Pr(u[n])==="object"&&!isNaN(parseInt(u[n][x],10))?u[n][x]/d:0,N.push((l[n]||w)/c+m)),x=n;return N},py=fl.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return fl.processArabic&&(t=fl.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Od.apply(this,arguments).reduce(function(s,o){return s+o},0)},my=function(t,e,r,n){for(var i=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;i.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(i.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&i.push(t.slice(c,s)),i},vy=function(t,e,r){r||(r={});var n,i,s,o,l,c,u,d=[],g=[d],m=r.textIndent||0,f=0,x=0,w=t.split(" "),N=Od.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var b=Array(c).join(" "),S=[];w.map(function(C){(C=C.split(/\s*\n/)).length>1?S=S.concat(C.map(function($,Z){return(Z&&$.length?`
`:"")+$})):S.push(C[0])}),w=S,c=py.apply(this,[b,r])}for(s=0,o=w.length;s<o;s++){var j=0;if(n=w[s],c&&n[0]==`
`&&(n=n.substr(1),j=1),m+f+(x=(i=Od.apply(this,[n,r])).reduce(function(C,$){return C+$},0))>e||j){if(x>e){for(l=my.apply(this,[n,i,e-(m+f),e]),d.push(l.shift()),d=[l.pop()];l.length;)g.push([l.shift()]);x=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(C,$){return C+$},0)}else d=[n];g.push(d),m=x+c,f=N}else d.push(n),m+=f+x,f=N}return u=c?function(C,$){return($?b:"")+C.join(" ")}:function(C){return C.join(" ")},g.map(u)},fl.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var g=this.internal.getFont(d.fontName,d.fontStyle),m="Unicode";return g.metadata[m]?{widths:g.metadata[m].widths||{0:1},kerning:g.metadata[m].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(vy.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var o=function(m){return"0x"+parseInt(m,10).toString(16)},l=t.__fontmetrics__.compress=function(m){var f,x,w,N,b=["{"];for(var S in m){if(f=m[S],isNaN(parseInt(S,10))?x="'"+S+"'":(S=parseInt(S,10),x=(x=o(S).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof f=="number")f<0?(w=o(f).slice(3),N="-"):(w=o(f).slice(2),N=""),w=N+w.slice(0,-1)+i[w.slice(-1)];else{if(Pr(f)!=="object")throw new Error("Don't know what to do with value type "+Pr(f)+".");w=l(f)}b.push(x+w)}return b.push("}"),b.join("")},c=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,x,w,N,b={},S=1,j=b,C=[],$="",Z="",V=m.length-1,T=1;T<V;T+=1)(N=m[T])=="'"?f?(w=f.join(""),f=void 0):f=[]:f?f.push(N):N=="{"?(C.push([j,w]),j={},w=void 0):N=="}"?((x=C.pop())[0][x[1]]=j,w=void 0,j=x[0]):N=="-"?S=-1:w===void 0?n.hasOwnProperty(N)?($+=n[N],w=parseInt($,16)*S,S=1,$=""):$+=N:n.hasOwnProperty(N)?(Z+=n[N],j[w]=parseInt(Z,16)*S,S=1,w=void 0,Z=""):Z+=N;return b},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},g={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var f=m.font,x=g.Unicode[f.postScriptName];x&&(f.metadata.Unicode={},f.metadata.Unicode.widths=x.widths,f.metadata.Unicode.kerning=x.kerning);var w=d.Unicode[f.postScriptName];w&&(f.metadata.Unicode.encoding=w,f.encoding=w.codePages[0])}])}(Tt.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Zd(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(Tt),Tt.API.addSvgAsImage=function(t,e,r,n,i,s,o,l){if(isNaN(e)||isNaN(r))throw Tr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Tr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(ar.canvg?Promise.resolve(ar.canvg):va(()=>import("./index.es-DiIHicj1.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(d)}).then(function(){g.addImage(c.toDataURL("image/jpeg",1),e,r,n,i,o,l)})},Tt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},Tt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,g=0;function m(x,w){var N,b=!1;for(N=0;N<x.length;N+=1)x[N]===w&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=l.length;for(g=0;g<f;g+=1)r[l[g]].value=r[l[g]].defaultValue,r[l[g]].explicitSet=!1}if(Pr(t)==="object"){for(i in t)if(s=t[i],m(l,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&m(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,w=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?w.push("/"+x+" /"+r[x].value):w.push("/"+x+" "+r[x].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Tt.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],g=0,m=s.length;g<m;++g){if(l=o.metadata.characterToGlyph(s.charCodeAt(g)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(g),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,g,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,m=(l=Object.keys(s).sort(function(f,x){return f-x})).length;g<m;g++)o=l[g],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var g=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",x=0;x<m.length;x++)f+=String.fromCharCode(m[x]);var w=u();d({data:f,addLength1:!0,objectId:w}),c("endobj");var N=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:N}),c("endobj");var b=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+vl(l.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+vl(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+t.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+N+" 0 R"),c("/BaseFont /"+vl(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var g=l.metadata.rawData,m="",f=0;f<g.length;f++)m+=String.fromCharCode(g[f]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var w=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var N=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+vl(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+vl(l.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},g=s.mutex||{},m=g.pdfEscape,f=g.activeFontKey,x=g.fonts,w=f,N="",b=0,S="",j=x[w].encoding;if(x[w].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:g};for(S=l,w=f,Array.isArray(l)&&(S=l[0]),b=0;b<S.length;b+=1)x[w].metadata.hasOwnProperty("cmap")&&(o=x[w].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),o||S[b].charCodeAt(0)<256&&x[w].metadata.hasOwnProperty("Unicode")?N+=S[b]:N+="";var C="";return parseInt(w.slice(1))<14||j==="WinAnsiEncoding"?C=m(N,w).split("").map(function($){return $.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(C=r(N,x[w])),g.isHex=!0,{text:C,x:c,y:u,options:d,mutex:g}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(i(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:o})).text}])}(Tt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Tt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,o,l,c,u,d,g=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,j=0;this.__bidiEngine__={};var C=function(I){var G=I.charCodeAt(),de=G>>8,M=w[de];return M!==void 0?g[256*M+(255&G)]:de===252||de===253?"AL":b.test(de)?"L":de===8?"R":"N"},$=function(I){for(var G,de=0;de<I.length;de++){if((G=C(I.charAt(de)))==="L")return!1;if(G==="R")return!0}return!1},Z=function(I,G,de,M){var U,ve,ue,Y,se=G[M];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(se="AN");break;case"AL":S=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":M<1||M+1>=G.length||(U=de[M-1])!=="EN"&&U!=="AN"||(ve=G[M+1])!=="EN"&&ve!=="AN"?se="N":S&&(ve="AN"),se=ve===U?ve:"N";break;case"ES":se=(U=M>0?de[M-1]:"B")==="EN"&&M+1<G.length&&G[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&de[M-1]==="EN"){se="EN";break}if(S){se="N";break}for(ue=M+1,Y=G.length;ue<Y&&G[ue]==="ET";)ue++;se=ue<Y&&G[ue]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Y=G.length,ue=M+1;ue<Y&&G[ue]==="NSM";)ue++;if(ue<Y){var ke=I[M],be=ke>=1425&&ke<=2303||ke===64286;if(U=G[ue],be&&(U==="R"||U==="AL")){se="R";break}}}se=M<1||(U=G[M-1])==="B"?"N":de[M-1];break;case"B":S=!1,i=!0,se=j;break;case"S":s=!0,se="N"}return se},V=function(I,G,de){var M=I.split("");return de&&T(M,de,{hiLevel:j}),M.reverse(),G&&G.reverse(),M.join("")},T=function(I,G,de){var M,U,ve,ue,Y,se=-1,ke=I.length,be=0,E=[],q=j?f:m,oe=[];for(S=!1,i=!1,s=!1,U=0;U<ke;U++)oe[U]=C(I[U]);for(ve=0;ve<ke;ve++){if(Y=be,E[ve]=Z(I,oe,E,ve),M=240&(be=q[Y][x[E[ve]]]),be&=15,G[ve]=ue=q[be][5],M>0)if(M===16){for(U=se;U<ve;U++)G[U]=1;se=-1}else se=-1;if(q[be][6])se===-1&&(se=ve);else if(se>-1){for(U=se;U<ve;U++)G[U]=ue;se=-1}oe[ve]==="B"&&(G[ve]=0),de.hiLevel|=ue}s&&function(me,Ne,Se){for(var Ce=0;Ce<Se;Ce++)if(me[Ce]==="S"){Ne[Ce]=j;for(var Le=Ce-1;Le>=0&&me[Le]==="WS";Le--)Ne[Le]=j}}(oe,G,ke)},R=function(I,G,de,M,U){if(!(U.hiLevel<I)){if(I===1&&j===1&&!i)return G.reverse(),void(de&&de.reverse());for(var ve,ue,Y,se,ke=G.length,be=0;be<ke;){if(M[be]>=I){for(Y=be+1;Y<ke&&M[Y]>=I;)Y++;for(se=be,ue=Y-1;se<ue;se++,ue--)ve=G[se],G[se]=G[ue],G[ue]=ve,de&&(ve=de[se],de[se]=de[ue],de[ue]=ve);be=Y}be++}}},z=function(I,G,de){var M=I.split(""),U={hiLevel:j};return de||(de=[]),T(M,de,U),function(ve,ue,Y){if(Y.hiLevel!==0&&d)for(var se,ke=0;ke<ve.length;ke++)ue[ke]===1&&(se=N.indexOf(ve[ke]))>=0&&(ve[ke]=N[se+1])}(M,de,U),R(2,M,G,de,U),R(1,M,G,de,U),M.join("")};return this.__bidiEngine__.doBidiReorder=function(I,G,de){if(function(U,ve){if(ve)for(var ue=0;ue<U.length;ue++)ve[ue]=ue;l===void 0&&(l=$(U)),u===void 0&&(u=$(U))}(I,G),o||!c||u)if(o&&c&&l^u)j=l?1:0,I=V(I,G,de);else if(!o&&c&&u)j=l?1:0,I=z(I,G,de),I=V(I,G);else if(!o||l||c||u){if(o&&!c&&l^u)I=V(I,G),l?(j=0,I=z(I,G,de)):(j=1,I=z(I,G,de),I=V(I,G));else if(o&&l&&!c&&u)j=1,I=z(I,G,de),I=V(I,G);else if(!o&&!c&&l^u){var M=d;l?(j=1,I=z(I,G,de),j=0,d=!1,I=z(I,G,de),d=M):(j=0,I=z(I,G,de),I=V(I,G),j=1,d=!1,I=z(I,G,de),d=M,I=V(I,G))}}else j=0,I=z(I,G,de);else j=l?1:0,I=z(I,G,de);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,c=I.isOutputVisual,l=I.isInputRtl,u=I.isOutputRtl,d=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(Tt),Tt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Xs(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new nP(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new z6(this.contents),this.head=new H6(this),this.name=new K6(this),this.cmap=new x_(this),this.toUnicode={},this.hhea=new G6(this),this.maxp=new Q6(this),this.hmtx=new X6(this),this.post=new V6(this),this.os2=new Y6(this),this.loca=new rP(this),this.glyf=new Z6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var _a,Xs=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),z6=function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,o,l,c,u,d,g,m,f,x,w;for(w in f=Object.keys(r).length,c=Math.log(2),g=16*Math.floor(Math.log(f)/c),o=Math.floor(g/c),d=16*f-g,(i=new Xs).writeInt(this.scalarType),i.writeShort(f),i.writeShort(g),i.writeShort(o),i.writeShort(d),s=16*f,u=i.pos+s,l=null,x=[],r)for(m=r[w],i.writeString(w),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),x=x.concat(m),w==="head"&&(l=u),u+=m.length;u%4;)x.push(0),u++;return i.write(x),n=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,o;for(r=__.call(r);r.length%4;)r.push(0);for(s=new Xs(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),W6={}.hasOwnProperty,Ma=function(t,e){for(var r in e)W6.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};_a=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var H6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Xs).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),Cy=function(){function t(e,r){var n,i,s,o,l,c,u,d,g,m,f,x,w,N,b,S,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,s=function(){var C,$;for($=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)$.push(e.readUInt16());return $}(),e.pos+=2,w=function(){var C,$;for($=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)$.push(e.readUInt16());return $}(),u=function(){var C,$;for($=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)$.push(e.readUInt16());return $}(),d=function(){var C,$;for($=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)$.push(e.readUInt16());return $}(),i=(this.length-e.pos+this.offset)/2,l=function(){var C,$;for($=[],c=C=0;0<=i?C<i:C>i;c=0<=i?++C:--C)$.push(e.readUInt16());return $}(),c=b=0,j=s.length;b<j;c=++b)for(N=s[c],n=S=x=w[c];x<=N?S<=N:S>=N;n=x<=N?++S:--S)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-x)-(m-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=g}return t.encode=function(e,r){var n,i,s,o,l,c,u,d,g,m,f,x,w,N,b,S,j,C,$,Z,V,T,R,z,I,G,de,M,U,ve,ue,Y,se,ke,be,E,q,oe,me,Ne,Se,Ce,Le,Me,Ue,at;switch(M=new Xs,o=Object.keys(e).sort(function(Ve,Oe){return Ve-Oe}),r){case"macroman":for(w=0,N=function(){var Ve=[];for(x=0;x<256;++x)Ve.push(0);return Ve}(),S={0:0},s={},U=0,se=o.length;U<se;U++)S[Le=e[i=o[U]]]==null&&(S[Le]=++w),s[i]={old:e[i],new:S[e[i]]},N[i]=S[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(N),{charMap:s,subtable:M.data,maxGlyphID:w+1};case"unicode":for(G=[],g=[],j=0,S={},n={},b=u=null,ve=0,ke=o.length;ve<ke;ve++)S[$=e[i=o[ve]]]==null&&(S[$]=++j),n[i]={old:$,new:S[$]},l=S[$]-i,b!=null&&l===u||(b&&g.push(b),G.push(i),u=l),b=i;for(b&&g.push(b),g.push(65535),G.push(65535),z=2*(R=G.length),T=2*Math.pow(Math.log(R)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,V=2*R-T,c=[],Z=[],f=[],x=ue=0,be=G.length;ue<be;x=++ue){if(I=G[x],d=g[x],I===65535){c.push(0),Z.push(0);break}if(I-(de=n[I].new)>=32768)for(c.push(0),Z.push(2*(f.length+R-x)),i=Y=I;I<=d?Y<=d:Y>=d;i=I<=d?++Y:--Y)f.push(n[i].new);else c.push(de-I),Z.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*R+2*f.length),M.writeUInt16(0),M.writeUInt16(z),M.writeUInt16(T),M.writeUInt16(m),M.writeUInt16(V),Se=0,E=g.length;Se<E;Se++)i=g[Se],M.writeUInt16(i);for(M.writeUInt16(0),Ce=0,q=G.length;Ce<q;Ce++)i=G[Ce],M.writeUInt16(i);for(Me=0,oe=c.length;Me<oe;Me++)l=c[Me],M.writeUInt16(l);for(Ue=0,me=Z.length;Ue<me;Ue++)C=Z[Ue],M.writeUInt16(C);for(at=0,Ne=f.length;at<Ne;at++)w=f[at],M.writeUInt16(w);return{charMap:n,subtable:M.data,maxGlyphID:j+1}}},t}(),x_=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new Cy(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=Cy.encode(e,r),(i=new Xs).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),G6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Y6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),V6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),J6=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},K6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,o,l,c,u,d,g,m;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,g=n.length;d<g;s=++d)i=n[s],e.pos=i.offset,u=e.readString(i.length),o=new J6(u,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Q6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),X6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,g,m;for(m=[],u=0,d=(g=this.metrics).length;u<d;u++)s=g[u],m.push(s.advance);return m}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),__=[].slice,Z6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,o,l,c,u,d,g;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new Xs(r.read(i))).readShort(),u=l.readShort(),g=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new tP(l,u,g,c,d):new eP(l,o,u,g,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)i=e[r[l]],s.push(o.length),i&&(o=o.concat(i.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),eP=function(){function t(e,r,n,i,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),tP=function(){function t(e,r,n,i,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Xs(__.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),rP=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ma(t,_a),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<n.length;++o)if(n[o]=i,s<r.length&&r[s]==o){++s,n[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),nP=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,o,l,c,u,d,g,m,f,x,w,N,b;for(i in n=x_.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},b=n.charMap)f[(c=b[i]).old]=c.new;for(x in m=n.maxGlyphID,o)x in f||(f[x]=m++);return d=function(S){var j,C;for(j in C={},S)C[S[j]]=j;return C}(f),g=Object.keys(d).sort(function(S,j){return S-j}),w=function(){var S,j,C;for(C=[],S=0,j=g.length;S<j;S++)l=g[S],C.push(d[l]);return C}(),s=this.font.glyf.encode(o,w,f),u=this.font.loca.encode(s.offsets,w),N={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},t}();Tt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)o=r[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();function w_(t,e,r,n,i){n=n||{};var s=1.15,o=i.internal.scaleFactor,l=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,g="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(g=typeof t=="string"?t.split(d):t,m=g.length||1),r+=l*(2-s),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var f=l;if(n.halign==="center"&&(f*=.5),g&&m>=1){for(var x=0;x<g.length;x++)i.text(g[x],e-i.getStringUnitWidth(g[x])*f,r),r+=u;return i}e-=i.getStringUnitWidth(t)*f}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var Ly={},ql=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:Ly=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,s){return this.jsPDFDocument.rect(e,r,n,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return Ly||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),b0=function(t,e){return b0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},b0(t,e)};function S_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");b0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var j_=function(t){S_(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function iP(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function aP(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Th(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function N_(t,e,r,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var o=C_(i,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function C_(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function df(t,e){var r,n,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function L_(t,e){var r=df(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function sP(t,e,r,n,i){var s={},o=1.3333333333333333,l=Yg(e,function(j){return i.getComputedStyle(j).backgroundColor});l!=null&&(s.fillColor=l);var c=Yg(e,function(j){return i.getComputedStyle(j).color});c!=null&&(s.textColor=c);var u=lP(n,r);u&&(s.cellPadding=u);var d="borderTopColor",g=o*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var f=(parseFloat(m)||0)/g;f&&(s.lineWidth=f)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/g,right:(parseFloat(n.borderRightWidth)||0)/g,bottom:(parseFloat(n.borderBottomWidth)||0)/g,left:(parseFloat(n.borderLeftWidth)||0)/g},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var x=Yg(e,function(j){return i.getComputedStyle(j)[d]});x!=null&&(s.lineColor=x);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var N=parseInt(n.fontSize||"");isNaN(N)||(s.fontSize=N/o);var b=oP(n);b&&(s.fontStyle=b);var S=(n.fontFamily||"").toLowerCase();return t.indexOf(S)!==-1&&(s.font=S),s}function oP(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Yg(t,e){var r=A_(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function A_(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:A_(t.parentElement,e):r}function lP(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=df(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function P_(t,e,r,n,i){var s,o;n===void 0&&(n=!1),i===void 0&&(i=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],g=[],m=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:g,foot:m};for(var f=0;f<l.rows.length;f++){var x=l.rows[f],w=(o=(s=x==null?void 0:x.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),N=cP(c,u,r,x,n,i);N&&(w==="thead"?d.push(N):w==="tfoot"?m.push(N):g.push(N))}return{head:d,body:g,foot:m}}function cP(t,e,r,n,i,s){for(var o=new j_(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(i||u.display!=="none"){var d=void 0;s&&(d=sP(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:uP(c)})}}var g=r.getComputedStyle(n);if(o.length>0&&(i||g.display!=="none"))return o}function uP(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function dP(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function ss(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function k_(t,e){var r=new ql(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();dP(i,n,e);var s=ss({},i,n,e),o;typeof window<"u"&&(o=window);var l=hP(i,n,e),c=fP(i,n,e),u=gP(r,s),d=mP(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function hP(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],g=r[c];n.columnStyles=ss({},u,d,g)}else{var m=[t,e,r],f=m.map(function(x){return x[c]||{}});n[c]=ss({},f[0],f[1],f[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];i(l)}return n}function fP(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&i.didParseCell.push(l.didParseCell),l.willDrawCell&&i.willDrawCell.push(l.willDrawCell),l.didDrawCell&&i.didDrawCell.push(l.didDrawCell),l.willDrawPage&&i.willDrawPage.push(l.willDrawPage),l.didDrawPage&&i.didDrawPage.push(l.didDrawPage)}return i}function gP(t,e){var r,n,i,s,o,l,c,u,d,g,m,f,x=df(e.margin,40/t.scaleFactor()),w=(r=pP(t,e.startY))!==null&&r!==void 0?r:x.top,N;e.showFoot===!0?N="everyPage":e.showFoot===!1?N="never":N=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var b;e.showHead===!0?b="everyPage":e.showHead===!1?b="never":b=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var S=(s=e.useCss)!==null&&s!==void 0?s:!1,j=e.theme||(S?"plain":"striped"),C=!!e.horizontalPageBreak,$=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:S,theme:j,startY:w,margin:x,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:b,showFoot:N,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:C,horizontalPageBreakRepeat:$,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function pP(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function mP(t,e,r){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=P_(t,e.html,r,o,e.useCss)||{};n=l.head||n,i=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||vP(n,i,s);return{columns:c,head:n,body:i,foot:s}}function vP(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=i.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};i.push(d)}}),i}var x0=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),yP=function(t){S_(e,t);function e(r,n,i,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=i,c.row=s,c.column=o,c.section=s.section,c}return e}(x0),bP=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new yP(e,this,n,i,s,o),g=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new x0(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new x0(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),E_=function(){function t(e,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof j_&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>i?u:i},0)},t}(),F_=function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=df(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),xP=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function _P(t,e){wP(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=_0(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=_0(r,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),jP(e),NP(e,t),SP(e)}function wP(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=L_(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var g=u.padding("horizontal");u.contentWidth=Th(u.text,u.styles,t)+g;var m=Th(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var f=10/r;u.minWidth=u.styles.minCellWidth||f,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},g=d.cellWidth||d.minCellWidth;g&&typeof g=="number"&&(c.minWidth=g,c.wrappedWidth=g)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function _0(t,e,r){for(var n=e,i=t.reduce(function(f,x){return f+x.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/i,c=n*l,u=o.width+c,d=r(o),g=u<d?d:u;e-=g-o.width,o.width=g}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(f){return e<0?f.width>r(f):!0});m.length&&(e=_0(m,e,r))}return e}function SP(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var s=n[i],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var g=n.length-i,m=d.rowSpan>g?g:d.rowSpan;e[c.index]={cell:d,left:m,row:s}}}}}function jP(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(i){var u=i;delete n.cells[c.index],i=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=c.width;continue}u.width=c.width+s}}}function NP(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var s=i[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Ay(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Ay(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var g=u.styles.overflow(u.text,d);typeof g=="string"?u.text=[g]:u.text=g}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function Ay(t,e,r,n,i){return t.map(function(s){return CP(s,e,r,n,i)})}function CP(t,e,r,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Th(t,r,n))return t;for(;e<Th(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function D_(t,e){var r=new ql(t),n=LP(e,r.scaleFactor()),i=new bP(e,n);return _P(r,i),r.applyStyles(r.userStyles),i}function LP(t,e){var r=t.content,n=PP(r.columns);if(r.head.length===0){var i=Py(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=Py(n,"foot");i&&r.foot.push(i)}var s=t.settings.theme,o=t.styles;return{columns:n,head:Vg("head",r.head,n,o,s,e),body:Vg("body",r.body,n,o,s,e),foot:Vg("foot",r.foot,n,o,s,e)}}function Vg(t,e,r,n,i,s){var o={},l=e.map(function(c,u){for(var d=0,g={},m=0,f=0,x=0,w=r;x<w.length;x++){var N=w[x];if(o[N.index]==null||o[N.index].left===0)if(f===0){var b=void 0;Array.isArray(c)?b=c[N.index-m-d]:b=c[N.dataKey];var S={};typeof b=="object"&&!Array.isArray(b)&&(S=(b==null?void 0:b.styles)||{});var j=kP(t,N,u,i,n,s,S),C=new F_(b,j,t);g[N.dataKey]=C,g[N.index]=C,f=C.colSpan-1,o[N.index]={left:C.rowSpan-1,times:f}}else f--,m++;else o[N.index].left--,f=o[N.index].times,d++}return new E_(c,u,t,g)});return l}function Py(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=AP(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function AP(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function PP(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new xP(i,e,r)})}function kP(t,e,r,n,i,s,o){var l=aP(n),c;t==="head"?c=i.headStyles:t==="body"?c=i.bodyStyles:t==="foot"&&(c=i.footStyles);var u=ss({},l.table,l[t],i.styles,c),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=t==="body"?d:{},m=t==="body"&&r%2===0?ss({},l.alternateRow,i.alternateRowStyles):{},f=iP(s),x=ss({},f,u,m,g);return ss(x,o)}function EP(t,e,r){var n;r===void 0&&(r={});var i=L_(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var f=e.columns.find(function(x){return x.dataKey===m||x.index===m});f&&!s.has(f.index)&&(s.set(f.index,!0),o.push(f.index),l.push(e.columns[f.index]),i-=f.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var g=e.columns[d].wrappedWidth;if(u||i>=g)u=!1,o.push(d),l.push(e.columns[d]),i-=g;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function FP(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=EP(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function T_(t,e){var r=e.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+i.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(m,f){return m+f.height},0);l+=u}var d=new ql(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(R_(d),s.y=i.top),e.callWillDrawPageHooks(d,s);var g=ss({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?DP(d,e,g,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return hs(d,e,m,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,f){var x=f===e.body.length-1;Ih(d,e,m,x,g,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return hs(d,e,m,s,e.columns)})),N_(d,e,g,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function DP(t,e,r,n){var i=FP(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?cu(t,e,r,n,u.columns,!0):ky(t,e,n,u.columns),TP(t,e,r,n,u.columns),Jg(t,e,n,u.columns)});else for(var o=-1,l=i[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?cu(t,e,r,n,d,!0):ky(t,e,n,d),u=Ey(t,e,o+1,n,d),Jg(t,e,n,d)}var g=u-o;i.slice(1).forEach(function(m){t.applyStyles(t.userStyles),cu(t,e,r,n,m.columns,!0),Ey(t,e,o+1,n,m.columns,g),Jg(t,e,n,m.columns)}),o=u};o<e.body.length-1;)c()}function ky(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return hs(t,e,s,r,n)})}function TP(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;Ih(t,e,s,l,r,n,i)})}function Ey(t,e,r,n,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,g=I_(t,e,d,n);c.canEntireRowFit(g,i)&&(hs(t,e,c,n,i),l=r+u)}),l}function Jg(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return hs(t,e,s,r,n)})}function IP(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function RP(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new F_(u.raw,u.styles,u.section);d=ss(d,u),d.text=[];var g=IP(u,e,n);u.text.length>g&&(d.text=u.text.splice(g,u.text.length));var m=n.scaleFactor(),f=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,f),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,f),d.contentHeight>s&&(s=d.contentHeight),i[c.index]=d}}var x=new E_(t.raw,-1,t.section,i,!0);x.height=s;for(var w=0,N=r.columns;w<N.length;w++){var c=N[w],d=x.cells[c.index];d&&(d.height=x.height);var u=t.cells[c.index];u&&(u.height=t.height)}return x}function OP(t,e,r,n){var i=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=i-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),g=e.getMaxCellHeight(n.columns)>l;return g?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Ih(t,e,r,n,i,s,o){var l=I_(t,e,n,s);if(r.canEntireRowFit(l,o))hs(t,e,r,s,o);else if(OP(t,r,l,e)){var c=RP(r,l,e,t);hs(t,e,r,s,o),cu(t,e,i,s,o),Ih(t,e,c,n,i,s,o)}else cu(t,e,i,s,o),Ih(t,e,r,n,i,s,o)}function hs(t,e,r,n,i){n.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}BP(t,c,n);var d=c.getTextPos();w_(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function BP(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=C_(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),MP(t,e,r,n.lineWidth))}function MP(t,e,r,n){var i,s,o,l;n.top&&(i=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,s,o,l)),n.bottom&&(i=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,s,o,l)),n.left&&(i=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,i,s,o,l)),n.right&&(i=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,i,s,o,l));function c(u,d,g,m,f){t.getDocument().setLineWidth(u),t.getDocument().line(d,g,m,f,"S")}}function I_(t,e,r,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function cu(t,e,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return hs(t,e,l,n,i)}),e.callEndPageHooks(t,n);var o=e.settings.margin;N_(t,e,r,n),R_(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return hs(t,e,l,n,i)}),t.applyStyles(t.userStyles))}function R_(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function UP(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=k_(this,n),s=D_(this,i);return T_(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){w_(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return ql.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){ql.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new ql(this),s=P_(i,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var Kg;function pr(t,e){var r=k_(t,e),n=D_(t,r);T_(t,n)}try{if(typeof window<"u"&&window){var Fy=window,Dy=Fy.jsPDF||((Kg=Fy.jspdf)===null||Kg===void 0?void 0:Kg.jsPDF);Dy&&UP(Dy)}}catch(t){console.error("Could not apply autoTable plugin",t)}var Si={},qP=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},O_={},Hi={};let Em;const $P=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Hi.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Hi.getSymbolTotalCodewords=function(e){return $P[e]};Hi.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Hi.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Em=e};Hi.isKanjiModeEnabled=function(){return typeof Em<"u"};Hi.toSJIS=function(e){return Em(e)};var hf={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(hf);function B_(){this.buffer=[],this.length=0}B_.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var zP=B_;function $u(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}$u.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};$u.prototype.get=function(t,e){return this.data[t*this.size+e]};$u.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};$u.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var WP=$u,M_={};(function(t){const e=Hi.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,l=[s-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([s[l],s[c]]);return i}})(M_);var U_={};const HP=Hi.getSymbolSize,Ty=7;U_.getPositions=function(e){const r=HP(e);return[[0,0],[r-Ty,0],[0,r-Ty]]};var q_={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,l=0,c=0,u=null,d=null;for(let g=0;g<s;g++){l=c=0,u=d=null;for(let m=0;m<s;m++){let f=i.get(g,m);f===u?l++:(l>=5&&(o+=e.N1+(l-5)),u=f,l=1),f=i.get(m,g),f===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=f,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let l=0;l<s-1;l++)for(let c=0;c<s-1;c++){const u=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,l=0,c=0;for(let u=0;u<s;u++){l=c=0;for(let d=0;d<s;d++)l=l<<1&2047|i.get(u,d),d>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)s.isReserved(c,l)||s.xor(c,l,r(i,c,l))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,l=u)}return l}})(q_);var ff={};const qs=hf,Bd=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Md=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ff.getBlocksCount=function(e,r){switch(r){case qs.L:return Bd[(e-1)*4+0];case qs.M:return Bd[(e-1)*4+1];case qs.Q:return Bd[(e-1)*4+2];case qs.H:return Bd[(e-1)*4+3];default:return}};ff.getTotalCodewordsCount=function(e,r){switch(r){case qs.L:return Md[(e-1)*4+0];case qs.M:return Md[(e-1)*4+1];case qs.Q:return Md[(e-1)*4+2];case qs.H:return Md[(e-1)*4+3];default:return}};var $_={},gf={};const uu=new Uint8Array(512),Rh=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)uu[r]=e,Rh[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)uu[r]=uu[r-255]})();gf.log=function(e){if(e<1)throw new Error("log("+e+")");return Rh[e]};gf.exp=function(e){return uu[e]};gf.mul=function(e,r){return e===0||r===0?0:uu[Rh[e]+Rh[r]]};(function(t){const e=gf;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)s[o+l]^=e.mul(n[o],i[l]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})($_);const z_=$_;function Fm(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Fm.prototype.initialize=function(e){this.degree=e,this.genPoly=z_.generateECPolynomial(this.degree)};Fm.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=z_.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var GP=Fm,W_={},no={},Dm={};Dm.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ua={};const H_="[0-9]+",YP="[A-Z $%*+\\-./:]+";let Du="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Du=Du.replace(/u/g,"\\u");const VP="(?:(?![A-Z0-9 $%*+\\-./:]|"+Du+`)(?:.|[\r
]))+`;Ua.KANJI=new RegExp(Du,"g");Ua.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ua.BYTE=new RegExp(VP,"g");Ua.NUMERIC=new RegExp(H_,"g");Ua.ALPHANUMERIC=new RegExp(YP,"g");const JP=new RegExp("^"+Du+"$"),KP=new RegExp("^"+H_+"$"),QP=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ua.testKanji=function(e){return JP.test(e)};Ua.testNumeric=function(e){return KP.test(e)};Ua.testAlphanumeric=function(e){return QP.test(e)};(function(t){const e=Dm,r=Ua;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}})(no);(function(t){const e=Hi,r=ff,n=hf,i=no,s=Dm,o=7973,l=e.getBCHDigit(o);function c(m,f,x){for(let w=1;w<=40;w++)if(f<=t.getCapacity(w,x,m))return w}function u(m,f){return i.getCharCountIndicator(m,f)+4}function d(m,f){let x=0;return m.forEach(function(w){const N=u(w.mode,f);x+=N+w.getBitsLength()}),x}function g(m,f){for(let x=1;x<=40;x++)if(d(m,x)<=t.getCapacity(x,f,i.MIXED))return x}t.from=function(f,x){return s.isValid(f)?parseInt(f,10):x},t.getCapacity=function(f,x,w){if(!s.isValid(f))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=i.BYTE);const N=e.getSymbolTotalCodewords(f),b=r.getTotalCodewordsCount(f,x),S=(N-b)*8;if(w===i.MIXED)return S;const j=S-u(w,f);switch(w){case i.NUMERIC:return Math.floor(j/10*3);case i.ALPHANUMERIC:return Math.floor(j/11*2);case i.KANJI:return Math.floor(j/13);case i.BYTE:default:return Math.floor(j/8)}},t.getBestVersionForData=function(f,x){let w;const N=n.from(x,n.M);if(Array.isArray(f)){if(f.length>1)return g(f,N);if(f.length===0)return 1;w=f[0]}else w=f;return c(w.mode,w.getLength(),N)},t.getEncodedBits=function(f){if(!s.isValid(f)||f<7)throw new Error("Invalid QR Code version");let x=f<<12;for(;e.getBCHDigit(x)-l>=0;)x^=o<<e.getBCHDigit(x)-l;return f<<12|x}})(W_);var G_={};const w0=Hi,Y_=1335,XP=21522,Iy=w0.getBCHDigit(Y_);G_.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;w0.getBCHDigit(i)-Iy>=0;)i^=Y_<<w0.getBCHDigit(i)-Iy;return(n<<10|i)^XP};var V_={};const ZP=no;function Kl(t){this.mode=ZP.NUMERIC,this.data=t.toString()}Kl.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Kl.prototype.getLength=function(){return this.data.length};Kl.prototype.getBitsLength=function(){return Kl.getBitsLength(this.data.length)};Kl.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var ek=Kl;const tk=no,Qg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ql(t){this.mode=tk.ALPHANUMERIC,this.data=t}Ql.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ql.prototype.getLength=function(){return this.data.length};Ql.prototype.getBitsLength=function(){return Ql.getBitsLength(this.data.length)};Ql.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Qg.indexOf(this.data[r])*45;n+=Qg.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Qg.indexOf(this.data[r]),6)};var rk=Ql;const nk=no;function Xl(t){this.mode=nk.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Xl.getBitsLength=function(e){return e*8};Xl.prototype.getLength=function(){return this.data.length};Xl.prototype.getBitsLength=function(){return Xl.getBitsLength(this.data.length)};Xl.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var ik=Xl;const ak=no,sk=Hi;function Zl(t){this.mode=ak.KANJI,this.data=t}Zl.getBitsLength=function(e){return e*13};Zl.prototype.getLength=function(){return this.data.length};Zl.prototype.getBitsLength=function(){return Zl.getBitsLength(this.data.length)};Zl.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=sk.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var ok=Zl,J_={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,u,d,g,m,f,x,w,N;!l.empty();){c=l.pop(),u=c.value,g=c.cost,m=r[u]||{};for(d in m)m.hasOwnProperty(d)&&(f=m[d],x=g+f,w=o[d],N=typeof o[d]>"u",(N||w>x)&&(o[d]=x,l.push(d,x),s[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var b=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(b)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(J_);var lk=J_.exports;(function(t){const e=no,r=ek,n=rk,i=ik,s=ok,o=Ua,l=Hi,c=lk;function u(b){return unescape(encodeURIComponent(b)).length}function d(b,S,j){const C=[];let $;for(;($=b.exec(j))!==null;)C.push({data:$[0],index:$.index,mode:S,length:$[0].length});return C}function g(b){const S=d(o.NUMERIC,e.NUMERIC,b),j=d(o.ALPHANUMERIC,e.ALPHANUMERIC,b);let C,$;return l.isKanjiModeEnabled()?(C=d(o.BYTE,e.BYTE,b),$=d(o.KANJI,e.KANJI,b)):(C=d(o.BYTE_KANJI,e.BYTE,b),$=[]),S.concat(j,C,$).sort(function(V,T){return V.index-T.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function m(b,S){switch(S){case e.NUMERIC:return r.getBitsLength(b);case e.ALPHANUMERIC:return n.getBitsLength(b);case e.KANJI:return s.getBitsLength(b);case e.BYTE:return i.getBitsLength(b)}}function f(b){return b.reduce(function(S,j){const C=S.length-1>=0?S[S.length-1]:null;return C&&C.mode===j.mode?(S[S.length-1].data+=j.data,S):(S.push(j),S)},[])}function x(b){const S=[];for(let j=0;j<b.length;j++){const C=b[j];switch(C.mode){case e.NUMERIC:S.push([C,{data:C.data,mode:e.ALPHANUMERIC,length:C.length},{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.ALPHANUMERIC:S.push([C,{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.KANJI:S.push([C,{data:C.data,mode:e.BYTE,length:u(C.data)}]);break;case e.BYTE:S.push([{data:C.data,mode:e.BYTE,length:u(C.data)}])}}return S}function w(b,S){const j={},C={start:{}};let $=["start"];for(let Z=0;Z<b.length;Z++){const V=b[Z],T=[];for(let R=0;R<V.length;R++){const z=V[R],I=""+Z+R;T.push(I),j[I]={node:z,lastCount:0},C[I]={};for(let G=0;G<$.length;G++){const de=$[G];j[de]&&j[de].node.mode===z.mode?(C[de][I]=m(j[de].lastCount+z.length,z.mode)-m(j[de].lastCount,z.mode),j[de].lastCount+=z.length):(j[de]&&(j[de].lastCount=z.length),C[de][I]=m(z.length,z.mode)+4+e.getCharCountIndicator(z.mode,S))}}$=T}for(let Z=0;Z<$.length;Z++)C[$[Z]].end=0;return{map:C,table:j}}function N(b,S){let j;const C=e.getBestModeForData(b);if(j=e.from(S,C),j!==e.BYTE&&j.bit<C.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(j)+`.
 Suggested mode is: `+e.toString(C));switch(j===e.KANJI&&!l.isKanjiModeEnabled()&&(j=e.BYTE),j){case e.NUMERIC:return new r(b);case e.ALPHANUMERIC:return new n(b);case e.KANJI:return new s(b);case e.BYTE:return new i(b)}}t.fromArray=function(S){return S.reduce(function(j,C){return typeof C=="string"?j.push(N(C,null)):C.data&&j.push(N(C.data,C.mode)),j},[])},t.fromString=function(S,j){const C=g(S,l.isKanjiModeEnabled()),$=x(C),Z=w($,j),V=c.find_path(Z.map,"start","end"),T=[];for(let R=1;R<V.length-1;R++)T.push(Z.table[V[R]].node);return t.fromArray(f(T))},t.rawSplit=function(S){return t.fromArray(g(S,l.isKanjiModeEnabled()))}})(V_);const pf=Hi,Xg=hf,ck=zP,uk=WP,dk=M_,hk=U_,S0=q_,j0=ff,fk=GP,Oh=W_,gk=G_,pk=no,Zg=V_;function mk(t,e){const r=t.size,n=hk.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let l=-1;l<=7;l++)if(!(s+l<=-1||r<=s+l))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(s+l,o+c,!0,!0):t.set(s+l,o+c,!1,!0))}}function vk(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function yk(t,e){const r=dk.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(i+o,s+l,!0,!0):t.set(i+o,s+l,!1,!0)}}function bk(t,e){const r=t.size,n=Oh.getEncodedBits(e);let i,s,o;for(let l=0;l<18;l++)i=Math.floor(l/3),s=l%3+r-8-3,o=(n>>l&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function ep(t,e,r){const n=t.size,i=gk.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function xk(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,l-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,l-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function _k(t,e,r){const n=new ck;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),pk.getCharCountIndicator(c.mode,t)),c.write(n)});const i=pf.getSymbolTotalCodewords(t),s=j0.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return wk(n,t,e)}function wk(t,e,r){const n=pf.getSymbolTotalCodewords(e),i=j0.getTotalCodewordsCount(e,r),s=n-i,o=j0.getBlocksCount(e,r),l=n%o,c=o-l,u=Math.floor(n/o),d=Math.floor(s/o),g=d+1,m=u-d,f=new fk(m);let x=0;const w=new Array(o),N=new Array(o);let b=0;const S=new Uint8Array(t.buffer);for(let V=0;V<o;V++){const T=V<c?d:g;w[V]=S.slice(x,x+T),N[V]=f.encode(w[V]),x+=T,b=Math.max(b,T)}const j=new Uint8Array(n);let C=0,$,Z;for($=0;$<b;$++)for(Z=0;Z<o;Z++)$<w[Z].length&&(j[C++]=w[Z][$]);for($=0;$<m;$++)for(Z=0;Z<o;Z++)j[C++]=N[Z][$];return j}function Sk(t,e,r,n){let i;if(Array.isArray(t))i=Zg.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=Zg.rawSplit(t);u=Oh.getBestVersionForData(d,r)}i=Zg.fromString(t,u||40)}else throw new Error("Invalid data");const s=Oh.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=_k(e,r,i),l=pf.getSymbolSize(e),c=new uk(l);return mk(c,e),vk(c),yk(c,e),ep(c,r,0),e>=7&&bk(c,e),xk(c,o),isNaN(n)&&(n=S0.getBestMask(c,ep.bind(null,c,r))),S0.applyMask(n,c),ep(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}O_.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Xg.M,i,s;return typeof r<"u"&&(n=Xg.from(r.errorCorrectionLevel,Xg.M),i=Oh.from(r.version),s=S0.from(r.maskPattern),r.toSJISFunc&&pf.setToSJISFunction(r.toSJISFunc)),Sk(e,i,n,s)};var K_={},Tm={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,l=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),d=s.margin*c,g=[s.color.light,s.color.dark];for(let m=0;m<u;m++)for(let f=0;f<u;f++){let x=(m*u+f)*4,w=s.color.light;if(m>=d&&f>=d&&m<u-d&&f<u-d){const N=Math.floor((m-d)/c),b=Math.floor((f-d)/c);w=g[l[N*o+b]?1:0]}n[x++]=w.r,n[x++]=w.g,n[x++]=w.b,n[x]=w.a}}})(Tm);(function(t){const e=Tm;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,l){let c=l,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),g=u.getContext("2d"),m=g.createImageData(d,d);return e.qrToImageData(m.data,s,c),r(g,u,d),g.putImageData(m,0,0),u},t.renderToDataURL=function(s,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),d=c.type||"image/png",g=c.rendererOpts||{};return u.toDataURL(d,g.quality)}})(K_);var Q_={};const jk=Tm;function Ry(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function tp(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Nk(t,e,r){let n="",i=0,s=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),u=Math.floor(l/e);!c&&!s&&(s=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=s?tp("M",c+r,.5+u+r):tp("m",i,0),i=0,s=!1),c+1<e&&t[l+1]||(n+=tp("h",o),o=0)):i++}return n}Q_.render=function(e,r,n){const i=jk.getOptions(r),s=e.modules.size,o=e.modules.data,l=s+i.margin*2,c=i.color.light.a?"<path "+Ry(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+Ry(i.color.dark,"stroke")+' d="'+Nk(o,s,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,m),m};const Ck=qP,N0=O_,X_=K_,Lk=Q_;function Im(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,l=typeof s[o-1]=="function";if(!l&&!Ck())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=N0.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=N0.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}Si.create=N0.create;Si.toCanvas=Im.bind(null,X_.render);Si.toDataURL=Im.bind(null,X_.renderToDataURL);Si.toString=Im.bind(null,function(t,e,r){return Lk.render(t,r)});const Rm=Object.freeze(Object.defineProperty({__proto__:null,default:Si},Symbol.toStringTag,{value:"Module"})),kn=t=>{if(!t)return"";let e=String(t);for(let r=0;r<5;r++)e=e.replace(/%%%/g,"").replace(/%\s+%%%/g,"").replace(/%\s{1,}%%%/g,"").replace(/%%\s+%/g,"").replace(/%\s{1,}%\s{1,}%/g,"").replace(/\s*%\s*%\s*%\s*/g,"").replace(/\s*%\s{1,}%\s{1,}%\s*/g,"").replace(/%+/g,"").replace(/%/g,"");return e=e.replace(/[^\w\s\-\.]/g,"").replace(/\s+/g," ").trim(),e},et=t=>{if(!t)return"";let e=String(t);return e.includes("%")&&(console.log(" SANITIZE DEBUG - Original text with %:",e),console.log(" Character codes:",e.split("").map(r=>`${r}(${r.charCodeAt(0)})`).join(" "))),e=e.replace(/%%%/g,"").replace(/%\s+%%%/g,"").replace(/%\s{1,}%%%/g,"").replace(/%%\s+%/g,"").replace(/%\s{1,}%\s{1,}%/g,"").replace(/\s*%\s*%\s*%\s*/g,"").replace(/\s*%\s{1,}%\s{1,}%\s*/g,"").replace(/%+/g,"").replace(/%.*?%/g,"").replace(/\b%/g,"").replace(/%\b/g,"").replace(/\s*%\s*/g," ").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/[^\w\s]%[^\w\s]/g,""),e=e.replace(/=U/g,"").replace(/<a/g,"").replace(/=Ud/g,"").replace(/-/g,"").replace(/-d/g,"").replace(/<a/g,"").replace(/</g,"").replace(//g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(/[^\w\s\-\.]/g,""),e=e.replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/ /g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,""),e=e.replace(/\s+/g," ").trim(),e=e.replace(/%/g,""),String(t).includes("%")&&(console.log(" SANITIZE DEBUG - Final cleaned text:",e),console.log(" Still contains %?",e.includes("%"))),e},Qn=async()=>{try{const{data:t,error:e}=await re.from("nameclub").select("id, name_club");if(e)throw e;const r={};return t.forEach(n=>{r[n.id]=n.name_club}),r}catch(t){return console.error("Error fetching club names:",t),{}}},bi=async()=>{try{const{data:t,error:e}=await re.from("nameleague").select("id, name_league");if(e)throw e;const r={};return t.forEach(n=>{r[n.id]=n.name_league}),r}catch(t){return console.error("Error fetching league names:",t),{}}};var Z_={exports:{}};(function(t){(function(e){var r=e.URL||e.webkitURL;function n(u){return r?r.createObjectURL(u):!1}function i(u){return r?r.revokeObjectURL(u):!1}function s(u,d){u&&u.slice(0,5)==="blob:"&&!(d&&d.noRevoke)&&i(u)}function o(u,d,g,m){if(!e.FileReader)return!1;var f=new FileReader;f.onload=function(){d.call(f,this.result)},g&&(f.onabort=f.onerror=function(){g.call(f,this.error)});var x=f[m||"readAsDataURL"];if(x)return x.call(f,u),f}function l(u,d){return Object.prototype.toString.call(d)==="[object "+u+"]"}function c(u,d,g){function m(f,x){var w=document.createElement("img"),N;function b(j,C){if(f===x){f&&f(j,C);return}else if(j instanceof Error){x(j);return}C=C||{},C.image=j,f(C)}function S(j,C){C&&e.console&&console.log(C),j&&l("Blob",j)?(u=j,N=n(u)):(N=u,g&&g.crossOrigin&&(w.crossOrigin=g.crossOrigin)),w.src=N}if(w.onerror=function(j){s(N,g),x&&x.call(w,j)},w.onload=function(){s(N,g);var j={originalWidth:w.naturalWidth||w.width,originalHeight:w.naturalHeight||w.height};try{c.transform(w,g,b,u,j)}catch(C){x&&x(C)}},typeof u=="string")return c.requiresMetaData(g)?c.fetchBlob(u,S,g):S(),w;if(l("Blob",u)||l("File",u))return N=n(u),N?(w.src=N,w):o(u,function(j){w.src=j},x)}return e.Promise&&typeof d!="function"?(g=d,new Promise(m)):m(d,d)}c.requiresMetaData=function(u){return u&&u.meta},c.fetchBlob=function(u,d){d()},c.transform=function(u,d,g,m,f){g(u,f)},c.global=e,c.readFile=o,c.isInstanceOf=l,c.createObjectURL=n,c.revokeObjectURL=i,t.exports?t.exports=c:e.loadImage=c})(typeof window<"u"&&window||Ui)})(Z_);var gs=Z_.exports,ew={exports:{}};(function(t){(function(e){t.exports?e(gs):e(window.loadImage)})(function(e){var r=e.transform;e.createCanvas=function(n,i,s){if(s&&e.global.OffscreenCanvas)return new OffscreenCanvas(n,i);var o=document.createElement("canvas");return o.width=n,o.height=i,o},e.transform=function(n,i,s,o,l){r.call(e,e.scale(n,i,l),i,s,o,l)},e.transformCoordinates=function(){},e.getTransformedOptions=function(n,i){var s=i.aspectRatio,o,l,c,u;if(!s)return i;o={};for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(o[l]=i[l]);return o.crop=!0,c=n.naturalWidth||n.width,u=n.naturalHeight||n.height,c/u>s?(o.maxWidth=u*s,o.maxHeight=u):(o.maxWidth=c,o.maxHeight=c/s),o},e.drawImage=function(n,i,s,o,l,c,u,d,g){var m=i.getContext("2d");return g.imageSmoothingEnabled===!1?(m.msImageSmoothingEnabled=!1,m.imageSmoothingEnabled=!1):g.imageSmoothingQuality&&(m.imageSmoothingQuality=g.imageSmoothingQuality),m.drawImage(n,s,o,l,c,0,0,u,d),m},e.requiresCanvas=function(n){return n.canvas||n.crop||!!n.aspectRatio},e.scale=function(n,i,s){i=i||{},s=s||{};var o=n.getContext||e.requiresCanvas(i)&&!!e.global.HTMLCanvasElement,l=n.naturalWidth||n.width,c=n.naturalHeight||n.height,u=l,d=c,g,m,f,x,w,N,b,S,j,C,$,Z;function V(){var R=Math.max((f||u)/u,(x||d)/d);R>1&&(u*=R,d*=R)}function T(){var R=Math.min((g||u)/u,(m||d)/d);R<1&&(u*=R,d*=R)}if(o&&(i=e.getTransformedOptions(n,i,s),b=i.left||0,S=i.top||0,i.sourceWidth?(w=i.sourceWidth,i.right!==void 0&&i.left===void 0&&(b=l-w-i.right)):w=l-b-(i.right||0),i.sourceHeight?(N=i.sourceHeight,i.bottom!==void 0&&i.top===void 0&&(S=c-N-i.bottom)):N=c-S-(i.bottom||0),u=w,d=N),g=i.maxWidth,m=i.maxHeight,f=i.minWidth,x=i.minHeight,o&&g&&m&&i.crop?(u=g,d=m,$=w/N-g/m,$<0?(N=m*w/g,i.top===void 0&&i.bottom===void 0&&(S=(c-N)/2)):$>0&&(w=g*N/m,i.left===void 0&&i.right===void 0&&(b=(l-w)/2))):((i.contain||i.cover)&&(f=g=g||f,x=m=m||x),i.cover?(T(),V()):(V(),T())),o){if(j=i.pixelRatio,j>1&&!(n.style.width&&Math.floor(parseFloat(n.style.width,10))===Math.floor(l/j))&&(u*=j,d*=j),e.orientationCropBug&&!n.getContext&&(b||S||w!==l||N!==c)&&($=n,n=e.createCanvas(l,c,!0),e.drawImage($,n,0,0,l,c,l,c,i)),C=i.downsamplingRatio,C>0&&C<1&&u<w&&d<N)for(;w*C>u;)Z=e.createCanvas(w*C,N*C,!0),e.drawImage(n,Z,b,S,w,N,Z.width,Z.height,i),b=0,S=0,w=Z.width,N=Z.height,n=Z;return Z=e.createCanvas(u,d),e.transformCoordinates(Z,i,s),j>1&&(Z.style.width=Z.width/j+"px"),e.drawImage(n,Z,b,S,w,N,u,d,i).setTransform(1,0,0,1,0,0),Z}return n.width=u,n.height=d,n}})})(ew);var Ak=ew.exports,tw={exports:{}};(function(t){(function(e){t.exports?e(gs):e(window.loadImage)})(function(e){var r=e.global,n=e.transform,i=r.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),s=r.ArrayBuffer&&ArrayBuffer.prototype.slice||function(d,g){g=g||this.byteLength-d;var m=new Uint8Array(this,d,g),f=new Uint8Array(g);return f.set(m),f.buffer},o={jpeg:{65505:[],65517:[]}};function l(d,g,m,f){var x=this;function w(N,b){if(!(r.DataView&&i&&d&&d.size>=12&&d.type==="image/jpeg"))return N(f);var S=m.maxMetaDataSize||262144;e.readFile(i.call(d,0,S),function(j){var C=new DataView(j);if(C.getUint16(0)!==65496)return b(new Error("Invalid JPEG file: Missing JPEG marker."));for(var $=2,Z=C.byteLength-4,V=$,T,R,z,I;$<Z&&(T=C.getUint16($),T>=65504&&T<=65519||T===65534);){if(R=C.getUint16($+2)+2,$+R>C.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if(z=o.jpeg[T],z&&!m.disableMetaDataParsers)for(I=0;I<z.length;I+=1)z[I].call(x,C,$,R,f,m);$+=R,V=$}!m.disableImageHead&&V>6&&(f.imageHead=s.call(j,0,V)),N(f)},b,"readAsArrayBuffer")||N(f)}return m=m||{},r.Promise&&typeof g!="function"?(m=g||{},f=m,new Promise(w)):(f=f||{},w(g,g))}function c(d,g,m){return!d||!g||!m?null:new Blob([m,i.call(d,g.byteLength)],{type:"image/jpeg"})}function u(d,g,m){var f={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!m&&r.Promise)return l(d,f).then(function(x){return c(d,x.imageHead,g)});l(d,function(x){m(c(d,x.imageHead,g))},f)}e.transform=function(d,g,m,f,x){e.requiresMetaData(g)?(x=x||{},l(f,function(w){w!==x&&(r.console&&console.log(w),w=x),n.call(e,d,g,m,f,w)},g,x)):n.apply(e,arguments)},e.blobSlice=i,e.bufferSlice=s,e.replaceHead=u,e.parseMetaData=l,e.metaDataParsers=o})})(tw);var Om=tw.exports,Pk={exports:{}};(function(t){(function(e){t.exports?e(gs):e(window.loadImage)})(function(e){var r=e.global;r.fetch&&r.Request&&r.Response&&r.Response.prototype.blob?e.fetchBlob=function(n,i,s){function o(l){return l.blob()}if(r.Promise&&typeof i!="function")return fetch(new Request(n,i)).then(o);fetch(new Request(n,s)).then(o).then(i).catch(function(l){i(null,l)})}:r.XMLHttpRequest&&new XMLHttpRequest().responseType===""&&(e.fetchBlob=function(n,i,s){function o(l,c){s=s||{};var u=new XMLHttpRequest;u.open(s.method||"GET",n),s.headers&&Object.keys(s.headers).forEach(function(d){u.setRequestHeader(d,s.headers[d])}),u.withCredentials=s.credentials==="include",u.responseType="blob",u.onload=function(){l(u.response)},u.onerror=u.onabort=u.ontimeout=function(d){l===c?c(null,d):c(d)},u.send(s.body)}return r.Promise&&typeof i!="function"?(s=i,new Promise(o)):o(i,i)})})})(Pk);var rw={exports:{}};(function(t){(function(e){t.exports?e(gs,Om):e(window.loadImage)})(function(e){function r(u){u&&(Object.defineProperty(this,"map",{value:this.ifds[u].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[u]||{}}))}r.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},r.prototype.ifds={ifd1:{name:"Thumbnail",map:r.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},r.prototype.get=function(u){return this[u]||this[this.map[u]]};function n(u,d,g){if(g){if(d+g>u.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}return new Blob([e.bufferSlice.call(u.buffer,d,d+g)],{type:"image/jpeg"})}}var i={1:{getValue:function(u,d){return u.getUint8(d)},size:1},2:{getValue:function(u,d){return String.fromCharCode(u.getUint8(d))},size:1,ascii:!0},3:{getValue:function(u,d,g){return u.getUint16(d,g)},size:2},4:{getValue:function(u,d,g){return u.getUint32(d,g)},size:4},5:{getValue:function(u,d,g){return u.getUint32(d,g)/u.getUint32(d+4,g)},size:8},9:{getValue:function(u,d,g){return u.getInt32(d,g)},size:4},10:{getValue:function(u,d,g){return u.getInt32(d,g)/u.getInt32(d+4,g)},size:8}};i[7]=i[1];function s(u,d,g,m,f,x){var w=i[m],N,b,S,j,C,$;if(!w){console.log("Invalid Exif data: Invalid tag type.");return}if(N=w.size*f,b=N>4?d+u.getUint32(g+8,x):g+8,b+N>u.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(f===1)return w.getValue(u,b,x);for(S=[],j=0;j<f;j+=1)S[j]=w.getValue(u,b+j*w.size,x);if(w.ascii){for(C="",j=0;j<S.length&&($=S[j],$!=="\0");j+=1)C+=$;return C}return S}function o(u,d,g){return(!u||u[g])&&(!d||d[g]!==!0)}function l(u,d,g,m,f,x,w,N){var b,S,j,C,$,Z;if(g+6>u.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}if(b=u.getUint16(g,m),S=g+2+12*b,S+4>u.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(j=0;j<b;j+=1)C=g+2+12*j,$=u.getUint16(C,m),o(w,N,$)&&(Z=s(u,d,C,u.getUint16(C+2,m),u.getUint32(C+4,m),m),f[$]=Z,x&&(x[$]=C));return u.getUint32(S,m)}function c(u,d,g,m,f,x,w){var N=u.exif[d];N&&(u.exif[d]=new r(d),u.exifOffsets&&(u.exifOffsets[d]=new r(d)),l(g,m,m+N,f,u.exif[d],u.exifOffsets&&u.exifOffsets[d],x&&x[d],w&&w[d]))}e.parseExifData=function(u,d,g,m,f){if(!f.disableExif){var x=f.includeExifTags,w=f.excludeExifTags||{34665:{37500:!0}},N=d+10,b,S,j;if(u.getUint32(d+4)===1165519206){if(N+8>u.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(u.getUint16(d+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(u.getUint16(N)){case 18761:b=!0;break;case 19789:b=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(u.getUint16(N+2,b)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}S=u.getUint32(N+4,b),m.exif=new r,f.disableExifOffsets||(m.exifOffsets=new r,m.exifTiffOffset=N,m.exifLittleEndian=b),S=l(u,N,N+S,b,m.exif,m.exifOffsets,x,w),S&&o(x,w,"ifd1")&&(m.exif.ifd1=S,m.exifOffsets&&(m.exifOffsets.ifd1=N+S)),Object.keys(m.exif.ifds).forEach(function(C){c(m,C,u,N,b,x,w)}),j=m.exif.ifd1,j&&j[513]&&(j[513]=n(u,N+j[513],j[514]))}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(u,d,g){var m=d.exifOffsets[274];if(!m)return u;var f=new DataView(u,m+8,2);return f.setUint16(0,g,d.exifLittleEndian),u}},e.writeExifData=function(u,d,g,m){return e.exifWriters[d.exif.map[g]](u,d,m)},e.ExifMap=r})})(rw);var kk=rw.exports,Ek={exports:{}};(function(t){(function(e){t.exports?e(gs,kk):e(window.loadImage)})(function(e){var r=e.ExifMap.prototype;r.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},r.tags.ifd1=r.tags,r.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180 CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90 CW",6:"Rotate 90 CW",7:"Horizontal flip + Rotate 90 CW",8:"Rotate 90 CCW"}},r.getText=function(n){var i=this.get(n);switch(n){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[n][i];case"ExifVersion":case"FlashpixVersion":return i?String.fromCharCode(i[0],i[1],i[2],i[3]):void 0;case"ComponentsConfiguration":return i?this.stringValues[n][i[0]]+this.stringValues[n][i[1]]+this.stringValues[n][i[2]]+this.stringValues[n][i[3]]:void 0;case"GPSVersionID":return i?i[0]+"."+i[1]+"."+i[2]+"."+i[3]:void 0}return String(i)},r.getAll=function(){var n={},i,s,o;for(i in this)Object.prototype.hasOwnProperty.call(this,i)&&(s=this[i],s&&s.getAll?n[this.ifds[i].name]=s.getAll():(o=this.tags[i],o&&(n[o]=this.getText(o))));return n},r.getName=function(n){var i=this.tags[n];return typeof i=="object"?this.ifds[n].name:i},function(){var n=r.tags,i,s,o;for(i in n)if(Object.prototype.hasOwnProperty.call(n,i))if(s=r.ifds[i],s){o=n[i];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(s.map[o[i]]=Number(i))}else r.map[n[i]]=Number(i)}()})})(Ek);var nw={exports:{}};(function(t){(function(e){t.exports?e(gs,Om):e(window.loadImage)})(function(e){function r(){}r.prototype.map={ObjectName:5},r.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},r.prototype.get=function(u){return this[u]||this[this.map[u]]};function n(u,d,g){for(var m="",f=d+g,x=d;x<f;x+=1)m+=String.fromCharCode(u.getUint8(x));return m}function i(u,d,g,m,f){return d.types[u]==="binary"?new Blob([g.buffer.slice(m,m+f)]):d.types[u]==="Uint16"?g.getUint16(m):n(g,m,f)}function s(u,d){return u===void 0?d:u instanceof Array?(u.push(d),u):[u,d]}function o(u,d,g,m,f,x){for(var w,N,b,S=d+g,j=d;j<S;)u.getUint8(j)===28&&u.getUint8(j+1)===2&&(b=u.getUint8(j+2),(!f||f[b])&&(!x||!x[b])&&(N=u.getInt16(j+3),w=i(b,m.iptc,u,j+5,N),m.iptc[b]=s(m.iptc[b],w),m.iptcOffsets&&(m.iptcOffsets[b]=j))),j+=1}function l(u,d){return u.getUint32(d)===943868237&&u.getUint16(d+4)===1028}function c(u,d){var g=u.getUint8(d+7);return g%2!==0&&(g+=1),g===0&&(g=4),g}e.parseIptcData=function(u,d,g,m,f){if(!f.disableIptc)for(var x=d+g;d+8<x;){if(l(u,d)){var w=c(u,d),N=d+8+w;if(N>x){console.log("Invalid IPTC data: Invalid segment offset.");break}var b=u.getUint16(d+6+w);if(d+b>x){console.log("Invalid IPTC data: Invalid segment size.");break}m.iptc=new r,f.disableIptcOffsets||(m.iptcOffsets=new r),o(u,N,b,m,f.includeIptcTags,f.excludeIptcTags||{202:!0});return}d+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=r})})(nw);var Fk=nw.exports,Dk={exports:{}};(function(t){(function(e){t.exports?e(gs,Fk):e(window.loadImage)})(function(e){var r=e.IptcMap.prototype;r.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},r.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},r.getText=function(n){var i=this.get(n),s=this.map[n],o=this.stringValues[s];return o?o[i]:String(i)},r.getAll=function(){var n={},i,s;for(i in this)Object.prototype.hasOwnProperty.call(this,i)&&(s=this.tags[i],s&&(n[s]=this.getText(s)));return n},r.getName=function(n){return this.tags[n]},function(){var n=r.tags,i=r.map||{},s;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[n[s]]=Number(s))}()})})(Dk);var Tk={exports:{}};(function(t){(function(e){t.exports?e(gs,Ak,Om):e(window.loadImage)})(function(e){var r=e.transform,n=e.requiresCanvas,i=e.requiresMetaData,s=e.transformCoordinates,o=e.getTransformedOptions;(function(d){if(d.global.document){var g="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",m=document.createElement("img");m.onload=function(){if(d.orientation=m.width===2&&m.height===3,d.orientation){var f=d.createCanvas(1,1,!0),x=f.getContext("2d");x.drawImage(m,1,1,1,1,0,0,1,1),d.orientationCropBug=x.getImageData(0,0,1,1).data.toString()!=="255,255,255,255"}},m.src=g}})(e);function l(d,g){var m=d&&d.orientation;return m===!0&&!e.orientation||m===1&&e.orientation||(!g||e.orientation)&&m>1&&m<9}function c(d,g){return d!==g&&(d===1&&g>1&&g<9||d>1&&d<9)}function u(d,g){if(g>1&&g<9)switch(d){case 2:case 4:return g>4;case 5:case 7:return g%2===0;case 6:case 8:return g===2||g===4||g===5||g===7}return!1}e.requiresCanvas=function(d){return l(d)||n.call(e,d)},e.requiresMetaData=function(d){return l(d,!0)||i.call(e,d)},e.transform=function(d,g,m,f,x){r.call(e,d,g,function(w,N){if(N){var b=e.orientation&&N.exif&&N.exif.get("Orientation");if(b>4&&b<9){var S=N.originalWidth,j=N.originalHeight;N.originalWidth=j,N.originalHeight=S}}m(w,N)},f,x)},e.getTransformedOptions=function(d,g,m){var f=o.call(e,d,g),x=m.exif&&m.exif.get("Orientation"),w=f.orientation,N=e.orientation&&x;if(w===!0&&(w=x),!c(w,N))return f;var b=f.top,S=f.right,j=f.bottom,C=f.left,$={};for(var Z in f)Object.prototype.hasOwnProperty.call(f,Z)&&($[Z]=f[Z]);if($.orientation=w,(w>4&&!(N>4)||w<5&&N>4)&&($.maxWidth=f.maxHeight,$.maxHeight=f.maxWidth,$.minWidth=f.minHeight,$.minHeight=f.minWidth,$.sourceWidth=f.sourceHeight,$.sourceHeight=f.sourceWidth),N>1){switch(N){case 2:S=f.left,C=f.right;break;case 3:b=f.bottom,S=f.left,j=f.top,C=f.right;break;case 4:b=f.bottom,j=f.top;break;case 5:b=f.left,S=f.bottom,j=f.right,C=f.top;break;case 6:b=f.left,S=f.top,j=f.right,C=f.bottom;break;case 7:b=f.right,S=f.top,j=f.left,C=f.bottom;break;case 8:b=f.right,S=f.bottom,j=f.left,C=f.top;break}if(u(w,N)){var V=b,T=S;b=j,S=C,j=V,C=T}}switch($.top=b,$.right=S,$.bottom=j,$.left=C,w){case 2:$.right=C,$.left=S;break;case 3:$.top=j,$.right=C,$.bottom=b,$.left=S;break;case 4:$.top=j,$.bottom=b;break;case 5:$.top=C,$.right=j,$.bottom=S,$.left=b;break;case 6:$.top=S,$.right=j,$.bottom=C,$.left=b;break;case 7:$.top=S,$.right=b,$.bottom=C,$.left=j;break;case 8:$.top=C,$.right=b,$.bottom=S,$.left=j;break}return $},e.transformCoordinates=function(d,g,m){s.call(e,d,g,m);var f=g.orientation,x=e.orientation&&m.exif&&m.exif.get("Orientation");if(c(f,x)){var w=d.getContext("2d"),N=d.width,b=d.height,S=N,j=b;switch((f>4&&!(x>4)||f<5&&x>4)&&(d.width=b,d.height=N),f>4&&(S=b,j=N),x){case 2:w.translate(S,0),w.scale(-1,1);break;case 3:w.translate(S,j),w.rotate(Math.PI);break;case 4:w.translate(0,j),w.scale(1,-1);break;case 5:w.rotate(-.5*Math.PI),w.scale(-1,1);break;case 6:w.rotate(-.5*Math.PI),w.translate(-S,0);break;case 7:w.rotate(-.5*Math.PI),w.translate(-S,j),w.scale(1,-1);break;case 8:w.rotate(.5*Math.PI),w.translate(0,-j);break}switch(u(f,x)&&(w.translate(S,j),w.rotate(Math.PI)),f){case 2:w.translate(N,0),w.scale(-1,1);break;case 3:w.translate(N,b),w.rotate(Math.PI);break;case 4:w.translate(0,b),w.scale(1,-1);break;case 5:w.rotate(.5*Math.PI),w.scale(1,-1);break;case 6:w.rotate(.5*Math.PI),w.translate(0,-b);break;case 7:w.rotate(.5*Math.PI),w.translate(N,-b),w.scale(-1,1);break;case 8:w.rotate(-.5*Math.PI),w.translate(-N,0);break}}}})})(Tk);var Ik=gs;const Gi=Oy(Ik),Xn=()=>{const t=v.useRef(null),e=v.useRef(!1),r=v.useRef(0),n=v.useRef(0),i=v.useRef(0),s=v.useRef(0),o=g=>{if(!t.current)return;const m=g.target;m.tagName==="INPUT"||m.tagName==="TEXTAREA"||m.tagName==="SELECT"||m.tagName==="BUTTON"||m.closest("input")||m.closest("textarea")||m.closest("select")||m.closest("button")||(e.current=!0,r.current=g.pageX-t.current.offsetLeft,n.current=g.pageY-t.current.offsetTop,i.current=t.current.scrollLeft,s.current=t.current.scrollTop,t.current.style.cursor="grabbing",t.current.style.userSelect="none")},l=g=>{if(!e.current||!t.current)return;const m=g.target;m.tagName==="INPUT"||m.tagName==="TEXTAREA"||m.tagName==="SELECT"||m.tagName==="BUTTON"||m.closest("input")||m.closest("textarea")||m.closest("select")||m.closest("button")||g.preventDefault();const f=g.pageX-t.current.offsetLeft,x=g.pageY-t.current.offsetTop,w=(f-r.current)*2,N=(x-n.current)*2;t.current.scrollLeft=i.current-w,t.current.scrollTop=s.current-N},c=()=>{t.current&&(e.current&&(t.current.style.userSelect=""),e.current=!1,t.current.style.cursor="grab")},u=()=>{t.current&&(e.current&&(t.current.style.userSelect=""),e.current=!1,t.current.style.cursor="grab")};return g=>{g?(t.current=g,g.addEventListener("mousedown",o),g.addEventListener("mousemove",l),g.addEventListener("mouseup",c),g.addEventListener("mouseleave",u),g.style.cursor="grab"):t.current&&(t.current.removeEventListener("mousedown",o),t.current.removeEventListener("mousemove",l),t.current.removeEventListener("mouseup",c),t.current.removeEventListener("mouseleave",u))}},$i=({message:t="Loading..."})=>(console.log("CircleLoading component is rendering"),v.useEffect(()=>{const e=document.createElement("style");return e.textContent=`
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
    `,document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(2px)"},children:a.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"2px solid #22c55e",borderRadius:"20px",padding:"40px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",display:"flex",flexDirection:"column",alignItems:"center",gap:"25px",minWidth:"300px"},children:[a.jsx("div",{style:{width:"60px",height:"60px",border:"6px solid rgba(34, 197, 94, 0.2)",borderTop:"6px solid #22c55e",borderRadius:"50%",animation:"spin 1s linear infinite"}}),a.jsx("span",{style:{color:"#22c55e",fontWeight:"600",fontSize:"16px",textAlign:"center",animation:"pulse 2s ease-in-out infinite"},children:t})]})}));function Rk(){const{state:t}=di(),e=Ur(),[r,n]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(!1),[c,u]=v.useState(null),[d,g]=v.useState(""),[m,f]=v.useState(null),[x,w]=v.useState(null),[N,b]=v.useState(""),[S,j]=v.useState(null),[C,$]=v.useState(""),Z="Algerian Judo Federation",V="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",[T,R]=v.useState(null),[z,I]=v.useState([]),[G,de]=v.useState(""),[M,U]=v.useState(""),[ve,ue]=v.useState(""),[Y,se]=v.useState(""),[ke,be]=v.useState(""),[E,q]=v.useState(""),[oe,me]=v.useState(""),[Ne,Se]=v.useState(""),[Ce,Le]=v.useState(""),[Me,Ue]=v.useState(""),[at,Ve]=v.useState(""),[Oe,le]=v.useState(null),[Ct,Et]=v.useState(""),[He,$e]=v.useState(""),[pt,ct]=v.useState(""),[jt,At]=v.useState([]),[Wt,st]=v.useState([]),[St,zt]=v.useState([]),[bt,Dt]=v.useState((t==null?void 0:t.club_id)??""),[Pt,Ot]=v.useState((t==null?void 0:t.league_id)??""),[wt,Xt]=v.useState((t==null?void 0:t.club_id)||""),[Te,It]=v.useState((t==null?void 0:t.league_id)||""),[ot,Rt]=v.useState(null),[ht,Ye]=v.useState({}),[tr,_e]=v.useState(null),[Je,vt]=v.useState(""),ce=Xn(),[W,Ee]=v.useState(!1),[Ge,Be]=v.useState(!1),nt=F=>F?F.startsWith("http")?F:`${V}${F}`:null;function Mt(F){return new Promise((ie,P)=>{Gi(F,Q=>{if(Q.type==="error")console.warn("EXIF processing failed, using original image:",F),ie(F);else try{const he=Q.toDataURL("image/png");ie(he)}catch(he){console.warn("Canvas conversion failed, using original image:",he),ie(F)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const ut=async()=>{try{s(!0),u(null);const{data:F}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(F!=null&&F.length&&f(nt(F[0].logo_url)),Pt){const{data:he}=await re.from("nameleague").select("name_league").eq("id",Pt).single();he&&b(he.name_league);const{data:we}=await re.from("league_members").select("logo_url").eq("league_id",Pt).order("id",{ascending:!1}).limit(1);we!=null&&we.length&&w(nt(we[0].logo_url))}if(bt){const{data:he}=await re.from("nameclub").select("name_club, id").eq("id",bt).single();he&&$(he.name_club);const{data:we}=await re.from("club_members").select("logo_url").eq("club_id",bt).order("id",{ascending:!1}).limit(1);we!=null&&we.length&&j(nt(we[0].logo_url))}if(t!=null&&t.member_id){const{data:he}=await re.from("club_members").select("*").eq("id",t.member_id).single();he&&R(he)}if(bt&&Pt){const{data:he}=await re.from("athletes").select("*").eq("club_id",bt).eq("league_id",Pt).order("id",{ascending:!0});n(he||[])}else n([]);const[{data:ie},{data:P},{data:Q}]=await Promise.all([re.from("nameclub").select("id, name_club"),re.from("nameleague").select("id, name_league"),re.from("clubrole").select("*")]);ie&&st(ie),P&&zt(P),Q&&I(Q)}catch(F){console.error("fetchData error",F),u(F)}finally{s(!1)}};v.useEffect(()=>{t!=null&&t.club_id&&Dt(t.club_id),t!=null&&t.league_id&&Ot(t.league_id),ut()},[t,bt,Pt]),v.useEffect(()=>{let F=!0;return(async()=>{try{const P=bt||wt||(T==null?void 0:T.club_id);if(!P){F&&Ee(!1);return}const{data:Q,error:he}=await re.from("club_members").select("id, role, confirmation, year").eq("club_id",P).ilike("role","%president of the club%").limit(1);if(he){console.error("deriveDisabled error",he),F&&Ee(!1);return}const we=Array.isArray(Q)?Q[0]:null,Ae=we?String(we.confirmation).trim().toLowerCase()!=="true":!1,Ie=new Date().getFullYear(),rt=`${Ie}/${Ie+1}`,yt=we?String(we.year||"").trim()!==rt:!1;F&&(Ee(Ae||yt),Be(yt))}catch(P){console.error("deriveDisabled exception",P),F&&Ee(!1)}})(),()=>{F=!1}},[bt,wt,T,z]),v.useEffect(()=>{(async()=>{if(!(!Ct||!He))try{const{data:ie,error:P}=await re.from("categories").select("weight").eq("genres",Ct).eq("categories",He);P?console.error("Erreur rcupration poids:",P.message):At(ie.map(Q=>Q.weight))}catch(ie){console.error("Erreur inconnue:",ie)}})()},[Ct,He]),v.useEffect(()=>{(async()=>{if(!(!ht.genres||!ht.categories))try{const{data:ie,error:P}=await re.from("categories").select("weight").eq("genres",ht.genres).eq("categories",ht.categories);P?console.error("Erreur rcupration poids:",P.message):At(ie.map(Q=>Q.weight))}catch(ie){console.error("Erreur inconnue:",ie)}})()},[ht.genres,ht.categories]);const kt=async(F,ie)=>{const{data:P}=await re.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",F).eq("year",ie);if(P&&P.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:Q}=await re.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",F);return(Q||0)+1},X=async()=>{if(!Oe)return null;const F=Oe.name.split(".").pop(),ie=`athlete-${Date.now()}.${F}`,{error:P}=await re.storage.from("logos").upload(ie,Oe);if(P)return console.error("upload error",P),null;const{data:Q}=re.storage.from("logos").getPublicUrl(ie);return(Q==null?void 0:Q.publicUrl)??null};v.useEffect(()=>{ei()},[]);const te=async F=>{if(F.preventDefault(),u(""),g(""),l(!0),!M||!G){u("First name and Last name are required."),l(!1);return}if(!/^\d{18}$/.test(oe)){u("National ID (NID) must be exactly 18 digits."),l(!1);return}if(Ne!==Ce){u("Passwords do not match."),l(!1);return}if(!Te&&!Pt){u("League must be selected or provided in state."),l(!1);return}if(!wt&&!bt){u("Club must be selected or provided in state."),l(!1);return}const ie=Lt(ve,He);if(!ie.isValid){u(ie.message),l(!1);return}if(G&&Ne){const{data:he}=await re.from("athletes").select("*").eq("password",Ne);if(he&&he.length>0){u("Change your Password for this name because is already exist"),l(!1);return}}const P=new Date().getFullYear(),Q=`${P}/${P+1}`;try{const{data:he,error:we}=await re.from("athletes").select("id, national_id_number").eq("national_id_number",oe).eq("year",Q);if(we)throw we;if(he&&he.length>0){u("An athlete with this National ID is already registered for this season."),l(!1);return}}catch(he){u(he.message||String(he)),l(!1);return}try{const he=await X(),we=new Date().getFullYear(),Ae=`${we}/${we+1}`;let Ie;try{Ie=await kt(oe,Ae)}catch(Bt){u(Bt.message),setSubmitLoading(!1);return}const rt={last_name:G,first_name:M,date_of_birth:ve,place_of_birth:Y,role:ke,blood_type:E,national_id_number:oe,password:Ne,license_number:`ATH-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0],photos_url:he,nationality:Me,grade:at,renewal:Ie,confirmation:!1,genres:Ct,categories:He,weight:pt,league_id:Pt,club_id:bt,year:Ae},{error:yt}=await re.from("athletes").insert([rt]);if(yt)throw yt;g("Athlete added successfully."),de(""),U(""),ue(""),se(""),be(""),q(""),me(""),Se(""),Le(""),le(null),Ue(""),Ve(""),Et(""),$e(""),ct(""),await ut()}catch(he){console.error("handleSubmit error",he),u((he==null?void 0:he.message)||String(he))}finally{l(!1)}},je=F=>{Rt(F.id),Ye({...F})},ze=()=>{Rt(null),Ye({})},Lt=(F,ie)=>{if(!F||!ie)return{isValid:!1,message:"Date of birth and category are required."};const P=new Date(F),Q=new Date,he=Q.getFullYear()-P.getFullYear()-(Q.getMonth()<P.getMonth()||Q.getMonth()===P.getMonth()&&Q.getDate()<P.getDate()?1:0),Ae={Poussins:{min:9,max:10},Benjamins:{min:11,max:12},Minimes:{min:13,max:14},Cadets:{min:15,max:17},Juniors:{min:15,max:20},Hopefuls:{min:15,max:17},Seniors:{min:15,max:35},Veterans:{min:36,max:150}}[ie];return Ae?he<Ae.min||he>Ae.max?ie==="Veterans"?{isValid:!1,message:`For ${ie} category, athlete must be more than 35 years old. Current age: ${he}`}:{isValid:!1,message:`For ${ie} category, athlete must be between ${Ae.min} and ${Ae.max} years old. Current age: ${he}`}:{isValid:!0,message:""}:{isValid:!1,message:`Unknown category: ${ie}`}},qt=async()=>{l(!0);const F=Lt(ht.date_of_birth,ht.categories);if(!F.isValid){l(!1),u(F.message);return}const{error:ie}=await re.from("athletes").update({last_name:ht.last_name,first_name:ht.first_name,date_of_birth:ht.date_of_birth,place_of_birth:ht.place_of_birth,role:ht.role,blood_type:ht.blood_type,nationality:ht.nationality,grade:ht.grade,categories:ht.categories,weight:ht.weight,genres:ht.genres}).eq("id",ot);ie?(l(!1),u("Update failed: "+ie.message)):(await ut(),ze(),l(!1),g("Athlete updated successfully!"))},Xe=async F=>{F&&typeof F.preventDefault=="function"&&F.preventDefault();try{await qt()}catch(ie){u((ie==null?void 0:ie.message)||String(ie))}},rr=async F=>{try{const{data:ie,error:P}=await re.from("athletes").select("id, registration_date, confirmation").eq("id",F).single();if(P)throw P;const Q=new Date().toISOString().split("T")[0];if(!(ie!=null&&ie.registration_date)||ie.registration_date!==Q){u("Deletion allowed only on the same day of registration.");return}if(ie!=null&&ie.confirmation){u("You cannot delete on the same day if the athlete is confirmed.");return}if(!window.confirm("Delete this athlete?"))return;const{error:he}=await re.from("athletes").delete().eq("id",F);if(he)throw he;g("Athlete deleted successfully."),typeof ut=="function"&&await ut()}catch(ie){console.error("deleteAthlete error",ie),u((ie==null?void 0:ie.message)||"Error deleting athlete")}},L=F=>{if(!F||Object.keys(F).length===0){alert("No data available to export");return}A(F)},A=async F=>{let ie=null,P=null;try{if(F.club_id){const $t=(await Qn()).find(er=>er.id===F.club_id);ie=$t==null?void 0:$t.name_club}if(F.league_id){const $t=(await bi()).find(er=>er.id===F.league_id);P=$t==null?void 0:$t.name_league}}catch(it){console.error("Error fetching names:",it)}const Q=new Tt("portrait","mm","a4");Q.setFontSize(18),Q.setTextColor(40,40,40),Q.text("Algerian Judo Federation",14,15);const he=`Athlete Information - ${F.first_name} ${F.last_name}`;Q.setFontSize(16),Q.setTextColor(40,40,40),Q.text(he,14,30),Q.setFontSize(10);const we=new Date().toLocaleString();if(Q.text(`Generated: ${we}`,14,37),m)try{Q.addImage(m,"PNG",170,10,25,25)}catch(it){console.error("Error adding logo to PDF:",it)}let Ae=70;if(F.photos_url)try{const it=await Mt(F.photos_url),$t=it.startsWith("data:")?"PNG":"JPEG";Q.addImage(it,$t,14,45,25,20),Ae=70}catch(it){console.error("Error adding photo to PDF:",it);try{Q.addImage(F.photos_url,"JPEG",14,45,25,20)}catch($t){console.error("Fallback image addition also failed:",$t)}Ae=70}Q.setFontSize(12),F.confirmation?Q.setTextColor(0,128,0):Q.setTextColor(255,0,0);const Ie=F.confirmation?"CONFIRMED ":"NOT CONFIRMED ";Q.text(Ie,160,50);const rt=["last_name","first_name","date_of_birth","place_of_birth","role","blood_type","national_id_number","nationality","grade","genres","categories","weight","license_number","registration_date","year","renewal"],yt={last_name:"Last Name",first_name:"First Name",date_of_birth:"Date of Birth",place_of_birth:"Place of Birth",national_id_number:"National ID",license_number:"License Number",registration_date:"Registration Date"},Bt=rt.map(it=>[yt[it]||it.charAt(0).toUpperCase()+it.slice(1).replace(/_/g," "),F[it]||""]);pr(Q,{startY:Ae,head:[["Field","Value"]],body:Bt,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Ze=Q.lastAutoTable.finalY||200;if(Q.setFontSize(12),Q.setTextColor(0,0,0),Q.text("Medical certificate",14,Ze+20),Q.setDrawColor(0),Q.line(14,Ze+40,80,Ze+40),Q.setFontSize(10),F.club_id||C){const it=C||ie||`ID: ${F.club_id}`;Q.text(`Club: ${it}`,14,Ze+60),Q.text("Club Visa: _________________",14,Ze+70)}if(F.league_id||N){const it=N||P||`ID: ${F.league_id}`;Q.text(`League: ${it}`,120,Ze+60),Q.text("League Visa: _________________",120,Ze+70)}try{const it=JSON.stringify({id:F.id,name:`${F.first_name||""} ${F.last_name||""}`.trim(),license:F.license_number||"",club_id:F.club_id||"",league_id:F.league_id||"",confirmation:F.confirmation||"Unconfirmed"}),$t=await Si.toDataURL(it,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});Q.addImage($t,"PNG",180,Ze+75,15,15)}catch(it){console.error("Error generating QR code:",it)}const mt=`athlete_${F.first_name}_${F.last_name}_${F.id||"record"}.pdf`;Q.save(mt)},K=async()=>{if(!ye||ye.length===0){alert("No athletes data available to export");return}const F=new Tt("landscape","mm","a4"),ie=F.internal.pageSize.getWidth(),P=new Date().getFullYear(),Q=new Date().toLocaleDateString();let he={},we={};try{he=await Qn(),we=await bi()}catch(Ze){console.error("Error fetching club/league names:",Ze)}const Ae=()=>{if(F.setFontSize(10),F.setFont("helvetica","normal"),F.setTextColor(40,40,40),F.text(`Date: ${Q}`,14,15),F.setFontSize(16),F.setFont("helvetica","bold"),F.setTextColor(40,40,40),F.text("Algerian Judo Federation",ie/2,15,{align:"center"}),m)try{F.addImage(m,"PNG",ie-40,5,25,25)}catch(Ze){console.error("Error adding logo to PDF:",Ze)}F.setFontSize(14),F.setFont("helvetica","normal"),F.setTextColor(40,40,40),F.text(`League: ${N||"Unknown League"}`,ie/2,30,{align:"center"}),F.setFontSize(14),F.setFont("helvetica","normal"),F.setTextColor(40,40,40),F.text(`Club: ${C||"Unknown Club"}`,ie/2,37,{align:"center"}),F.setFontSize(14),F.setFont("helvetica","bold"),F.setTextColor(220,53,69),F.text("Athletes Members - Category Situation",ie/2,47,{align:"center"})},Ie=Ze=>Ze.sort((it,$t)=>{const er=new Date(it.date_of_birth||"1900-01-01"),nr=new Date($t.date_of_birth||"1900-01-01");return er-nr}).map(it=>[ae(it.last_name||""),ae(it.first_name||""),ae(it.date_of_birth||""),ae(it.place_of_birth||""),ae(it.blood_type||""),ae(it.nationality||""),ae(it.grade||""),ae(it.genres||""),ae(it.categories||""),ae(it.weight||""),ae(it.national_id_number||""),it.confirmation?"Yes":"No",ae(it.license_number||"")]),rt={};ye.forEach(Ze=>{const mt=Ze.year||"Unknown Year",it=Ze.club_id,$t=it?he[it]||`Club ID: ${it}`:"Unknown Club",er=Ze.categories||"Uncategorized",nr=Ze.genres||"Unspecified",mr=Ze.weight||"Unspecified";rt[mt]||(rt[mt]={}),rt[mt][$t]||(rt[mt][$t]={}),rt[mt][$t][er]||(rt[mt][$t][er]={}),rt[mt][$t][er][nr]||(rt[mt][$t][er][nr]={}),rt[mt][$t][er][nr][mr]||(rt[mt][$t][er][nr][mr]=[]),rt[mt][$t][er][nr][mr].push(Ze)}),Ae();let yt=50,Bt=!0;for(const[Ze,mt]of Object.entries(rt)){yt>180&&!Bt&&(F.addPage(),Ae(),yt=50),F.setFontSize(13),F.setTextColor(0,0,0),F.setFont(void 0,"bold"),F.text(`Year: ${Ze}`,14,yt),yt+=15;for(const[it,$t]of Object.entries(mt))for(const[er,nr]of Object.entries($t)){yt>210&&(F.addPage(),Ae(),yt=50,F.setFontSize(13),F.setTextColor(0,0,0),F.setFont(void 0,"bold"),F.text(`Year: ${Ze}`,14,yt),yt+=15,F.setFontSize(12),F.text(`  Club: ${it}`,20,yt),yt+=12),F.setFontSize(11),F.setTextColor(0,0,0),F.setFont(void 0,"bold"),F.text(`    Club: ${it} - Category: ${er}`,26,yt),yt+=10;for(const[mr,sr]of Object.entries(nr)){yt>220&&(F.addPage(),Ae(),yt=50,F.setFontSize(13),F.setTextColor(0,0,0),F.setFont(void 0,"bold"),F.text(`Year: ${Ze}`,14,yt),yt+=15,F.setFontSize(11),F.text(`    Club: ${it} - Category: ${er}`,26,yt),yt+=10);for(const[nn,jr]of Object.entries(sr)){yt>230&&(F.addPage(),Ae(),yt=50,F.setFontSize(13),F.setTextColor(0,0,0),F.setFont(void 0,"bold"),F.text(`Year: ${Ze}`,14,yt),yt+=15,F.setFontSize(11),F.text(`    Club: ${it} - Category: ${er}`,26,yt),yt+=10),F.setFontSize(10),F.setTextColor(0,0,0),F.setFont(void 0,"bold"),F.text(`      Gender: ${mr} - Weight: ${nn}`,32,yt),yt+=8;const hr=Ie(jr);pr(F,{startY:yt,head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Gender","Category","Weight","NID","Confirmation","License #"]],body:hr,theme:"grid",headStyles:{fillColor:[40,167,69],textColor:[255,255,255],fontSize:6},styles:{fontSize:5,overflow:"linebreak"},margin:{left:44},columnStyles:{0:{cellWidth:18},1:{cellWidth:18},2:{cellWidth:18},3:{cellWidth:18},4:{cellWidth:12},5:{cellWidth:18},6:{cellWidth:12},7:{cellWidth:12},8:{cellWidth:18},9:{cellWidth:12},10:{cellWidth:20},11:{cellWidth:15},12:{cellWidth:20}}}),yt=F.lastAutoTable.finalY+8,Bt=!1}yt+=3}yt+=5}yt+=12}F.save(`athletes_hierarchical_${P}.pdf`)},ae=F=>F?String(F).replace(/=U/g,"").replace(/<a/g,"").replace(/=Ud/g,"").replace(/-/g,"").replace(/-d/g,"").replace(/<a/g,"").replace(/</g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/% % %/g,"").replace(/%%%/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/%+/g,"").replace(/\s*%\s*/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/ /g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").trim():"",Pe=(F,ie,P,Q)=>{const he=F.internal.pageSize.getWidth();if(m)try{F.addImage(m,"PNG",he-40,15,25,25)}catch(Ie){console.warn("Could not add federation logo:",Ie)}const we=new Date().toLocaleDateString();F.setFontSize(10),F.setFont("helvetica","normal"),F.text(`Print Date: ${we}`,15,20),F.setFontSize(16),F.setFont("helvetica","bold"),F.text(ae(ie),he/2,25,{align:"center"});let Ae=40;return P&&(F.setFontSize(12),F.setFont("helvetica","normal"),F.text(`League: ${ae(P)}`,he/2,Ae,{align:"center"}),Ae+=15),Q&&(F.setFontSize(12),F.setFont("helvetica","normal"),F.text(`Club: ${ae(Q)}`,he/2,Ae,{align:"center"}),Ae+=15),Ae+2},tt=async()=>{if(!wt&&!Te){u("No club or league selected");return}try{let F=[];if(wt){const{data:Ie,error:rt}=await re.from("athletes").select("*").eq("club_id",wt);if(rt)throw rt;F=Ie||[]}else if(Te){const{data:Ie,error:rt}=await re.from("athletes").select("*").eq("league_id",Te);if(rt)throw rt;F=Ie||[]}if(!F||F.length===0){u("No athletes found");return}const ie=new Tt("landscape");let P=Pe(ie,Z,N,C);ie.setFontSize(14),ie.setFont("helvetica","bold"),ie.setTextColor(255,0,0),ie.text("Athletes - General Situation",ie.internal.pageSize.getWidth()/2,P,{align:"center"}),ie.setTextColor(0,0,0),P+=20;const Q={};F.forEach(Ie=>{const rt=Ie.year||"Unknown Year";Q[rt]||(Q[rt]=[]),Q[rt].push(Ie)});const he=Object.keys(Q).sort();for(const Ie of he){const yt=Q[Ie].sort((Ze,mt)=>{const it=new Date(Ze.date_of_birth||"1900-01-01"),$t=new Date(mt.date_of_birth||"1900-01-01");return it-$t});ie.setFontSize(14),ie.setFont("helvetica","bold"),ie.setTextColor(0,0,0),ie.text(`Year: ${Ie}`,20,P),P+=15;const Bt=yt.map(Ze=>[ae(Ze.last_name||""),ae(Ze.first_name||""),ae(Ze.date_of_birth||""),ae(Ze.place_of_birth||""),ae(Ze.blood_type||""),ae(Ze.nationality||""),ae(Ze.grade||""),ae(Ze.genres||""),ae(Ze.categories||""),ae(Ze.weight||""),ae(Ze.national_id_number||""),Ze.confirmation?"Yes":"No",ae(Ze.license_number||"")]);pr(ie,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Gender","Category","Weight","NID","Confirmation","License #"]],body:Bt,startY:P,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},didDrawPage:function(Ze){Ze.pageNumber>1&&Pe(ie,Z,N,C)}}),P=ie.lastAutoTable.finalY+20,P>ie.internal.pageSize.getHeight()-50&&(ie.addPage(),P=Pe(ie,Z,N,C))}const we=new Date().getFullYear(),Ae=N||C||"athletes";ie.save(`${ae(Ae)}_general_athletes_${we}.pdf`)}catch(F){console.error("Error exporting general PDF:",F),u("Error exporting PDF. Please try again.")}},D=async()=>{if(!wt&&!Te){u("No club or league selected");return}try{let F=[];if(wt){const{data:Ie,error:rt}=await re.from("athletes").select("*").eq("club_id",wt);if(rt)throw rt;F=Ie||[]}else if(Te){const{data:Ie,error:rt}=await re.from("athletes").select("*").eq("league_id",Te);if(rt)throw rt;F=Ie||[]}if(!F||F.length===0){u("No athletes found");return}const ie=new Tt("landscape");let P=Pe(ie,Z,N,C);ie.setFontSize(14),ie.setFont("helvetica","bold"),ie.setTextColor(255,0,0),ie.text("Athletes - Grade and Role Situation",ie.internal.pageSize.getWidth()/2,P,{align:"center"}),ie.setTextColor(0,0,0),P+=20,ie.setFontSize(12),ie.setFont("helvetica","bold"),ie.text("SECTION GRADE",20,P),P+=15;const Q={};F.forEach(Ie=>{const rt=Ie.year||"Unknown Year",yt=Ie.grade||"Unknown Grade";Q[rt]||(Q[rt]={}),Q[rt][yt]||(Q[rt][yt]=[]),Q[rt][yt].push(Ie)});const he=Object.keys(Q).sort();for(const Ie of he){const rt=Q[Ie];ie.setFontSize(14),ie.setFont("helvetica","bold"),ie.setTextColor(0,0,0),ie.text(`Year: ${Ie}`,20,P),P+=15;const yt=Object.keys(rt).sort();for(const Bt of yt){const mt=rt[Bt].sort(($t,er)=>{const nr=new Date($t.date_of_birth||"1900-01-01"),mr=new Date(er.date_of_birth||"1900-01-01");return nr-mr});ie.setFontSize(12),ie.setFont("helvetica","bold"),ie.text(`Grade: ${Bt}`,30,P),P+=10;const it=mt.map($t=>[ae($t.last_name||""),ae($t.first_name||""),ae($t.date_of_birth||""),ae($t.place_of_birth||""),ae($t.blood_type||""),ae($t.nationality||""),ae($t.genres||""),ae($t.categories||""),ae($t.weight||""),ae($t.national_id_number||""),$t.confirmation?"Yes":"No",ae($t.license_number||"")]);pr(ie,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Gender","Category","Weight","NID","Confirmation","License #"]],body:it,startY:P,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},didDrawPage:function($t){$t.pageNumber>1&&Pe(ie,Z,N,C)}}),P=ie.lastAutoTable.finalY+15,P>ie.internal.pageSize.getHeight()-80&&(ie.addPage(),P=Pe(ie,Z,N,C),P+=20)}P+=10}const we=new Date().getFullYear(),Ae=N||C||"athletes";ie.save(`${ae(Ae)}_grade_role_athletes_${we}.pdf`)}catch(F){console.error("Error exporting grade role PDF:",F),u("Error exporting PDF. Please try again.")}},xe=["Algerian","Tunisian"],ye=r.filter(F=>{var P,Q;const ie=Je.toLowerCase();return(((P=F.first_name)==null?void 0:P.toLowerCase())??"").includes(ie)||(((Q=F.last_name)==null?void 0:Q.toLowerCase())??"").includes(ie)||(F.national_id_number??"").includes(ie)});return v.useEffect(()=>{const F=setTimeout(()=>{},300);return()=>clearTimeout(F)},[Je]),v.useEffect(()=>{const F=setTimeout(()=>{},300);return()=>clearTimeout(F)},[Je]),a.jsxs("div",{className:"app-container",children:[i&&a.jsx(rn,{}),a.jsx("header",{children:a.jsxs("div",{className:"federation-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[m?a.jsx("img",{src:m,alt:"Federation Logo",className:"federation-logo"}):a.jsx(ti,{className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:Z})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[x?a.jsx("img",{src:x,alt:"League Logo",className:"member-logo"}):a.jsx("p",{children:"No league logo"}),a.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:N||"League Name"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[S?a.jsx("img",{src:S,alt:"Club Logo",className:"member-logo"}):a.jsx("p",{children:"No club logo"}),a.jsx("h3",{className:"federation-title",style:{fontSize:"1.2rem"},children:C||"Club Name"})]})]})}),a.jsx("section",{className:"app-container",children:a.jsxs("div",{className:"form-table-wrapper",children:[a.jsx("h2",{children:"Club Member"}),T?a.jsxs("p",{children:[T.first_name," ",T.last_name," "," ",a.jsx("strong",{children:(()=>{var P;const F=z.find(Q=>Q.id===parseInt(T.role_id)),ie=typeof T.club_role=="object"?(P=T.club_role)==null?void 0:P.club_role:T.club_role;return(F==null?void 0:F.club_role)||ie||T.role||"No role"})()})]}):a.jsx("p",{children:"No member found with these credentials."}),a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx("button",{type:"button",className:"primary-btn","data-id":"1",onClick:F=>{br(F.target),bt&&T?e("/club-member-listC",{state:{club_id:bt,club_name:C,league_id:Pt,member_id:T==null?void 0:T.id,first_name:T==null?void 0:T.first_name,last_name:T==null?void 0:T.last_name,role:T==null?void 0:T.role_id}}):alert("Club or member not loaded yet.")},children:"The Club Member List"}),a.jsx("button",{type:"button",className:"primary-btn","data-id":"2",onClick:F=>{br(F.target),bt&&T?(console.log(" Navigating to /AthletePage with state:",{club_id:bt,club_name:C,league_id:Pt,member_id:T.id,first_name:T.first_name,last_name:T.last_name,role:T.role_id,club_logo:S}),e("/AthletePage",{state:{club_id:bt,club_name:C,league_id:Pt,member_id:T.id,first_name:T.first_name,last_name:T.last_name,role:T.role_id,club_logo:S}})):alert("Club or member not loaded yet.")},children:"List of Athletes"})]}),a.jsx("h2",{className:"form-title",children:"Add Athlete"}),a.jsxs("form",{onSubmit:te,className:"form-grid",children:[a.jsxs("label",{children:["Last Name *",a.jsx("input",{value:G,onChange:F=>de(F.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{value:M,onChange:F=>U(F.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:ve,onChange:F=>ue(F.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{value:Y,onChange:F=>se(F.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:Me,onChange:F=>Ue(F.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),xe.map((F,ie)=>a.jsx("option",{value:F,children:F},ie))]})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:at,onChange:F=>Ve(F.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"yellow belt"}),a.jsx("option",{children:"orange belt"}),a.jsx("option",{children:"green belt"}),a.jsx("option",{children:"blue belt"})]}),a.jsx("small",{style:{color:"#666"},children:"Temporary: select brown or black belt until the DB constraint is updated."})]}),a.jsxs("label",{children:["Genres *",a.jsxs("select",{value:Ct,onChange:F=>Et(F.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Men",children:"Men"}),a.jsx("option",{value:"Women",children:"Women"})]})]}),a.jsxs("label",{children:["Categories *",a.jsxs("select",{value:He,onChange:F=>$e(F.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Benjamins",children:"Benjamins"}),a.jsx("option",{value:"Minimes",children:"Minimes"}),a.jsx("option",{value:"Cadets",children:"Cadets"}),a.jsx("option",{value:"Juniors",children:"Juniors"}),a.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),a.jsx("option",{value:"Seniors",children:"Seniors"}),a.jsx("option",{value:"Veterans",children:"Veterans"}),a.jsx("option",{value:"Cadets By Team",children:"Cadets By Team"}),a.jsx("option",{value:"Juniors By Team",children:"Juniors By Team"}),a.jsx("option",{value:"Seniors By Team",children:"Seniors By Team"}),a.jsx("option",{value:"Cadets By Mixed Team",children:"Cadets By Mixed Team"}),a.jsx("option",{value:"Juniors By Mixed Team",children:"Juniors By Mixed Team"}),a.jsx("option",{value:"Seniors By Mixed Team",children:"Seniors By Mixed Team"})]})]}),a.jsxs("label",{children:["Weight *",a.jsxs("select",{value:pt,onChange:F=>ct(F.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),jt.map((F,ie)=>a.jsx("option",{value:F,children:F},ie))]})]}),a.jsxs("label",{children:["National ID Number *",a.jsx("input",{value:oe,onChange:F=>me(F.target.value.replace(/\D/g,"")),maxLength:18,required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:E,onChange:F=>q(F.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:Ne,onChange:F=>Se(F.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:Ce,onChange:F=>Le(F.target.value),required:!0})]}),a.jsxs("label",{children:["Club *",a.jsxs("select",{value:wt,onChange:F=>Xt(F.target.value),required:!0,disabled:!!(t!=null&&t.club_id),children:[a.jsx("option",{value:"",children:"Select Club"}),Wt.map(F=>a.jsx("option",{value:F.id,children:F.name_club},F.id))]})]}),a.jsxs("label",{children:["League *",a.jsxs("select",{value:Te,onChange:F=>It(F.target.value),required:!0,disabled:!!(t!=null&&t.league_id),children:[a.jsx("option",{value:"",children:"Select League"}),St.map(F=>a.jsx("option",{value:F.id,children:F.name_league},F.id))]})]}),a.jsxs("label",{children:["Upload Athlete Photo *",a.jsx("input",{type:"file",onChange:F=>{var ie;return le(((ie=F.target.files)==null?void 0:ie[0])??null)},required:!0})]}),a.jsx("div",{className:"btn-row",children:a.jsx("button",{type:"submit",className:"primary-b",disabled:W,children:"Save Athlete"})}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),a.jsxs("h2",{className:"form-title",children:["Athletes of ",C," (",N,")"]}),a.jsxs("div",{className:"form-grid",children:[a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"Search Athlete"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:Je,onChange:F=>vt(F.target.value)})})]}),a.jsx("div",{className:"table-container",ref:ce,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"NID"})," ",a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Renewal"})," ",a.jsx("th",{children:"Year"})," ",a.jsx("th",{children:"Genres"}),a.jsx("th",{children:"Categories"}),a.jsx("th",{children:"Weight"}),a.jsx("th",{children:"License #"})," ",a.jsx("th",{children:"Registration"})," ",a.jsx("th",{children:"Photos"})," ",a.jsx("th",{children:"Confirmation"})," ",a.jsx("th",{children:"conf_Request"})," ",a.jsx("th",{children:"Club ID"})," ",a.jsx("th",{children:"League ID"})," ",a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ye.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:22,children:"No athletes found for this club/league."})}):ye.map(F=>a.jsxs("tr",{onDoubleClick:()=>L(F),style:{cursor:"pointer"},children:[a.jsx("td",{children:ot===F.id?a.jsx("input",{value:ht.last_name||"",onChange:ie=>Ye({...ht,last_name:ie.target.value})}):F.last_name}),a.jsx("td",{children:ot===F.id?a.jsx("input",{value:ht.first_name||"",onChange:ie=>Ye({...ht,first_name:ie.target.value})}):F.first_name}),a.jsx("td",{children:ot===F.id?a.jsx("input",{type:"date",value:ht.date_of_birth||"",onChange:ie=>Ye({...ht,date_of_birth:ie.target.value})}):F.date_of_birth}),a.jsx("td",{children:ot===F.id?a.jsx("input",{value:ht.place_of_birth||"",onChange:ie=>Ye({...ht,place_of_birth:ie.target.value})}):F.place_of_birth}),a.jsx("td",{children:F.role}),a.jsx("td",{children:ot===F.id?a.jsxs("select",{value:ht.blood_type||"",onChange:ie=>Ye({...ht,blood_type:ie.target.value}),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):F.blood_type}),a.jsx("td",{children:F.national_id_number}),a.jsx("td",{children:ot===F.id?a.jsxs("select",{value:ht.nationality||"",onChange:ie=>Ye({...ht,nationality:ie.target.value}),children:[a.jsx("option",{value:"",children:"-- Select --"}),xe.map((ie,P)=>a.jsx("option",{value:ie,children:ie},P))]}):F.nationality}),a.jsx("td",{children:ot===F.id?a.jsxs("select",{value:ht.grade||"",onChange:ie=>Ye({...ht,grade:ie.target.value}),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"yellow belt",children:"yellow belt"}),a.jsx("option",{value:"orange belt",children:"orange belt"}),a.jsx("option",{value:"green belt",children:"green belt"}),a.jsx("option",{value:"blue belt",children:"blue belt"})]}):F.grade}),a.jsx("td",{children:F.renewal}),a.jsx("td",{children:F.year}),a.jsx("td",{children:ot===F.id?a.jsxs("select",{value:ht.genres||"",onChange:ie=>{const P=ie.target.value;Ye({...ht,genres:P,weight:""})},children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Men",children:"Men"}),a.jsx("option",{value:"Women",children:"Women"})]}):F.genres}),a.jsx("td",{children:ot===F.id?a.jsxs("select",{value:ht.categories||"",onChange:ie=>{const P=ie.target.value;Ye({...ht,categories:P,weight:""})},children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Benjamins",children:"Benjamins"}),a.jsx("option",{value:"Minimes",children:"Minimes"}),a.jsx("option",{value:"Cadets",children:"Cadets"}),a.jsx("option",{value:"Juniors",children:"Juniors"}),a.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),a.jsx("option",{value:"Seniors",children:"Seniors"}),a.jsx("option",{value:"Veterans",children:"Veterans"})]}):F.categories}),a.jsx("td",{children:ot===F.id?a.jsxs("select",{value:ht.weight||"",onChange:ie=>Ye({...ht,weight:ie.target.value}),disabled:!ht.genres||!ht.categories,children:[a.jsx("option",{value:"",children:"-- Select --"}),jt.map((ie,P)=>a.jsx("option",{value:ie,children:ie},P))]}):F.weight}),a.jsx("td",{children:F.license_number}),a.jsx("td",{children:F.registration_date}),a.jsx("td",{children:F.photos_url?a.jsx("img",{src:F.photos_url,alt:`${F.first_name} ${F.last_name}`,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"8px"}}):"No Photo"}),a.jsx("td",{children:F.confirmation?"":""}),a.jsx("td",{children:F.confirmation_request?"conf_Request":"conf_Not_request"}),a.jsx("td",{children:F.club_id}),a.jsx("td",{children:F.league_id}),a.jsx("td",{children:ot===F.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"primary-S",onClick:Xe,disabled:W,children:"Save"}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:ze,disabled:W,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"primary-M",onClick:()=>je(F),disabled:W,children:"Modify"}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>rr(F.id),disabled:W,children:"Delete"}),a.jsx("button",{type:"button",className:F.confirmation_request?"cancel-btn":"confirm-btn",disabled:W,onClick:()=>{if(W)return;const ie=F.confirmation_request?"Cancel confirmation request for this athlete?":"Request confirmation for this athlete?";window.confirm(ie)&&(async()=>{try{const{data:P,error:Q}=await re.from("athletes").select("confirmation, confirmation_request").eq("id",F.id).single();if(Q)throw Q;const he=!(P!=null&&P.confirmation_request),{error:we}=await re.from("athletes").update({confirmation_request:he}).eq("id",F.id);if(we)throw we;n(Ae=>Ae.map(Ie=>Ie.id===F.id?{...Ie,confirmation_request:he}:Ie)),await ut(),g(he?" Confirmation requested.":" Confirmation request canceled."),setTimeout(()=>g(""),2e3)}catch(P){u(P.message||"Failed to update confirmation request")}})()},children:F.confirmation_request?"Cancel Request Confirmation":"Request Confirmation"}),a.jsx("button",{type:"button",className:"primary-M",disabled:W,onClick:async()=>{try{const ie=new Date().getFullYear(),P=`${ie}/${ie+1}`,{data:Q,error:he}=await re.from("athletes").select("id").eq("national_id_number",F.national_id_number).eq("year",P);if(he)throw he;if(Q&&Q.length>0){u("we can not add this athlete because is ready existe");return}const{count:we,error:Ae}=await re.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",F.national_id_number);if(Ae)throw Ae;const Ie=(we||0)+1,rt={last_name:F.last_name,first_name:F.first_name,date_of_birth:F.date_of_birth,place_of_birth:F.place_of_birth,role:F.role,blood_type:F.blood_type,nationality:F.nationality,grade:F.grade,categories:F.categories,weight:F.weight,genres:F.genres,national_id_number:F.national_id_number,password:F.password,license_number:`ATH-${ie}-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0],photos_url:F.photos_url,league_id:F.league_id,club_id:F.club_id,year:P,renewal:Ie,confirmation:!1,confirmation_request:!1},{error:yt}=await re.from("athletes").insert([rt]);if(yt)throw yt;g("Renewal created successfully."),typeof ut=="function"&&await ut()}catch(ie){u((ie==null?void 0:ie.message)||String(ie))}},children:"renewal"})]})})]},F.id))})]})}),a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:tt,disabled:W,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:K,disabled:W,children:"Export by Category"}),a.jsx("button",{className:"primary-b",onClick:D,disabled:W,children:"Export by Grade PDF"})]})}),c&&a.jsx(An,{error:c,onClose:()=>u(null)}),d&&a.jsx(In,{success:d,onClose:()=>g("")}),o&&a.jsx($i,{message:"Processing athlete data..."}),a.jsx(gn,{}),a.jsx("footer",{className:"footer bg-red-600 text-white p-4 mt-6",children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function Ok(){const{state:t}=di(),e=Ur(),[r,n]=v.useState(null),[i,s]=v.useState("Algerian Judo Federation"),[o,l]=v.useState(""),[c,u]=v.useState(null),[d,g]=v.useState(""),[m,f]=v.useState(null),[x,w]=v.useState(null),[N,b]=v.useState(null),[S,j]=v.useState([]),[C,$]=v.useState(!1),[Z,V]=v.useState(!1),[T,R]=v.useState(!1),[z,I]=v.useState(""),[G,de]=v.useState("");return v.useEffect(()=>{(async()=>{const{data:U,error:ve}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!ve&&U&&U.length>0&&n(U[0].logo_url)})()},[]),v.useEffect(()=>{if(!(t!=null&&t.league_id))return;(async()=>{const{data:U}=await re.from("nameleague").select("name_league").eq("id",t.league_id).single();U&&l(U.name_league);const{data:ve}=await re.from("league_members").select("logo_url").eq("league_id",t.league_id).order("id",{ascending:!1}).limit(1);ve&&ve.length>0&&ve[0].logo_url&&u(ve[0].logo_url)})()},[t==null?void 0:t.league_id]),v.useEffect(()=>{if(!(t!=null&&t.club_id))return;(async()=>{const{data:U}=await re.from("nameclub").select("name_club").eq("id",t.club_id).single();U&&g(U.name_club);const{data:ve}=await re.from("club_members").select("logo_url").eq("club_id",t.club_id).order("id",{ascending:!1}).limit(1);ve&&ve.length>0&&ve[0].logo_url&&f(ve[0].logo_url);const{data:ue}=await re.from("nameclub").select("*").eq("id",t.club_id).single();ue&&b(ue)})()},[t==null?void 0:t.club_id]),v.useEffect(()=>{if(!(t!=null&&t.club_id)||!(t!=null&&t.league_id)||!(t!=null&&t.first_name)||!(t!=null&&t.last_name)||!(t!=null&&t.password))return;(async()=>{const{data:U,error:ve}=await re.from("club_members").select("*").eq("club_id",t.club_id).eq("league_id",t.league_id).eq("first_name",t.first_name).eq("last_name",t.last_name).eq("password",t.password).single();!ve&&U&&w(U)})()},[t]),v.useEffect(()=>{(async()=>{const{data:U,error:ve}=await re.from("clubrole").select("*");ve&&console.error("Error fetching roles:",ve.message),U&&j(U)})()},[]),t?a.jsxs("div",{className:"app-container",children:[C&&a.jsx(rn,{}),a.jsx("header",{children:a.jsxs("div",{className:"federation-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r?a.jsx("img",{src:r,alt:"Federation Logo",className:"federation-logo"}):a.jsx(ti,{className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:i})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c?a.jsx("img",{src:c,alt:"League Logo",className:"member-logo"}):a.jsx("p",{children:"No league logo"}),a.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:o||"League Name"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[m&&a.jsx("img",{src:m,alt:"Club Logo",className:"member-logo"}),a.jsx("h3",{className:"federation-title",style:{fontSize:"1.2rem"},children:d||"Club Name"})]})]})}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{children:"Club Member"}),x?a.jsxs("p",{children:[x.first_name," ",x.last_name," "," ",a.jsx("strong",{children:(()=>{const M=S.find(U=>U.id===parseInt(x.role_id));return(M==null?void 0:M.club_role)||x.club_role||x.role||"No role"})()})]}):a.jsx("p",{children:"No member found with these credentials."}),a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx("button",{type:"button",className:"primary-btn",onClick:()=>{N&&x?(console.log(" Navigating to /club-member-listC with state:",{club_id:N.id,club_name:N.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const M=S.find(U=>U.id===parseInt(x.role_id));return(M==null?void 0:M.club_role)||x.club_role||x.role||"No Role"})(),club_logo:N.logo_url||m}),setTimeout(()=>{e("/club-member-listC",{state:{club_id:N.id,club_name:N.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const M=S.find(U=>U.id===parseInt(x.role_id));return(M==null?void 0:M.club_role)||x.club_role||x.role||"No Role"})(),club_logo:N.logo_url||m}})},1500)):console.log("No club or member found, cannot navigate.")},disabled:Z,children:"The Club Member List"}),a.jsx("button",{type:"button",className:"primary-btn",onClick:()=>{N&&x?(R(!0),console.log(" Navigating to /AthletePage with state:",{club_id:N.id,club_name:N.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const M=S.find(U=>U.id===parseInt(x.role_id));return(M==null?void 0:M.club_role)||x.club_role||x.role||"No Role"})(),club_logo:N.logo_url||m}),setTimeout(()=>{e("/AthletePage",{state:{club_id:N.id,club_name:N.name_club,league_id:t==null?void 0:t.league_id,member_id:x.id,first_name:x.first_name,last_name:x.last_name,role:(()=>{const M=S.find(U=>U.id===parseInt(x.role_id));return(M==null?void 0:M.club_role)||x.club_role||x.role||"No Role"})(),club_logo:N.logo_url||m}})},1500)):console.log("No club or member found, cannot navigate.")},disabled:T,children:"List of Athletes"})]})]}),Z&&a.jsx("div",{children:"Loading..."}),T&&a.jsx("div",{children:"Loading..."}),z&&a.jsx(An,{error:z,onClose:()=>I("")}),G&&a.jsx(In,{success:G,onClose:()=>de("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]}):a.jsx("p",{children:"No account data found."})}const Bk="/assets/certificat-de-judo2-CzQTdYUm.png";function Mk(){const t=Ur(),e=di(),[r,n]=v.useState(!1),[i,s]=v.useState(""),[o,l]=v.useState("Algeria Federation"),[c,u]=v.useState(null),[d,g]=v.useState(""),[m,f]=v.useState([]),[x,w]=v.useState(!1),[N,b]=v.useState([]),[S,j]=v.useState(!1),[C,$]=v.useState(""),[Z,V]=v.useState(""),[T,R]=v.useState("");v.useEffect(()=>{e.state?(console.log(" Athlete data received:",e.state),console.log(" Photo URL field (photos_url):",e.state.photos_url),console.log(" Photo URL field (photo_url):",e.state.photo_url),console.log(" All available fields:",Object.keys(e.state)),u(e.state)):(console.log(" No athlete data found in navigation state"),t("/"))},[e.state,t]),v.useEffect(()=>{(async()=>{if(!(!(c!=null&&c.club_id)&&!(c!=null&&c.league_id)))try{if(c.club_id){const ve=(await Qn())[c.club_id];$(ve||`Club ID: ${c.club_id}`)}if(c.league_id){const ve=(await bi())[c.league_id];V(ve||`League ID: ${c.league_id}`)}}catch(U){console.error("Error fetching club/league names:",U),c.club_id&&$(`Club ID: ${c.club_id}`),c.league_id&&V(`League ID: ${c.league_id}`)}})()},[c]),v.useEffect(()=>{c&&(async()=>{try{const U=JSON.stringify({id:c.id,name:`${c.first_name||""} ${c.last_name||""}`.trim(),license:c.license_number||"",club_id:c.club_id||"",league_id:c.league_id||"",confirmation:c.confirmation||"Unconfirmed"}),ve=await Si.toDataURL(U,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});g(ve)}catch(U){console.error("Error generating QR code:",U)}})()},[c]),v.useEffect(()=>{if(c&&c.grade==="black belt"){const M={first_name:c.first_name||"",last_name:c.last_name||"",date_of_birth:c.date_of_birth||"",place_of_birth:c.place_of_birth||""};Si.toDataURL(JSON.stringify(M),{width:240,margin:1}).then(U=>R(U)).catch(U=>console.error("Error generating certificate QR:",U))}else R("")},[c]),v.useEffect(()=>{(async()=>{try{const{data:U,error:ve}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!ve&&U&&U.length>0&&s(U[0].logo_url)}catch(U){console.error("Error fetching federation logo:",U)}})()},[]),v.useEffect(()=>{(async()=>{j(!0);try{const{data:U,error:ve}=await re.from("athletes").select("*").order("id",{ascending:!1});!ve&&U?(b(U),console.log(" All athletes fetched:",U.length,"athletes")):console.error("Error fetching all athletes:",ve)}catch(U){console.error("Error fetching all athletes:",U)}finally{j(!1)}})()},[]),v.useEffect(()=>{(async()=>{if(c!=null&&c.national_id_number){w(!0);try{const U=c.national_id_number,{data:ve,error:ue}=await re.from("athletes").select("*").eq("national_id_number",U),{data:Y,error:se}=await re.from("league_members").select("*").eq("national_id_number",U),{data:ke,error:be}=await re.from("club_members").select("*").eq("national_id_number",U),E=[];ve&&!ue&&ve.forEach(q=>{E.push({...q,source:"Athletes",table_type:"athletes"})}),Y&&!se&&Y.forEach(q=>{E.push({...q,source:"League Members",table_type:"league_members"})}),ke&&!be&&ke.forEach(q=>{E.push({...q,source:"Club Members",table_type:"club_members"})}),f(E),console.log(" Related athletes found:",E)}catch(U){console.error("Error fetching related athletes:",U)}finally{w(!1)}}})()},[c]);const z=async M=>{try{n(!0);const U=new Tt("landscape","pt","a4"),ve=U.internal.pageSize.getWidth(),ue=U.internal.pageSize.getHeight(),Y=`${M.first_name||""} ${M.last_name||""}`.trim();try{U.addImage(Bk,"PNG",0,0,ve,ue),U.setTextColor(0,0,0),U.setFontSize(14),U.setFont("times","normal"),U.text("The Ministry of Youth and Sports",ve/2+80,105,{align:"center"}),U.setFontSize(14),U.setFont("times","bold"),U.text("Algerian judo federation",ve/2+80,130,{align:"center"}),U.setFontSize(24),U.setFont("times","bold"),U.text("Judo Certificate",ve/2+80,200,{align:"center"}),U.setFontSize(16),U.setFont("times","normal"),U.text(`Mr. ${Y} belt Black is hereby awarded`,ve/2+80,240,{align:"center"}),U.text("this certificate, in recognition of his progress, his sporting qualities,",ve/2+80,280,{align:"center"}),U.text("his loyalty to his school, and to the spirit of Judo.",ve/2+80,320,{align:"center"}),U.setFontSize(14),U.setFont("times","bold"),U.text("The President:",260,400),U.text("The Instructor:",600,400)}catch(ke){console.warn("Failed to load background image, using fallback design:",ke),U.setLineWidth(4),U.setDrawColor(0,0,0),U.rect(20,20,ve-40,ue-40),U.setLineWidth(1),U.rect(40,40,ve-80,ue-80),U.setTextColor(0,0,0),U.setFontSize(14),U.setFont("times","normal"),U.text("The Ministry of Youth and Sports",ve/2+80,105,{align:"center"}),U.setFontSize(14),U.setFont("times","bold"),U.text("Algerian judo federation",ve/2+80,130,{align:"center"}),U.setFontSize(24),U.setFont("times","bold"),U.text("Judo Certificate",ve/2+80,200,{align:"center"}),U.setFontSize(16),U.setFont("times","normal"),U.text(`Mr. ${Y} belt Black is hereby awarded`,ve/2+80,240,{align:"center"}),U.text("this certificate, in recognition of his progress, his sporting qualities,",ve/2+80,280,{align:"center"}),U.text("his loyalty to his school, and to the spirit of Judo.",ve/2+80,320,{align:"center"}),U.setFontSize(14),U.setFont("times","bold"),U.text("The President:",260,400),U.text("The Instructor:",600,400)}try{if(T){const be=ve-32-60,E=ue-32-80;U.addImage(T,"PNG",be,E,32,32),U.setFontSize(7),U.setFont("times","normal"),U.text("Scan to verify certificate",be+32/2,E+32+10,{align:"center"})}}catch(ke){console.warn("Failed to add certificate QR to PDF:",ke)}const se=`Judo_Certificate_${Y.replace(/\s+/g,"_")}_${new Date().getFullYear()}.pdf`;U.save(se),setSuccessMessage("Judo Certificate generated successfully!"),setShowSuccess(!0)}catch(U){console.error("Error generating Judo Certificate:",U),setErrorMessage("Failed to generate Judo Certificate. Please try again."),setShowError(!0)}finally{n(!1)}};function I(M){return new Promise((U,ve)=>{Gi(M,ue=>{if(ue.type==="error")console.warn("EXIF processing failed, using original image:",M),U(M);else try{const Y=ue.toDataURL("image/png");U(Y)}catch(Y){console.warn("Canvas conversion failed, using original image:",Y),U(M)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const G=M=>{if(console.log(" handleExportPDF called with data:",M),console.log(" Data type:",typeof M),console.log(" Data keys:",M?Object.keys(M):"No data"),console.log(" national_id_number in data:",M==null?void 0:M.national_id_number),!M||Object.keys(M).length===0){console.error(" No data available to export"),alert("No data available to export");return}console.log(" Data validation passed, calling exportPDFWithAutoOrientation..."),de(M)},de=async M=>{if(console.log(" PDF Generation - Starting with data:",M),!M||!M.primary_id&&!M.national_id_number){console.error(" No data or primary_id/national_id_number provided for PDF generation"),alert("No valid data available for PDF generation");return}try{const ve=M.table_source||"athletes",ue="id",Y=M.primary_id||M.id;console.log(" Fetching complete athlete data from database..."),console.log(" Table source:",ve),console.log(" ID field:",ue),console.log(" ID value:",Y);const{data:se,error:ke}=await re.from(ve).select("*").eq(ue,Y).single();if(ke||!se){console.error(" Error fetching athlete data:",ke),console.log(" Falling back to national_id_number query...");const{data:Ve,error:Oe}=await re.from("athletes").select("*").eq("national_id_number",M.national_id_number).single();if(Oe||!Ve){console.error(" Fallback query also failed:",Oe),alert("Error fetching complete athlete data from database");return}console.log(" Fallback athlete data fetched:",Ve);var U=Ve}else{console.log(" Complete athlete data fetched:",se);var U=se}console.log(" Using complete athlete data for PDF:",U);let be=null,E=null;try{if(console.log(" Fetching club and league names..."),U.club_id){console.log(" Fetching club name for ID:",U.club_id);const Ve=await Qn();console.log(" Club names object:",Ve),be=Ve[U.club_id],console.log(" Fetched club name:",be)}else console.log(" No club_id found in athlete data");if(U.league_id){console.log(" Fetching league name for ID:",U.league_id);const Ve=await bi();console.log(" League names object:",Ve),E=Ve[U.league_id],console.log(" Fetched league name:",E)}else console.log(" No league_id found in athlete data")}catch(Ve){console.error(" Error fetching names:",Ve)}const q=new Tt("portrait","mm","a4");q.setFontSize(18),q.setTextColor(40,40,40),q.text("Algerian Judo Federation",14,15);const oe=`Athlete Information - ${U.first_name} ${U.last_name}`;q.setFontSize(16),q.setTextColor(40,40,40),q.text(oe,14,30),q.setFontSize(10);const me=new Date().toLocaleString();if(q.text(`Generated: ${me}`,14,37),i)try{q.addImage(i,"PNG",170,10,25,25)}catch(Ve){console.error("Error adding logo to PDF:",Ve)}let Ne=70;if(M.photos_url)try{const Ve=await I(M.photos_url),Oe=Ve.startsWith("data:")?"PNG":"JPEG";q.addImage(Ve,Oe,14,45,25,20),Ne=70}catch(Ve){console.error("Error adding photo to PDF:",Ve);try{q.addImage(M.photos_url,"JPEG",14,45,25,20)}catch(Oe){console.error("Fallback image addition also failed:",Oe)}Ne=70}q.setFontSize(12),U.confirmation?q.setTextColor(0,128,0):q.setTextColor(255,0,0);const Se=U.confirmation?"CONFIRMED ":"NOT CONFIRMED ";q.text(Se,160,50);const Ce={last_name:"Last Name",first_name:"First Name",date_of_birth:"Date of Birth",place_of_birth:"Place of Birth",role:"Role",blood_type:"Blood Type",national_id_number:"National ID",nationality:"Nationality",grade:"Grade",genres:"Gender",categories:"Category",weight:"Weight",license_number:"License Number",registration_date:"Registration Date",year:"Year",renewal:"Renewal",confirmation:"Confirmation Status"},Le=Object.keys(Ce).filter(Ve=>U[Ve]!==null&&U[Ve]!==void 0&&U[Ve]!==""&&U[Ve]!=="null");console.log("PDF Generation - All data fields:",Object.keys(U)),console.log("PDF Generation - Available fields with data:",Le),console.log("PDF Generation - Fields with no data:",Object.keys(Ce).filter(Ve=>!Le.includes(Ve)));const Me=Le.map(Ve=>[Ce[Ve]||Ve.charAt(0).toUpperCase()+Ve.slice(1).replace(/_/g," "),U[Ve]]);pr(q,{startY:Ne,head:[["Field","Value"]],body:Me,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Ue=q.lastAutoTable.finalY||200;if(q.setFontSize(12),q.setTextColor(0,0,0),q.text("Medical certificate",14,Ue+20),q.setDrawColor(0),q.line(14,Ue+40,80,Ue+40),q.setFontSize(10),U.club_id){const Ve=be||`Club ID: ${U.club_id}`;q.text(`Club: ${Ve}`,14,Ue+60),q.text("Club Visa: _________________",14,Ue+70)}if(U.league_id){const Ve=E||`League ID: ${U.league_id}`;q.text(`League: ${Ve}`,120,Ue+60),q.text("League Visa: _________________",120,Ue+70)}try{const Ve=JSON.stringify({id:U.id,name:`${U.first_name||""} ${U.last_name||""}`.trim(),license:U.license_number||"",club_id:U.club_id||"",league_id:U.league_id||"",confirmation:U.confirmation||"Unconfirmed"}),Oe=await Si.toDataURL(Ve,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});q.addImage(Oe,"PNG",180,Ue+75,15,15)}catch(Ve){console.error("Error generating QR code:",Ve)}const at=`athlete_${U.first_name}_${U.last_name}_${U.id||"record"}.pdf`;console.log("Saving PDF with filename:",at),q.save(at),console.log("PDF generation completed successfully")}catch(ve){console.error("Error in PDF generation:",ve),alert(`Error generating PDF: ${ve.message}`)}};return c?a.jsxs("div",{className:"page-container",children:[r&&a.jsx(rn,{}),a.jsxs("div",{className:"content-box",children:[a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsxs("div",{className:"federation-header",children:[i?a.jsx("img",{src:i,alt:"Federation Logo",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:o})]})}),a.jsx(Er,{}),a.jsxs("div",{className:"athlete-profile",children:[a.jsx("h2",{className:"form-title",children:"Athlete Profile"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"photo-section",children:[c.photos_url||c.photo_url?a.jsx("img",{src:c.photos_url||c.photo_url,alt:`${c.first_name} ${c.last_name}`,className:"athlete-photo"}):a.jsx("div",{className:"photo-placeholder",children:a.jsx(hv,{})}),a.jsxs("h3",{children:[c.first_name," ",c.last_name]}),a.jsx("p",{children:c.role||"Athlete"}),c.confirmation&&a.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm mt-2",children:" Confirmed"})]}),a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-card",children:[a.jsxs("h3",{children:[a.jsx(hv,{className:"w-5 h-5"}),"Personal Information"]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"First Name:"}),a.jsx("span",{className:"info-value",children:c.first_name||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Last Name:"}),a.jsx("span",{className:"info-value",children:c.last_name||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Date of Birth:"}),a.jsx("span",{className:"info-value",children:c.date_of_birth||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Place of Birth:"}),a.jsx("span",{className:"info-value",children:c.place_of_birth||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Nationality:"}),a.jsx("span",{className:"info-value",children:c.nationality||"N/A"})]})]}),a.jsxs("div",{className:"info-card",children:[a.jsxs("h3",{children:[a.jsx(Ng,{className:"w-5 h-5"}),"Athletic Information"]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Grade:"}),a.jsx("span",{className:"info-value",children:c.grade||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Category:"}),a.jsx("span",{className:"info-value",children:c.categories||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Weight:"}),a.jsx("span",{className:"info-value",children:c.weight||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Gender:"}),a.jsx("span",{className:"info-value",children:c.genres||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"License Number:"}),a.jsx("span",{className:"info-value",children:c.license_number||"N/A"})]})]}),a.jsxs("div",{className:"info-card",children:[a.jsxs("h3",{children:[a.jsx(KC,{className:"w-5 h-5"}),"Medical Information"]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Blood Type:"}),a.jsx("span",{className:"info-value",children:c.blood_type||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"National ID:"}),a.jsx("span",{className:"info-value",children:c.national_id_number||"N/A"})]})]}),a.jsxs("div",{className:"info-card",children:[a.jsxs("h3",{children:[a.jsx($C,{className:"w-5 h-5"}),"Registration Information"]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Registration Date:"}),a.jsx("span",{className:"info-value",children:c.registration_date||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Year:"}),a.jsx("span",{className:"info-value",children:c.year||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Renewal:"}),a.jsx("span",{className:"info-value",children:c.renewal||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Club:"}),a.jsx("span",{className:"info-value",children:C||"N/A"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"League:"}),a.jsx("span",{className:"info-value",children:Z||"N/A"})]})]})]})]}),c.description&&a.jsxs("div",{className:"athlete-description",children:[a.jsx("h3",{children:"Description:"}),a.jsx("p",{children:c.description})]}),a.jsxs("div",{className:"qr-code-section",children:[a.jsxs("h3",{children:[a.jsx(dv,{className:"w-5 h-5"}),"Athlete QR Code"]}),a.jsx("p",{children:"Scan to access athlete information"}),a.jsx("div",{className:"qr-code-container",children:d?a.jsx("img",{src:d,alt:"Athlete QR Code",className:"qr-code-centered"}):a.jsxs("div",{className:"qr-code-loading",children:[a.jsx(dv,{className:"w-16 h-16 text-gray-400"}),a.jsx("p",{children:"Generating QR Code..."})]})}),d&&a.jsx("div",{className:"qr-code-status",children:a.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:" QR Code Ready"})})]})]}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"photo-section",children:[a.jsx("h3",{children:"Related Licenses"}),a.jsx("p",{children:"All athlete licenses with the same National ID Number"}),a.jsxs("div",{className:"related-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-number",children:m.length}),a.jsx("span",{className:"stat-label",children:"Total Licenses"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-number",children:m.filter(M=>M.table_type==="athletes").length}),a.jsx("span",{className:"stat-label",children:"Athletes"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-number",children:m.filter(M=>M.table_type==="league_members").length}),a.jsx("span",{className:"stat-label",children:"League Members"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-number",children:m.filter(M=>M.table_type==="club_members").length}),a.jsx("span",{className:"stat-label",children:"Club Members"})]})]})]}),a.jsx("div",{className:"info-grid",children:a.jsxs("div",{className:"info-card",children:[a.jsx("h4",{children:"Athlete Licenses Table"}),a.jsx("p",{children:"Double-click any row to generate PDF for that athlete"}),x?a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading related athletes..."})]}):m.length>0?a.jsx("div",{className:"table-container",children:a.jsxs("table",{className:"athletes-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Source"}),a.jsx("th",{children:"Full Name"}),a.jsx("th",{children:"License Number"}),a.jsx("th",{children:"National ID"}),a.jsx("th",{children:"Club/League ID"}),a.jsx("th",{children:"Status"})]})}),a.jsxs("tbody",{children:[console.log(" Rendering table with relatedAthletes:",m),m.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"20px"},children:"No related athlete licenses found"})}):m.map((M,U)=>a.jsxs("tr",{onDoubleClick:()=>{console.log(" Double-click fired on athlete:",M),console.log(" Available fields:",Object.keys(M)),console.log(" Table type:",M.table_type),console.log(" Original national_id_number:",M.national_id_number),console.log(" Fallback athlete_nid:",M.athlete_nid),console.log(" Fallback nid:",M.nid);const ve={...M,national_id_number:M.national_id_number||M.athlete_nid||M.nid,primary_id:M.id,table_source:M.table_type};console.log(" Safe data created with normalized national_id_number:",ve.national_id_number),console.log(" Complete safe data object:",ve),console.log(" About to call handleExportPDF...");try{G(ve),console.log(" handleExportPDF called successfully")}catch(ue){console.error(" Error calling handleExportPDF:",ue)}},className:"clickable-row",style:{cursor:"pointer"},title:"Double-click to generate PDF",children:[a.jsx("td",{children:a.jsx("span",{className:`source-badge ${M.table_type}`,children:M.source})}),a.jsx("td",{className:"name-cell",children:M.first_name&&M.last_name?`${M.first_name} ${M.last_name}`:M.full_name||"N/A"}),a.jsx("td",{className:"license-cell",children:M.license_number||M.athlete_license_number||"N/A"}),a.jsx("td",{className:"id-cell",children:M.national_id_number}),a.jsx("td",{className:"club-cell",children:M.club_id||M.league_id||"N/A"}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${M.status||"active"}`,children:M.status||"Active"})})]},`${M.table_type}-${M.id||U}`))]})]})}):a.jsx("div",{className:"no-data",children:a.jsx("p",{children:"No related athlete licenses found with the same National ID Number."})})]})})]}),c&&c.grade==="black belt"&&a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"photo-section",children:[a.jsx("h3",{children:"Judo Certificate"}),a.jsx("p",{children:"Generate official Judo certificate for black belt athletes"}),a.jsxs("div",{className:"certificate-preview",children:[a.jsxs("div",{className:"certificate-badge",children:[a.jsx(Ng,{className:"certificate-icon"}),a.jsx("span",{children:"Black Belt Certificate"})]}),a.jsxs("div",{className:"certificate-info",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Athlete:"})," ",c.first_name," ",c.last_name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Grade:"})," ",c.grade]}),a.jsxs("p",{children:[a.jsx("strong",{children:"License:"})," ",c.license_number]})]}),a.jsxs("div",{className:"certificate-qr",style:{marginTop:"10px"},children:[a.jsx("h5",{style:{margin:0},children:"Certificate QR"}),T?a.jsx("img",{src:T,alt:"Certificate QR Code",style:{width:"32px",height:"32px",border:"1px solid #eee",borderRadius:"4px"}}):a.jsx("p",{style:{fontSize:"12px",color:"#666"},children:"QR appears when data is complete."})]})]})]}),a.jsx("div",{className:"info-grid",children:a.jsxs("div",{className:"info-card",children:[a.jsx("h4",{children:"Certificate Generation"}),a.jsx("p",{children:"Click the button below to generate the official Judo certificate"}),a.jsx("div",{className:"certificate-actions",children:a.jsxs("button",{className:"primary-button certificate-btn",onClick:()=>z(c),disabled:r,children:[a.jsx(Ng,{size:20}),r?"Generating...":"Generate Judo Certificate"]})}),a.jsxs("div",{className:"certificate-requirements",children:[a.jsx("h5",{children:"Certificate Requirements:"}),a.jsxs("ul",{children:[a.jsx("li",{children:" Black Belt Grade"}),a.jsx("li",{children:" Valid License Number"}),a.jsx("li",{children:" Complete Athlete Information"})]})]})]})})]}),a.jsx(gn,{})]})]}):a.jsxs("div",{className:"page-container",children:[a.jsx(rn,{}),a.jsx("div",{className:"content-box",children:a.jsx("div",{className:"text-center p-8",children:a.jsx("p",{children:"Loading athlete information..."})})})]})}function Uk(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(!1),[d,g]=v.useState(""),m=Ur(),f="https://example.com/federation-logo.png",x="Algerian Judo Federation",[w,N]=v.useState(""),[b,S]=v.useState(null),j=async(T,R)=>{if(!r||!i){l("Please enter both Name and Key before continuing.");return}let z="",I="",G="";R==="federation"?(z="members",I="last_name",G="password"):R==="league"?(z="league_members",I="last_name",G="password"):R==="club"&&(z="club_members",I="last_name",G="password");const{data:de,error:M}=await re.from(z).select("*").eq(I,r).eq(G,i).single();if(M||!de){l(" Invalid Name or Key. Please try again.");return}l("");let U={};R==="federation"?U={federationLogo:f,federationName:x}:R==="league"?U={league_id:de.league_id,logo_url:de.logo_url}:R==="club"&&(U={club_id:de.club_id,league_id:de.league_id,logo_url:de.logo_url}),m(T,{state:{...de,...U}})},C=T=>{m(T)},$=T=>{g(T),u(!0),e(T),l(""),n(""),s("")},Z=()=>{u(!1),g(""),e(null),l(""),n(""),s("")},V=(T,R,z,I="secondary-btn")=>a.jsx("div",{className:"login-box",children:a.jsx("button",{className:I,onClick:()=>$(T),children:R})});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"gorgeous-buttons-layout horizontal-buttons-container",children:[a.jsx("div",{className:"gorgeous-button-wrapper",children:V("federation","Federation Account","/AddMemberPage","gorgeous-green-btn")}),a.jsx("div",{className:"gorgeous-button-wrapper",children:V("league","League Account","/AddMemberLeague","gorgeous-green-btn")}),a.jsx("div",{className:"gorgeous-button-wrapper",children:V("club","Amateur Sports Club","/AddMemberClub","gorgeous-green-btn")})]}),c&&a.jsx("div",{className:"modal-overlay",onClick:Z,children:a.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[a.jsx("button",{className:"modal-close",onClick:Z,children:""}),a.jsxs("div",{className:"login-box",children:[a.jsx("h3",{style:{marginBottom:"1rem",color:"#15803d",textAlign:"center"},children:d==="federation"?"Federation Account Login":d==="league"?"League Account Login":"Amateur Sports Club Login"}),a.jsx("input",{type:"text",placeholder:"Enter Name",value:r,onChange:T=>n(T.target.value),className:"input-field mb-2"}),a.jsx("input",{type:"password",placeholder:"Enter Key",value:i,onChange:T=>s(T.target.value),className:"input-field mb-2"}),o&&a.jsx("p",{className:"error-text",children:o}),a.jsxs("div",{className:"btn-row mt-2 flex gap-2",children:[a.jsx("button",{className:"primary-btn",onClick:()=>j(`/${d==="federation"?"FederationPage":d==="league"?"LeaguePage":"AmateurSportsClubPage"}`,d),children:"Login"}),a.jsx("button",{className:"secondary-btn",onClick:()=>C(d==="federation"?"/AddMemberPage":d==="league"?"/AddMemberLeague":"/AddMemberClub"),children:" Add Member"}),a.jsx("button",{className:"secondary-btn",onClick:Z,children:"Cancel"})]})]})]})})]})}const qk=({announcements:t=[]})=>t.length===0?null:a.jsx("div",{className:"green-tape-banner relative overflow-hidden",children:a.jsx("div",{className:"text-white py-20 shadow-2xl relative",children:a.jsxs("div",{className:"relative z-20",children:[a.jsx("h2",{className:"header-text-massive font-bold text-center mb-8 tracking-wider",children:"OFFICIAL ANNOUNCEMENTS - JUDO ALGERIA"}),a.jsx("div",{className:"overflow-hidden whitespace-nowrap",children:a.jsx("div",{className:"animate-marquee",children:t.map((e,r)=>a.jsxs("span",{className:"announcement-text-huge mx-8 text-white font-bold tracking-wider whitespace-nowrap",children:[" ",e," "]},r))})})]})})}),$k=({id:t,image:e,title:r,description:n,link:i,type:s="website",onClick:o})=>{const l=()=>{if(o)o();else if(i)if(s==="pdf"){const c=document.createElement("a");c.href=i,c.download=r||"document.pdf",document.body.appendChild(c),c.click(),document.body.removeChild(c)}else window.open(i,"_blank","noopener,noreferrer")};return a.jsxs("div",{className:"circle-button-container",children:[a.jsx("div",{className:"circle-button",onClick:l,role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),l())},children:a.jsxs("div",{className:"circle-button-inner",children:[a.jsx("div",{className:"circle-image-container",children:e?a.jsx("img",{src:e,alt:r||"Button",className:"circle-image"}):a.jsx("div",{className:"circle-placeholder",children:s==="pdf"?a.jsx(cv,{className:"w-8 h-8 text-white"}):a.jsx(uv,{className:"w-8 h-8 text-white"})})}),a.jsx("div",{className:"circle-overlay",children:s==="pdf"?a.jsx(cv,{className:"w-6 h-6 text-white"}):a.jsx(uv,{className:"w-6 h-6 text-white"})})]})}),(r||n)&&a.jsxs("div",{className:"circle-button-info",children:[r&&a.jsx("h3",{className:"circle-button-title",children:r}),n&&a.jsx("p",{className:"circle-button-description",children:n})]})]})};function zk(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(!1),[d,g]=v.useState(""),m=Ur(),[f,x]=v.useState(""),[w,N]=v.useState(null),b=async($,Z)=>{if(!r||!i){l("Please enter both Name and Key before continuing.");return}let V="",T="",R="";Z==="Athlete"&&(V="athletes",T="last_name",R="password");const{data:z,error:I}=await re.from(V).select("*").eq(T,r).eq(R,i).single();if(console.log("Authentication attempt:",{tableName:V,nameColumn:T,keyColumn:R,name:r,key:i}),console.log("Database response:",{data:z,supaError:I}),I||!z){console.log("Authentication failed:",(I==null?void 0:I.message)||"No data returned"),l(" Invalid Name or Key. Please try again.");return}l("");let G={};Z==="Athlete"&&(G={club_id:z.club_id,league_id:z.league_id}),console.log(" AthleteB.jsx - Raw database data:",z),console.log(" AthleteB.jsx - Extra data being added:",G),console.log(" AthleteB.jsx - Final state being passed:",{...z,...G}),console.log(" AthleteB.jsx - Navigating to:",$,"with state:",{...z,...G}),m($,{state:{...z,...G}})},S=$=>{g($),u(!0),e($),l(""),n(""),s("")},j=()=>{u(!1),g(""),e(null),l(""),n(""),s("")},C=($,Z,V,T="secondary-btn")=>a.jsx("div",{className:"login-box",children:a.jsx("button",{className:T,onClick:()=>S($),children:Z})});return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"gorgeous-buttons-layout horizontal-buttons-container",children:a.jsx("div",{className:"gorgeous-button-wrapper",children:C("Athlete","Athletes Account Login","/Athlete","gorgeous-green-btn")})}),c&&a.jsx("div",{className:"modal-overlay",onClick:j,children:a.jsxs("div",{className:"modal-content",onClick:$=>$.stopPropagation(),children:[a.jsx("button",{className:"modal-close",onClick:j,children:""}),a.jsxs("div",{className:"login-box",children:[a.jsx("h3",{style:{marginBottom:"1rem",color:"#15803d",textAlign:"center"},children:d==="Athlete"?"Athletes Account Login":"Login"}),a.jsx("input",{type:"text",placeholder:"Enter Name",value:r,onChange:$=>n($.target.value),className:"input-field mb-2"}),a.jsx("input",{type:"password",placeholder:"Enter Key",value:i,onChange:$=>s($.target.value),className:"input-field mb-2"}),o&&a.jsx("p",{className:"error-text",children:o}),a.jsxs("div",{className:"btn-row mt-2 flex gap-2",children:[a.jsx("button",{className:"primary-btn",onClick:()=>b(`/${d==="Athlete"?"Athlete":""}`,d),children:"Login"}),a.jsx("button",{className:"secondary-btn",onClick:j,children:"Cancel"})]})]})]})})]})}const iw="home/circle_buttons.json",aw="publications",sw="algerian_judo_circle_buttons";async function ow(){try{const{data:t,error:e}=await re.storage.from(aw).download(iw);if(e)throw e;const r=await t.text(),n=JSON.parse(r);return Array.isArray(n)?n:[]}catch{try{const e=localStorage.getItem(sw);return e?JSON.parse(e):[]}catch{return[]}}}async function Wk(t){try{localStorage.setItem(sw,JSON.stringify(t))}catch{}try{const e=new Blob([JSON.stringify(t)],{type:"application/json"}),{error:r}=await re.storage.from(aw).upload(iw,e,{upsert:!0});if(r)throw r;return!0}catch(e){return console.warn("Failed to save circle buttons to Supabase, kept local copy:",(e==null?void 0:e.message)||e),!1}}function Hk(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,g]=v.useState(!1),[m,f]=v.useState([]),[x,w]=v.useState(0),[N,b]=v.useState(null),[S,j]=v.useState("Algerian Judo Federation"),[C,$]=v.useState(!0),[Z,V]=v.useState([]),[T,R]=v.useState([]),[z,I]=v.useState([]),[G,de]=v.useState([]);v.useRef(null);const M=v.useRef(null);Ur();const[U,ve]=v.useState(""),[ue,Y]=v.useState(null);v.useEffect(()=>{(async()=>{const{data:E,error:q}=await re.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!q&&E&&f(E)})()},[]),v.useEffect(()=>{(async()=>{const{data:E,error:q}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!q&&E.length>0&&b(E[0].logo_url)})()},[]),v.useEffect(()=>{(async()=>{const{data:E,error:q}=await re.from("pub").select("photo_url").order("created_at",{ascending:!1});!q&&E&&V(E)})()},[]),v.useEffect(()=>{(async()=>{const{data:E,error:q}=await re.from("publica").select("title, description, photo_url").order("created_at",{ascending:!1});!q&&E&&R(E)})()},[]),v.useEffect(()=>{try{const be=localStorage.getItem("algerian_judo_banner_announcements");if(be){const E=JSON.parse(be);I(E)}}catch(be){console.error("Erreur lors du chargement des annonces:",be)}},[]),v.useEffect(()=>{(async()=>{try{const be=await ow();be&&be.length>0?de(be):de([{id:1,title:"Official Website",description:"Visit our main website",image:"",link:"https://example.com",type:"website"},{id:2,title:"Rules PDF",description:"Download competition rules",image:"",link:"",type:"pdf"},{id:3,title:"Training Center",description:"Find training locations",image:"",link:"https://maps.google.com",type:"website"},{id:4,title:"Registration Form",description:"Download registration form",image:"",link:"",type:"pdf"},{id:5,title:"Contact Us",description:"Get in touch with us",image:"",link:"mailto:contact@judoalgeria.com",type:"website"}])}catch(be){console.error("Erreur lors du chargement des boutons:",be)}})()},[]),v.useEffect(()=>{const be=E=>{if(E.key==="algerian_judo_circle_buttons")try{const q=E.newValue?JSON.parse(E.newValue):[];de(q||[])}catch(q){console.error("Error parsing circle buttons from storage event:",q)}if(E.key==="algerian_judo_banner_announcements")try{const q=E.newValue?JSON.parse(E.newValue):[];I(q||[])}catch(q){console.error("Error parsing announcements from storage event:",q)}};return window.addEventListener("storage",be),()=>window.removeEventListener("storage",be)},[]),v.useEffect(()=>{if(m.length>0){const be=setInterval(()=>{w(E=>(E+1)%m.length)},5e3);return()=>clearInterval(be)}},[m]);const se=()=>{w(be=>(be+1)%m.length)},ke=()=>{w(be=>(be-1+m.length)%m.length)};return v.useEffect(()=>{const be=E=>{(E.key==="Escape"||E.code==="Space")&&ue&&Y(null)};return window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)},[ue]),a.jsxs("div",{className:"app-container",children:[d&&a.jsx(rn,{}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[N?a.jsx("img",{src:N,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:S||"Algerian Judo Federation"})]})})}),a.jsx("div",{style:{height:"08rem"}}),a.jsxs("section",{id:"showcase",style:{backgroundImage:Z.length>0?`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(${Z[0].photo_url})`:"none",backgroundSize:"cover",backgroundPosition:"center",color:"white",padding:"6rem 0",textAlign:"center",height:"200px",boxShadow:"0 15px 35px rgba(0, 0, 0, 0.6), 0 8px 15px rgba(0, 0, 0, 0.3)",transform:"perspective(1000px) rotateX(2deg) rotateY(-2deg)",transition:"transform 0.5s ease, box-shadow 0.5s ease"},onMouseMove:be=>{const E=be.currentTarget,q=E.getBoundingClientRect(),oe=be.clientX-q.left,me=be.clientY-q.top,Ne=q.width/2,Se=q.height/2,Ce=(me-Se)/Se*5,Le=(oe-Ne)/Ne*-5;E.style.transform=`perspective(1000px) rotateX(${Ce}deg) rotateY(${Le}deg)`},onMouseLeave:be=>{be.currentTarget.style.transform="perspective(1000px) rotateX(2deg) rotateY(-2deg)"},children:[a.jsx("h1",{children:"Welcome to the Federation"}),a.jsx("p",{children:"Promoting Judo Excellence in Algeria"})]}),a.jsx("div",{style:{height:"03rem"}}),a.jsx("section",{children:a.jsx("div",{className:"circle-buttons-container",children:G.map(be=>a.jsx($k,{title:be.title,description:be.description,image:be.image,link:be.link,type:be.type},be.id))})}),a.jsx("div",{style:{height:"6rem"}}),z.length>0&&a.jsx(qk,{announcements:z}),a.jsx("div",{style:{height:"6rem"}}),a.jsxs("section",{className:"carousel-section",style:{backgroundImage:U?`url(${U})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},onMouseMove:be=>{if(!M.current)return;const E=M.current.getBoundingClientRect(),q=be.clientX-E.left,oe=be.clientY-E.top,me=E.width/2,Ne=E.height/2,Se=(oe-Ne)/10,Ce=(me-q)/10;M.current.style.transform=`perspective(1000px) rotateX(${Se}deg) rotateY(${Ce}deg)`},onMouseLeave:()=>{M.current&&(M.current.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg)")},onMouseDown:be=>window.dragStart=be.clientX,onMouseUp:be=>{if(!window.dragStart)return;const E=be.clientX-window.dragStart;E>50&&ke(),E<-50&&se(),window.dragStart=null},onTouchStart:be=>window.touchStart=be.touches[0].clientX,onTouchEnd:be=>{if(!window.touchStart)return;const E=be.changedTouches[0].clientX-window.touchStart;E>50&&ke(),E<-50&&se(),window.touchStart=null},children:[a.jsx("button",{className:"carousel-button left",onClick:ke,children:""}),a.jsx("div",{className:"carousel-track",children:m.map((be,E)=>{const q=(E-x+m.length)%m.length;let oe="";return q===0?oe="active":q===1?oe="next":q===m.length-1?oe="prev":oe="hidden",a.jsxs("div",{className:`carousel-slide ${oe}`,onClick:()=>{oe==="active"&&Y({photo:be.photo_url,title:be.title,description:be.description})},children:[a.jsx("img",{src:be.photo_url,alt:be.title,className:"carousel-image"}),a.jsxs("div",{className:"carousel-caption",children:[a.jsx("h3",{children:be.title}),a.jsx("p",{children:be.description})]})]},be.id)})}),a.jsx("button",{className:"carousel-button right",onClick:se,children:""}),ue&&a.jsx("div",{className:"fullscreen-overlay",onClick:()=>Y(null),children:a.jsxs("div",{className:"fullscreen-content",onClick:be=>be.stopPropagation(),children:[a.jsx("button",{className:"close-button",onClick:()=>Y(null),children:""}),a.jsx("img",{src:ue.photo,alt:ue.title,className:"fullscreen-image"}),a.jsxs("div",{className:"fullscreen-text",children:[a.jsx("h2",{children:ue.title}),a.jsx("p",{children:ue.description})]})]})})]}),a.jsx("div",{style:{height:"50rem"}}),a.jsx(zk,{}),a.jsx("div",{style:{height:"8rem"}}),a.jsx("div",{className:"moving-image-container",children:a.jsx("div",{className:"moving-image-track",children:T.length>0?T.map((be,E)=>a.jsxs("div",{className:"moving-image-card",children:[a.jsx("img",{src:be.photo_url,alt:be.title,onError:q=>{q.currentTarget.src=Oi}}),a.jsxs("div",{className:"moving-image-overlay",children:[a.jsx("h3",{children:be.title}),a.jsx("p",{children:be.description})]})]},E)):a.jsxs("div",{className:"moving-image-card",children:[a.jsx("img",{src:Oi,alt:"Judo athletes"}),a.jsxs("div",{className:"moving-image-overlay",children:[a.jsx("h3",{children:"Welcome to the Federation"}),a.jsx("p",{children:"Promoting Judo Excellence in Algeria"})]})]})})}),a.jsx("div",{style:{height:"5rem"}}),a.jsx(Uk,{}),o&&a.jsx(An,{error:o,onClose:()=>l("")}),c&&a.jsx(In,{success:c,onClose:()=>u("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function Gk(){const{state:t}=di(),e=Ur(),[r,n]=v.useState(""),[i,s]=v.useState(null),[o,l]=v.useState("Algerian Judo Federation"),[c,u]=v.useState(null),[d,g]=v.useState([]),[m,f]=v.useState(null),[x,w]=v.useState(null),[N,b]=v.useState(!1),[S,j]=v.useState(""),[C,$]=v.useState(""),Z=Oi;return v.useEffect(()=>{ei()},[]),v.useEffect(()=>{(async()=>{const{data:T,error:R}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!R&&T.length>0&&s(T[0].logo_url)})()},[]),v.useEffect(()=>{if(!(t!=null&&t.league_id))return;w(t),(async()=>{const{data:T,error:R}=await re.from("nameleague").select("*").eq("id",t.league_id).single();!R&&T&&(n(T.name_league),u(T));const{data:z,error:I}=await re.from("club_members").select("club_id").eq("league_id",t.league_id).limit(1).single();if(!I&&z){const{data:M,error:U}=await re.from("nameclub").select("*").eq("id",z.club_id).single();!U&&M&&f(M)}const{data:G,error:de}=await re.from("nameclub").select("*").eq("league_id",t.league_id);!de&&G?g(G):console.error("Error fetching clubs:",de)})()},[t]),v.useEffect(()=>{ei()},[]),t?a.jsxs("div",{className:"app-container",children:[N&&a.jsx(rn,{}),a.jsx("header",{children:a.jsxs("div",{className:"federation-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i?a.jsx("img",{src:i,alt:"Federation Logo",className:"federation-logo"}):a.jsx("img",{src:Z,alt:"Default Federation Logo",className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:o||"Algerian Judo Federation"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.logo_url?a.jsx("img",{src:t.logo_url,alt:"League Logo",className:"member-logo"}):null,a.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:r||"League Name"})]})]})}),a.jsxs("section",{className:"content",children:[a.jsxs("h2",{children:["Welcome ",t.first_name," ",t.last_name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Role:"})," ",t.role]}),a.jsx(Er,{}),a.jsx("button",{className:"primary-btn",onClick:async V=>{if(br(V.currentTarget),!c){alert("League data not loaded yet.");return}e("/member-list-l",{state:{...t,league_id:c==null?void 0:c.id,league_name:c==null?void 0:c.name_league,league_logo:c==null?void 0:c.logo_url}})},children:"The League Member List"}),a.jsx("button",{className:"primary-btn",onClick:async V=>{if(br(V.currentTarget),!c){alert("League data not loaded yet.");return}e("/TheClubListAddFed-League",{state:{...t,league_id:c==null?void 0:c.id,league_name:c==null?void 0:c.name_league,league_logo:c==null?void 0:c.logo_url}})},children:"The Club Member List"}),a.jsx("button",{className:"primary-btn",onClick:async V=>{if(br(V.currentTarget),!c){alert("League data not loaded yet.");return}e("/TheAthleteListAdd-League",{state:{...t,league_id:c==null?void 0:c.id,league_name:c==null?void 0:c.name_league,league_logo:c==null?void 0:c.logo_url}})},children:"The Athlete List Add"})]}),S&&a.jsx(An,{error:S,onClose:()=>j("")}),C&&a.jsx(In,{success:C,onClose:()=>$("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]}):a.jsx("p",{children:"No account data found."})}function Yk(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[i,s]=v.useState(null),[o,l]=v.useState({}),[c,u]=v.useState(!0),[d,g]=v.useState(null),[m,f]=v.useState(!1),[x,w]=v.useState(""),[N,b]=v.useState(""),[S,j]=v.useState([]),[C,$]=v.useState(0),[Z,V]=v.useState(null),[T,R]=v.useState("Algerian Judo Federation"),[z,I]=v.useState(!0);Ur();const G=Xn();v.useEffect(()=>{(async()=>{const{data:Y,error:se}=await re.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!se&&Y&&j(Y)})()},[]),v.useEffect(()=>{(async()=>{const{data:Y,error:se}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!se&&Y.length>0&&V(Y[0].logo_url)})()},[]);const de=async()=>{try{u(!0);const{data:ue,error:Y}=await re.from("members").select("*");Y?g(Y):e(ue||[])}catch(ue){g(ue)}finally{u(!1)}};v.useEffect(()=>{de()},[]),v.useEffect(()=>{(async()=>{try{const{data:Y,error:se}=await re.from("federationrole").select("*");se?console.error("Error fetching roles:",se):n(Y||[])}catch(Y){console.error("Error fetching roles:",Y)}})()},[]);const M=(ue,Y)=>{l({...o,[Y]:ue.target.value})},U=async()=>{try{const ue=[{header:"Last",dataKey:"last_name"},{header:"First",dataKey:"first_name"},{header:"DOB",dataKey:"date_of_birth"},{header:"POB",dataKey:"place_of_birth"},{header:"Role",dataKey:"role_name"},{header:"Blood",dataKey:"blood_type"},{header:"Nationality",dataKey:"nationality"},{header:"Grade",dataKey:"grade"},{header:"Holder Of",dataKey:"holder_of"},{header:"Renewal",dataKey:"renewal"},{header:"Year",dataKey:"year"},{header:"License #",dataKey:"license_number"},{header:"Registration",dataKey:"registration_date"},{header:"PHOTO",dataKey:"photoDataURL"},{header:"Confirmation",dataKey:"confirmationText"}],Y=ue.length>10?"landscape":"portrait",se=new Tt(Y,"mm","a4"),ke=se.internal.pageSize.getWidth(),be=new Date().toLocaleDateString();if(Z)try{se.addImage(Z,"PNG",ke-40,15,25,25)}catch(Se){console.warn("Could not add federation logo:",Se)}se.setFontSize(10),se.setFont("helvetica","normal"),se.text(`Print Date: ${be}`,15,20),se.setFontSize(16),se.setFont("helvetica","bold"),se.text(T||"Algerian Judo Federation",ke/2,25,{align:"center"}),se.setFontSize(14),se.setTextColor(220,53,69),se.text("Member List",ke/2,40,{align:"center"}),se.setTextColor(0,0,0);const E=55,q=8,oe=q+4,me=await Promise.all(t.map(async Se=>{const Ce=r.find(Me=>Me.id===Se.role_id);let Le=null;if(Se.photo_url)try{Le=await Vk(Se.photo_url,70,4)}catch{Le=null}return{last_name:Se.last_name||"",first_name:Se.first_name||"",date_of_birth:Se.date_of_birth||"",place_of_birth:Se.place_of_birth||"",role_name:Ce?Ce.federation_role:Se.role||Se.role_id||"N/A",blood_type:Se.blood_type||"",nationality:Se.nationality||"",grade:Se.grade||"",holder_of:Se.holder_of||"",renewal:Se.renewal||"",year:Se.year||"",license_number:Se.license_number||"",registration_date:Se.registration_date||"",photoDataURL:Le,confirmationText:Se.confirmation?"Confirmed":"Pending"}}));pr(se,{startY:E,styles:{fontSize:7,cellPadding:1},headStyles:{fillColor:[0,128,0],textColor:255,fontStyle:"bold"},columns:ue,body:me,columnStyles:{photoDataURL:{cellWidth:oe,minCellHeight:oe,halign:"center"}},didParseCell:Se=>{Se.column.dataKey==="photoDataURL"&&Se.section==="body"&&(Se.cell.text=[])},didDrawCell:Se=>{if(Se.column.dataKey==="photoDataURL"&&Se.section==="body"){const Ce=Se.cell.raw;if(!Ce)return;const Le=Se.cell.x+(Se.cell.width-q)/2,Me=Se.cell.y+(Se.cell.height-q)/2;try{const at=typeof Ce=="string"&&Ce.startsWith("data:image/png")?"PNG":"JPEG";se.addImage(Ce,at,Le,Me,q,q)}catch(Ue){console.warn("Failed to draw member photo:",Ue)}}},didDrawPage:Se=>{if(Se.pageNumber>1){const Ce=se.internal.pageSize.getWidth();if(Z)try{se.addImage(Z,"PNG",Ce-40,15,25,25)}catch{}se.setFontSize(10),se.setFont("helvetica","normal"),se.text(`Print Date: ${be}`,15,20),se.setFontSize(16),se.setFont("helvetica","bold"),se.text(T||"Algerian Judo Federation",Ce/2,25,{align:"center"}),se.setFontSize(14),se.setTextColor(220,53,69),se.text("Member List",Ce/2,40,{align:"center"}),se.setTextColor(0,0,0)}}});const Ne=new Date().getFullYear();se.save(`member_list_${Ne}.pdf`)}catch(ue){console.error("Error exporting PDF:",ue),alert("Error exporting PDF. Please try again.")}},ve=async()=>{await U()};return d?a.jsxs("p",{children:["Error fetching members: ",d.message]}):a.jsxs("div",{className:"app-container",children:[c&&a.jsx(rn,{}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[Z?a.jsx("img",{src:Z,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:T||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{children:"Member List"}),a.jsx("div",{className:"table-container",ref:G,children:a.jsxs("table",{id:"member-table",className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Holder Of"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photo"}),a.jsx("th",{children:"Confirmation"})]})}),a.jsx("tbody",{children:t.map(ue=>a.jsxs("tr",{children:[a.jsx("td",{children:i===ue.id?a.jsx("input",{value:o.last_name||"",onChange:Y=>M(Y,"last_name")}):ue.last_name}),a.jsx("td",{children:i===ue.id?a.jsx("input",{value:o.first_name||"",onChange:Y=>M(Y,"first_name")}):ue.first_name}),a.jsx("td",{children:i===ue.id?a.jsx("input",{type:"date",value:o.date_of_birth||"",onChange:Y=>M(Y,"date_of_birth")}):ue.date_of_birth}),a.jsx("td",{children:i===ue.id?a.jsx("input",{value:o.place_of_birth||"",onChange:Y=>M(Y,"place_of_birth")}):ue.place_of_birth}),a.jsx("td",{children:i===ue.id?a.jsxs("select",{value:o.role_id||"",onChange:Y=>l({...o,role_id:Y.target.value}),children:[a.jsx("option",{value:"",children:"Select Role"}),r.map(Y=>a.jsx("option",{value:Y.id,children:Y.federation_role},Y.id))]}):(()=>{const Y=r.find(se=>se.id===ue.role_id);return Y?Y.federation_role:ue.role||ue.role_id||"N/A"})()}),a.jsx("td",{children:i===ue.id?a.jsx("input",{value:o.blood_type||"",onChange:Y=>M(Y,"blood_type")}):ue.blood_type}),a.jsx("td",{children:ue.nationality||""}),a.jsx("td",{children:ue.grade||""}),a.jsx("td",{children:ue.holder_of||""}),a.jsx("td",{children:ue.renewal||""}),a.jsx("td",{children:ue.year||""}),a.jsx("td",{children:ue.license_number}),a.jsx("td",{children:ue.registration_date}),a.jsx("td",{children:ue.photo_url?a.jsx("img",{src:ue.photo_url,alt:"Member",style:{width:40,height:40,objectFit:"cover",borderRadius:4}}):""}),a.jsx("td",{children:ue.confirmation?"Confirmed":"Pending"})]},ue.id))})]})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:ve,children:"Export PDF"})]})]}),d&&a.jsx(An,{message:d,onClose:()=>g(null)}),c&&a.jsx("div",{children:"Loading..."}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}const Vk=(t,e=40,r=4)=>new Promise(n=>{try{Gi(t,i=>{try{const s=i.naturalWidth||i.width||e,o=i.naturalHeight||i.height||e,l=Math.max(e/s,e/o),c=s*l,u=o*l,d=(e-c)/2,g=(e-u)/2,m=document.createElement("canvas");m.width=e,m.height=e;const f=m.getContext("2d");f.clearRect(0,0,e,e),f.save();const x=r;f.beginPath(),f.moveTo(x,0),f.lineTo(e-x,0),f.quadraticCurveTo(e,0,e,x),f.lineTo(e,e-x),f.quadraticCurveTo(e,e,e-x,e),f.lineTo(x,e),f.quadraticCurveTo(0,e,0,e-x),f.lineTo(0,x),f.quadraticCurveTo(0,0,x,0),f.closePath(),f.clip(),f.drawImage(i,d,g,c,u),f.restore();const w=m.toDataURL("image/jpeg",.92);n(w)}catch{n(null)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})}catch{n(null)}});function Jk(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,g]=v.useState(""),[m,f]=v.useState(""),[x,w]=v.useState(""),[N,b]=v.useState(""),[S,j]=v.useState([]),[C,$]=v.useState(""),[Z,V]=v.useState(""),[T,R]=v.useState(""),[z,I]=v.useState(null),[G,de]=v.useState(null),[M,U]=v.useState("Algerian Judo Federation"),[ve,ue]=v.useState(""),[Y,se]=v.useState(""),[ke,be]=v.useState(!1),[E,q]=v.useState(!1),oe=Ur();v.useEffect(()=>{(async()=>{const{data:Le,error:Me}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!Me&&Le.length>0&&de(Le[0].logo_url)})()},[]),v.useEffect(()=>{(async()=>{const{data:Le,error:Me}=await re.from("federationrole").select("federation_role").order("federation_role",{ascending:!0});!Me&&Le&&j(Le)})()},[]);const me=async()=>{if(!z||z.size===0)return"";const Ce=z.name.split(".").pop(),Le=`photo-${Date.now()}.${Ce}`,{error:Me}=await re.storage.from("logos").upload(Le,z);if(Me)return ue(`Photo upload failed: ${Me.message}`),"";const{data:Ue}=re.storage.from("logos").getPublicUrl(Le);return(Ue==null?void 0:Ue.publicUrl)??""},Ne=async(Ce,Le,Me,Ue=null)=>{let at=re.from("members").select("id").eq("national_id_number",Ce).eq("role",Le).eq("year",Me);Ue&&(at=at.neq("id",Ue));const{data:Ve,error:Oe}=await at;if(Oe)throw Oe;if(Ve&&Ve.length>0)throw new Error("This member is already registered for the current season with the same role.");let le=re.from("members").select("*",{count:"exact",head:!0}).eq("national_id_number",Ce).eq("role",Le);Ue&&(le=le.neq("id",Ue));const{count:Ct,error:Et}=await le;if(Et)throw Et;return(Ct||0)+1},Se=async Ce=>{if(Ce.preventDefault(),ue(""),se(""),q(!0),!N||!c||!t||!r||!i||!o||!d||!m||!x||!C||!Z||!T||!z){ue("All fields are required."),q(!1);return}if(d.length!==18){ue("National Identity Number must be exactly 18 digits."),q(!1);return}if(m!==x){ue("Passwords do not match."),q(!1);return}const Le=new Date(i),Me=new Date,Ue=Me.getFullYear()-Le.getFullYear(),at=Me.getMonth()-Le.getMonth(),Ve=Me.getDate()-Le.getDate();if((at<0||at===0&&Ve<0?Ue-1:Ue)<=21){ue("Member must be more than 21 years old to register."),q(!1);return}try{const{data:le,error:Ct}=await re.from("members").select("id, last_name, password").eq("last_name",t).eq("password",m);if(Ct){ue(`Failed to validate member data: ${Ct.message}`),q(!1);return}if(le&&le.length>0){ue(`A member with the last name "${t}" and this password already exists. Please change the password.`),q(!1);return}}catch(le){ue(`Validation error: ${le.message}`),q(!1);return}try{const le=await me(),Ct=new Date().getFullYear(),Et=`${Ct}/${Ct+1}`;if((N||"").trim()!=="Federation President"){ue("Federation Role must be Federation President"),q(!1);return}const{data:He,error:$e}=await re.from("members").select("id").eq("role","Federation President").limit(1);if($e){ue(`Failed to validate president role: ${$e.message}`),q(!1);return}if(He&&He.length>0){ue("The president of the federation is already exist."),q(!1);return}const pt=await Ne(d,N,Et),ct={last_name:t,first_name:r,date_of_birth:i,place_of_birth:o,role:N,blood_type:c,national_id_number:d,password:m,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],nationality:C,holder_of:Z,grade:T,photo_url:le,confirmation:!1,renewal:pt,year:Et},{error:jt}=await re.from("members").insert([ct]);if(jt){const At=jt.message||"";At.includes("members_national_id_number_key")?ue("National ID already exists. Duplicates are currently blocked by the database."):ue(` Failed to add member: ${At}`)}else se(` Member "${r} ${t}" added successfully!`),e(""),n(""),s(""),l(""),g(""),f(""),w(""),b(""),u(""),$(""),V(""),R(""),I(null)}catch(le){ue(` An unexpected error occurred: ${le.message}`)}finally{q(!1)}};return a.jsxs("div",{className:"page-container",children:[ke&&a.jsx(rn,{}),a.jsxs("div",{className:"content-box",children:[a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[G?a.jsx("img",{src:G,alt:"Federation Logo",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:M||"Algerian Judo Federation"})]})})}),a.jsx("h2",{className:"form-title",children:"Add a New Member"}),a.jsxs("form",{onSubmit:Se,className:"form-grid",children:[a.jsxs("label",{children:["Federation Role *",a.jsxs("select",{value:N,onChange:Ce=>b(Ce.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Federation Role"}),S.map(Ce=>a.jsx("option",{value:Ce.federation_role,children:Ce.federation_role},Ce.federation_role))]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{type:"text",value:t,onChange:Ce=>e(Ce.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{type:"text",value:r,onChange:Ce=>n(Ce.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:i,onChange:Ce=>s(Ce.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{type:"text",value:o,onChange:Ce=>l(Ce.target.value),required:!0})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:c,onChange:Ce=>u(Ce.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Blood Type --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{type:"text",value:d,onChange:Ce=>g(Ce.target.value),maxLength:"18",minLength:"18",required:!0})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:m,onChange:Ce=>f(Ce.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:x,onChange:Ce=>w(Ce.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:C,onChange:Ce=>$(Ce.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"}),a.jsx("option",{children:"Moroccan"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:Z,onChange:Ce=>V(Ce.target.value),placeholder:"Licenses, Coach degree...",required:!0})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:T,onChange:Ce=>R(Ce.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",required:!0,onChange:Ce=>{var Le;return I(((Le=Ce.target.files)==null?void 0:Le[0])??null)}})]}),a.jsxs("div",{className:"btn-row",children:[a.jsx("button",{type:"submit",className:"primary-b",children:"Add Member"}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>oe("/MemberListPage"),children:"The Member List"}),a.jsx(Er,{})]}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),ve&&a.jsx(An,{error:ve,onClose:()=>ue("")}),Y&&a.jsx(In,{success:Y,onClose:()=>se("")}),E&&a.jsx($i,{message:"Adding member..."}),a.jsx(gn,{})]})]})}function Kk(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,g]=v.useState([]),[m,f]=v.useState(""),[x,w]=v.useState(""),[N,b]=v.useState(""),[S,j]=v.useState(""),[C,$]=v.useState(""),[Z,V]=v.useState([]),[T,R]=v.useState(null),[z,I]=v.useState(null),[G,de]=v.useState(""),[M,U]=v.useState(""),[ve,ue]=v.useState(""),[Y,se]=v.useState(""),[ke,be]=v.useState(""),[E,q]=v.useState(!1),[oe,me]=v.useState(!1),[Ne,Se]=v.useState(null),[Ce,Le]=v.useState("Algerian Judo Federation"),[Me,Ue]=v.useState([]),[at,Ve]=v.useState(null),[Oe,le]=v.useState(""),[Ct,Et]=v.useState(""),He=Ur(),{state:$e}=di(),pt=st=>st?st.startsWith("http")?st:`https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/${st}`:null;v.useEffect(()=>{(async()=>{const{data:St,error:zt}=await re.from("leaguerole").select("id, league_role");!zt&&St&&g(St)})()},[]),v.useEffect(()=>{(async()=>{const{data:St,error:zt}=await re.from("nameleague").select("id, name_league");!zt&&St&&V(St)})()},[]),v.useEffect(()=>{(async()=>{const{data:St,error:zt}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!zt&&St.length>0&&Se(St[0].logo_url)})()},[]);const ct=async()=>{if(!T)return null;const st=T.name.split(".").pop(),zt=`${Date.now()}.${st}`,{error:bt}=await re.storage.from("logos").upload(zt,T);if(bt)return se(`Upload failed: ${bt.message}`),null;const{data:Dt}=re.storage.from("logos").getPublicUrl(zt);return(Dt==null?void 0:Dt.publicUrl)??null},jt=async()=>{if(!z||z.size===0)return"";const st=z.name.split(".").pop(),St=`photo-${Date.now()}.${st}`,{error:zt}=await re.storage.from("logos").upload(St,z);if(zt)return se(`Photo upload failed: ${zt.message}`),"";const{data:bt}=re.storage.from("logos").getPublicUrl(St);return(bt==null?void 0:bt.publicUrl)??""},At=async(st,St,zt,bt)=>{const{data:Dt}=await re.from("league_members").select("*").eq("national_id_number",st).eq("league_id",St).eq("role",zt).eq("year",bt);if(Dt&&Dt.length>0)throw new Error("This member is already registered for the current season with the same role and league.");const{count:Pt}=await re.from("league_members").select("*",{count:"exact",head:!0}).eq("national_id_number",st).eq("league_id",St).eq("role",zt);return(Pt||0)+1},Wt=async st=>{var Xt;if(st.preventDefault(),se(""),be(""),me(!0),!r||!t||!i||!o||!c||!C||!N||!S||!z||!T){const Te=[];r||Te.push("First Name"),t||Te.push("Last Name"),i||Te.push("Date of Birth"),o||Te.push("Place of Birth"),c||Te.push("League Role"),C||Te.push("League (in the table is league_id)"),N||Te.push("Password"),S||Te.push("Confirm Password"),z||Te.push("Member Photo"),T||Te.push("League Logo"),se(`Please fill in the following required fields: ${Te.join(", ")}`),me(!1);return}const St=Number(C);if(!St||isNaN(St)){se("Please select a valid league."),me(!1);return}if(x.length!==18){se("National ID must be exactly 18 digits."),me(!1);return}if(N!==S){se("Passwords do not match."),me(!1);return}const zt=new Date(i),bt=new Date,Dt=bt.getFullYear()-zt.getFullYear(),Pt=bt.getMonth()-zt.getMonth(),Ot=bt.getDate()-zt.getDate();if((Pt<0||Pt===0&&Ot<0?Dt-1:Dt)<=21){se("Member must be more than 21 years old to register."),me(!1);return}try{const{data:Te,error:It}=await re.from("league_members").select("id, last_name, password").eq("last_name",t).eq("password",N);if(It){se(`Failed to validate member data: ${It.message}`),me(!1);return}if(Te&&Te.length>0){se(`A member with the last name "${t}" and this password already exists. Please change the password.`),me(!1);return}}catch(Te){se(`Validation error: ${Te.message}`),me(!1);return}try{const Te=await jt(),It=await ct(),ot=new Date().getFullYear(),Rt=`${ot}/${ot+1}`,ht=((Xt=d.find(Je=>Je.id===parseInt(c)))==null?void 0:Xt.league_role)||"";if(ht!=="League President"){se("Only members with the role 'League President' can be submitted."),me(!1);return}const Ye=await At(x,C,ht,Rt),tr={last_name:t,first_name:r,date_of_birth:i,place_of_birth:o,role:ht,blood_type:m,national_id_number:x,password:N,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],logo_url:It,league_id:St,photo_url:Te,renewal:Ye,year:Rt,nationality:G,holder_of:M,grade:ve,confirmation:!1},{error:_e}=await re.from("league_members").insert([tr]);if(_e){se(`Failed to save member: ${_e.message}`),me(!1);return}if(It&&C&&await re.from("nameleague").update({logo_url:It}).eq("id",C),be(`Member "${r} ${t}" has been successfully added to the League!`),e(""),n(""),s(""),l(""),w(""),b(""),j(""),u(""),f(""),$(""),I(null),R(null),de(""),U(""),ue(""),C){const{data:Je}=await re.from("league_members").select("*").eq("league_id",Number(C));Ue(Je||[]);const{data:vt}=await re.from("nameleague").select("logo_url").eq("id",C).single();vt!=null&&vt.logo_url&&Ve(pt(vt.logo_url))}me(!1)}catch(Te){se(`Unexpected error: ${Te.message}`),me(!1)}};return a.jsxs("div",{className:"page-container",children:[E&&a.jsx(rn,{}),a.jsxs("div",{className:"content-box",children:[a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[Ne?a.jsx("img",{src:Ne,alt:"Federation Logo",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:Ce||"Algerian Judo Federation"})]})})}),a.jsx("h2",{className:"form-title",children:"Add League Member"}),a.jsxs("form",{onSubmit:Wt,className:"form-grid",children:[a.jsxs("label",{children:["League Role *",a.jsxs("select",{value:c,onChange:st=>u(st.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Role"}),d.map(st=>a.jsx("option",{value:st.id,children:st.league_role},st.id))]})]}),a.jsxs("label",{children:["League *",a.jsx("select",{value:C,onChange:st=>{$(st.target.value),le(st.target.value)},required:!0,disabled:!!($e!=null&&$e.league_id),children:$e!=null&&$e.league_id?a.jsx("option",{value:$e.league_id,children:Ct||"Selected League"}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"Select League"}),Z.map(st=>a.jsx("option",{value:st.id,children:st.name_league},st.id))]})})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:m,onChange:st=>f(st.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Blood Type --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{type:"text",value:t,onChange:st=>e(st.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{type:"text",value:r,onChange:st=>n(st.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:i,onChange:st=>s(st.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{type:"text",value:o,onChange:st=>l(st.target.value),required:!0})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{type:"text",value:x,onChange:st=>w(st.target.value),maxLength:"18",minLength:"18",required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:N,onChange:st=>b(st.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:S,onChange:st=>j(st.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:G,onChange:st=>de(st.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"}),a.jsx("option",{children:"Moroccan"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:M,onChange:st=>U(st.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:ve,onChange:st=>ue(st.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",required:!0,onChange:st=>{var St;return I(((St=st.target.files)==null?void 0:St[0])??null)}})]}),a.jsxs("label",{children:["Upload League Logo *",a.jsx("input",{type:"file",required:!0,onChange:st=>{var St;return R(((St=st.target.files)==null?void 0:St[0])??null)}})]}),a.jsxs("div",{className:"btn-row",children:[a.jsx("button",{type:"submit",className:"primary-b",children:"Add Member"}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>He("/member-list"),children:"The Member List"}),a.jsx(Er,{})]}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),Y&&a.jsx(An,{error:Y,onClose:()=>se(null)}),ke&&a.jsx(In,{success:ke,onClose:()=>be("")}),E&&a.jsx("div",{children:"Loading..."}),a.jsx(gn,{})]})]})}function Qk(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,g]=v.useState([]),[m,f]=v.useState(""),[x,w]=v.useState(""),[N,b]=v.useState(""),[S,j]=v.useState(""),[C,$]=v.useState([]),[Z,V]=v.useState([]),[T,R]=v.useState(null),[z,I]=v.useState(null),[G,de]=v.useState(""),[M,U]=v.useState(""),[ve,ue]=v.useState(""),[Y,se]=v.useState(""),[ke,be]=v.useState(""),[E,q]=v.useState(!1),[oe,me]=v.useState(!1),[Ne,Se]=v.useState(null),Ce="Algerian Judo Federation",[Le,Me]=v.useState(""),[Ue,at]=v.useState(""),Ve=Ur();v.useEffect(()=>{(async()=>{const{data:$e,error:pt}=await re.from("clubrole").select("id, club_role");pt&&console.error("Error fetching roles:",pt.message),$e&&g($e)})()},[]),v.useEffect(()=>{(async()=>{const{data:$e,error:pt}=await re.from("nameleague").select("id, name_league");pt&&console.error("Error fetching leagues:",pt.message),$e&&V($e)})()},[]),v.useEffect(()=>{if(!Le){$([]);return}(async()=>{const{data:$e,error:pt}=await re.from("nameclub").select("id, name_club").eq("league_i",Le);pt?console.error("Error fetching clubs:",pt.message):$($e||[])})()},[Le]),v.useEffect(()=>{(async()=>{const{data:$e,error:pt}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);pt&&console.error("Error fetching logo:",pt.message),$e!=null&&$e.length&&Se($e[0].logo_url)})()},[]);const Oe=async He=>{if(!He)return null;try{const $e=He.name.split(".").pop(),pt=`${Date.now()}-${Math.random()}.${$e}`;console.log(`Uploading logo file: ${pt}`);const{error:ct}=await re.storage.from("logos").upload(pt,He);if(ct)throw console.error("Logo upload error:",ct),new Error(`Logo upload failed: ${ct.message}`);const{data:jt}=re.storage.from("logos").getPublicUrl(pt),At=jt==null?void 0:jt.publicUrl;if(!At)throw new Error("Failed to get public URL for uploaded logo");return console.log(`Logo uploaded successfully: ${At}`),At}catch($e){throw console.error("uploadFile error:",$e),$e}},le=async()=>{if(!z)return null;try{const He=z.name.split(".").pop(),$e=`club_member-${Date.now()}.${He}`;console.log(`Uploading photo file: ${$e}`);const{error:pt}=await re.storage.from("logos").upload($e,z);if(pt)throw console.error("Photo upload error:",pt),new Error(`Photo upload failed: ${pt.message}`);const{data:ct}=re.storage.from("logos").getPublicUrl($e),jt=ct==null?void 0:ct.publicUrl;if(!jt)throw new Error("Failed to get public URL for uploaded photo");return console.log(`Photo uploaded successfully: ${jt}`),jt}catch(He){throw console.error("handlePhotoUpload error:",He),He}},Ct=async(He,$e,pt,ct)=>{console.log("getNextRenewal called with:",{nidVal:He,clubIdVal:$e,roleVal:pt,currentSeasonYear:ct});const{data:jt,error:At}=await re.from("club_members").select("*").eq("national_id_number",He).eq("club_id",$e).eq("role",pt).eq("year",ct);if(console.log("Query result:",{existingInCurrentYear:jt,queryError:At}),jt&&jt.length>0)throw console.log("Found existing member, throwing error"),new Error("This member is already registered for the current season with the same role and club.");const{count:Wt}=await re.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",He).eq("club_id",$e).eq("role",pt);return(Wt||0)+1},Et=async He=>{var Ot;if(He.preventDefault(),se(""),be(""),console.log("Setting submitLoading to true"),me(!0),await new Promise(wt=>setTimeout(wt,100)),!r||!t||!i||!o||!c||!Ue||!Le||!N||!S){const wt=[];r||wt.push("First Name"),t||wt.push("Last Name"),i||wt.push("Date of Birth"),o||wt.push("Place of Birth"),c||wt.push("Role"),Ue||wt.push("Club"),Le||wt.push("League"),N||wt.push("Password"),S||wt.push("Confirm Password"),se(`Please fill in the following required fields: ${wt.join(", ")}`),console.log("Setting submitLoading to false - missing fields"),me(!1);return}const $e=Number(Ue),pt=Number(Le);if(!$e||isNaN($e)){se("Please select a valid club."),me(!1);return}if(!pt||isNaN(pt)){se("Please select a valid league."),me(!1);return}if(x.length!==18){se("National ID must be exactly 18 digits."),me(!1);return}if(N!==S){se("Passwords do not match."),me(!1);return}const ct=new Date(i),jt=new Date,At=jt.getFullYear()-ct.getFullYear(),Wt=jt.getMonth()-ct.getMonth(),st=jt.getDate()-ct.getDate();if((Wt<0||Wt===0&&st<0?At-1:At)<=21){se("Member must be more than 21 years old to register."),me(!1);return}if(t&&N){const{data:wt}=await re.from("club_members").select("*").eq("last_name",t).eq("password",N);if(wt&&wt.length>0){se("Change your Password for this name because is already exist"),me(!1);return}}const zt=((Ot=d.find(wt=>wt.id===parseInt(c)))==null?void 0:Ot.club_role)||"",bt=new Date().getFullYear(),Dt=`${bt}/${bt+1}`;let Pt;try{Pt=await Ct(x,$e,zt,Dt)}catch(wt){se(wt.message),me(!1);return}try{console.log("Starting file uploads...");const wt=await le(),Xt=await Oe(T);if(console.log("File uploads completed:",{photoUrl:wt,uploadedClubLogo:Xt}),zt!=="president of the club"){se("Only members with the role 'president of the club' can be submitted."),me(!1);return}const Te={last_name:t,first_name:r,date_of_birth:i,place_of_birth:o,role:zt,blood_type:m,national_id_number:x,password:N,photo_url:wt,logo_url:Xt,nationality:G,grade:M,holder_of:ve,club_id:$e,league_id:pt,license_number:`LIC-${Date.now()}`,renewal:Pt,year:Dt,confirmation:!1},{error:It}=await re.from("club_members").insert([Te]);It?(console.error("insert club member error",It),se("Error saving club member: "+It.message),me(!1)):(be(`Member "${r} ${t}" has been successfully added to the club!`),e(""),n(""),s(""),l(""),u(""),f(""),w(""),b(""),j(""),de(""),U(""),ue(""),I(null),R(null),me(!1))}catch(wt){console.error("handleSubmit error",wt),se("Unexpected error: "+wt.message),me(!1)}};return a.jsxs("div",{className:"page-container",children:[E&&a.jsx(rn,{}),a.jsxs("div",{className:"content-box",children:[a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsxs("div",{className:"federation-header",children:[Ne?a.jsx("img",{src:Ne,alt:"Federation Logo",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:Ce})]})}),a.jsx("h2",{className:"form-title",children:"Add Club Member"}),a.jsxs("form",{onSubmit:Et,className:"form-grid",children:[a.jsxs("label",{children:["Club Role *",a.jsxs("select",{value:c,onChange:He=>u(He.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Role"}),d.map(He=>a.jsx("option",{value:He.id,children:He.club_role},He.id))]})]}),a.jsxs("label",{children:["League *",a.jsxs("select",{value:Le,onChange:He=>{Me(He.target.value),at("")},required:!0,children:[a.jsx("option",{value:"",children:"-- Select League --"}),Z.map(He=>a.jsx("option",{value:He.id,children:He.name_league},He.id))]})]}),a.jsxs("label",{children:["Club *",a.jsxs("select",{value:Ue,onChange:He=>at(He.target.value),disabled:!Le,required:!0,children:[a.jsx("option",{value:"",children:"-- Select Club --"}),C.map(He=>a.jsx("option",{value:He.id,children:He.name_club},He.id))]})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:G,onChange:He=>de(He.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:M,onChange:He=>U(He.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:ve,onChange:He=>ue(He.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:m,onChange:He=>f(He.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{type:"text",value:t,onChange:He=>e(He.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{type:"text",value:r,onChange:He=>n(He.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:i,onChange:He=>s(He.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{type:"text",value:o,onChange:He=>l(He.target.value),required:!0})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{type:"text",value:x,onChange:He=>w(He.target.value),maxLength:"18",minLength:"18",required:!0})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:N,onChange:He=>b(He.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:S,onChange:He=>j(He.target.value),required:!0})]}),a.jsxs("label",{children:["Upload Club Logo *",a.jsx("input",{type:"file",onChange:He=>{var $e;return R((($e=He.target.files)==null?void 0:$e[0])??null)},required:!0})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",onChange:He=>{var $e;return I((($e=He.target.files)==null?void 0:$e[0])??null)},required:!0})]}),a.jsxs("div",{className:"btn-row",children:[a.jsx("button",{type:"submit",className:"primary-b",children:"Add Member"}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>Ve("/club-member-list"),children:"The Member List"}),a.jsx(Er,{})]}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),oe&&a.jsx($i,{message:"Adding member..."}),Y&&a.jsx(An,{error:Y,onClose:()=>se("")}),ke&&a.jsx(In,{success:ke,onClose:()=>be("")}),a.jsx(gn,{})]})]})}function Xk(){v.useEffect(()=>{ei()},[]);const{state:t}=di(),[e,r]=v.useState(null),[n,i]=v.useState(null),[s,o]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState([]),[g,m]=v.useState(null),[f,x]=v.useState(null),[w,N]=v.useState(null),[b,S]=v.useState(""),[j,C]=v.useState(""),[$,Z]=v.useState(""),[V,T]=v.useState(""),[R,z]=v.useState(""),[I,G]=v.useState(""),[de,M]=v.useState([]),[U,ve]=v.useState(!0),[ue,Y]=v.useState("");v.useEffect(()=>{console.log(" Loading state changed to:",U),console.log(U?" BarLoading should be visible now":" BarLoading should be hidden now")},[U]);const[se,ke]=v.useState(0),be=Xn(),E=Xn(),q=Xn(),oe=Xn(),[me,Ne]=v.useState(null),[Se]=v.useState("Algerian Judo Federation"),[Ce]=v.useState(!0),Le=Ur(),[Me,Ue]=v.useState(""),[at,Ve]=v.useState([]),[Oe,le]=v.useState(null),[Ct,Et]=v.useState(""),[He,$e]=v.useState([{id:1,title:"Official Website",description:"Visit our main website",image:"",link:"https://example.com",type:"website"},{id:2,title:"Rules PDF",description:"Download competition rules",image:"",link:"",type:"pdf"},{id:3,title:"Training Center",description:"Find training locations",image:"",link:"https://maps.google.com",type:"website"},{id:4,title:"Registration Form",description:"Download registration form",image:"",link:"",type:"pdf"},{id:5,title:"Contact Us",description:"Get in touch with us",image:"",link:"mailto:contact@judoalgeria.com",type:"website"}]),[pt,ct]=v.useState(null),[jt,At]=v.useState(null);v.useEffect(()=>{(async()=>{const{data:W,error:Ee}=await re.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!Ee&&W&&c(W)})()},[]),v.useEffect(()=>{(async()=>{const{data:W,error:Ee}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!Ee&&W.length>0&&Ne(W[0].logo_url)})()},[]),v.useEffect(()=>{try{const ce=localStorage.getItem("algerian_judo_banner_announcements");if(ce){const W=JSON.parse(ce);Ve(W)}}catch(ce){console.error("Erreur lors du chargement des annonces:",ce)}},[]);const Wt=async()=>{const{data:ce,error:W}=await re.from("pub").select("*").order("created_at",{ascending:!1});W||o(ce)},st=async ce=>{const{error:W}=await re.from("pub").delete().eq("id",ce);W||Wt()},St=async()=>{const{data:ce,error:W}=await re.from("publications").select("*").order("created_at",{ascending:!1});W||c(ce)},zt=async()=>{const{data:ce,error:W}=await re.from("publica").select("*").order("created_at",{ascending:!1});W||d(ce)},bt=async()=>{const{data:ce,error:W}=await re.from("logo").select("*").order("id",{ascending:!1});W||M(ce)},Dt=async()=>{if(!e){alert("Please select a logo first.");return}ve(!0);const ce=`logo-${Date.now()}-${e.name}`,{error:W}=await re.storage.from("publications").upload(ce,e,{upsert:!0});if(W){alert("Upload failed: "+W.message),ve(!1);return}const{data:Ee}=re.storage.from("publications").getPublicUrl(ce),{error:Ge}=await re.from("logo").insert([{logo_url:Ee.publicUrl}]);if(Ge){alert("Failed to save to DB: "+Ge.message),ve(!1);return}r(null),bt(),ve(!1)},Pt=async ce=>{const{error:W}=await re.from("logo").delete().eq("id",ce);W?alert("Error deleting logo: "+W.message):bt()};v.useEffect(()=>{(async()=>{console.log(" Starting to load initial data...");const W=Date.now();try{console.log(" Fetching all data..."),await Promise.all([bt(),Wt(),St(),zt()]);const Ee=Date.now();console.log(` All data loaded successfully in ${Ee-W}ms`)}catch(Ee){console.error(" Error loading data:",Ee),Y("Failed to load data. Please try again.")}finally{console.log(" Setting loading to false"),ve(!1)}})()},[]);const Ot=async()=>{if(!f){alert("Please choose an image for publication.");return}ve(!0);const ce=`publication-${Date.now()}-${f.name}`,{error:W}=await re.storage.from("publications").upload(ce,f,{upsert:!0});if(W){alert("Publication upload failed: "+W.message);return}const{data:Ee}=re.storage.from("publications").getPublicUrl(ce),{error:Ge}=await re.from("publications").insert([{title:R,description:I,photo_url:Ee.publicUrl}]);if(Ge){alert("Insert failed: "+Ge.message),ve(!1);return}x(null),S(""),C(""),St(),ve(!1)},wt=async()=>{if(!w){alert("Please choose an image for publica.");return}ve(!0);const ce=`publica-${Date.now()}-${w.name}`,{error:W}=await re.storage.from("publications").upload(ce,w,{upsert:!0});if(W){alert("Publica upload failed: "+W.message),ve(!1);return}const{data:Ee}=re.storage.from("publications").getPublicUrl(ce),{error:Ge}=await re.from("publica").insert([{title:$,description:V,photo_url:Ee.publicUrl}]);if(Ge){alert("Insert failed: "+Ge.message),ve(!1);return}N(null),Z(""),T(""),zt(),ve(!1)},Xt=async ce=>{const{error:W}=await re.from("publications").delete().eq("id",ce);W||St()},Te=async ce=>{const{error:W}=await re.from("publica").delete().eq("id",ce);W||zt()},It=ce=>{Ve(ce)},ot=()=>{if(Me.trim()){const ce=[...at,Me.trim()];It(ce);try{localStorage.setItem("algerian_judo_banner_announcements",JSON.stringify(ce))}catch(W){console.error("Erreur lors de la sauvegarde des annonces:",W)}Ue("")}},Rt=ce=>{const W=at.filter((Ee,Ge)=>Ge!==ce);It(W);try{localStorage.setItem("algerian_judo_banner_announcements",JSON.stringify(W))}catch(Ee){console.error("Erreur lors de la sauvegarde des annonces:",Ee)}},ht=ce=>{le(ce),Et(at[ce])},Ye=()=>{if(Oe!==null&&Ct.trim()){const ce=[...at];ce[Oe]=Ct.trim(),It(ce);try{localStorage.setItem("algerian_judo_banner_announcements",JSON.stringify(ce))}catch(W){console.error("Erreur lors de la sauvegarde des annonces:",W)}le(null),Et("")}},tr=()=>{le(null),Et("")},_e=(ce,W,Ee)=>{const Ge=[...He];Ge[ce][W]=Ee,$e(Ge);try{localStorage.setItem("algerian_judo_circle_buttons",JSON.stringify(Ge))}catch(Be){console.error("Erreur lors de la sauvegarde des boutons:",Be)}Wk(Ge)},Je=async(ce,W)=>{if(W)try{const Ee=W.name.split(".").pop(),Be=`circle-buttons/${`circle-button-${ce}-${Date.now()}.${Ee}`}`,{data:nt,error:Mt}=await re.storage.from("publications").upload(Be,W);if(Mt)throw Mt;const{data:{publicUrl:ut}}=re.storage.from("publications").getPublicUrl(Be);_e(ce,"image",ut)}catch(Ee){console.error("Erreur lors du tlchargement de l'image:",Ee),alert("Erreur lors du tlchargement de l'image: "+Ee.message)}},vt=async(ce,W)=>{if(W)try{const Ee=W.name.split(".").pop(),Be=`pdfs/${`circle-button-pdf-${ce}-${Date.now()}.${Ee}`}`,{data:nt,error:Mt}=await re.storage.from("publications").upload(Be,W);if(Mt)throw Mt;const{data:{publicUrl:ut}}=re.storage.from("publications").getPublicUrl(Be);_e(ce,"link",ut)}catch(Ee){console.error("Erreur lors du tlchargement du PDF:",Ee),alert("Erreur lors du tlchargement du PDF: "+Ee.message)}};return v.useEffect(()=>{(async()=>{try{const ce=await ow();ce&&ce.length>0&&$e(ce)}catch(ce){console.error("Erreur lors du chargement des boutons:",ce)}})()},[]),a.jsxs(a.Fragment,{children:[U&&a.jsx(rn,{}),a.jsxs("section",{className:"app-container",children:[a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[me?a.jsx("img",{src:me,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:Se||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"content",children:[a.jsx("h2",{children:"Welcome to the Federation Account"}),a.jsx("p",{children:"This is the Federation Account page."}),a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx(oc,{"data-id":"1",onLoadingStart:()=>ve(!0)}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:ce=>{br(ce.currentTarget),Le("/MemberListPageP")},children:"The Member List Add"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:ce=>{br(ce.currentTarget),Le("/TheLeagueList-Add")},children:"The League List Add"}),a.jsx("button",{className:"primary-btn","data-id":"4",onClick:ce=>{br(ce.currentTarget),Le("/TheClubListAdd-Fed")},children:"The Club List Add"}),a.jsx("button",{className:"primary-btn","data-id":"5",onClick:ce=>{br(ce.currentTarget),Le("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),a.jsx("div",{className:"table-container",ref:be,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Logo"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:de.length>0?de.map(ce=>a.jsxs("tr",{children:[a.jsx("td",{children:ce.logo_url?a.jsx("img",{src:ce.logo_url,alt:"Logo",width:"80"}):"No logo"}),a.jsx("td",{children:a.jsx("button",{className:"primary-b",onClick:()=>Pt(ce.id),children:"Delete"})})]},ce.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"2",children:"No logos found."})})})]})}),a.jsxs("div",{className:"form-grid",children:[a.jsx("input",{type:"file",onChange:ce=>r(ce.target.files[0])}),a.jsx("button",{className:"primary-b",onClick:Dt,children:"Upload Logo"})]}),a.jsx("h2",{children:"Update Federation Publication"}),a.jsx("div",{className:"table-container",ref:q,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Photo"}),a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Created At"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:l.length>0?l.map(ce=>a.jsxs("tr",{children:[a.jsx("td",{children:ce.photo_url?a.jsx("img",{src:ce.photo_url,alt:ce.title,width:"80"}):"No photo"}),a.jsx("td",{children:ce.title}),a.jsx("td",{children:ce.description}),a.jsx("td",{children:new Date(ce.created_at).toLocaleString()}),a.jsx("td",{children:a.jsx("button",{className:"primary-b",onClick:()=>Xt(ce.id),children:"Delete"})})]},ce.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",children:"No publications found."})})})]})}),a.jsxs("div",{className:"form-grid",style:{marginTop:"1rem"},children:[a.jsx("input",{type:"file",onChange:ce=>x(ce.target.files[0])}),a.jsx("input",{type:"text",placeholder:"Title",value:R,onChange:ce=>z(ce.target.value)}),a.jsx("input",{type:"text",placeholder:"Description",value:I,onChange:ce=>G(ce.target.value)}),a.jsx("button",{className:"primary-b",onClick:Ot,children:"Save Publication"})]}),a.jsx("h2",{children:"Federation Photos"}),a.jsx("div",{className:"table-container",ref:E,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Photo"}),a.jsx("th",{children:"Created At"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.length>0?s.map(ce=>a.jsxs("tr",{children:[a.jsx("td",{children:ce.photo_url?a.jsx("img",{src:ce.photo_url,alt:"photo",width:"80"}):"No photo"}),a.jsx("td",{children:new Date(ce.created_at).toLocaleString()}),a.jsx("td",{children:a.jsx("button",{className:"primary-b",onClick:()=>st(ce.id,ce.photo_url),children:"Delete"})})]},ce.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"3",children:"No photos found."})})})]})}),a.jsxs("div",{className:"form-grid",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:ce=>{ce.target.files&&ce.target.files.length>0&&(m(ce.target.files[0]),console.log(" File selected:",ce.target.files[0].name))}}),a.jsx("button",{className:"primary-b",onClick:async()=>{if(!g){alert(" Please select a photo first.");return}console.log(" Uploading file:",g.name);const ce=`photos/pub-${Date.now()}-${g.name}`,{error:W}=await re.storage.from("publications").upload(ce,g,{upsert:!0});if(W){alert("Upload failed: "+W.message);return}const{data:Ee}=re.storage.from("publications").getPublicUrl(ce),{error:Ge}=await re.from("pub").insert([{photo_url:Ee.publicUrl}]);if(Ge){alert("Failed to save to DB: "+Ge.message);return}alert("Photo uploaded successfully!"),m(null),Wt()},children:"Save Photo"})]}),a.jsx("h2",{children:"PUBLICA UPLOAD (Add New Publication)"}),a.jsx("div",{className:"table-container",ref:oe,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Photo"}),a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Created At"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:u.length>0?u.map(ce=>a.jsxs("tr",{children:[a.jsx("td",{children:ce.photo_url?a.jsx("img",{src:ce.photo_url,alt:ce.title,width:"80"}):"No photo"}),a.jsx("td",{children:ce.title}),a.jsx("td",{children:ce.description}),a.jsx("td",{children:new Date(ce.created_at).toLocaleString()}),a.jsx("td",{children:a.jsx("button",{className:"primary-b",onClick:()=>Te(ce.id),children:"Delete"})})]},ce.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",children:"No publica entries found."})})})]})}),a.jsxs("div",{className:"form-grid",children:[a.jsx("input",{type:"file",onChange:ce=>N(ce.target.files[0])}),a.jsx("input",{type:"text",placeholder:"Title",value:$,onChange:ce=>Z(ce.target.value)}),a.jsx("input",{type:"text",placeholder:"Description",value:V,onChange:ce=>T(ce.target.value)}),a.jsx("button",{className:"primary-b",onClick:wt,children:"Save Publica"})]})]}),a.jsx("div",{className:"form-grid",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(eL,{className:"w-6 h-6 text-purple-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gestion des Annonces Publicitaires"})]}),a.jsx("div",{className:"space-y-4 mb-6",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouvelle annonce"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",value:Me,onChange:ce=>Ue(ce.target.value),className:"w-full px-24 py-6 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-purple-500 focus:border-purple-500 text-xl font-medium shadow-lg",placeholder:" Your ad here announcement...",style:{minWidth:"600px",width:"100%"}}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("button",{className:"primary-b px-8 py-4 text-lg font-semibold rounded-xl shadow-lg",onClick:ot,children:[a.jsx(rL,{className:"w-6 h-6 mr-2"}),"Ajouter l'annonce"]})})]})]})}),a.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Annonces actuelles :"}),at.map((ce,W)=>a.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border",children:Oe===W?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:Ct,onChange:Ee=>Et(Ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{className:"primary-S",onClick:Ye,children:[a.jsx(aL,{className:"w-3 h-3"}),"Sauvegarder"]}),a.jsxs("button",{className:"secondary-btn",onClick:tr,children:[a.jsx(UC,{className:"w-3 h-3"}),"Annuler"]})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm flex-1 mr-3",children:ce}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{className:"primary-S",onClick:()=>ht(W),children:a.jsx(lL,{className:"w-3 h-3"})}),a.jsx("button",{className:"secondary-btn",onClick:()=>Rt(W),children:a.jsx(uL,{className:"w-3 h-3"})})]})]})},W))]})]})}),a.jsx("div",{className:"form-grid",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(WC,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gestion des Boutons Circulaires 3D"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:He.map((ce,W)=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre"}),a.jsx("input",{type:"text",value:ce.title,onChange:Ee=>_e(W,"title",Ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Titre du bouton"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("input",{type:"text",value:ce.description,onChange:Ee=>_e(W,"description",Ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Description du bouton"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),a.jsxs("select",{value:ce.type,onChange:Ee=>_e(W,"type",Ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"website",children:"Site Web"}),a.jsx("option",{value:"pdf",children:"Fichier PDF"})]})]}),ce.type==="website"?a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(XC,{className:"w-4 h-4 inline mr-1"}),"Lien du site web"]}),a.jsx("input",{type:"url",value:ce.link,onChange:Ee=>_e(W,"link",Ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com"})]}):a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(VC,{className:"w-4 h-4 inline mr-1"}),"Fichier PDF"]}),a.jsx("input",{type:"file",accept:".pdf",onChange:Ee=>{const Ge=Ee.target.files[0];Ge&&vt(W,Ge)},className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),ce.link&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:"PDF tlcharg avec succs"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(fL,{className:"w-4 h-4 inline mr-1"}),"Image du bouton"]}),a.jsx("input",{type:"file",accept:"image/*",onChange:Ee=>{const Ge=Ee.target.files[0];Ge&&Je(W,Ge)},className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),ce.image&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:ce.image,alt:ce.title,className:"w-16 h-16 object-cover rounded-full border-2 border-gray-300"})})]})]})},ce.id))})]})})]}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function Zk(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,u]=v.useState([]),[d,g]=v.useState(null),[m,f]=v.useState("Algerian Judo Federation"),[x,w]=v.useState([]);Ur();const N=Xn();v.useEffect(()=>{(async()=>{const{data:z,error:I}=await re.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!I&&z&&u(z)})()},[]),v.useEffect(()=>{(async()=>{const{data:z,error:I}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!I&&z.length>0&&g(z[0].logo_url)})()},[]);const b=async()=>{try{n(!0);const{data:R,error:z}=await re.from("league_members").select("*");if(z)throw z;const{data:I,error:G}=await re.from("nameleague").select("id, name_league");if(G)throw G;const de=Object.fromEntries((I||[]).map(U=>[U.id,U.name_league])),M=(R||[]).map(U=>({...U,league_name:de[U.league_id]||"Unknown League"}));e(M)}catch(R){console.error("fetchMembers error:",R),e([]),s(R)}finally{n(!1)}};v.useEffect(()=>{b()},[]),v.useEffect(()=>{(async()=>{try{const{data:z,error:I}=await re.from("leaguerole").select("*");I?console.error("Error fetching roles:",I):w(z||[])}catch(z){console.error("Error fetching roles:",z)}})()},[]);const S="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",j=R=>R?R.startsWith("http")?R:`${S}${R}`:null,C=t,$=(R,z=40,I=4)=>new Promise(G=>{try{Gi(R,de=>{try{const M=de.naturalWidth||de.width||z,U=de.naturalHeight||de.height||z,ve=Math.max(z/M,z/U),ue=M*ve,Y=U*ve,se=(z-ue)/2,ke=(z-Y)/2,be=document.createElement("canvas");be.width=z,be.height=z;const E=be.getContext("2d");E.clearRect(0,0,z,z),E.save();const q=I;E.beginPath(),E.moveTo(q,0),E.lineTo(z-q,0),E.quadraticCurveTo(z,0,z,q),E.lineTo(z,z-q),E.quadraticCurveTo(z,z,z-q,z),E.lineTo(q,z),E.quadraticCurveTo(0,z,0,z-q),E.lineTo(0,q),E.quadraticCurveTo(0,0,q,0),E.closePath(),E.clip(),E.drawImage(de,se,ke,ue,Y),E.restore();const oe=be.toDataURL("image/jpeg",.92);G(oe)}catch{G(null)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})}catch{G(null)}}),Z=R=>{const z=R.internal.pageSize.getWidth();if(d)try{R.addImage(d,"PNG",z-40,15,25,25)}catch(G){console.warn("Could not add federation logo:",G)}R.setFontSize(10),R.setFont("helvetica","normal");const I=new Date().toLocaleDateString();return R.text(`Print Date: ${I}`,15,20),R.setFontSize(16),R.setFont("helvetica","bold"),R.text(et(m||"Algerian Judo Federation"),z/2,25,{align:"center"}),40},V=async()=>{try{const R=C||[];if(!R.length){alert("No members to export");return}const z=new Tt("landscape","mm","a4"),I=Z(z);z.setFontSize(14),z.setFont("helvetica","bold"),z.setTextColor(255,0,0),z.text("League Members - General Report",z.internal.pageSize.getWidth()/2,I+10,{align:"center"}),z.setTextColor(0,0,0);const G=await Promise.all(R.map(async ue=>{const Y=j(ue.photo_url),se=Y?await $(Y):null;return[et(ue.last_name)||"",et(ue.first_name)||"",et(ue.date_of_birth)||"",et(ue.place_of_birth)||"",et(ue.role)||"No Role",et(ue.blood_type)||"",et(ue.nationality)||"",et(ue.grade)||"",et(ue.holder_of)||"",et(ue.national_id_number)||"",et(ue.renewal)||"",et(ue.year)||"",et(ue.license_number)||"",et(ue.registration_date)||"",et(ue.league_name)||"Unknown League",se,ue.confirmation?"Yes":"No"]})),de=8,M=de+4,U=15;pr(z,{head:[["Last Name","First Name","DOB","POB","Role","Blood","Nationality","Grade","Holder Of","NID","Renewal","Year","License #","Registration","League","PHOTO","Confirmation"]],body:G,startY:I+20,styles:{fontSize:7,cellPadding:1},headStyles:{fillColor:[0,128,0],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{[U]:{cellWidth:M,minCellHeight:M}},didParseCell:ue=>{ue.column.index===U&&ue.section==="body"&&(ue.cell.text=[])},didDrawCell:ue=>{if(ue.column.index===U&&ue.section==="body"){const Y=ue.cell.raw;if(!Y)return;const se=de,ke=de,be=ue.cell.x+(ue.cell.width-se)/2,E=ue.cell.y+(ue.cell.height-ke)/2;try{const oe=typeof Y=="string"&&Y.startsWith("data:image/png")?"PNG":"JPEG";z.addImage(Y,oe,be,E,se,ke)}catch(q){console.warn("Failed to draw photo thumbnail:",q)}}},didDrawPage:ue=>{ue.pageNumber>1&&Z(z)}});const ve=`league_members_with_photos_${new Date().getFullYear()}.pdf`;z.save(ve)}catch(R){console.error("Error exporting league members PDF:",R),alert(`Error exporting PDF: ${R.message}`)}},T=R=>{if(!R||Object.keys(R).length===0){s("No member data available to export");return}console.log("Exporting PDF for member:",R),l(`PDF export initiated for ${R.first_name} ${R.last_name}`)};return a.jsxs("div",{className:"app-container",children:[r&&a.jsx(rn,{}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[d?a.jsx("img",{src:d,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:m||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{children:"League Member List"}),a.jsx("div",{className:"table-container",ref:N,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Holder Of"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"PHOTO"}),a.jsx("th",{children:"League Name"}),a.jsx("th",{children:"Confirmation"})]})}),a.jsx("tbody",{children:C.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:17,children:"No members found."})}):C.map(R=>a.jsxs("tr",{onDoubleClick:()=>T(R),style:{cursor:"pointer"},children:[a.jsx("td",{children:R.last_name}),a.jsx("td",{children:R.first_name}),a.jsx("td",{children:R.date_of_birth}),a.jsx("td",{children:R.place_of_birth}),a.jsx("td",{children:R.role||"No Role"}),a.jsx("td",{children:R.blood_type}),a.jsx("td",{children:R.nationality}),a.jsx("td",{children:R.grade}),a.jsx("td",{children:R.holder_of}),a.jsx("td",{children:R.national_id_number}),a.jsx("td",{children:R.renewal}),a.jsx("td",{children:R.year}),a.jsx("td",{children:R.license_number}),a.jsx("td",{children:R.registration_date}),a.jsx("td",{children:R.photo_url?a.jsx("img",{src:j(R.photo_url),alt:"Member",style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),a.jsx("td",{children:R.league_name||"Unknown League"}),a.jsx("td",{children:R.confirmation?"":""})]},R.id))})]})}),a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"btn-row",children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:V,children:"Export PDF"})]})})]}),i&&a.jsx(An,{error:i.message||i,onClose:()=>s(null)}),o&&a.jsx(In,{success:o,onClose:()=>l("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function e8(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,u]=v.useState([]),[d,g]=v.useState({}),[m,f]=v.useState(null),[x,w]=v.useState("Algerian Judo Federation");Ur();const N=Xn(),b=async()=>{try{n(!0);const{data:V,error:T}=await re.from("club_members").select(`
          *,
          nameleague!league_id(name_league)
        `);T?s(T):e(V||[])}catch(V){s(V)}finally{n(!1)}},S=async()=>{const{data:V,error:T}=await re.from("logo").select("logo_url").order("id",{ascending:!1}).limit(1);T&&console.error("Error fetching logo:",T.message),V!=null&&V.length&&f(V[0].logo_url)};v.useEffect(()=>{b(),S()},[]),v.useEffect(()=>{(async()=>{const{data:T,error:R}=await re.from("clubrole").select("id, club_role");R&&console.error("Error fetching roles:",R.message),T&&u(T)})()},[]);function j(V){return V??""}const C=(V,T=40,R=4)=>new Promise(z=>{try{Gi(V,I=>{try{const G=I.naturalWidth||I.width||T,de=I.naturalHeight||I.height||T,M=Math.max(T/G,T/de),U=G*M,ve=de*M,ue=(T-U)/2,Y=(T-ve)/2,se=document.createElement("canvas");se.width=T,se.height=T;const ke=se.getContext("2d");ke.clearRect(0,0,T,T),ke.save();const be=R;ke.beginPath(),ke.moveTo(be,0),ke.lineTo(T-be,0),ke.quadraticCurveTo(T,0,T,be),ke.lineTo(T,T-be),ke.quadraticCurveTo(T,T,T-be,T),ke.lineTo(be,T),ke.quadraticCurveTo(0,T,0,T-be),ke.lineTo(0,be),ke.quadraticCurveTo(0,0,be,0),ke.closePath(),ke.clip(),ke.drawImage(I,ue,Y,U,ve),ke.restore();const E=se.toDataURL("image/jpeg",.92);z(E)}catch{z(null)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})}catch{z(null)}}),$=V=>{const T=V.internal.pageSize.getWidth();if(m)try{V.addImage(m,"PNG",T-40,15,25,25)}catch(z){console.warn("Could not add federation logo:",z)}V.setFontSize(10),V.setFont("helvetica","normal");const R=new Date().toLocaleDateString();return V.text(`Print Date: ${R}`,15,20),V.setFontSize(16),V.setFont("helvetica","bold"),V.text(et(x||"Algerian Judo Federation"),T/2,25,{align:"center"}),40};v.useEffect(()=>{(async()=>{try{const{data:T,error:R}=await re.from("nameclub").select("id, name_club");if(R){console.error("Error fetching clubs:",R.message);return}const z=Object.fromEntries((T||[]).map(I=>[I.id,I.name_club]));g(z)}catch(T){console.error("Unexpected error fetching clubs:",T)}})()},[]);const Z=async()=>{try{const V=t||[];if(!V.length){alert("No members to export");return}const T=new Tt("landscape","mm","a4"),R=$(T);T.setFontSize(14),T.setFont("helvetica","bold"),T.setTextColor(255,0,0),T.text("Club Members - General Report",T.internal.pageSize.getWidth()/2,R+10,{align:"center"}),T.setTextColor(0,0,0);const z=await Promise.all(V.map(async U=>{var ke;const ve=j(U.photo_url),ue=ve?await C(ve):null,Y=d[U.club_id]||U.club_id||"",se=((ke=U.nameleague)==null?void 0:ke.name_league)||U.league_id||"";return[et(U.last_name)||"",et(U.first_name)||"",et(U.date_of_birth)||"",et(U.place_of_birth)||"",et(U.role)||"No Role",et(U.blood_type)||"",et(U.nationality)||"",et(U.grade)||"",et(U.holder_of)||"",et(U.renewal)||"",et(U.year)||"",et(U.license_number)||"",et(U.registration_date)||"",et(Y)||"",et(se)||"",ue,U.confirmation?"Yes":"No"]})),I=8,G=I+4,de=15;pr(T,{head:[["Last Name","First Name","DOB","POB","Role","Blood","Nationality","Grade","Holder Of","Renewal","Year","License #","Registration","Club ID","League","PHOTO","Confirmation"]],body:z,startY:R+20,styles:{fontSize:7,cellPadding:1},headStyles:{fillColor:[0,128,0],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{[de]:{cellWidth:G,minCellHeight:G}},didParseCell:U=>{U.column.index===de&&U.section==="body"&&(U.cell.text=[])},didDrawCell:U=>{if(U.column.index===de&&U.section==="body"){const ve=U.cell.raw;if(!ve)return;const ue=I,Y=I,se=U.cell.x+(U.cell.width-ue)/2,ke=U.cell.y+(U.cell.height-Y)/2;try{const E=typeof ve=="string"&&ve.startsWith("data:image/png")?"PNG":"JPEG";T.addImage(ve,E,se,ke,ue,Y)}catch(be){console.warn("Failed to draw photo thumbnail:",be)}}},didDrawPage:U=>{U.pageNumber>1&&$(T)}});const M=`club_members_with_photos_${new Date().getFullYear()}.pdf`;T.save(M)}catch(V){console.error("Error exporting club members PDF:",V),alert(`Error exporting PDF: ${V.message}`)}};return a.jsxs("div",{className:"app-container",children:[r&&a.jsx(rn,{}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[m?a.jsx("img",{src:m,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:x||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{children:"Club Member List"}),a.jsx("div",{className:"table-container",ref:N,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"holder_of"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photos"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"Club ID"}),a.jsx("th",{children:"League ID"})]})}),a.jsx("tbody",{children:t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:17,children:"No members found."})}):t.map(V=>{var T;return a.jsxs("tr",{children:[a.jsx("td",{children:V.last_name}),a.jsx("td",{children:V.first_name}),a.jsx("td",{children:V.date_of_birth}),a.jsx("td",{children:V.place_of_birth}),a.jsx("td",{children:V.role||"No Role"}),a.jsx("td",{children:V.blood_type}),a.jsx("td",{children:V.nationality}),a.jsx("td",{children:V.grade}),a.jsx("td",{children:V.holder_of}),a.jsx("td",{children:V.renewal}),a.jsx("td",{children:V.year}),a.jsx("td",{children:V.license_number}),a.jsx("td",{children:V.registration_date}),a.jsx("td",{children:V.photo_url?a.jsx("img",{src:V.photo_url,alt:"Photo",style:{width:"50px",height:"50px"}}):"No Photo"}),a.jsx("td",{children:V.confirmation?"":""}),a.jsx("td",{children:d[V.club_id]||V.club_id}),a.jsx("td",{children:((T=V.nameleague)==null?void 0:T.name_league)||V.league_id})]},V.id)})})]})}),a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"btn-row",children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:Z,children:"Export PDF"})]})})]}),i&&a.jsx(An,{error:i.message||i,onClose:()=>s(null)}),o&&a.jsx(In,{success:o,onClose:()=>l("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function t8(){v.useEffect(()=>{ei()},[]);const{state:t}=di(),[e,r]=v.useState([]),[n,i]=v.useState(""),[s,o]=v.useState(null),[l,c]=v.useState({}),[u,d]=v.useState(!0),[g,m]=v.useState(null),[f,x]=v.useState(""),[w,N]=v.useState(""),[b,S]=v.useState(""),[j,C]=v.useState([]),[$,Z]=v.useState(""),[V,T]=v.useState(""),[R,z]=v.useState(""),[I,G]=v.useState(""),[de,M]=v.useState(""),[U,ve]=v.useState(""),[ue,Y]=v.useState(""),[se,ke]=v.useState(""),[be,E]=v.useState(""),[q,oe]=v.useState(""),[me,Ne]=v.useState(""),[Se,Ce]=v.useState(null),[Le,Me]=v.useState(!1),[Ue,at]=v.useState(!1),[Ve,Oe]=v.useState([]),[le,Ct]=v.useState(null),[Et,He]=v.useState("Algerian Judo Federation"),[$e,pt]=v.useState(!0),ct=Ur(),jt=Xn();v.useEffect(()=>{(async()=>{const{data:Je,error:vt}=await re.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!vt&&Je&&Oe(Je)})()},[]),v.useEffect(()=>{(async()=>{const{data:Je,error:vt}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!vt&&Je.length>0&&Ct(Je[0].logo_url)})()},[]);const At=async()=>{try{d(!0);const{data:_e,error:Je}=await re.from("members").select("*").order("created_at",{ascending:!1});Je?(console.error("Error fetching members:",Je),m(Je)):r(_e||[])}catch(_e){console.error("Exception in fetchMembers:",_e),m(_e)}finally{d(!1)}};v.useEffect(()=>{At()},[]),v.useEffect(()=>{(async()=>{try{const{data:Je,error:vt}=await re.from("federationrole").select("federation_role").order("federation_role",{ascending:!0});if(vt){console.warn("Failed to fetch federation roles, using fallback:",vt),C([{federation_role:"President"},{federation_role:"Vice President"},{federation_role:"Secretary"},{federation_role:"Treasurer"},{federation_role:"Coach"},{federation_role:"Referee"}]);return}const ce=(Je||[]).map(W=>({federation_role:W.federation_role}));C(ce)}catch(Je){console.warn("Exception fetching federation roles, using fallback:",Je),C([{federation_role:"President"},{federation_role:"Vice President"},{federation_role:"Secretary"},{federation_role:"Treasurer"},{federation_role:"Coach"},{federation_role:"Referee"}])}})()},[]);const Wt=async()=>{if(!Se||Se.size===0)return"";const _e=Se.name.split(".").pop(),Je=`photo-${Date.now()}.${_e}`,{error:vt}=await re.storage.from("logos").upload(Je,Se);if(vt)return m(`Photo upload failed: ${vt.message}`),"";const{data:ce}=re.storage.from("logos").getPublicUrl(Je);return(ce==null?void 0:ce.publicUrl)??""},st=async(_e,Je,vt,ce=null)=>{let W=re.from("members").select("id").eq("national_id_number",_e).eq("role",Je).eq("year",vt);ce&&(W=W.neq("id",ce));const{data:Ee,error:Ge}=await W;if(Ge)throw Ge;if(Ee&&Ee.length>0)throw new Error("This member is already registered for the current season with the same role.");let Be=re.from("members").select("*",{count:"exact",head:!0}).eq("national_id_number",_e).eq("role",Je);ce&&(Be=Be.neq("id",ce));const{count:nt,error:Mt}=await Be;if(Mt)throw Mt;return(nt||0)+1},St=async _e=>{if(_e.preventDefault(),m(""),x(""),Me(!0),!R||!V||!I||!de||!b||!ue||!se||!Se){const Be=[];R||Be.push("First Name"),V||Be.push("Last Name"),I||Be.push("Date of Birth"),de||Be.push("Place of Birth"),b||Be.push("Federation Role"),ue||Be.push("Password"),se||Be.push("Confirm Password"),Se||Be.push("Member Photo"),m(`Please fill in the following required fields: ${Be.join(", ")}`),Me(!1);return}if(U.length!==18){m("National ID must be exactly 18 digits."),Me(!1);return}if(ue!==se){m("Passwords do not match."),Me(!1);return}const Je=new Date(I),vt=new Date,ce=vt.getFullYear()-Je.getFullYear(),W=vt.getMonth()-Je.getMonth(),Ee=vt.getDate()-Je.getDate();if((W<0||W===0&&Ee<0?ce-1:ce)<=21){m("Member must be more than 21 years old to register."),Me(!1);return}try{const{data:Be,error:nt}=await re.from("members").select("id, last_name, password").eq("last_name",V).eq("password",ue);if(nt){m(`Failed to validate member data: ${nt.message}`),Me(!1);return}if(Be&&Be.length>0){m(`A member with the last name "${V}" and this password already exists. Please change the password.`),Me(!1);return}}catch(Be){m(`Validation error: ${Be.message}`),Me(!1);return}try{const Be=await Wt(),nt=new Date().getFullYear(),Mt=`${nt}/${nt+1}`,ut=await st(U,b,Mt),kt={last_name:V,first_name:R,date_of_birth:I,place_of_birth:de,role:b,blood_type:$,national_id_number:U,password:ue,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],nationality:be,holder_of:q,grade:me,photo_url:Be,confirmation:!1,year:Mt,renewal:ut},{error:X}=await re.from("members").insert([kt]);if(X){const te=X.message||"";te.includes("members_national_id_number_key")?m("National ID already exists. Duplicates are currently blocked by the database."):m(` Failed to add member: ${te}`)}else x(` Member "${R} ${V}" added successfully!`),T(""),z(""),G(""),M(""),ve(""),Y(""),ke(""),S(""),Z(""),E(""),oe(""),Ne(""),Ce(null),await At()}catch(Be){m(` An unexpected error occurred: ${Be.message}`)}finally{Me(!1)}},zt=e.filter(_e=>{if(!n)return!0;const Je=n.toLowerCase();return _e.first_name&&_e.first_name.toLowerCase().includes(Je)||_e.last_name&&_e.last_name.toLowerCase().includes(Je)||_e.national_id_number&&String(_e.national_id_number).toLowerCase().includes(Je)||_e.role&&_e.role.toLowerCase().includes(Je)||_e.blood_type&&_e.blood_type.toLowerCase().includes(Je)||_e.place_of_birth&&_e.place_of_birth.toLowerCase().includes(Je)||_e.license_number&&String(_e.license_number).toLowerCase().includes(Je)||_e.registration_date&&String(_e.registration_date).toLowerCase().includes(Je)||_e.date_of_birth&&String(_e.date_of_birth).toLowerCase().includes(Je)}),bt=async _e=>{if(window.confirm("Are you sure you want to delete this member?")){at(!0),m(""),x("");try{const Je=e.find(ce=>ce.id===_e),{error:vt}=await re.from("members").delete().eq("id",_e);if(vt)m(`Error deleting member: ${vt.message}`);else{r(W=>W.filter(Ee=>Ee.id!==_e));const ce=Je?`${Je.first_name||""} ${Je.last_name||""}`.trim():`ID ${_e}`;x(`Member "${ce}" deleted successfully.`)}}catch(Je){m(`Unexpected error during delete: ${Je.message}`)}finally{at(!1)}}},Dt=_e=>{o(_e.id),c({..._e})},Pt=()=>{o(null),c({})},[Ot,wt]=v.useState(!1),Xt=async _e=>{if(wt(!0),m(""),x(""),!l.first_name||!l.last_name||!l.date_of_birth||!l.place_of_birth){const Je=[];l.first_name||Je.push("First Name"),l.last_name||Je.push("Last Name"),l.date_of_birth||Je.push("Date of Birth"),l.place_of_birth||Je.push("Place of Birth"),m(`Please fill in the following required fields: ${Je.join(", ")}`),wt(!1);return}if(l.national_id_number&&l.national_id_number.length!==18){m("National ID must be exactly 18 digits."),wt(!1);return}if(l.date_of_birth){const Je=new Date(l.date_of_birth),vt=new Date,ce=vt.getFullYear()-Je.getFullYear(),W=vt.getMonth()-Je.getMonth(),Ee=vt.getDate()-Je.getDate();if((W<0||W===0&&Ee<0?ce-1:ce)<=21){m("Member must be more than 21 years old."),wt(!1);return}}try{const Je=new Date().getFullYear(),vt=`${Je}/${Je+1}`,ce=_e??l.id??s??null,W=e.find(Mt=>String(Mt.id)===String(ce)),Ee=!!W&&W.national_id_number===l.national_id_number&&W.role===l.role&&W.year===vt,Ge=Ee?W.renewal:await st(l.national_id_number,l.role,vt,ce),Be={...l,renewal:Ge,year:Ee?W.year:vt};if(!ce){m("Invalid member id."),wt(!1);return}const{error:nt}=await re.from("members").update(Be).eq("id",ce);if(nt){const Mt=nt.message||"";Mt.includes("members_national_id_number_key")?m("National ID already exists. Duplicates are currently blocked by the database."):m(`Error updating member: ${Mt}`),wt(!1);return}r(Mt=>Mt.map(ut=>String(ut.id)===String(ce)?{...ut,...Be}:ut)),o(null),x(`Member "${Be.first_name} ${Be.last_name}" has been successfully updated!`),wt(!1)}catch(Je){m(`Unexpected error: ${Je.message}`),wt(!1)}},Te=(_e,Je)=>{c({...l,[Je]:_e.target.value})},It=async()=>{try{const{data:_e,error:Je}=await re.from("members").select("*").order("created_at",{ascending:!1});if(Je){console.error("Error fetching members for PDF:",Je),m(Je);return}const vt=Array.isArray(_e)?_e:[];if(!vt.length){alert("No members found");return}const ce=new Tt("landscape"),W=kt=>{const X=kt.internal.pageSize.width;try{const je=typeof le<"u"&&le,ze=typeof Oi<"u"&&Oi;je?kt.addImage(je,"PNG",X-50,10,30,30):ze&&kt.addImage(ze,"PNG",X-50,10,30,30)}catch(je){console.warn("Could not add logo to PDF header:",je)}const te=new Date().toLocaleDateString();return kt.setFontSize(10),kt.setFont("helvetica","normal"),kt.text(`Print Date: ${te}`,14,18),kt.setFontSize(16),kt.setFont("helvetica","bold"),kt.text("Algerian Judo Federation",X/2,24,{align:"center"}),40},Ee=kt=>{const X=kt.registration||kt.registration_date||"";return[et(kt.last_name||""),et(kt.first_name||""),et(kt.date_of_birth||""),et(kt.place_of_birth||""),et(kt.role||""),et(kt.blood_type||""),et(kt.nationality||""),et(kt.grade||""),et(kt.holder_of||""),et(kt.national_id_number||""),et(kt.renewal||""),et(kt.license_number||""),et(X),kt.confirmation?"Yes":"No",et(kt.password||""),String(kt.league_id||"")]},Ge=["Last","First","DOB","POB","Role","Blood","Nationality","Grade","Holder Of","NID","Renewal","License #","Registration","Confirmation","Password","League ID"];let Be=W(ce);ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.setTextColor(255,0,0),ce.text("Federation Members - General Situation",ce.internal.pageSize.getWidth()/2,Be,{align:"center"}),ce.setTextColor(0,0,0),Be+=20;const nt={};vt.forEach(kt=>{const X=kt.year?String(kt.year):"Unknown Year";nt[X]||(nt[X]=[]),nt[X].push(kt)});const Mt=Object.keys(nt).sort();Mt.forEach((kt,X)=>{ce.setFontSize(11),ce.setFont("helvetica","bold"),ce.text(`Year: ${kt}`,14,Be),Be+=8,pr(ce,{head:[Ge],body:nt[kt].map(Ee),startY:Be,styles:{fontSize:8},headStyles:{fillColor:[0,128,0],textColor:[255,255,255]},margin:{left:14,right:10}}),Be=ce.lastAutoTable.finalY+10,Be>ce.internal.pageSize.getHeight()-50&&X<Mt.length-1&&(ce.addPage(),Be=W(ce),ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.setTextColor(255,0,0),ce.text("Federation Members - General Situation",ce.internal.pageSize.getWidth()/2,Be,{align:"center"}),ce.setTextColor(0,0,0),Be+=20)});const ut=new Date().getFullYear();ce.save(`federation_members_general_${ut}.pdf`)}catch(_e){console.error("Exception exporting members PDF:",_e),m(_e)}};function ot(_e){return new Promise(Je=>{Gi(_e,vt=>{if(vt.type==="error")console.warn("EXIF processing failed, using original image:",_e),Je(_e);else try{const ce=vt.toDataURL("image/png");Je(ce)}catch(ce){console.warn("Canvas conversion failed, using original image:",ce),Je(_e)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const Rt=async _e=>{if(!_e||Object.keys(_e).length===0){alert("No data available to export");return}let Je=null,vt=null;try{_e.club_id&&(Je=(await Qn())[_e.club_id]),_e.league_id&&(vt=(await bi())[_e.league_id])}catch(ut){console.error("Error fetching names:",ut)}const ce=new Tt("portrait","mm","a4");ce.setFontSize(18),ce.setTextColor(40,40,40),ce.text("Algerian Judo Federation",14,15);const W=`Federation Member Information - ${_e.first_name||""} ${_e.last_name||""}`.trim();ce.setFontSize(16),ce.setTextColor(40,40,40),ce.text(W,14,30),ce.setFontSize(10);const Ee=new Date().toLocaleString();if(ce.text(`Generated: ${Ee}`,14,37),le)try{ce.addImage(le,"PNG",170,10,25,25)}catch(ut){console.error("Error adding logo to PDF:",ut)}let Ge=70;if(_e.photo_url)try{const ut=await ot(_e.photo_url),kt=ut.startsWith("data:")?"PNG":"JPEG";ce.addImage(ut,kt,14,45,25,20),Ge=70}catch(ut){console.error("Error adding photo to PDF:",ut);try{ce.addImage(_e.photo_url,"JPEG",14,45,25,20)}catch(kt){console.error("Fallback image addition also failed:",kt)}Ge=70}ce.setFontSize(12),_e.confirmation?ce.setTextColor(0,128,0):ce.setTextColor(255,0,0);const Be=_e.confirmation?"CONFIRMED ":"NOT CONFIRMED ";ce.text(Be,160,50),ce.setTextColor(0,0,0);const nt=[["First Name",_e.first_name||""],["Last Name",_e.last_name||""],["Date of Birth",_e.date_of_birth||""],["Place of Birth",_e.place_of_birth||""],["National ID",_e.national_id_number||""],["Nationality",_e.nationality||""],["Blood Type",_e.blood_type||""],["Grade",_e.grade||""],["Role",_e.role||""],["Holder Of",_e.holder_of||""],["License Number",_e.license_number||""],["Registration Date",_e.registration_date||""],["Year",_e.year||""],["Renewal",_e.renewal||""]];pr(ce,{head:[["Field","Value"]],body:nt,startY:Ge,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Mt=ce.lastAutoTable.finalY||200;ce.setFontSize(12),ce.setTextColor(0,0,0),ce.text("Medical certificate",14,Mt+20),ce.setDrawColor(0),ce.line(14,Mt+40,80,Mt+40),ce.text("Federation Visa: _________________",120,Mt+70);try{const ut=JSON.stringify({id:_e.id,name:`${_e.first_name||""} ${_e.last_name||""}`.trim(),license:_e.license_number||"",club_id:_e.club_id||"",league_id:_e.league_id||"",confirmation:_e.confirmation||"Unconfirmed"}),kt=await Si.toDataURL(ut,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});ce.addImage(kt,"PNG",175,Mt+75,15,15)}catch(ut){console.error("Error generating QR code:",ut)}ce.save(`member_${_e.first_name||""}_${_e.last_name||""}.pdf`)},ht=_e=>{if(!_e||Object.keys(_e).length===0){alert("No data available to export");return}Rt(_e)},Ye=async()=>{d(!0),m(null);try{const{data:_e,error:Je}=await re.from("members").select("*");if(Je)throw Je;const vt=Array.isArray(_e)?_e:[];if(!vt.length){alert("No members found"),d(!1);return}const ce=new Tt("landscape"),W=ut=>{const kt=ut.internal.pageSize.width;try{le?ut.addImage(le,"PNG",kt-50,10,30,30):Oi&&ut.addImage(Oi,"PNG",kt-50,10,30,30)}catch(te){console.warn("Could not add logo to PDF header:",te)}const X=new Date().toLocaleDateString();return ut.setFontSize(10),ut.setFont("helvetica","normal"),ut.text(`Print Date: ${X}`,14,18),ut.setFontSize(16),ut.setFont("helvetica","bold"),ut.text("Algerian Judo Federation",kt/2,24,{align:"center"}),40},Ee=ut=>[et(ut.last_name||""),et(ut.first_name||""),et(ut.date_of_birth||""),et(ut.place_of_birth||""),et(ut.blood_type||""),et(ut.nationality||""),et(ut.grade||""),et(ut.role||""),et(ut.holder_of||""),et(ut.national_id_number||""),et(ut.renewal||""),ut.confirmation?"Yes":"No",et(ut.license_number||"")];let Ge=W(ce);ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.setTextColor(255,0,0),ce.text("Federation Members - Grade and Role Situation",ce.internal.pageSize.getWidth()/2,Ge,{align:"center"}),ce.setTextColor(0,0,0),Ge+=20;const Be={};vt.forEach(ut=>{const kt=ut.year||"Unknown Year";Be[kt]||(Be[kt]=[]),Be[kt].push(ut)}),Object.keys(Be).sort().forEach((ut,kt)=>{ce.setFontSize(12),ce.setFont("helvetica","bold"),ce.text(`Year ${et(ut)}`,14,Ge),Ge+=10;const X=Be[ut],te={};X.forEach(ze=>{const Lt=ze.role||"No Role";te[Lt]||(te[Lt]=[]),te[Lt].push(ze)}),Object.entries(te).forEach(([ze,Lt])=>{Lt.length&&(ce.setFontSize(11),ce.setFont("helvetica","bold"),ce.text(`Role: ${et(ze)}`,18,Ge),Ge+=6,pr(ce,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:Lt.map(Ee),startY:Ge,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:10}}),Ge=ce.lastAutoTable.finalY+12,Ge>160&&(ce.addPage(),Ge=W(ce),ce.setFontSize(12),ce.setFont("helvetica","bold"),ce.text(`Year ${et(ut)}`,14,Ge),Ge+=10))});const je={};X.forEach(ze=>{const Lt=ze.grade||"No Grade";je[Lt]||(je[Lt]=[]),je[Lt].push(ze)}),Object.entries(je).forEach(([ze,Lt])=>{Lt.length&&(ce.setFontSize(11),ce.setFont("helvetica","bold"),ce.text(`Grade: ${et(ze)}`,18,Ge),Ge+=6,pr(ce,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:Lt.map(Ee),startY:Ge,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:10}}),Ge=ce.lastAutoTable.finalY+12,Ge>160&&(ce.addPage(),Ge=W(ce),ce.setFontSize(12),ce.setFont("helvetica","bold"),ce.text(`Year ${et(ut)}`,14,Ge),Ge+=10))}),Ge+=8});const Mt=new Date().getFullYear();ce.save(`federation_members_grade_role_${Mt}.pdf`),d(!1)}catch(_e){console.error("Exception exporting role-focused PDF:",_e),m(_e),d(!1)}},tr=async(_e,Je)=>{try{const{data:vt,error:ce}=await re.from("members").update({confirmation:!Je}).eq("id",_e).select();if(ce){console.error("Error updating confirmation:",ce),m(ce);return}r(W=>W.map(Ee=>Ee.id===_e?{...Ee,confirmation:!Je}:Ee)),x(Je?"Confirmation unset":"Confirmation set")}catch(vt){console.error("Exception in toggleConfirmation:",vt),m(vt)}};return a.jsxs("div",{className:"app-container",children:[u&&a.jsx(rn,{}),(Le||Ot||Ue)&&a.jsx($i,{message:Le?"Adding member...":Ot?"Saving changes...":"Deleting member..."}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[le?a.jsx("img",{src:le,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:Et||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"content",children:[a.jsx("h2",{children:"Welcome to the Federation Account"}),a.jsx("p",{children:"This is the Federation Account page."}),a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx(oc,{"data-id":"1"}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:_e=>{br(_e.currentTarget),ct("/MemberListPageP")},children:"The Member List Add"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:_e=>{br(_e.currentTarget),ct("/TheLeagueList-Add")},children:"The League List Add"}),a.jsx("button",{className:"primary-btn","data-id":"4",onClick:_e=>{br(_e.currentTarget),ct("/TheClubListAdd-Fed")},children:"The Club List Add"}),a.jsx("button",{className:"primary-btn","data-id":"5",onClick:_e=>{br(_e.currentTarget),ct("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),a.jsx("h2",{className:"form-title",children:"Add a New Member"}),a.jsxs("form",{onSubmit:St,className:"form-grid",children:[a.jsxs("label",{children:["Federation Role *",a.jsxs("select",{value:b,onChange:_e=>S(_e.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Federation Role"}),j.map(_e=>a.jsx("option",{value:_e.federation_role,children:_e.federation_role},_e.federation_role))]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{type:"text",value:V,onChange:_e=>T(_e.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{type:"text",value:R,onChange:_e=>z(_e.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:I,onChange:_e=>G(_e.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{type:"text",value:de,onChange:_e=>M(_e.target.value),required:!0})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:$,onChange:_e=>Z(_e.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Blood Type --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{type:"text",value:U,onChange:_e=>ve(_e.target.value),maxLength:"18",minLength:"18",required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:ue,onChange:_e=>Y(_e.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:se,onChange:_e=>ke(_e.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:be,onChange:_e=>E(_e.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"}),a.jsx("option",{children:"Moroccan"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:q,onChange:_e=>oe(_e.target.value),placeholder:"Licenses, Coach degree...",required:!0})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:me,onChange:_e=>Ne(_e.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",required:!0,onChange:_e=>{var Je;return Ce(((Je=_e.target.files)==null?void 0:Je[0])??null)}})]}),a.jsx("div",{className:"btn-row",children:a.jsx("button",{type:"submit",className:"primary-b",children:"Add Member"})}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),a.jsx("h2",{className:"form-title",children:"Federation Member List"}),a.jsxs("div",{className:"form-grid",children:[a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"search Member"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:n,onChange:_e=>i(_e.target.value)})})]}),a.jsx("div",{className:"table-container",ref:jt,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Holder Of"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photo"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:zt.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:17,children:"No members found."})}):zt.map(_e=>a.jsxs("tr",{onDoubleClick:()=>ht(_e),style:{cursor:"pointer"},children:[a.jsx("td",{children:s===_e.id?a.jsx("input",{value:l.last_name||"",onChange:Je=>Te(Je,"last_name")}):_e.last_name}),a.jsx("td",{children:s===_e.id?a.jsx("input",{value:l.first_name||"",onChange:Je=>Te(Je,"first_name")}):_e.first_name}),a.jsx("td",{children:s===_e.id?a.jsx("input",{type:"date",value:l.date_of_birth||"",onChange:Je=>Te(Je,"date_of_birth")}):_e.date_of_birth}),a.jsx("td",{children:s===_e.id?a.jsx("input",{value:l.place_of_birth||"",onChange:Je=>Te(Je,"place_of_birth")}):_e.place_of_birth}),a.jsx("td",{children:s===_e.id?a.jsx("label",{children:a.jsxs("select",{value:l.role||"",onChange:Je=>Te(Je,"role"),required:!0,children:[a.jsx("option",{value:"",children:"Select Federation Role"}),j.map(Je=>a.jsx("option",{value:Je.federation_role,children:Je.federation_role},Je.federation_role))]})}):_e.role}),a.jsx("td",{children:s===_e.id?a.jsx("input",{value:l.blood_type||"",onChange:Je=>Te(Je,"blood_type")}):_e.blood_type}),a.jsx("td",{children:_e.nationality||""}),a.jsx("td",{children:_e.grade||""}),a.jsx("td",{children:_e.holder_of||""}),a.jsx("td",{children:_e.national_id_number}),a.jsx("td",{children:_e.renewal||""}),a.jsx("td",{children:_e.year||""}),a.jsx("td",{children:_e.license_number}),a.jsx("td",{children:_e.registration_date}),a.jsx("td",{children:_e.photo_url?a.jsx("img",{src:_e.photo_url,alt:"Member",style:{width:40,height:40,objectFit:"cover",borderRadius:4}}):""}),a.jsx("td",{children:_e.confirmation?"Confirmed":"Pending"}),a.jsx("td",{children:s===_e.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-S",onClick:()=>Xt(_e.id),children:"Save"}),a.jsx("button",{className:"secondary-btn",onClick:Pt,disabled:Ot,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-M",onClick:()=>Dt(_e),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>bt(_e.id),children:"Delete"}),a.jsx("button",{className:_e.confirmation?"cancel-btn":"confirm-btn",onClick:()=>tr(_e.id,!!_e.confirmation),children:_e.confirmation?"Unset Confirm":"Set Confirm"})]})})]},_e.id))})]})}),a.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"12px"},children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:It,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:Ye,children:"Export Grade/Role PDF"})]})]}),g&&a.jsx(An,{error:g.message||g,onClose:()=>m(null)}),f&&a.jsx(In,{success:f,onClose:()=>x("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function r8(){const[t,e]=v.useState([]),[r,n]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[d,g]=v.useState(!1),[m,f]=v.useState(null),[x,w]=v.useState(""),[N,b]=v.useState([]),[S,j]=v.useState(null),[C]=v.useState("Algerian Judo Federation"),[$,Z]=v.useState(""),[V,T]=v.useState(null),[R,z]=v.useState(""),[I,G]=v.useState(""),[de,M]=v.useState(""),[U,ve]=v.useState(""),[ue,Y]=v.useState(""),[se,ke]=v.useState([]),[be,E]=v.useState(""),[q,oe]=v.useState(""),[me,Ne]=v.useState(""),[Se,Ce]=v.useState(""),[Le,Me]=v.useState(null),[Ue,at]=v.useState(""),[Ve,Oe]=v.useState(""),[le,Ct]=v.useState(""),[Et,He]=v.useState(""),[$e,pt]=v.useState([]),[ct,jt]=v.useState(null),[At,Wt]=v.useState(""),[st,St]=v.useState(""),zt=Xn(),[bt,Dt]=v.useState([]),[Pt,Ot]=v.useState(""),[wt,Xt]=v.useState(""),[Te,It]=v.useState(null),[ot,Rt]=v.useState(null),ht=Ur(),{state:Ye}=di();function tr(L){return L??""}function _e(L){return new Promise((A,K)=>{Gi(L,ae=>{if(ae.type==="error")console.warn("EXIF processing failed, using original image:",L),A(L);else try{const Pe=ae.toDataURL("image/png");A(Pe)}catch(Pe){console.warn("Canvas conversion failed, using original image:",Pe),A(L)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}function Je(){n(null),s({})}v.useEffect(()=>{(async()=>{const{data:A,error:K}=await re.from("leaguerole").select("*");K?console.error(K):ke(A)})()},[]),v.useEffect(()=>{ei()},[]),v.useEffect(()=>{(async()=>{const{data:A,error:K}=await re.from("nameleague").select("id, name_league");K?console.error("Error fetching leagues:",K):pt(A||[])})()},[]),v.useEffect(()=>{Ye!=null&&Ye.league_id&&(He(Ye.league_id.toString()),Wt(Ye.league_id.toString()))},[Ye==null?void 0:Ye.league_id]);const vt=async L=>{const A=typeof L=="object"?L.id:L;if(!window.confirm("Are you sure you want to delete this member?"))return;const{error:K}=await re.from("league_members").delete().eq("id",A);K||e(ae=>ae.filter(Pe=>Pe.id!==A))},ce=async()=>{try{l(!0),f(null);const{data:L}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(L!=null&&L.length&&j(tr(L[0].logo_url)),Ye!=null&&Ye.league_id){const{data:A}=await re.from("nameleague").select("*").eq("id",Ye.league_id).single();A&&(It(A),Z(A.name_league));const{data:K}=await re.from("league_members").select("logo_url").eq("league_id",Ye.league_id).order("id",{ascending:!1}).limit(1);K!=null&&K.length&&T(tr(K[0].logo_url))}if(Ye!=null&&Ye.member_id){const{data:A}=await re.from("league_members").select("*").eq("id",Ye.member_id).single();A&&Rt(A)}if(Ye!=null&&Ye.league_id){const{data:A}=await re.from("league_members").select("*").eq("league_id",Ye.league_id);e(A||[])}}catch(L){f(L.message),console.error("Error fetching data:",L.message)}finally{l(!1)}};v.useEffect(()=>{ce()},[wt,Et]),v.useEffect(()=>{Ye!=null&&Ye.league_id&&He(Ye.league_id.toString())},[Ye==null?void 0:Ye.league_id]),v.useEffect(()=>{(async()=>{const A=(Ye==null?void 0:Ye.league_id)||Et;if(!A)return;const{data:K,error:ae}=await re.from("nameclub").select("id, name_club, league_i").eq("league_i",A);ae?console.error("Error fetching clubs:",ae):Dt(K||[])})()},[Ye==null?void 0:Ye.league_id,Et]),v.useEffect(()=>{ce()},[Ye==null?void 0:Ye.league_id]);const W=async()=>{if(!Le||Le.size===0)return"";const L=Le.name.split(".").pop(),A=`photo-${Date.now()}.${L}`,{error:K}=await re.storage.from("logos").upload(A,Le);if(K)return f(`Photo upload failed: ${K.message}`),"";const{data:ae}=re.storage.from("logos").getPublicUrl(A);return(ae==null?void 0:ae.publicUrl)??""},Ee=async()=>{if(!ct)return null;const L=ct.name.split(".").pop(),K=`${Date.now()}.${L}`,{error:ae}=await re.storage.from("logos").upload(K,ct);if(ae)return f(`Upload failed: ${ae.message}`),null;const{data:Pe}=re.storage.from("logos").getPublicUrl(K);return(Pe==null?void 0:Pe.publicUrl)??null},Ge=async(L,A,K,ae,Pe=null)=>{let tt=re.from("league_members").select("id").eq("national_id_number",L).eq("league_id",A).eq("role",K).eq("year",ae);Pe&&(tt=tt.neq("id",Pe));const{data:D}=await tt;if(D&&D.length>0)throw new Error("This member is already registered for the current season with the same role and league.");let xe=re.from("league_members").select("*",{count:"exact",head:!0}).eq("national_id_number",L).eq("league_id",A).eq("role",K);Pe&&(xe=xe.neq("id",Pe));const{count:ye}=await xe;return(ye||0)+1},Be=async L=>{var ye;if(L.preventDefault(),f(""),w(""),u(!0),!I||!R||!de||!U||!ue||!Et||!me||!Se||!Le){const F=[];I||F.push("First Name"),R||F.push("Last Name"),de||F.push("Date of Birth"),U||F.push("Place of Birth"),ue||F.push("League Role"),Et||F.push("League (in the table is league_id)"),me||F.push("Password"),Se||F.push("Confirm Password"),Le||F.push("Member Photo"),f(`Please fill in the following required fields: ${F.join(", ")}`),u(!1);return}const A=Number(Et);if(!A||isNaN(A)){f("Please select a valid league."),u(!1);return}if(q.length!==18){f("National ID must be exactly 18 digits."),u(!1);return}if(me!==Se){f("Passwords do not match."),u(!1);return}const K=new Date(de),ae=new Date,Pe=ae.getFullYear()-K.getFullYear(),tt=ae.getMonth()-K.getMonth(),D=ae.getDate()-K.getDate();if((tt<0||tt===0&&D<0?Pe-1:Pe)<=21){f("Member must be more than 21 years old to register."),u(!1);return}try{const{data:F,error:ie}=await re.from("league_members").select("id, last_name, password").eq("last_name",R).eq("password",me);if(ie){f(`Failed to validate member data: ${ie.message}`),u(!1);return}if(F&&F.length>0){f(`A member with the last name "${R}" and this password already exists. Please change the password.`),u(!1);return}}catch(F){f(`Validation error: ${F.message}`),u(!1);return}try{const F=await W(),ie=await Ee(),P=new Date().getFullYear(),Q=`${P}/${P+1}`,he=((ye=se.find(rt=>rt.id===parseInt(ue)))==null?void 0:ye.league_role)||"",we=await Ge(q,Et,he,Q),Ae={last_name:R,first_name:I,date_of_birth:de,place_of_birth:U,role:he,blood_type:be,national_id_number:q,password:me,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],logo_url:Ye.logo_url||"",league_id:A,photo_url:F,renewal:we,year:Q,nationality:Ue,holder_of:Ve,grade:le,confirmation:!1},{error:Ie}=await re.from("league_members").insert([Ae]);if(Ie){f(`Failed to save member: ${Ie.message}`),u(!1);return}if(ie&&Et&&await re.from("nameleague").update({logo_url:ie}).eq("id",Et),w(`Member "${I} ${R}" has been successfully added to the League!`),z(""),G(""),M(""),ve(""),oe(""),Ne(""),Ce(""),Y(""),E(""),He(""),Me(null),at(""),Oe(""),Ct(""),Et){const{data:rt}=await re.from("league_members").select("*").eq("league_id",Number(Et));e(rt||[]);const{data:yt}=await re.from("nameleague").select("logo_url").eq("id",Et).single();yt!=null&&yt.logo_url&&T(tr(yt.logo_url))}u(!1)}catch(F){f(`Unexpected error: ${F.message}`),u(!1)}},nt=L=>{n(L.id),s({...L})},Mt=async L=>{if(g(!0),f(""),w(""),!i.first_name||!i.last_name||!i.date_of_birth||!i.place_of_birth){const A=[];i.first_name||A.push("First Name"),i.last_name||A.push("Last Name"),i.date_of_birth||A.push("Date of Birth"),i.place_of_birth||A.push("Place of Birth"),f(`Please fill in the following required fields: ${A.join(", ")}`),g(!1);return}if(i.national_id_number&&i.national_id_number.length!==18){f("National ID must be exactly 18 digits."),g(!1);return}if(i.date_of_birth){const A=new Date(i.date_of_birth),K=new Date,ae=K.getFullYear()-A.getFullYear(),Pe=K.getMonth()-A.getMonth(),tt=K.getDate()-A.getDate();if((Pe<0||Pe===0&&tt<0?ae-1:ae)<=21){f("Member must be more than 21 years old."),g(!1);return}}try{const A=new Date().getFullYear(),K=`${A}/${A+1}`,ae=i.league_id??Et,Pe=Number(ae);if(!Pe||isNaN(Pe)){f("Please select a valid league."),g(!1);return}const tt=t.find(we=>we.id===Number(L??i.id)),D=!!tt&&tt.national_id_number===i.national_id_number&&Number(tt.league_id)===Pe&&tt.role===i.role&&tt.year===K,xe=D?tt.renewal:await Ge(i.national_id_number,Pe,i.role,K,Number(L??i.id)),{role_id:ye,...F}=i,ie={...F,renewal:xe,year:D?tt.year:K,league_id:Pe},P=L??i.id,Q=Number(P);if(!Q||isNaN(Q)){f("Invalid member id."),g(!1);return}const{error:he}=await re.from("league_members").update(ie).eq("id",Q);if(he){f(`Failed to save member: ${he.message}`),g(!1);return}e(we=>we.map(Ae=>Ae.id===Q?{...Ae,...ie}:Ae)),n(null),w(`Member "${ie.first_name} ${ie.last_name}" has been successfully updated!`),g(!1)}catch(A){f(`Unexpected error: ${A.message}`),g(!1)}},ut=(L,A)=>{s({...i,[A]:L.target.value})},kt=t.filter(L=>{const A=(st||"").toLowerCase();return A?(L.first_name||"").toLowerCase().includes(A)||(L.last_name||"").toLowerCase().includes(A)||(L.national_id_number||"").includes(A):!0}),X=(L,A,K)=>{const ae=L.internal.pageSize.width;if(S)try{L.addImage(S,"PNG",ae-50,10,30,30)}catch(D){console.warn("Could not add federation logo to PDF:",D)}const Pe=new Date().toLocaleDateString();L.setFontSize(10),L.setFont("helvetica","normal"),L.text(`Print Date: ${Pe}`,20,20),L.setFontSize(16),L.setFont("helvetica","bold"),L.text("Algerian Judo Federation",ae/2,20,{align:"center"}),L.setFontSize(14),L.setFont("helvetica","normal"),L.text(`League: ${K||"League Name"}`,ae/2,35,{align:"center"});const tt=L.internal.getNumberOfPages();return L.text(`Page ${tt}`,ae/2,L.internal.pageSize.height-10,{align:"center"}),50},te=(L,A,K,ae=null)=>{const Pe=L.internal.pageSize.width,tt=L.internal.pageSize.height;if(S)try{L.addImage(S,"PNG",Pe-50,10,30,30)}catch(ye){console.warn("Could not add federation logo to PDF:",ye)}const D=new Date().toLocaleDateString();L.setFontSize(10),L.setFont("helvetica","normal"),L.text(`Print Date: ${D}`,20,20),L.setFontSize(16),L.setFont("helvetica","bold"),L.text(A||"Federation Name",Pe/2,20,{align:"center"}),L.setFontSize(14),L.text(K||"League Name",Pe/2,30,{align:"center"}),ae&&(L.setFontSize(12),L.text(ae,Pe/2,40,{align:"center"}));const xe=L.internal.getCurrentPageInfo().pageNumber;return L.setFontSize(10),L.setFont("helvetica","normal"),L.text(`Page ${xe}`,Pe-20,tt-10,{align:"right"}),ae?50:40},je=L=>L?String(L).replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/[^\x20-\x7E\u00A0-\u024F\u1E00-\u1EFF]/g,"").trim():"",ze=L=>[je(L.last_name||""),je(L.first_name||""),je(L.date_of_birth||""),je(L.place_of_birth||""),je(L.blood_type||""),je(L.nationality||""),je(L.grade||""),je(L.role||""),je(L.holder_of||""),je(L.national_id_number||""),je(L.renewal||""),L.confirmation?"Yes":"No",je(L.license_number||""),je(L.club_name||"")],Lt=async()=>{if(!(Ye!=null&&Ye.league_id)){alert("No league selected");return}try{const{data:L,error:A}=await re.from("league_members").select("*").eq("league_id",Ye.league_id);if(A)throw A;if(!L||L.length===0){alert("No members found in this league");return}const K=new Tt("landscape");let ae=X(K,C,$);K.setFontSize(14),K.setFont("helvetica","bold"),K.setTextColor(255,0,0),K.text("League Members - General Situation",K.internal.pageSize.getWidth()/2,ae,{align:"center"}),K.setTextColor(0,0,0),ae+=20;const Pe={};L.forEach(xe=>{const ye=xe.year||"Unknown Year";Pe[ye]||(Pe[ye]=[]),Pe[ye].push(xe)});const tt=Object.keys(Pe).sort();for(const xe of tt){const F=Pe[xe].sort((P,Q)=>{const he=new Date(P.registration_date||"1900-01-01"),we=new Date(Q.registration_date||"1900-01-01");return he-we});K.setFontSize(14),K.setFont("helvetica","bold"),K.setTextColor(0,0,0),K.text(`Year: ${xe}`,20,ae),ae+=15;const ie=F.map(P=>[je(P.last_name||""),je(P.first_name||""),je(P.date_of_birth||""),je(P.place_of_birth||""),je(P.blood_type||""),je(P.nationality||""),je(P.grade||""),je(P.holder_of||""),je(P.national_id_number||""),je(P.password||""),je(P.renewal||""),P.confirmation?"Yes":"No",je(P.license_number||"")]);pr(K,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:ie,startY:ae,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},didDrawPage:function(P){P.pageNumber>1&&X(K,C,$)}}),ae=K.lastAutoTable.finalY+20,ae>K.internal.pageSize.getHeight()-50&&(K.addPage(),ae=X(K,C,$))}const D=new Date().getFullYear();K.save(`league_${je($)}_general_members_${D}.pdf`)}catch(L){console.error("Error exporting general PDF:",L),alert("Error exporting PDF. Please try again.")}},qt=async()=>{if(!(Ye!=null&&Ye.league_id)){alert("No league selected");return}try{const{data:L,error:A}=await re.from("league_members").select("*").eq("league_id",Ye.league_id);if(A)throw A;if(!L||L.length===0){alert("No members found in this league");return}const K=new Tt("landscape");let Pe=te(K,C,$);K.setFontSize(14),K.setFont("helvetica","bold"),K.setTextColor(255,0,0),K.text("League Members - Grade and Role Situation",K.internal.pageSize.getWidth()/2,Pe,{align:"center"}),K.setTextColor(0,0,0),Pe+=20;const tt={};L.forEach(xe=>{const ye=xe.year||"Unknown Year",F=xe.club_name||"No Club";tt[ye]||(tt[ye]={}),tt[ye][F]||(tt[ye][F]=[]),tt[ye][F].push(xe)}),K.setFontSize(16),K.setFont("helvetica","bold"),K.setTextColor(0,0,0),K.text("SECTION ROLE",20,Pe),Pe+=25;for(const[xe,ye]of Object.entries(tt)){if(Object.keys(ye).length===0)continue;K.setFontSize(14),K.setFont("helvetica","bold"),K.setTextColor(0,0,0),K.text(`Year: ${xe}`,20,Pe),Pe+=15;const F=[];for(const[P,Q]of Object.entries(ye))F.push(...Q);const ie={};F.forEach(P=>{const Q=P.role||"No Role";ie[Q]||(ie[Q]=[]),ie[Q].push(P)});for(const[P,Q]of Object.entries(ie)){if(Q.length===0)continue;K.setFontSize(12),K.setFont("helvetica","bold"),K.text(`Role: ${je(P)}`,30,Pe),Pe+=8;const he=Q.map(we=>ze(we));pr(K,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:he,startY:Pe,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:20,right:10}}),Pe=K.lastAutoTable.finalY+15,Pe>160&&(K.addPage(),Pe=te(K,C,$)+5)}Pe+=10}K.setFontSize(16),K.setFont("helvetica","bold"),K.setTextColor(0,0,0),K.text("SECTION GRADE",20,Pe),Pe+=25;for(const[xe,ye]of Object.entries(tt)){if(Object.keys(ye).length===0)continue;K.setFontSize(14),K.setFont("helvetica","bold"),K.setTextColor(0,0,0),K.text(`Year: ${xe}`,20,Pe),Pe+=15;const F=[];for(const[P,Q]of Object.entries(ye))F.push(...Q);const ie={};F.forEach(P=>{const Q=P.grade||"No Grade";ie[Q]||(ie[Q]=[]),ie[Q].push(P)});for(const[P,Q]of Object.entries(ie)){if(Q.length===0)continue;K.setFontSize(12),K.setFont("helvetica","bold"),K.text(`Grade: ${je(P)}`,30,Pe),Pe+=8;const he=Q.map(we=>ze(we));pr(K,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:he,startY:Pe,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:20,right:10}}),Pe=K.lastAutoTable.finalY+15,Pe>160&&(K.addPage(),Pe=te(K,C,$)+5)}Pe+=10}const D=new Date().getFullYear();K.save(`league_${je($)}_grade_role_members_${D}.pdf`)}catch(L){console.error("Error exporting grade role PDF:",L),alert("Error exporting PDF. Please try again.")}},Xe=L=>{if(!L||Object.keys(L).length===0){alert("No data available to export");return}rr(L)},rr=async L=>{let A=null,K=null;try{L.club_id&&(A=(await Qn())[L.club_id]),L.league_id&&(K=(await bi())[L.league_id])}catch(ie){console.error("Error fetching names:",ie)}const ae=new Tt("portrait","mm","a4");ae.setFontSize(18),ae.setTextColor(40,40,40),ae.text("Algerian Judo Federation",14,15);const Pe=`League Member Information - ${L.first_name} ${L.last_name}`;ae.setFontSize(16),ae.setTextColor(40,40,40),ae.text(Pe,14,30),ae.setFontSize(10);const tt=new Date().toLocaleString();if(ae.text(`Generated: ${tt}`,14,37),S)try{ae.addImage(S,"PNG",170,10,25,25)}catch(ie){console.error("Error adding logo to PDF:",ie)}let D=70;if(L.photo_url)try{const ie=await _e(L.photo_url),P=ie.startsWith("data:")?"PNG":"JPEG";ae.addImage(ie,P,14,45,25,20),D=70}catch(ie){console.error("Error adding photo to PDF:",ie);try{ae.addImage(L.photo_url,"JPEG",14,45,25,20)}catch(P){console.error("Fallback image addition also failed:",P)}D=70}ae.setFontSize(12),L.confirmation?ae.setTextColor(0,128,0):ae.setTextColor(255,0,0);const xe=L.confirmation?"CONFIRMED ":"NOT CONFIRMED ";ae.text(xe,160,50);const ye=[["First Name",L.first_name||""],["Last Name",L.last_name||""],["Date of Birth",L.date_of_birth||""],["Place of Birth",L.place_of_birth||""],["National ID",L.national_id_number||""],["Nationality",L.nationality||""],["Blood Type",L.blood_type||""],["Grade",L.grade||""],["Role",L.role||""],["License Number",L.license_number||""],["Registration Date",L.registration_date||""],["Year",L.year||""],["Renewal",L.renewal||""]];pr(ae,{head:[["Field","Value"]],body:ye,startY:D,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const F=ae.lastAutoTable.finalY||200;if(ae.setFontSize(12),ae.setTextColor(0,0,0),ae.text("Medical certificate",14,F+20),ae.setDrawColor(0),ae.line(14,F+40,80,F+40),ae.setFontSize(10),L.league_id||K){const ie=K||`ID: ${L.league_id}`;ae.text(`League: ${ie}`,120,F+60),ae.text("League Visa: _________________",120,F+70)}try{const ie=JSON.stringify({id:L.id,name:`${L.first_name||""} ${L.last_name||""}`.trim(),license:L.license_number||"",club_id:L.club_id||"",league_id:L.league_id||"",confirmation:L.confirmation||"Unconfirmed"}),P=await Si.toDataURL(ie,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});ae.addImage(P,"PNG",175,F+75,15,15)}catch(ie){console.error("Error generating QR code:",ie)}ae.save(`member_${L.first_name}_${L.last_name}.pdf`)};return Ye?a.jsxs("div",{className:"app-container",children:[o&&a.jsx(rn,{}),a.jsx("header",{children:a.jsxs("div",{className:"federation-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("img",{src:S||Oi,alt:"Federation Logo",className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:C})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Ye.logo_url?a.jsx("img",{src:Ye.logo_url,alt:"League Logo",className:"member-logo"}):null,a.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:$||"League Name"})]})]})}),a.jsxs("section",{className:"app-container",children:[a.jsxs("h2",{children:["Welcome ",Ye.first_name," ",Ye.last_name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Role:"})," ",Ye.role]}),a.jsxs("div",{className:"form-table-wrapper",children:[a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-btn","data-id":"1",onClick:async L=>{if(br(L.currentTarget),!Te){alert("League data not loaded yet.");return}ht("/member-list-l",{state:{...Ye,league_id:Te==null?void 0:Te.id,league_name:Te==null?void 0:Te.name_league,league_logo:Te==null?void 0:Te.logo_url}})},children:"The League Member List"}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:async L=>{if(br(L.currentTarget),!Te){alert("League data not loaded yet.");return}ht("/TheClubListAddFed-League",{state:{...Ye,league_id:Te==null?void 0:Te.id,league_name:Te==null?void 0:Te.name_league,league_logo:Te==null?void 0:Te.logo_url}})},children:"The Club Member List"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:async L=>{if(br(L.currentTarget),!Te){alert("League data not loaded yet.");return}ht("/TheAthleteListAdd-League",{state:{...Ye,league_id:Te==null?void 0:Te.id,league_name:Te==null?void 0:Te.name_league,league_logo:Te==null?void 0:Te.logo_url}})},children:"The Athlete List Add"})]}),a.jsx("h2",{className:"form-title",children:"Add League Member"}),a.jsxs("form",{onSubmit:Be,className:"form-grid",children:[a.jsxs("label",{children:["League Role *",a.jsxs("select",{value:ue,onChange:L=>Y(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Role"}),se.map(L=>a.jsx("option",{value:L.id,children:L.league_role},L.id))]})]}),a.jsxs("label",{children:["League *",a.jsx("select",{value:Et,onChange:L=>{He(L.target.value),Wt(L.target.value)},required:!0,disabled:!!(Ye!=null&&Ye.league_id),children:Ye!=null&&Ye.league_id?a.jsx("option",{value:Ye.league_id,children:$||"Selected League"}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"Select League"}),$e.map(L=>a.jsx("option",{value:L.id,children:L.name_league},L.id))]})})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:be,onChange:L=>E(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Blood Type --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{type:"text",value:R,onChange:L=>z(L.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{type:"text",value:I,onChange:L=>G(L.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:de,onChange:L=>M(L.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{type:"text",value:U,onChange:L=>ve(L.target.value),required:!0})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{type:"text",value:q,onChange:L=>oe(L.target.value),maxLength:"18",minLength:"18",required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:me,onChange:L=>Ne(L.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:Se,onChange:L=>Ce(L.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:Ue,onChange:L=>at(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"}),a.jsx("option",{children:"Moroccan"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:Ve,onChange:L=>Oe(L.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:le,onChange:L=>Ct(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",required:!0,onChange:L=>{var A;return Me(((A=L.target.files)==null?void 0:A[0])??null)}})]}),a.jsxs("label",{children:["League Logo",a.jsx("input",{type:"text",value:Ye.logo_url||"",disabled:!0})]}),a.jsxs("div",{className:"btn-row",children:[a.jsx("button",{type:"submit",className:"primary-b",disabled:c,children:c?"Adding...":"Add Member"}),c&&a.jsx($i,{message:"Adding member..."})]}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),m&&a.jsx(An,{error:m,onClose:()=>f(null)}),x&&a.jsx(In,{success:x,onClose:()=>w("")}),a.jsx("h2",{className:"form-title",children:"List Of League Members"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("label",{children:["League",a.jsx("select",{value:Et,onChange:L=>{He(L.target.value),Wt(L.target.value)},required:!0,disabled:!!(Ye!=null&&Ye.league_id),children:Ye!=null&&Ye.league_id?a.jsx("option",{value:Ye.league_id,children:$||"Selected League"}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"Select League"}),$e.map(L=>a.jsx("option",{value:L.id,children:L.name_league},L.id))]})})]}),a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"search Member"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:st,onChange:L=>St(L.target.value)})})]}),a.jsx("div",{className:"table-container",ref:zt,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Holder Of"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photo"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"League ID"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:kt.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:18,children:"No members found."})}):kt.map(L=>a.jsxs("tr",{onDoubleClick:()=>Xe(L),style:{cursor:"pointer"},children:[a.jsx("td",{children:r===L.id?a.jsx("input",{value:i.last_name||"",onChange:A=>ut(A,"last_name")}):L.last_name}),a.jsx("td",{children:r===L.id?a.jsx("input",{value:i.first_name||"",onChange:A=>ut(A,"first_name")}):L.first_name}),a.jsx("td",{children:r===L.id?a.jsx("input",{type:"date",value:i.date_of_birth||"",onChange:A=>ut(A,"date_of_birth")}):L.date_of_birth}),a.jsx("td",{children:r===L.id?a.jsx("input",{value:i.place_of_birth||"",onChange:A=>ut(A,"place_of_birth")}):L.place_of_birth}),a.jsx("td",{children:r===L.id?a.jsxs("select",{value:i.role||"",onChange:A=>ut(A,"role"),children:[a.jsx("option",{value:"",children:"-- Select --"}),se.map(A=>a.jsx("option",{value:A.league_role??A.name??"",children:A.league_role??A.name??""},A.id))]}):L.role||"No Role"}),a.jsx("td",{children:r===L.id?a.jsxs("select",{value:i.blood_type||"",onChange:A=>ut(A,"blood_type"),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):L.blood_type}),a.jsx("td",{children:r===L.id?a.jsxs("select",{value:i.nationality||"",onChange:A=>ut(A,"nationality"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]}):L.nationality}),a.jsx("td",{children:r===L.id?a.jsxs("select",{value:i.grade||"",onChange:A=>ut(A,"grade"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]}):L.grade}),a.jsx("td",{children:r===L.id?a.jsx("input",{value:i.holder_of||"",onChange:A=>ut(A,"holder_of")}):L.holder_of}),a.jsx("td",{children:L.national_id_number}),a.jsx("td",{children:L.renewal}),a.jsx("td",{children:L.year}),a.jsx("td",{children:L.license_number}),a.jsx("td",{children:L.registration_date}),a.jsx("td",{children:L.photo_url?a.jsx("img",{src:tr(L.photo_url),alt:"Member",style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),a.jsx("td",{children:L.confirmation?"":""}),a.jsx("td",{children:L.league_id}),a.jsx("td",{children:r===L.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-S",onClick:()=>Mt(L.id),disabled:d,children:d?"Saving...":"Save"}),a.jsx("button",{className:"secondary-btn",onClick:Je,disabled:d,children:"Cancel"}),d&&a.jsx($i,{message:"Saving changes..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-M",onClick:()=>nt(L),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>vt(L),children:"Delete"})]})})]},L.id))})]})}),a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:Lt,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:qt,children:"Export Grade Role PDF"})]})]}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]}):a.jsx("p",{children:"No account data found."})}function n8(){const{state:t}=di(),e=Ur(),[r,n]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(""),[d,g]=v.useState(null),[m,f]=v.useState(null),[x,w]=v.useState(null),[N,b]=v.useState({}),[S,j]=v.useState(null),[C,$]=v.useState(""),[Z,V]=v.useState(""),[T,R]=v.useState(null),[z,I]=v.useState(""),[G,de]=v.useState((t==null?void 0:t.club_id)||""),[M,U]=v.useState((t==null?void 0:t.league_id)||""),ve="Algerian Judo Federation",ue="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",[Y,se]=v.useState([]),[ke,be]=v.useState([]),[E,q]=v.useState([]),[oe,me]=v.useState({}),[Ne,Se]=v.useState({}),[Ce,Le]=v.useState(""),[Me,Ue]=v.useState(""),[at,Ve]=v.useState(""),[Oe,le]=v.useState(""),[Ct,Et]=v.useState(""),[He,$e]=v.useState(""),[pt,ct]=v.useState(""),[jt,At]=v.useState(""),[Wt,st]=v.useState(""),[St,zt]=v.useState(null),[bt,Dt]=v.useState(null),[Pt,Ot]=v.useState(""),[wt,Xt]=v.useState(""),[Te,It]=v.useState(""),[ot,Rt]=v.useState(""),[ht,Ye]=v.useState(!1),[tr,_e]=v.useState(!1),Je=Xn(),vt=A=>A?A.startsWith("http")?A:`${ue}${A}`:null;function ce(A){return new Promise((K,ae)=>{Gi(A,Pe=>{if(Pe.type==="error")console.warn("EXIF processing failed, using original image:",A),K(A);else try{const tt=Pe.toDataURL("image/png");K(tt)}catch(tt){console.warn("Canvas conversion failed, using original image:",tt),K(A)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const W=async()=>{try{s(!0),l(null);const{data:A}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(A!=null&&A.length&&j(vt(A[0].logo_url)),t!=null&&t.league_id){const{data:K}=await re.from("nameleague").select("name_league").eq("id",t.league_id).single();K&&V(K.name_league);const{data:ae}=await re.from("league_members").select("logo_url").eq("league_id",t.league_id).order("id",{ascending:!1}).limit(1);ae!=null&&ae.length&&$(vt(ae[0].logo_url))}if(t!=null&&t.club_id){const{data:K}=await re.from("nameclub").select("name_club, id").eq("id",t.club_id).single();K&&(I(K.name_club),g(K));const{data:ae,error:Pe}=await re.from("club_members").select("logo_url").eq("club_id",t.club_id).not("logo_url","is",null).order("id",{ascending:!1}).limit(1);Pe?console.error("Error fetching club logo:",Pe.message):ae!=null&&ae.length&&ae[0].logo_url&&R(vt(ae[0].logo_url))}if(t!=null&&t.member_id){const{data:K}=await re.from("club_members").select("*").eq("id",t.member_id).single();K&&f(K)}if(t!=null&&t.club_id){const{data:K}=await re.from("club_members").select("*").eq("club_id",t.club_id);n(K||[])}}catch(A){l(A),console.error("Error fetching data:",A.message)}finally{s(!1)}};v.useEffect(()=>{W()},[t]),v.useEffect(()=>{(async()=>{const{data:K}=await re.from("clubrole").select("id, club_role");K&&se(K)})()},[]),v.useEffect(()=>{(async()=>{const{data:K}=await re.from("nameclub").select("id, name_club");K&&be(K)})()},[]),v.useEffect(()=>{(async()=>{const{data:K}=await re.from("nameleague").select("id, name_league");K&&q(K)})()},[]),v.useEffect(()=>{(async()=>{const K=G||(t==null?void 0:t.club_id);if(!K){R(null),I("");return}try{const{data:ae}=await re.from("nameclub").select("name_club, id").eq("id",Number(K)).single();ae&&I(ae.name_club);const{data:Pe,error:tt}=await re.from("club_members").select("logo_url").eq("club_id",Number(K)).not("logo_url","is",null).order("id",{ascending:!1}).limit(1);tt?(console.error("Error fetching club logo:",tt.message),R(null)):Pe!=null&&Pe.length&&Pe[0].logo_url?R(vt(Pe[0].logo_url)):R(null)}catch(ae){console.error("Error loading club header:",ae),R(null),I("")}})()},[G,t==null?void 0:t.club_id]);const Ee=async A=>{if(!A)return null;const K=A.name.split(".").pop(),ae=`${Date.now()}-${Math.random()}.${K}`,{error:Pe}=await re.storage.from("logos").upload(ae,A);if(Pe)return l(`Upload failed: ${Pe.message}`),null;const{data:tt}=re.storage.from("logos").getPublicUrl(ae);return(tt==null?void 0:tt.publicUrl)??null},Ge=async(A,K,ae,Pe)=>{const{data:tt}=await re.from("club_members").select("*").eq("national_id_number",A).eq("club_id",K).eq("role",ae).eq("year",Pe);if(tt&&tt.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:D}=await re.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",A).eq("club_id",K).eq("role",ae);return(D||0)+1};v.useEffect(()=>{ei()},[]);const Be=async A=>{var we,Ae;if(A.preventDefault(),l(""),u(""),console.log("Setting submitLoading to true"),Ye(!0),await new Promise(Ie=>setTimeout(Ie,100)),!Me||!Ce||!at||!Oe||!Ct||!G||!M||!jt||!Wt){const Ie=[];Me||Ie.push("First Name"),Ce||Ie.push("Last Name"),at||Ie.push("Date of Birth"),Oe||Ie.push("Place of Birth"),Ct||Ie.push("Role"),G||Ie.push("Club"),M||Ie.push("League"),jt||Ie.push("Password"),Wt||Ie.push("Confirm Password"),l(`Please fill in the following required fields: ${Ie.join(", ")}`),console.log("Setting submitLoading to false - missing fields"),Ye(!1);return}const K=Number(G),ae=Number(M);if(!K||isNaN(K)){l("Please select a valid club."),Ye(!1);return}if(!ae||isNaN(ae)){l("Please select a valid league."),Ye(!1);return}const Pe=new Date(at),tt=new Date,D=tt.getFullYear()-Pe.getFullYear(),xe=tt.getMonth()-Pe.getMonth(),ye=tt.getDate()-Pe.getDate();if((xe<0||xe===0&&ye<0?D-1:D)<=21){l("Member must be more than 21 years old to register."),Ye(!1);return}if(pt.length!==18){l("National ID must be exactly 18 digits."),Ye(!1);return}if(jt!==Wt){l("Passwords do not match."),Ye(!1);return}if(Ce&&jt){const{data:Ie}=await re.from("club_members").select("*").eq("last_name",Ce).eq("password",jt);if(Ie&&Ie.length>0){l("Change your Password for this name because is already exist"),Ye(!1);return}}const ie=((we=Y.find(Ie=>Ie.id===parseInt(Ct)))==null?void 0:we.club_role)||"",P=new Date().getFullYear(),Q=`${P}/${P+1}`;let he;try{he=await Ge(pt,K,ie,Q)}catch(Ie){l(Ie.message),Ye(!1);return}try{const Ie=await Ee(bt),rt=((Ae=Y.find(it=>it.id===parseInt(Ct)))==null?void 0:Ae.club_role)||"",yt=await Ge(pt,G,rt),Bt=`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,Ze={last_name:Ce,first_name:Me,date_of_birth:at,place_of_birth:Oe,role:rt,blood_type:He,nationality:Pt,grade:wt,holder_of:Te,national_id_number:pt,password:jt,photo_url:Ie,logo_url:T,renewal:yt,year:Bt,confirmation:!1,club_id:G,league_id:M,license_number:`LIC-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0]},{error:mt}=await re.from("club_members").insert([Ze]);if(mt)throw mt;u(`Member ${Me} ${Ce} added successfully!`),W(),Le(""),Ue(""),Ve(""),le(""),Et(""),$e(""),ct(""),At(""),st(""),de(""),U(""),zt(null),Dt(null),Ot(""),Xt(""),It(""),console.log("Setting submitLoading to false - success"),Ye(!1),setTimeout(()=>{window.location.reload()},2e3)}catch(Ie){l(Ie.message),console.log("Setting submitLoading to false - error"),Ye(!1)}},nt=A=>{w(A.id),b(A)},Mt=()=>{w(null),b({})},ut=(A,K)=>{b({...N,[K]:A.target.value})},kt=async A=>{if(l(""),u(""),_e(!0),!N.first_name||!N.last_name||!N.date_of_birth||!N.place_of_birth||!N.role){const ye=[];N.first_name||ye.push("First Name"),N.last_name||ye.push("Last Name"),N.date_of_birth||ye.push("Date of Birth"),N.place_of_birth||ye.push("Place of Birth"),N.role||ye.push("Role"),l(`Please fill in the following required fields: ${ye.join(", ")}`),_e(!1);return}const K=new Date(N.date_of_birth),ae=new Date,Pe=ae.getFullYear()-K.getFullYear(),tt=ae.getMonth()-K.getMonth(),D=ae.getDate()-K.getDate();if((tt<0||tt===0&&D<0?Pe-1:Pe)<=21){l("Member must be more than 21 years old to register."),_e(!1);return}try{const{error:ye}=await re.from("club_members").update(N).eq("id",A);if(ye)throw ye;u(`Member ${N.first_name} ${N.last_name} updated successfully!`),Mt(),W(),_e(!1),setTimeout(()=>{window.location.reload()},2e3)}catch(ye){l(ye.message),_e(!1)}},X=async A=>{try{const K=new Date(A.registration_date).toISOString().split("T")[0],ae=new Date().toISOString().split("T")[0];if(K!==ae){alert("You can only delete members on the same day of registration.");return}const{error:Pe}=await re.from("club_members").delete().eq("id",A.id);if(Pe)throw Pe;n(tt=>tt.filter(D=>D.id!==A.id))}catch(K){l(K.message)}},te=r.filter(A=>{var ae,Pe;const K=ot.toLowerCase();return(((ae=A.first_name)==null?void 0:ae.toLowerCase())??"").includes(K)||(((Pe=A.last_name)==null?void 0:Pe.toLowerCase())??"").includes(K)||(A.national_id_number??"").includes(K)}),je=A=>A?String(A).replace(/=U/g,"").replace(/<a/g,"").replace(/=Ud/g,"").replace(/-/g,"").replace(/-d/g,"").replace(/<a/g,"").replace(/</g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/% % %/g,"").replace(/%%%/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/%+/g,"").replace(/\s*%\s*/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/ /g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").trim():"",ze=A=>{console.log(" handleMemberDoubleClick called with member:",A),Lt(A)},Lt=A=>{if(console.log(" generateIndividualMemberPDF called with member:",A),!A||Object.keys(A).length===0){l("No member data available to export");return}qt(A)},qt=async A=>{try{console.log(" exportPDFWithAutoOrientation called with member:",A);const K=new Tt,ae=K.internal.pageSize.width,Pe=K.internal.pageSize.height;let tt=z;if(console.log("Initial clubName:",z,"member.club_id:",A.club_id),A.club_id)try{const we=await Qn();console.log("Fetched clubNames:",we),we[A.club_id]?(tt=we[A.club_id],console.log("Found memberClubName:",tt)):console.log("Club ID not found in clubNames:",A.club_id)}catch(we){console.error("Error fetching club name:",we)}K.setFontSize(18),K.setTextColor(40,40,40),K.text(je(ve),14,15),K.setFontSize(16),K.setTextColor(40,40,40),K.text(`Club Member Information - ${je(A.first_name)} ${je(A.last_name)}`,14,30),K.setFontSize(10);const D=new Date().toLocaleString();if(K.text(`Generated: ${D}`,14,37),S)try{K.addImage(S,"PNG",170,10,25,25)}catch(we){console.error("Error adding federation logo to PDF:",we)}let xe=70;if(A.photos_url||A.photo_url)try{const we=A.photos_url||A.photo_url,Ae=await ce(we),Ie=Ae.startsWith("data:")?"PNG":"JPEG";K.addImage(Ae,Ie,14,45,25,20),xe=70}catch(we){console.error("Error adding photo to PDF:",we);try{const Ae=A.photos_url||A.photo_url;K.addImage(Ae,"JPEG",14,45,25,20),xe=70}catch(Ae){console.error("Fallback image addition also failed:",Ae),xe=70}}K.setFontSize(12),A.confirmation?K.setTextColor(0,128,0):K.setTextColor(255,0,0);const ye=A.confirmation?"CONFIRMED ":"NOT CONFIRMED ";K.text(ye,160,50),K.setTextColor(0,0,0);const F=Y.find(we=>we.id===parseInt(A.role_id)),ie=(F==null?void 0:F.club_role)||A.role||"No Role",P=[["Last Name",je(A.last_name)||""],["First Name",je(A.first_name)||""],["Date of Birth",je(A.date_of_birth)||""],["Place of Birth",je(A.place_of_birth)||""],["Role",je(ie)],["Blood type",je(A.blood_type)||""],["National ID",je(A.national_id_number)||""],["Nationality",je(A.nationality)||""],["Grade",je(A.grade)||""],["License Number",je(A.license_number)||""],["Registration Date",je(A.registration_date)||""],["Year",je(A.year)||""],["Renewal",je(A.renewal)||""]];pr(K,{startY:xe,head:[["Field","Value"]],body:P,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Q=K.lastAutoTable.finalY||200;K.setFontSize(12),K.setTextColor(0,0,0),K.text("Medical certificate",14,Q+20),K.setDrawColor(0),K.line(14,Q+40,80,Q+40),K.setFontSize(10),console.log("memberClubName:",tt,"finalY:",Q),tt?(K.text(`Club: ${je(tt)}`,14,Q+60),K.text("Club Visa: _________________",14,Q+70)):console.log("No memberClubName found, member.club_id:",A.club_id),Z&&(K.text(`League: ${je(Z)}`,120,Q+60),K.text("League Visa: _________________",120,Q+70));try{const we=JSON.stringify({id:A.id,name:`${A.first_name||""} ${A.last_name||""}`.trim(),license:A.license_number||"",club_id:A.club_id||"",league_id:A.league_id||""}),Ie=await(await va(async()=>{const{default:rt}=await Promise.resolve().then(()=>Rm);return{default:rt}},void 0)).default.toDataURL(we,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});K.addImage(Ie,"PNG",180,Q+75,15,15)}catch(we){console.error("Error generating QR code:",we)}const he=`athlete_${je(A.first_name)}_${je(A.last_name)}_${A.id||"record"}.pdf`;console.log(" About to save PDF with filename:",he),K.save(he),console.log(" PDF save completed")}catch(K){console.error(" Error in exportPDFWithAutoOrientation:",K),l(`Error generating PDF: ${K.message}`)}},Xe=(A,K=1,ae="",Pe="")=>{const tt=A.internal.pageSize.getWidth(),D=A.internal.pageSize.getHeight();if(S)try{A.addImage(S,"PNG",tt-40,15,25,25)}catch(ye){console.warn("Could not add federation logo:",ye)}const xe=new Date().toLocaleDateString();return A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`Print Date: ${xe}`,15,20),A.setFontSize(16),A.setFont("helvetica","bold"),A.text("Algerian Judo Federation",tt/2,25,{align:"center"}),A.setFontSize(12),A.setFont("helvetica","normal"),A.text(`League: ${Pe}`,tt/2,35,{align:"center"}),A.text(`Club: ${ae}`,tt/2,45,{align:"center"}),A.setFontSize(10),A.text(`Page ${K}`,tt-20,D-10,{align:"right"}),55},rr=async()=>{try{if(!te||te.length===0){l("No members found to export");return}const A=new Tt("landscape");let ae=Xe(A,1,z||"Unknown Club",Z||"");A.setFontSize(14),A.setFont("helvetica","bold"),A.setTextColor(255,0,0),A.text("Club Members - General Situation",A.internal.pageSize.getWidth()/2,ae,{align:"center"}),A.setTextColor(0,0,0),ae+=20;const Pe={};te.forEach(xe=>{const ye=xe.year||"Unknown Year";Pe[ye]||(Pe[ye]=[]),Pe[ye].push(xe)});const tt=Object.keys(Pe).sort();for(const xe of tt){const F=Pe[xe].sort((P,Q)=>{const he=new Date(P.registration_date||"1900-01-01"),we=new Date(Q.registration_date||"1900-01-01");return he-we});A.setFontSize(14),A.setFont("helvetica","bold"),A.setTextColor(0,0,0),A.text(`Year: ${xe}`,20,ae),ae+=12;const ie=F.map(P=>{var he;const Q=((he=Y.find(we=>we.id===parseInt(P.role_id)))==null?void 0:he.club_role)||P.role||"No Role";return[je(P.last_name),je(P.first_name),je(P.date_of_birth),je(P.place_of_birth),je(P.blood_type),je(P.nationality),je(Q),je(P.grade),je(P.holder_of),je(P.national_id_number),je(P.password),je(P.renewal),P.confirmation?"Yes":"No",je(P.license_number)]});pr(A,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:ie,startY:ae,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ae=A.lastAutoTable.finalY+15,ae>180&&xe!==tt[tt.length-1]&&(A.addPage(),ae=Xe(A,A.internal.getNumberOfPages(),z||"Unknown Club",Z||"")+10)}const D=new Date().getFullYear();A.save(`club_members_general_${D}.pdf`)}catch(A){console.error("Error generating PDF:",A),l("Error generating PDF: "+A.message)}},L=async()=>{try{if(!te||te.length===0){l("No members found to export");return}const A=new Tt("landscape");let ae=Xe(A,1,z||"Unknown Club",Z||"");A.setFontSize(14),A.setFont("helvetica","bold"),A.setTextColor(255,0,0),A.text("Club Members - Grade & Role Report",A.internal.pageSize.getWidth()/2,ae,{align:"center"}),A.setTextColor(0,0,0),ae+=20,A.setFontSize(12),A.setFont("helvetica","bold"),A.text(je("ROLES SECTION"),20,ae),ae+=15;const Pe={};te.forEach(ye=>{const F=ye.year||"No Year",ie=Y.find(Q=>Q.id===parseInt(ye.role_id)),P=(ie==null?void 0:ie.club_role)||ye.role||"No Role";Pe[F]||(Pe[F]={}),Pe[F][P]||(Pe[F][P]=[]),Pe[F][P].push(ye)});const tt=Object.keys(Pe).sort();for(const ye of tt){A.setFontSize(12),A.setFont("helvetica","bold"),A.text(`Year: ${je(ye)}`,20,ae),ae+=10;for(const[F,ie]of Object.entries(Pe[ye])){if(ie.length===0)continue;A.setFontSize(11),A.setFont("helvetica","bold"),A.text(`Role: ${je(F)}`,30,ae),ae+=8;const Q=ie.sort((he,we)=>new Date(he.registration_date)-new Date(we.registration_date)).map(he=>{var Ae;const we=((Ae=Y.find(Ie=>Ie.id===parseInt(he.role_id)))==null?void 0:Ae.club_role)||he.role||"No Role";return[je(he.last_name),je(he.first_name),je(he.date_of_birth),je(he.place_of_birth),je(he.blood_type),je(he.nationality),je(we),je(he.grade),je(he.holder_of),je(he.national_id_number),je(he.password),je(he.renewal),he.confirmation?"Yes":"No",je(he.license_number)]});pr(A,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:Q,startY:ae,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ae=A.lastAutoTable.finalY+8,ae>180&&(A.addPage(),ae=Xe(A,A.internal.getNumberOfPages(),z||"Unknown Club",Z||"")+5)}ae+=10,ae>170&&ye!==tt[tt.length-1]&&(A.addPage(),ae=Xe(A,A.internal.getNumberOfPages(),z||"Unknown Club",Z||"")+10)}A.addPage(),ae=Xe(A,A.internal.getNumberOfPages(),z||"Unknown Club",Z||""),A.setFontSize(12),A.setFont("helvetica","bold"),A.text(je("GRADES SECTION"),20,ae),ae+=15;const D={};te.forEach(ye=>{const F=ye.year||"No Year",ie=ye.grade||"No Grade";D[F]||(D[F]={}),D[F][ie]||(D[F][ie]=[]),D[F][ie].push(ye)});for(const ye of tt){A.setFontSize(12),A.setFont("helvetica","bold"),A.text(`Year: ${je(ye)}`,20,ae),ae+=10;for(const[F,ie]of Object.entries(D[ye]||{})){if(ie.length===0)continue;A.setFontSize(11),A.setFont("helvetica","bold"),A.text(`Grade: ${je(F)}`,30,ae),ae+=8;const Q=ie.sort((he,we)=>new Date(he.registration_date)-new Date(we.registration_date)).map(he=>{const we=Y.find(Ie=>Ie.id===parseInt(he.role_id)),Ae=(we==null?void 0:we.club_role)||he.role||"No Role";return[je(he.last_name),je(he.first_name),je(he.date_of_birth),je(he.place_of_birth),je(he.blood_type),je(he.nationality),je(Ae),je(he.grade),je(he.holder_of),je(he.national_id_number),je(he.password),je(he.renewal),he.confirmation?"Yes":"No",je(he.license_number)]});pr(A,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:Q,startY:ae,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ae=A.lastAutoTable.finalY+8,ae>180&&(A.addPage(),ae=Xe(A,A.internal.getNumberOfPages(),z||"Unknown Club",Z||"")+5)}ae+=10,ae>170&&ye!==tt[tt.length-1]&&(A.addPage(),ae=Xe(A,A.internal.getNumberOfPages(),z||"Unknown Club",Z||"")+10)}const xe=new Date().getFullYear();A.save(`club_members_grade_role_${xe}.pdf`)}catch(A){console.error("Error exporting complete club report PDF:",A),l("Error exporting PDF: "+A.message)}};return a.jsxs("div",{className:"app-container",children:[i&&a.jsx(rn,{}),a.jsx("header",{children:a.jsxs("div",{className:"federation-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[S?a.jsx("img",{src:S,alt:"Federation Logo",className:"federation-logo"}):a.jsx(ti,{className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:ve})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[C?a.jsx("img",{src:C,alt:"League Logo",className:"member-logo"}):a.jsx("p",{children:"No league logo"}),a.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:Z||"League Name"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[T?a.jsx("img",{src:T,alt:"Club Logo",className:"member-logo"}):a.jsx("p",{children:"No club logo"}),a.jsx("h3",{className:"federation-title",style:{fontSize:"1.2rem"},children:z||"Club Name"})]})]})}),a.jsx("section",{className:"app-container",children:a.jsxs("div",{className:"form-table-wrapper",children:[a.jsx("h2",{children:"Club Member"}),m?a.jsxs("p",{children:[m.first_name," ",m.last_name," "," ",a.jsx("strong",{children:(()=>{const A=Y.find(K=>K.id===parseInt(m.role_id));return(A==null?void 0:A.club_role)||m.club_role||m.role||"No role"})()})]}):a.jsx("p",{children:"No member found with these credentials."}),a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx("button",{type:"button",className:"primary-btn","data-id":"1",onClick:A=>{br(A.target),d&&m?(console.log(" Navigating to /club-member-listC with state:",{club_id:d.id,club_name:d.name_club,league_id:t==null?void 0:t.league_id,member_id:m.id,first_name:m.first_name,last_name:m.last_name,role:m.role,club_logo:T}),e("/club-member-listC",{state:{club_id:d.id,club_name:d.name_club,league_id:t==null?void 0:t.league_id,member_id:m.id,first_name:m.first_name,last_name:m.last_name,role:m.role,club_logo:T}})):console.log(" No club or member found, cannot navigate.")},children:"The Club Member List"}),a.jsx("button",{type:"button",className:"primary-btn","data-id":"2",onClick:A=>{br(A.target),d&&m?e("/AthletePage",{state:{club_id:d.id,club_name:d.name_club,league_id:t==null?void 0:t.league_id,member_id:m.id,first_name:m.first_name,last_name:m.last_name,role:m.role,club_logo:T,...t,club:d,member:m}}):console.log(" No club or member found, cannot navigate.")},children:"List of Athletes"})]}),a.jsxs("section",{children:[a.jsxs("section",{children:[a.jsx("h2",{className:"form-title",children:"Add Club Member"}),a.jsxs("form",{onSubmit:Be,className:"form-grid",children:[a.jsxs("label",{children:["Club Role *",a.jsxs("select",{value:Ct,onChange:A=>Et(A.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Role"}),Y.map(A=>a.jsx("option",{value:A.id,children:A.club_role},A.id))]})]}),a.jsxs("label",{children:["Club *",a.jsxs("select",{value:G,onChange:A=>de(A.target.value),required:!0,disabled:!!(t!=null&&t.club_id),children:[a.jsx("option",{value:"",children:"Select Club"}),ke.map(A=>a.jsx("option",{value:A.id,children:A.name_club},A.id))]})]}),a.jsxs("label",{children:["League *",a.jsxs("select",{value:M,onChange:A=>U(A.target.value),required:!0,disabled:!!(t!=null&&t.league_id),children:[a.jsx("option",{value:"",children:"Select League"}),E.map(A=>a.jsx("option",{value:A.id,children:A.name_league},A.id))]})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:Pt,onChange:A=>Ot(A.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:wt,onChange:A=>Xt(A.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:Te,onChange:A=>It(A.target.value),required:!0})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:He,onChange:A=>$e(A.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{value:Ce,onChange:A=>Le(A.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{value:Me,onChange:A=>Ue(A.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:at,onChange:A=>Ve(A.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{value:Oe,onChange:A=>le(A.target.value),required:!0})]}),a.jsxs("label",{children:["National ID *",a.jsx("input",{value:pt,onChange:A=>ct(A.target.value),maxLength:"18",required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:jt,onChange:A=>At(A.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:Wt,onChange:A=>st(A.target.value),required:!0})]}),a.jsxs("label",{children:["Club Logo *",a.jsx("input",{type:"text",value:T||"",disabled:!0})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",onChange:A=>{var K;return Dt(((K=A.target.files)==null?void 0:K[0])??null)},required:!0})]}),a.jsx("div",{className:"btn-row",children:a.jsx("button",{type:"submit",className:"primary-b",disabled:ht,children:ht?"Saving...":"Save Member"})}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]})]}),a.jsx("h2",{className:"form-title",children:"List of Members Club"}),a.jsxs("div",{className:"form-grid",children:[a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"Search Members Club"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:ot,onChange:A=>Rt(A.target.value)})})]}),a.jsx("div",{className:"table-container",ref:Je,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"holder_of"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photos"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"Club ID"}),a.jsx("th",{children:"League ID"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:te.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:19,children:"No members found."})}):te.map(A=>a.jsxs("tr",{onDoubleClick:()=>ze(A),style:{cursor:"pointer"},children:[a.jsx("td",{children:x===A.id?a.jsx("input",{value:N.last_name||"",onChange:K=>ut(K,"last_name")}):A.last_name}),a.jsx("td",{children:x===A.id?a.jsx("input",{value:N.first_name||"",onChange:K=>ut(K,"first_name")}):A.first_name}),a.jsx("td",{children:x===A.id?a.jsx("input",{type:"date",value:N.date_of_birth||"",onChange:K=>ut(K,"date_of_birth")}):A.date_of_birth}),a.jsx("td",{children:x===A.id?a.jsx("input",{value:N.place_of_birth||"",onChange:K=>ut(K,"place_of_birth")}):A.place_of_birth}),a.jsx("td",{children:x===A.id?a.jsxs("select",{value:N.role||"",onChange:K=>ut(K,"role"),children:[a.jsx("option",{value:"",children:"-- Select --"}),Y.map(K=>a.jsx("option",{value:K.club_role,children:K.club_role},K.id))]}):A.role||"No Role"}),a.jsx("td",{children:x===A.id?a.jsxs("select",{value:N.blood_type||"",onChange:K=>ut(K,"blood_type"),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):A.blood_type}),a.jsx("td",{children:x===A.id?a.jsxs("select",{value:N.nationality||"",onChange:K=>ut(K,"nationality"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]}):A.nationality}),a.jsx("td",{children:x===A.id?a.jsxs("select",{value:N.grade||"",onChange:K=>ut(K,"grade"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]}):A.grade}),a.jsx("td",{children:x===A.id?a.jsx("input",{value:N.holder_of||"",onChange:K=>ut(K,"holder_of")}):A.holder_of}),a.jsx("td",{children:A.national_id_number}),a.jsx("td",{children:A.renewal}),a.jsx("td",{children:A.year}),a.jsx("td",{children:A.license_number}),a.jsx("td",{children:A.registration_date}),a.jsx("td",{children:A.photo_url?a.jsx("img",{src:A.photo_url,alt:"Photo",style:{width:"50px",height:"50px"}}):"No Photo"}),a.jsx("td",{children:A.confirmation?"Yes":"No"}),a.jsx("td",{children:A.club_id}),a.jsx("td",{children:A.league_id}),a.jsx("td",{children:x===A.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-S",onClick:()=>kt(A.id),children:"Save"}),a.jsx("button",{className:"secondary-btn",onClick:Mt,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-M",onClick:()=>nt(A),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>X(A),children:"Delete"})]})})]},A.id))})]})}),a.jsxs("div",{children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:rr,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:L,children:"Export Grade & Role PDF"})]})]})]})}),o&&a.jsx(An,{error:o,onClose:()=>l(null)}),c&&a.jsx(In,{success:c,onClose:()=>u("")}),i&&a.jsx("div",{children:"Loading..."}),ht&&a.jsx($i,{message:"Adding member..."}),tr&&a.jsx($i,{message:"Saving changes..."}),a.jsx(gn,{}),a.jsx("footer",{className:"footer bg-red-600 text-white p-4 mt-6",children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function i8(){v.useEffect(()=>{ei()},[]),v.useEffect(()=>{ei()},[]);const t=Ur(),r=di().state||{},[n,i]=v.useState(null),[s]=v.useState("Algerian Judo Federation"),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,g]=v.useState([]),[m,f]=v.useState([]),[x,w]=v.useState((r==null?void 0:r.league_id)||""),[N,b]=v.useState((r==null?void 0:r.club_id)||""),[S,j]=v.useState(""),[C,$]=v.useState(""),[Z,V]=v.useState(""),[T,R]=v.useState(""),[z,I]=v.useState(""),[G,de]=v.useState(""),[M,U]=v.useState(""),[ve,ue]=v.useState(""),[Y,se]=v.useState(""),[ke,be]=v.useState(""),[E,q]=v.useState(""),[oe,me]=v.useState(""),[Ne,Se]=v.useState(null),[Ce,Le]=v.useState(null),[Me,Ue]=v.useState(""),[at,Ve]=v.useState(""),[Oe,le]=v.useState(""),[Ct,Et]=v.useState(null),[He,$e]=v.useState({}),[pt,ct]=v.useState(!0),[jt,At]=v.useState(""),[Wt,st]=v.useState(""),[St,zt]=v.useState([]),[bt,Dt]=v.useState([]),Pt="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",Ot=Xn(),wt=X=>X?X.startsWith("http")?X:`${Pt}${X}`:null;function Xt(X){return new Promise((te,je)=>{Gi(X,ze=>{if(ze.type==="error")console.warn("EXIF processing failed, using original image:",X),te(X);else try{const Lt=ze.toDataURL("image/png");te(Lt)}catch(Lt){console.warn("Canvas conversion failed, using original image:",Lt),te(X)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const Te=async X=>{try{if(!X||Object.keys(X).length===0){alert("No data available to export");return}let te=null,je=null;try{X.club_id&&(te=(await Qn())[X.club_id]),X.league_id&&(je=(await bi())[X.league_id])}catch(Pe){console.error("Error fetching names:",Pe)}const ze=new Tt;ze.setFontSize(18),ze.setTextColor(40,40,40),ze.text(s,14,15),ze.setFontSize(16),ze.setTextColor(40,40,40),ze.text(`Club Member Information - ${kn(X.first_name)} ${kn(X.last_name)}`,14,30),ze.setFontSize(10);const Lt=new Date().toLocaleString();if(ze.text(`Generated: ${Lt}`,14,37),n)try{ze.addImage(n,"PNG",170,10,25,25)}catch(Pe){console.error("Error adding federation logo to PDF:",Pe)}let qt=45;const Xe=X.photos_url||X.photo_url;if(Xe)try{const Pe=await Xt(Xe),tt=Pe.startsWith("data:")?"PNG":"JPEG";ze.addImage(Pe,tt,14,45,25,20),qt=70}catch(Pe){console.error("Error adding normalized photo, attempting original:",Pe);try{ze.addImage(Xe,"JPEG",14,45,25,20),qt=70}catch(tt){console.error("Fallback image addition also failed:",tt),qt=45}}ze.setFontSize(12),X.confirmation?ze.setTextColor(0,128,0):ze.setTextColor(255,0,0);const rr=X.confirmation?"CONFIRMED ":"NOT CONFIRMED ";ze.text(rr,160,50),ze.setTextColor(0,0,0);const L=o.find(Pe=>Pe.id===X.role_id),A=[["Last Name",kn(X.last_name)||""],["First Name",kn(X.first_name)||""],["Date of Birth",kn(X.date_of_birth)||""],["Place of Birth",kn(X.place_of_birth)||""],["Role",kn(L==null?void 0:L.club_role)||"No Role"],["Blood type",kn(X.blood_type)||""],["National ID",kn(X.national_id_number)||""],["Nationality",kn(X.nationality)||""],["Grade",kn(X.grade)||""],["License Number",kn(X.license_number)||""],["Registration Date",kn(X.registration_date)||""],["Year",kn(X.year)||""],["Renewal",kn(X.renewal)||""]];pr(ze,{startY:qt,head:[["Field","Value"]],body:A,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const K=ze.lastAutoTable.finalY||200;if(ze.setFontSize(12),ze.setTextColor(0,0,0),ze.text("Medical certificate",14,K+20),ze.setDrawColor(0),ze.line(14,K+40,80,K+40),ze.setFontSize(10),X.club_id||te){const Pe=te||`ID: ${X.club_id}`;ze.text(`${Pe}`,14,K+60),ze.text("Club Visa: _________________",14,K+70)}if(X.league_id||je){const Pe=je||`ID: ${X.league_id}`;ze.text(`${Pe}`,120,K+60),ze.text("League Visa: _________________",120,K+70)}try{const Pe=JSON.stringify({id:X.id,name:`${X.first_name||""} ${X.last_name||""}`.trim(),license:X.license_number||"",club_id:X.club_id||"",league_id:X.league_id||""}),D=await(await va(async()=>{const{default:xe}=await Promise.resolve().then(()=>Rm);return{default:xe}},void 0)).default.toDataURL(Pe,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});ze.addImage(D,"PNG",180,K+75,15,15)}catch(Pe){console.error("Error generating QR code:",Pe)}const ae=`athlete_${X.first_name}_${X.last_name}_${X.id||"record"}.pdf`;ze.save(ae)}catch(te){console.error(" Error in exportPDFWithAutoOrientation:",te),alert(`Error exporting PDF: ${te.message}`)}},It=async()=>{try{console.log("Force refreshing all data..."),typeof Storage<"u"&&(localStorage.clear(),sessionStorage.clear()),"caches"in window&&caches.keys().then(qt=>{qt.forEach(Xe=>{caches.delete(Xe)})});const X=Date.now();console.log(" Cache cleared at:",X);const{data:te,error:je}=await re.from("nameleague").select("id, name_league");!je&&te&&(console.log(" RAW DATABASE LEAGUES:",te),te.forEach(qt=>{var Xe;(Xe=qt.name_league)!=null&&Xe.includes("%")&&(console.log(" DATABASE CORRUPTION FOUND - League:",qt.name_league),console.log(" Character codes:",qt.name_league.split("").map(rr=>`${rr}(${rr.charCodeAt(0)})`).join(" ")))}),te.forEach(qt=>{qt.name_league&&(qt.name_league=et(qt.name_league))}),g(te));const{data:ze,error:Lt}=await re.from("nameclub").select("id, name_club, league_i");!Lt&&ze&&(console.log(" RAW DATABASE CLUBS:",ze),ze.forEach(qt=>{var Xe;(Xe=qt.name_club)!=null&&Xe.includes("%")&&(console.log(" DATABASE CORRUPTION FOUND - Club:",qt.name_club),console.log(" Character codes:",qt.name_club.split("").map(rr=>`${rr}(${rr.charCodeAt(0)})`).join(" ")))}),ze.forEach(qt=>{qt.name_club&&(qt.name_club=et(qt.name_club))}),u(ze)),console.log("Data refresh completed")}catch(X){console.error("Error refreshing data:",X)}};v.useEffect(()=>{(async()=>{try{const{data:te,error:je}=await re.from("clubrole").select("*");if(je)throw je;l(te||[]);const{data:ze,error:Lt}=await re.from("nameleague").select("id, name_league");if(Lt)throw Lt;g(ze||[]);const{data:qt,error:Xe}=await re.from("nameclub").select("id, name_club, league_i");if(Xe)throw Xe;u(qt||[])}catch(te){console.error("Error fetching initial data:",te.message)}finally{ct(!1)}})()},[]),v.useEffect(()=>{(async()=>{if(!x){u([]),b("");return}try{const{data:te,error:je}=await re.from("nameclub").select("id, name_club").eq("league_i",Number(x));if(je)throw je;u(te||[]),b("")}catch(te){console.error("Error fetching clubs:",te.message),u([])}})()},[x]),v.useEffect(()=>{(async()=>{if(!N){At("");return}try{console.log("Fetching club name for selectedClub:",N);const{data:te,error:je}=await re.from("nameclub").select("name_club").eq("id",Number(N)).single();if(je)throw je;console.log("Club data retrieved:",te),At((te==null?void 0:te.name_club)||""),console.log("Club name set to:",(te==null?void 0:te.name_club)||"")}catch(te){console.error("Error fetching club name:",te.message),At("")}})()},[N]),v.useEffect(()=>{(async()=>{if(!x){st("");return}try{console.log("Fetching league name for selectedLeague:",x);const{data:te,error:je}=await re.from("nameleague").select("name_league").eq("id",Number(x)).single();if(je)throw je;console.log("League data retrieved:",te),st((te==null?void 0:te.name_league)||""),console.log("League name set to:",(te==null?void 0:te.name_league)||"")}catch(te){console.error("Error fetching league name:",te.message),st("")}})()},[x]),v.useEffect(()=>{(async()=>{const{data:te}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);te!=null&&te.length&&i(te[0].logo_url)})()},[]);const ot=async()=>{const{data:X}=await re.from("club_members").select("*");f(X||[])};v.useEffect(()=>{ot()},[]);const Rt=async X=>{if(!X)return null;const te=X.name.split(".").pop(),je=`${Date.now()}-${Math.random()}.${te}`,{error:ze}=await re.storage.from("logos").upload(je,X);if(ze)return Ve(`Upload failed: ${ze.message}`),null;const{data:Lt}=re.storage.from("logos").getPublicUrl(je);return(Lt==null?void 0:Lt.publicUrl)??null},ht=async(X,te,je)=>{const{count:ze}=await re.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",X).eq("club_id",te).eq("role",je);return(ze||0)+1},Ye=async X=>{var te;if(X.preventDefault(),Ve(""),le(""),!C||!S||!Z||!T||!z||!N||!x||!ve||!Y){Ve("Please fill in all required fields.");return}if(M.length!==18){Ve("National ID must be exactly 18 digits.");return}if(ve!==Y){Ve("Passwords do not match.");return}try{const je=await Rt(Ce),ze=await Rt(Ne),Lt=((te=o.find(K=>K.id===parseInt(z)))==null?void 0:te.club_role)||"",qt=await ht(M,N,Lt),Xe=new Date().getFullYear(),rr=`${Xe}/${Xe+1}`,L={last_name:S,first_name:C,date_of_birth:Z,place_of_birth:T,role:Lt,blood_type:G,national_id_number:M,password:ve,nationality:ke,grade:E,holder_of:oe,photo_url:ze,renewal:qt,year:rr,confirmation:!1,logo_url:je,club_id:N,league_id:x,license_number:`LIC-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0]},{error:A}=await re.from("club_members").insert([L]);if(A){Ve(`Failed to save member: ${A.message}`);return}le(`Member "${C} ${S}" added successfully!`),j(""),$(""),V(""),R(""),I(""),de(""),U(""),ue(""),se(""),b(""),w(""),Le(null),Se(null),be(""),q(""),me("")}catch(je){Ve(`Unexpected error: ${je.message}`)}},tr=X=>{Et(X.id),$e(X)},_e=()=>{Et(null),$e({})},Je=(X,te)=>{$e({...He,[te]:X.target.value})},vt=async X=>{try{const{error:te}=await re.from("club_members").update(He).eq("id",X);if(te)throw te;_e(),ot()}catch(te){Ve(te.message)}},ce=async X=>{try{const te=new Date(X.registration_date).toISOString().split("T")[0],je=new Date().toISOString().split("T")[0];if(te!==je){alert("You can only delete members on the same day of registration.");return}const{error:ze}=await re.from("club_members").delete().eq("id",X.id);if(ze)throw ze;f(Lt=>Lt.filter(qt=>qt.id!==X.id))}catch(te){Ve(te.message)}},W=async(X,te)=>{try{const{error:je}=await re.from("club_members").update({confirmation:!te}).eq("id",X);if(je)throw je;f(ze=>ze.map(Lt=>Lt.id===X?{...Lt,confirmation:!te}:Lt))}catch(je){Ve(`Failed to update confirmation: ${je.message}`)}},Ee=m.filter(X=>{const te=Me.toLowerCase();return X.first_name.toLowerCase().includes(te)||X.last_name.toLowerCase().includes(te)||X.national_id_number.includes(te)}),Ge=X=>{Be(X)},Be=X=>{if(!X||Object.keys(X).length===0){alert("No data available to export");return}Te(X)},nt=(X,te=1)=>{var L,A;const je=X.internal.pageSize.getWidth(),ze=X.internal.pageSize.getHeight();if(n)try{X.addImage(n,"PNG",je-40,15,25,25)}catch(K){console.warn("Could not add federation logo:",K)}X.setFontSize(10),X.setFont("helvetica","normal");const Lt=new Date().toLocaleDateString();X.text(`Print Date: ${Lt}`,15,20);const qt=c.find(K=>K.id===N);if(qt!=null&&qt.logo_club)try{const K=qt.logo_club.startsWith("http")?qt.logo_club:`https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/${qt.logo_club}`;X.addImage(K,"PNG",je-70,15,25,25)}catch(K){console.warn("Could not add club logo:",K)}X.setFontSize(16),X.setFont("helvetica","bold"),X.text(s,je/2,30,{align:"center"}),X.setFontSize(12),X.setFont("helvetica","normal");const Xe=((L=d.find(K=>K.id===x))==null?void 0:L.name_league)||"",rr=((A=c.find(K=>K.id===N))==null?void 0:A.name_club)||"";return X.text(`${et(Xe)}`,je/2,35,{align:"center"}),X.text(`${et(rr)}`,je/2,45,{align:"center"}),X.setFontSize(10),X.text(`Page ${te}`,je-20,ze-10,{align:"right"}),45},Mt=X=>X.map(te=>{var Lt,qt;const je=((Lt=c.find(Xe=>Xe.id===te.club_id))==null?void 0:Lt.name_club)||"",ze=((qt=d.find(Xe=>Xe.id===te.league_id))==null?void 0:qt.name_league)||"";return[et(te.last_name)||"",et(te.first_name)||"",et(te.date_of_birth)||"",et(te.place_of_birth)||"",et(te.role_name)||"",et(te.blood_type)||"",et(te.nationality)||"",et(te.national_id_number)||"",et(te.license_number)||"",et(te.registration_date)||"",et(je),et(ze),"",""]}),ut=async()=>{try{if(console.log("Starting General PDF export..."),await It(),console.log("Filtered members count:",(Ee==null?void 0:Ee.length)||0),!Ee||Ee.length===0){alert("No member data available to export. Please ensure members are loaded.");return}const X=new Tt("landscape");let te=nt(X);X.setFontSize(14),X.setFont("helvetica","bold"),X.setTextColor(255,0,0),X.text("Federation Club Members - General Report",X.internal.pageSize.getWidth()/2,te+10,{align:"center"}),X.setTextColor(0,0,0);const je=Mt(Ee);console.log("Table data prepared, rows:",je.length),pr(X,{head:[["Last Name","First Name","DOB","POB","Role","Blood","Nationality","NID","License #","Registration","Club","League","Club Visa","League Visa"]],body:je,startY:te+20,styles:{fontSize:7,cellPadding:1},headStyles:{fillColor:[0,128,0],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{10:{cellWidth:25},11:{cellWidth:25},12:{cellWidth:20},13:{cellWidth:20}},didDrawPage:qt=>{qt.pageNumber>1&&nt(X,qt.pageNumber)}});const Lt=`federation_club_members_general_${new Date().getFullYear()}.pdf`;console.log("Saving PDF as:",Lt),X.save(Lt),console.log("General PDF export completed successfully")}catch(X){console.error("Error exporting General PDF:",X),console.error("Error details:",{message:X.message,stack:X.stack,name:X.name}),alert(`Error exporting General PDF: ${X.message}`)}},kt=async()=>{try{console.log("Starting Grade & Role PDF export..."),await It(),console.log("Fetching leagues...");const{data:X,error:te}=await re.from("nameleague").select("id, name_league");if(te)throw console.error("Error fetching leagues:",te),new Error(`Failed to fetch leagues: ${te.message}`);if(console.log("Leagues fetched:",(X==null?void 0:X.length)||0),!X||X.length===0){alert("No leagues found");return}X.forEach(tt=>{tt.name_league&&(console.log("Original league name:",tt.name_league),tt.name_league=et(tt.name_league),console.log("Sanitized league name:",tt.name_league))}),console.log("Fetching clubs...");const{data:je,error:ze}=await re.from("nameclub").select("id, name_club, league_i");if(ze)throw console.error("Error fetching clubs:",ze),new Error(`Failed to fetch clubs: ${ze.message}`);if(console.log("Clubs fetched:",(je==null?void 0:je.length)||0),!je||je.length===0){alert("No clubs found");return}je.forEach(tt=>{tt.name_club&&(console.log("Original club name:",tt.name_club),tt.name_club=et(tt.name_club),console.log("Sanitized club name:",tt.name_club))}),console.log("Fetching members...");const{data:Lt,error:qt}=await re.from("club_members").select("*");if(qt)throw console.error("Error fetching members:",qt),new Error(`Failed to fetch members: ${qt.message}`);if(console.log("Members fetched:",(Lt==null?void 0:Lt.length)||0),!Lt||Lt.length===0){alert("No members found");return}const Xe=new Tt("landscape");let L=nt(Xe);const A={};console.log(" DEBUG: Starting member processing..."),Lt.forEach(tt=>{var P,Q;const D=je.find(he=>he.id===tt.club_id),xe=X.find(he=>he.id===(D==null?void 0:D.league_i));(P=xe==null?void 0:xe.name_league)!=null&&P.includes("%")&&console.log(" DEBUG: Raw league name contains %:",xe.name_league),(Q=D==null?void 0:D.name_club)!=null&&Q.includes("%")&&console.log(" DEBUG: Raw club name contains %:",D.name_club);const ye=xe?et(xe.name_league):"Unknown League",F=D?et(D.name_club):"Unknown Club",ie=tt.year||"Unknown Year";A[ie]||(A[ie]={}),A[ie][ye]||(A[ie][ye]={}),A[ie][ye][F]||(A[ie][ye][F]=[]),A[ie][ye][F].push(tt)}),Xe.setFontSize(16),Xe.setFont("helvetica","bold"),Xe.setTextColor(255,0,0),Xe.text("Club Members - Grade & Role Report",Xe.internal.pageSize.getWidth()/2,L,{align:"center"}),Xe.setTextColor(0,0,0),L+=20,Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(et("ROLES SECTION"),20,L),L+=10;let K=!0;for(const[tt,D]of Object.entries(A))if(Object.keys(D).length!==0){K||(Xe.addPage(),L=nt(Xe,Xe.internal.getNumberOfPages())+5),K=!1,Xe.setFontSize(11),Xe.setFont("helvetica","bold"),Xe.text(`Year: ${kn(tt)}`,20,L),L+=15;for(const[xe,ye]of Object.entries(D))if(Object.keys(ye).length!==0){Xe.setFontSize(14),Xe.setFont("helvetica","bold"),Xe.text(`League: ${kn(xe)}`,35,L),L+=12;for(const[F,ie]of Object.entries(ye)){if(ie.length===0)continue;Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`Club: ${kn(F)}`,50,L),L+=10;const P={};ie.forEach(Q=>{const he=o.find(Ae=>Ae.id===Q.role_id),we=(he==null?void 0:he.club_role)||"No Role";P[we]||(P[we]=[]),P[we].push(Q)});for(const[Q,he]of Object.entries(P)){if(he.length===0)continue;Xe.setFontSize(10),Xe.setFont("helvetica","bold"),Xe.text(`Role: ${et(Q)}`,65,L),L+=6;const we=he.map(Ae=>[et(Ae.last_name),et(Ae.first_name),et(Ae.date_of_birth),et(Ae.place_of_birth),et(Ae.blood_type),et(Ae.nationality),et(Ae.grade),et(Ae.holder_of),et(Ae.nid),et(Ae.password),et(Ae.renewal),Ae.confirmation?"Yes":"No",et(Ae.license_number)]);pr(Xe,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:we,startY:L,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[0,128,0],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),L=Xe.lastAutoTable.finalY+8,L>180&&(Xe.addPage(),L=nt(Xe,Xe.internal.getNumberOfPages())+5)}L+=8,L>160&&(Xe.addPage(),L=nt(Xe,Xe.internal.getNumberOfPages())+5)}L+=10}L+=15}Xe.addPage(),L=nt(Xe,Xe.internal.getNumberOfPages()),Xe.setFontSize(16),Xe.setFont("helvetica","bold"),Xe.setTextColor(255,0,0),Xe.text("Federation Club Members - Grade & Role Report",Xe.internal.pageSize.getWidth()/2,L,{align:"center"}),Xe.setTextColor(0,0,0),L+=20,Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(et("GRADES SECTION"),20,L),L+=10;let ae=!0;for(const[tt,D]of Object.entries(A))if(Object.keys(D).length!==0){ae||(Xe.addPage(),L=nt(Xe,Xe.internal.getNumberOfPages())+5),ae=!1,Xe.setFontSize(11),Xe.setFont("helvetica","bold"),Xe.text(`Year: ${et(tt)}`,20,L),L+=15;for(const[xe,ye]of Object.entries(D))if(Object.keys(ye).length!==0){Xe.setFontSize(14),Xe.setFont("helvetica","bold"),Xe.text(`League: ${et(xe)}`,35,L),L+=12;for(const[F,ie]of Object.entries(ye)){if(ie.length===0)continue;Xe.setFontSize(12),Xe.setFont("helvetica","bold"),Xe.text(`Club: ${et(F)}`,50,L),L+=10;const P={};ie.forEach(Q=>{const he=Q.grade||"No Grade";P[he]||(P[he]=[]),P[he].push(Q)});for(const[Q,he]of Object.entries(P)){if(he.length===0)continue;Xe.setFontSize(10),Xe.setFont("helvetica","bold"),Xe.text(`Grade: ${et(Q)}`,65,L),L+=6;const we=he.map(Ae=>{const Ie=o.find(yt=>yt.id===Ae.role_id),rt=(Ie==null?void 0:Ie.club_role)||"No Role";return[et(Ae.last_name),et(Ae.first_name),et(Ae.date_of_birth),et(Ae.place_of_birth),et(Ae.blood_type),et(Ae.nationality),et(rt),et(Ae.holder_of),et(Ae.nid),et(Ae.password),et(Ae.renewal),Ae.confirmation?"Yes":"No",et(Ae.license_number),et(F)]});pr(Xe,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Holder Of","NID","Password","Renewal","Confirmation","License #","Club"]],body:we,startY:L,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[0,128,0],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),L=Xe.lastAutoTable.finalY+8,L>180&&(Xe.addPage(),L=nt(Xe,Xe.internal.getNumberOfPages())+5)}L+=8,L>160&&(Xe.addPage(),L=nt(Xe,Xe.internal.getNumberOfPages())+5)}L+=10}L+=15}const Pe=new Date().getFullYear();Xe.save(`federation_complete_league_club_report_${Pe}.pdf`)}catch(X){console.error("Error exporting complete federation report PDF:",X),console.error("Error details:",{message:X.message,stack:X.stack,name:X.name});let te="Error exporting PDF: ";X.message.includes("Failed to fetch")?te+="Network connection error. Please check your internet connection and try again.":X.message.includes("Failed to fetch leagues")?te+="Unable to load league data from database.":X.message.includes("Failed to fetch clubs")?te+="Unable to load club data from database.":X.message.includes("Failed to fetch members")?te+="Unable to load member data from database.":te+=X.message,alert(te)}};return v.useEffect(()=>{const X=setTimeout(()=>{},300);return()=>clearTimeout(X)},[Me]),v.useEffect(()=>{(async()=>{if(!x){u([]),b(""),f([]);return}try{ct(!0);const{data:te,error:je}=await re.from("nameclub").select("id, name_club").eq("league_i",Number(x));if(je)throw je;u(te||[]),b("");const{data:ze,error:Lt}=await re.from("club_members").select("*").eq("league_id",Number(x));if(Lt)throw Lt;f(ze||[])}catch(te){console.error("Error fetching league data:",te),u([]),f([])}finally{ct(!1)}})()},[x]),v.useEffect(()=>{(async()=>{if(!(!x||!N)){ct(!0);try{const{data:te,error:je}=await re.from("club_members").select("*").eq("league_id",Number(x)).eq("club_id",Number(N));if(je)throw je;f(te||[])}catch(te){console.error("Error fetching members by club:",te),f([])}finally{ct(!1)}}})()},[N,x]),a.jsxs("div",{className:"app-container",children:[pt&&a.jsx(rn,{}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[n?a.jsx("img",{src:n,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:s||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{children:"Welcome to the Federation Account"}),a.jsx("p",{children:"This is the Federation Account page."}),a.jsxs("div",{className:"form-table-wrapper",children:[a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx(oc,{"data-id":"1"}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:X=>{br(X.currentTarget),t("/MemberListPageP")},children:"The Member List Add"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:X=>{br(X.currentTarget),t("/TheLeagueList-Add")},children:"The League List Add"}),a.jsx("button",{className:"primary-btn","data-id":"4",onClick:X=>{br(X.currentTarget),t("/TheClubListAdd-Fed")},children:"The Club List Add"}),a.jsx("button",{className:"primary-btn","data-id":"5",onClick:X=>{br(X.currentTarget),t("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),a.jsx("h2",{className:"form-title",children:"Add Club Member"}),a.jsxs("form",{onSubmit:Ye,className:"form-grid",children:[a.jsxs("label",{children:["Club Role *",a.jsxs("select",{value:z,onChange:X=>I(X.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Role"}),o.map(X=>a.jsx("option",{value:X.id,children:X.club_role},X.id))]})]}),a.jsxs("label",{children:["League *",a.jsxs("select",{value:x,onChange:X=>w(X.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select League"}),d.map(X=>a.jsx("option",{value:X.id,children:X.name_league},X.id))]})]}),a.jsxs("label",{children:["Club *",a.jsxs("select",{value:N,onChange:X=>b(X.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Club"}),c.map(X=>a.jsx("option",{value:X.id,children:X.name_club},X.id))]})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:ke,onChange:X=>be(X.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:E,onChange:X=>q(X.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{value:oe,onChange:X=>me(X.target.value),required:!0})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:G,onChange:X=>de(X.target.value),required:!0,children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{value:S,onChange:X=>j(X.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{value:C,onChange:X=>$(X.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:Z,onChange:X=>V(X.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{value:T,onChange:X=>R(X.target.value),required:!0})]}),a.jsxs("label",{children:["National ID Number *",a.jsx("input",{value:M,onChange:X=>U(X.target.value.replace(/\D/g,"")),maxLength:18,required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:ve,onChange:X=>ue(X.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:Y,onChange:X=>se(X.target.value),required:!0})]}),a.jsxs("label",{children:["Upload Club Logo *",a.jsx("input",{type:"file",onChange:X=>{var te;return Le((te=X.target.files)==null?void 0:te[0])},required:!0})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",onChange:X=>{var te;return Se((te=X.target.files)==null?void 0:te[0])},required:!0})]}),a.jsx("div",{className:"btn-row",children:a.jsx("button",{type:"submit",className:"primary-b",children:"Save Member"})}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),a.jsx("h2",{className:"form-title",children:"List Of Clubs Members"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("label",{children:["League:",a.jsxs("select",{value:x,onChange:X=>w(X.target.value),children:[a.jsx("option",{value:"",children:"-- All Leagues --"}),d.map(X=>a.jsx("option",{value:X.id,children:X.name_league},X.id))]})]}),a.jsxs("label",{children:["Club:",a.jsxs("select",{value:N,onChange:X=>b(X.target.value),disabled:!x,children:[a.jsx("option",{value:"",children:"-- All Clubs --"}),c.map(X=>a.jsx("option",{value:X.id,children:X.name_club},X.id))]})]}),a.jsx("p",{children:a.jsx("h2",{className:"form-title",children:"search Club Member"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:Me,onChange:X=>Ue(X.target.value)})})]}),a.jsx("div",{className:"table-container",ref:Ot,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"holder_of"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photos"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"Club ID"}),a.jsx("th",{children:"League ID"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Ee.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:19,children:"No members found."})}):Ee.map(X=>a.jsxs("tr",{onDoubleClick:te=>{if(Date.now()-(window.lastDragEndTime||0)<200){console.log(" Preventing double-click after drag"),te.preventDefault(),te.stopPropagation();return}Ge(X)},style:{cursor:"pointer"},children:[a.jsx("td",{children:Ct===X.id?a.jsx("input",{value:He.last_name||"",onChange:te=>Je(te,"last_name")}):X.last_name}),a.jsx("td",{children:Ct===X.id?a.jsx("input",{value:He.first_name||"",onChange:te=>Je(te,"first_name")}):X.first_name}),a.jsx("td",{children:Ct===X.id?a.jsx("input",{type:"date",value:He.date_of_birth||"",onChange:te=>Je(te,"date_of_birth")}):X.date_of_birth}),a.jsx("td",{children:Ct===X.id?a.jsx("input",{value:He.place_of_birth||"",onChange:te=>Je(te,"place_of_birth")}):X.place_of_birth}),a.jsx("td",{children:Ct===X.id?a.jsxs("select",{value:He.role_id||"",onChange:te=>Je(te,"role_id"),children:[a.jsx("option",{value:"",children:"-- Select --"}),o.map(te=>a.jsx("option",{value:te.id,children:te.club_role},te.id))]}):(()=>{const te=o.find(je=>je.id===X.role_id);return(te==null?void 0:te.club_role)||"No Role"})()}),a.jsx("td",{children:Ct===X.id?a.jsxs("select",{value:He.blood_type||"",onChange:te=>Je(te,"blood_type"),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):X.blood_type}),a.jsx("td",{children:Ct===X.id?a.jsxs("select",{value:He.nationality||"",onChange:te=>Je(te,"nationality"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]}):X.nationality}),a.jsx("td",{children:Ct===X.id?a.jsxs("select",{value:He.grade||"",onChange:te=>Je(te,"grade"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]}):X.grade}),a.jsx("td",{children:Ct===X.id?a.jsx("input",{value:He.holder_of||"",onChange:te=>Je(te,"holder_of")}):X.holder_of}),a.jsx("td",{children:X.national_id_number}),a.jsx("td",{children:X.renewal}),a.jsx("td",{children:X.year}),a.jsx("td",{children:X.license_number}),a.jsx("td",{children:X.registration_date}),a.jsx("td",{children:X.photos_url||X.photo_url?a.jsx("img",{src:wt(X.photos_url||X.photo_url),alt:"Member",style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),a.jsx("td",{children:X.confirmation?"":""}),a.jsx("td",{children:X.club_id}),a.jsx("td",{children:X.league_id}),a.jsx("td",{children:Ct===X.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-b",onClick:()=>vt(X.id),children:"Save"}),a.jsx("button",{className:"secondary-btn",onClick:_e,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-b",onClick:()=>tr(X),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>ce(X),children:"Delete"}),a.jsx("button",{className:X.confirmation?"cancel-btn":"confirm-btn",onClick:()=>W(X.id,X.confirmation),children:X.confirmation?"Cancel Confirmation":"Confirm"})]})})]},X.id))})]})}),a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:ut,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:kt,children:"Export Grade & Role PDF"})]})]}),at&&a.jsx(An,{error:at,onClose:()=>Ve("")}),Oe&&a.jsx(In,{success:Oe,onClose:()=>le("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function a8(){v.useEffect(()=>{ei()},[]);const{state:t}=di(),e=Ur(),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState([]),[c,u]=v.useState(0),[d,g]=v.useState(null),[m,f]=v.useState("Algerian Judo Federation"),[x,w]=v.useState(!0),[N,b]=v.useState(!0),[S,j]=v.useState(!1),[C,$]=v.useState(null),[Z,V]=v.useState(""),[T,R]=v.useState(""),[z,I]=v.useState(""),[G,de]=v.useState(""),[M,U]=v.useState(""),[ve,ue]=v.useState(""),[Y,se]=v.useState(""),[ke,be]=v.useState(""),[E,q]=v.useState(""),[oe,me]=v.useState(""),[Ne,Se]=v.useState(""),[Ce,Le]=v.useState(null),[Me,Ue]=v.useState(""),[at,Ve]=v.useState(""),[Oe,le]=v.useState(""),[Ct,Et]=v.useState([]),[He,$e]=v.useState([]),[pt,ct]=v.useState([]),[jt,At]=v.useState([]),[Wt,st]=v.useState((t==null?void 0:t.club_id)??""),[St,zt]=v.useState((t==null?void 0:t.league_id)??""),[bt,Dt]=v.useState(""),[Pt,Ot]=v.useState(""),[wt,Xt]=v.useState(null),[Te,It]=v.useState({}),[ot,Rt]=v.useState(""),[ht,Ye]=v.useState(""),[tr,_e]=v.useState([]),[Je,vt]=v.useState(""),ce=Xn();function W(D){return new Promise((xe,ye)=>{Gi(D,F=>{if(F.type==="error")console.warn("EXIF processing failed, using original image:",D),xe(D);else try{const ie=F.toDataURL("image/png");xe(ie)}catch(ie){console.warn("Canvas conversion failed, using original image:",ie),xe(D)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}v.useEffect(()=>{(async()=>{const{data:xe,error:ye}=await re.from("publications").select("id, title, description, photo_url, created_at").order("created_at",{ascending:!1});!ye&&xe&&l(xe)})()},[]),v.useEffect(()=>{(async()=>{const{data:xe,error:ye}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!ye&&xe.length>0&&g(xe[0].logo_url)})()},[]),v.useEffect(()=>{(async()=>{try{const[{data:xe,error:ye},{data:F,error:ie}]=await Promise.all([re.from("nameclub").select("id, name_club"),re.from("nameleague").select("id, name_league")]);ye||ie?console.error("Error fetching clubs/leagues:",ye||ie):(console.log("Clubs:",xe),console.log("Leagues:",F),ct(xe),At(F))}catch(xe){console.error("Unexpected error:",xe)}finally{b(!1)}})()},[]),v.useEffect(()=>{(async()=>{if(!(!Me||!at))try{const{data:xe,error:ye}=await re.from("categories").select("weight").eq("genres",Me).eq("categories",at);ye?console.error("Erreur rcupration poids:",ye.message):Et(xe.map(F=>F.weight))}catch(xe){console.error("Erreur inconnue:",xe)}})()},[Me,at]),v.useEffect(()=>{(async()=>{if(!(!Te.genres||!Te.categories))try{const{data:xe,error:ye}=await re.from("categories").select("weight").eq("genres",Te.genres).eq("categories",Te.categories);ye?console.error("Erreur rcupration poids:",ye.message):Et(xe.map(F=>F.weight))}catch(xe){console.error("Erreur inconnue:",xe)}})()},[Te.genres,Te.categories]),v.useEffect(()=>{(async()=>{try{const{data:xe,error:ye}=await re.from("nameleague").select("id, name_league");if(ye)throw ye;At(xe||[]);const{data:F,error:ie}=await re.from("athletes").select("*");if(ie)throw ie;$e(F||[]),_e(F||[])}catch(xe){console.error(xe)}})()},[]),v.useEffect(()=>{(async()=>{if(!ot){ct([]),Ye(""),$e(tr);return}try{const{data:xe,error:ye}=await re.from("nameclub").select("id, name_club").eq("league_i",Number(ot));if(ye)throw ye;ct(xe||[]),Ye("");const F=tr.filter(ie=>ie.league_id===Number(ot));$e(F)}catch(xe){console.error(xe)}})()},[ot]),v.useEffect(()=>{(async()=>{if(!ot){Ot("");return}try{const{data:xe,error:ye}=await re.from("nameleague").select("name_league").eq("id",Number(ot)).single();ye||Ot((xe==null?void 0:xe.name_league)||"")}catch(xe){console.error("Error fetching league name:",xe)}})()},[ot]),v.useEffect(()=>{(async()=>{if(!ht){Dt("");return}try{const{data:xe,error:ye}=await re.from("nameclub").select("name_club").eq("id",Number(ht)).single();ye||Dt((xe==null?void 0:xe.name_club)||"")}catch(xe){console.error("Error fetching club name:",xe)}})()},[ht]),v.useEffect(()=>{if(!ot&&!ht){$e(tr);return}let D=tr;ot&&(D=D.filter(xe=>xe.league_id===Number(ot))),ht&&(D=D.filter(xe=>xe.club_id===Number(ht))),$e(D)},[ot,ht,tr]);const Ee=async(D,xe,ye)=>{try{const{count:F,error:ie}=await re.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",D).eq("club_id",xe).eq("league_id",ye);return ie?(console.error("getNextRenewal count error",ie),1):(F||0)+1}catch(F){return console.error("getNextRenewal unexpected",F),1}},Ge=async()=>{if(!Ce)return null;const D=Ce.name.split(".").pop(),xe=`athlete-${Date.now()}.${D}`,{error:ye}=await re.storage.from("logos").upload(xe,Ce);if(ye)return console.error("upload error",ye),null;const{data:F}=re.storage.from("logos").getPublicUrl(xe);return(F==null?void 0:F.publicUrl)??null},Be=(D,xe)=>{if(!D||!xe)return{isValid:!1,message:"Date of birth and category are required."};const ye=new Date(D),F=new Date,ie=F.getFullYear()-ye.getFullYear()-(F.getMonth()<ye.getMonth()||F.getMonth()===ye.getMonth()&&F.getDate()<ye.getDate()?1:0),Q={Poussins:{min:9,max:10},Benjamins:{min:11,max:12},Minimes:{min:13,max:14},Cadets:{min:15,max:17},Juniors:{min:15,max:20},Hopefuls:{min:15,max:17},Seniors:{min:15,max:35},Veterans:{min:36,max:150}}[xe];return Q?ie<Q.min||ie>Q.max?xe==="Veterans"?{isValid:!1,message:`For ${xe} category, athlete must be more than 35 years old. Current age: ${ie}`}:{isValid:!1,message:`For ${xe} category, athlete must be between ${Q.min} and ${Q.max} years old. Current age: ${ie}`}:{isValid:!0,message:""}:{isValid:!1,message:`Unknown category: ${xe}`}},nt=async()=>{try{b(!0);let D=re.from("athletes").select("*");ht?D=D.eq("club_id",Number(ht)):ot&&(D=D.eq("league_id",Number(ot)));const{data:xe,error:ye}=await D.order("id",{ascending:!1});if(ye)throw ye;const F=Array.isArray(xe)?xe:[];$e(F),_e(F)}catch(D){console.error("fetchData error",D),n(D.message||String(D))}finally{b(!1)}},Mt=async D=>{if(D.preventDefault(),n(""),s(""),!T||!Z){n("First name and Last name are required.");return}if(!/^\d{18}$/.test(Y)){n("National ID (NID) must be exactly 18 digits.");return}if(ke!==E){n("Passwords do not match.");return}if(!ot&&!St){n("League must be selected or provided in state.");return}if(!ht&&!Wt){n("Club must be selected or provided in state.");return}const xe=Be(z,at);if(!xe.isValid){n(xe.message);return}if(Z&&ke){const{data:ie}=await re.from("athletes").select("*").eq("password",ke);if(ie&&ie.length>0){n("Change your Password for this name because is already exist");return}}const ye=new Date().getFullYear(),F=`${ye}/${ye+1}`;try{const{data:ie,error:P}=await re.from("athletes").select("id, national_id_number").eq("national_id_number",Y).eq("year",F);if(P)throw P;if(ie&&ie.length>0){n("An athlete with this National ID is already registered for this season.");return}}catch(ie){n(ie.message||String(ie));return}try{b(!0),j(!0);const ie=await Ge(),P=await Ee(Y,Wt,St),Q={last_name:Z,first_name:T,date_of_birth:z,place_of_birth:G,role:M,blood_type:ve,national_id_number:Y,password:ke,license_number:`ATH-${ye}-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0],photos_url:ie,nationality:oe,grade:Ne,renewal:P,confirmation:!1,genres:Me,categories:at,weight:Oe,league_id:ot||St,club_id:ht||Wt,year:F},{error:he}=await re.from("athletes").insert([Q]);he?(console.error("insert athlete error",he),alert("Error saving athlete: "+he.message)):(V(""),R(""),I(""),de(""),U(""),ue(""),se(""),be(""),q(""),me(""),Se(""),Ue(""),Ve(""),le(""),Le(null),window.location.reload())}catch(ie){console.error("handleSubmit error",ie),alert("Unexpected error: "+ie.message)}finally{j(!1),b(!1)}},ut=D=>{Xt(D.id),It({...D})},kt=()=>{Xt(null),It({})},X=async()=>{const D=Be(Te.date_of_birth,Te.categories);if(!D.isValid){alert(D.message);return}try{j(!0);const{error:xe}=await re.from("athletes").update({last_name:Te.last_name,first_name:Te.first_name,date_of_birth:Te.date_of_birth,place_of_birth:Te.place_of_birth,role:Te.role,blood_type:Te.blood_type,nationality:Te.nationality,grade:Te.grade,categories:Te.categories,weight:Te.weight,genres:Te.genres}).eq("id",wt);xe?alert("Update failed: "+xe.message):(await nt(),kt())}catch(xe){console.error("saveEdit error",xe),alert("Unexpected error: "+xe.message)}finally{j(!1)}},te=async D=>{const xe=new Date().toISOString().split("T")[0];if(D.registration_date!==xe){alert("You can only delete athletes the same day they were added.");return}if(window.confirm("Delete this athlete?"))try{const{error:ye}=await re.from("athletes").delete().eq("id",D.id);if(ye)throw ye;await nt()}catch(ye){console.error("deleteAthlete error",ye),alert("Error deleting athlete: "+ye.message)}},je=["Admin","Coach","Athlete"],ze=["Algerian","Tunisian"],Lt=["brown belt","black belt"],qt=async(D,xe)=>{try{const{error:ye}=await re.from("athletes").update({confirmation:!xe}).eq("id",D);if(ye)throw ye;$e(F=>F.map(ie=>ie.id===D?{...ie,confirmation:!xe}:ie))}catch(ye){n(`Failed to update athlete confirmation: ${ye.message}`)}},Xe=He.filter(D=>{var ye,F;const xe=(Je||"").toLowerCase();return(((ye=D.first_name)==null?void 0:ye.toLowerCase())??"").includes(xe)||(((F=D.last_name)==null?void 0:F.toLowerCase())??"").includes(xe)||(D.national_id_number??"").includes(xe)}),rr=D=>{if(!D||Object.keys(D).length===0){alert("No data available to export");return}L(D)},L=async D=>{let xe=null,ye=null;try{D.club_id&&(xe=(await Qn())[D.club_id]),D.league_id&&(ye=(await bi())[D.league_id])}catch(Ie){console.error("Error fetching names:",Ie)}const F=new Tt("portrait","mm","a4");F.setFontSize(18),F.setTextColor(40,40,40),F.text("Algerian Judo Federation",14,15);const ie=`Athlete Information - ${D.first_name} ${D.last_name}`;F.setFontSize(16),F.setTextColor(40,40,40),F.text(ie,14,30),F.setFontSize(10);const P=new Date().toLocaleString();if(F.text(`Generated: ${P}`,14,37),d)try{F.addImage(d,"PNG",170,10,25,25)}catch(Ie){console.error("Error adding logo to PDF:",Ie)}let Q=70;if(D.photos_url)try{const Ie=await W(D.photos_url),rt=Ie.startsWith("data:")?"PNG":"JPEG";F.addImage(Ie,rt,14,45,25,20),Q=70}catch(Ie){console.error("Error adding photo to PDF:",Ie);try{F.addImage(D.photos_url,"JPEG",14,45,25,20)}catch(rt){console.error("Fallback image addition also failed:",rt)}Q=70}F.setFontSize(12),D.confirmation?F.setTextColor(0,128,0):F.setTextColor(255,0,0);const he=D.confirmation?"CONFIRMED ":"NOT CONFIRMED ";F.text(he,160,50);const we=[["First Name",D.first_name||""],["Last Name",D.last_name||""],["Date of Birth",D.date_of_birth||""],["Place of Birth",D.place_of_birth||""],["National ID",D.national_id_number||""],["Nationality",D.nationality||""],["Blood Type",D.blood_type||""],["Grade",D.grade||""],["Role",D.role||""],["Gender",D.genres||""],["Category",D.categories||""],["Weight",D.weight||""],["License Number",D.license_number||""],["Registration Date",D.registration_date||""],["Year",D.year||""],["Renewal",D.renewal||""],["Club",xe||`Club ID: ${D.club_id}`],["League",ye||`League ID: ${D.league_id}`],["Confirmation",D.confirmation?"Confirmed":"Not Confirmed"]];pr(F,{head:[["Field","Value"]],body:we,startY:Q,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{fontSize:10},columnStyles:{0:{cellWidth:50},1:{cellWidth:120}}});const Ae=F.lastAutoTable.finalY||200;if(F.setFontSize(12),F.setTextColor(0,0,0),F.text("Medical certificate",14,Ae+10),F.setDrawColor(0),F.line(14,Ae+25,80,Ae+25),F.setFontSize(10),D.club_id||xe){const Ie=xe||`ID: ${D.club_id}`;F.text(`Club: ${Ie}`,14,Ae+40),F.text("Club Visa: _________________",14,Ae+50)}if(D.league_id||ye){const Ie=ye||`ID: ${D.league_id}`;F.text(`League: ${Ie}`,120,Ae+40),F.text("League Visa: _________________",120,Ae+50)}try{const Ie=JSON.stringify({id:D.id,name:`${D.first_name||""} ${D.last_name||""}`.trim(),license:D.license_number||"",club_id:D.club_id||"",league_id:D.league_id||"",confirmation:D.confirmation||"Unconfirmed"}),rt=await Si.toDataURL(Ie,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});F.addImage(rt,"PNG",170,Ae+55,15,15)}catch(Ie){console.error("Error generating QR code:",Ie)}F.save(`athlete_${D.first_name}_${D.last_name}_${D.id||"record"}.pdf`)},A=async()=>{if(!Xe||Xe.length===0){alert("No athletes data available to export");return}const D=new Tt("landscape","mm","a4"),xe=new Date().getFullYear(),ye=`${xe}/${xe+1}`;let F=Pe(D,m,Pt,bt);D.setFont("helvetica","bold"),D.setFontSize(14),D.setTextColor(220,53,69),D.text("Athletes - General Situation",D.internal.pageSize.getWidth()/2,F,{align:"center"}),D.setTextColor(0,0,0),F+=15,D.setFontSize(12),D.setFont("helvetica","bold"),D.text(`Year: ${ye}`,20,F),F+=10;const ie=Xe.map(P=>[ae(P.last_name||""),ae(P.first_name||""),ae(P.date_of_birth||""),ae(P.place_of_birth||""),ae(P.blood_type||""),ae(P.nationality||""),ae(P.grade||""),ae(P.genres||""),ae(P.categories||""),ae(P.weight||""),ae(P.national_id_number||""),P.confirmation?"Yes":"No",ae(P.license_number||"")]);pr(D,{startY:F,head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Gender","Category","Weight","NID","Confirmation","License #"]],body:ie,theme:"grid",headStyles:{fillColor:[40,40,40],textColor:[255,255,255],fontSize:6,fontStyle:"bold"},styles:{fontSize:5,overflow:"linebreak"},margin:{left:10,right:10},columnStyles:{0:{cellWidth:18},1:{cellWidth:18},2:{cellWidth:18},3:{cellWidth:18},4:{cellWidth:12},5:{cellWidth:18},6:{cellWidth:12},7:{cellWidth:12},8:{cellWidth:18},9:{cellWidth:12},10:{cellWidth:20},11:{cellWidth:15},12:{cellWidth:20}},didDrawPage:function(P){P.pageNumber>1&&Pe(D,m,Pt,bt)}}),D.save(`athletes_general_${ye}.pdf`)},K=async()=>{if(!Xe||Xe.length===0){alert("No athletes data available to export");return}const D=new Tt("landscape","mm","a4"),xe=D.internal.pageSize.getWidth(),ye=new Date().getFullYear(),F=new Date().toLocaleDateString();let ie={},P={};try{ie=await Qn(),P=await bi()}catch(rt){console.error("Error fetching club/league names:",rt)}const Q=()=>{if(D.setFontSize(10),D.setFont("helvetica","normal"),D.setTextColor(40,40,40),D.text(`Date: ${F}`,14,15),D.setFontSize(16),D.setFont("helvetica","bold"),D.setTextColor(40,40,40),D.text("Algerian Judo Federation",xe/2,15,{align:"center"}),d)try{D.addImage(d,"PNG",xe-40,5,25,25)}catch(rt){console.error("Error adding logo to PDF:",rt)}D.setFontSize(14),D.setFont("helvetica","normal"),D.setTextColor(40,40,40),D.text(`League: ${Pt||"Unknown League"}`,xe/2,30,{align:"center"}),D.setFontSize(14),D.setFont("helvetica","normal"),D.setTextColor(40,40,40),D.text(`Club: ${bt||"Unknown Club"}`,xe/2,37,{align:"center"}),D.setFontSize(14),D.setFont("helvetica","bold"),D.setTextColor(220,53,69),D.text("Athletes Members - Category Situation",xe/2,47,{align:"center"})},he=rt=>rt.sort((Bt,Ze)=>{const mt=new Date(Bt.date_of_birth||"1900-01-01"),it=new Date(Ze.date_of_birth||"1900-01-01");return mt-it}).map(Bt=>[ae(Bt.last_name||""),ae(Bt.first_name||""),ae(Bt.date_of_birth||""),ae(Bt.place_of_birth||""),ae(Bt.blood_type||""),ae(Bt.nationality||""),ae(Bt.grade||""),ae(Bt.genres||""),ae(Bt.categories||""),ae(Bt.weight||""),ae(Bt.national_id_number||""),Bt.confirmation?"Yes":"No",ae(Bt.license_number||"")]),we={};Xe.forEach(rt=>{const yt=rt.year||"Unknown Year",Bt=rt.club_id,Ze=Bt?ie[Bt]||`Club ID: ${Bt}`:"Unknown Club",mt=rt.categories||"Uncategorized",it=rt.genres||"Unspecified",$t=rt.weight||"Unspecified";we[yt]||(we[yt]={}),we[yt][Ze]||(we[yt][Ze]={}),we[yt][Ze][mt]||(we[yt][Ze][mt]={}),we[yt][Ze][mt][it]||(we[yt][Ze][mt][it]={}),we[yt][Ze][mt][it][$t]||(we[yt][Ze][mt][it][$t]=[]),we[yt][Ze][mt][it][$t].push(rt)}),Q();let Ae=50,Ie=!0;for(const[rt,yt]of Object.entries(we)){Ae>180&&!Ie&&(D.addPage(),Q(),Ae=50),D.setFontSize(13),D.setTextColor(0,0,0),D.setFont(void 0,"bold"),D.text(`Year: ${rt}`,14,Ae),Ae+=15;for(const[Bt,Ze]of Object.entries(yt))for(const[mt,it]of Object.entries(Ze)){Ae>210&&(D.addPage(),Q(),Ae=50,D.setFontSize(13),D.setTextColor(0,0,0),D.setFont(void 0,"bold"),D.text(`Year: ${rt}`,14,Ae),Ae+=15,D.setFontSize(12),D.text(`  Club: ${Bt}`,20,Ae),Ae+=12),D.setFontSize(11),D.setTextColor(0,0,0),D.setFont(void 0,"bold"),D.text(`    Club: ${Bt} - Category: ${mt}`,26,Ae),Ae+=10;for(const[$t,er]of Object.entries(it)){Ae>220&&(D.addPage(),Q(),Ae=50,D.setFontSize(13),D.setTextColor(0,0,0),D.setFont(void 0,"bold"),D.text(`Year: ${rt}`,14,Ae),Ae+=15,D.setFontSize(11),D.text(`    Club: ${Bt} - Category: ${mt}`,26,Ae),Ae+=10);for(const[nr,mr]of Object.entries(er)){Ae>230&&(D.addPage(),Q(),Ae=50,D.setFontSize(13),D.setTextColor(0,0,0),D.setFont(void 0,"bold"),D.text(`Year: ${rt}`,14,Ae),Ae+=15,D.setFontSize(11),D.text(`    Club: ${Bt} - Category: ${mt}`,26,Ae),Ae+=10),D.setFontSize(10),D.setTextColor(0,0,0),D.setFont(void 0,"bold"),D.text(`      Gender: ${$t} - Weight: ${nr}`,32,Ae),Ae+=8;const sr=he(mr);pr(D,{startY:Ae,head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Gender","Category","Weight","NID","Confirmation","License #"]],body:sr,theme:"grid",headStyles:{fillColor:[40,40,40],textColor:[255,255,255],fontSize:6},styles:{fontSize:5,overflow:"linebreak"},margin:{left:44},columnStyles:{0:{cellWidth:18},1:{cellWidth:18},2:{cellWidth:18},3:{cellWidth:18},4:{cellWidth:12},5:{cellWidth:18},6:{cellWidth:12},7:{cellWidth:12},8:{cellWidth:18},9:{cellWidth:12},10:{cellWidth:20},11:{cellWidth:15},12:{cellWidth:20}}}),Ae=D.lastAutoTable.finalY+8,Ie=!1}Ae+=3}Ae+=5}Ae+=12}D.save(`athletes_hierarchical_${ye}.pdf`)};v.useEffect(()=>{const D=setTimeout(()=>{},300);return()=>clearTimeout(D)},[Je]);const ae=D=>D?String(D).replace(/=U/g,"").replace(/<a/g,"").replace(/=Ud/g,"").replace(/-/g,"").replace(/-d/g,"").replace(/<a/g,"").replace(/</g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/% % %/g,"").replace(/%%%/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/%+/g,"").replace(/\s*%\s*/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/ /g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").trim():"",Pe=(D,xe,ye,F)=>{const ie=D.internal.pageSize.getWidth();if(d)try{D.addImage(d,"PNG",ie-40,15,25,25)}catch(he){console.warn("Could not add federation logo:",he)}const P=new Date().toLocaleDateString();D.setFontSize(10),D.setFont("helvetica","normal"),D.text(`Print Date: ${P}`,15,20),D.setFontSize(16),D.setFont("helvetica","bold"),D.text(ae(xe||"Algerian Judo Federation"),ie/2,25,{align:"center"});let Q=40;return ye&&(D.setFontSize(12),D.setFont("helvetica","normal"),D.text(`League: ${ae(ye)}`,ie/2,Q,{align:"center"}),Q+=15),F&&(D.setFontSize(12),D.setFont("helvetica","normal"),D.text(`Club: ${ae(F)}`,ie/2,Q,{align:"center"}),Q+=15),Q+2},tt=async()=>{try{let D=[];if(ht){const{data:he,error:we}=await re.from("athletes").select("*").eq("club_id",Number(ht));if(we)throw we;D=he||[]}else if(ot){const{data:he,error:we}=await re.from("athletes").select("*").eq("league_id",Number(ot));if(we)throw we;D=he||[]}else if(D=Array.isArray(He)&&He.length?He:Array.isArray(tr)?tr:[],!D||D.length===0){const{data:he,error:we}=await re.from("athletes").select("*");if(we)throw we;D=he||[]}if(!D||D.length===0){alert("No athletes found");return}const xe=new Tt("landscape");let ye=Pe(xe,m,Pt,bt);xe.setFontSize(14),xe.setFont("helvetica","bold"),xe.setTextColor(255,0,0),xe.text("Athletes - Grade and Role Situation",xe.internal.pageSize.getWidth()/2,ye,{align:"center"}),xe.setTextColor(0,0,0),ye+=20,xe.setFontSize(12),xe.setFont("helvetica","bold"),xe.text("SECTION GRADE",20,ye),ye+=15;const F={};D.forEach(he=>{const we=he.year||"Unknown Year",Ae=he.grade||"Unknown Grade";F[we]||(F[we]={}),F[we][Ae]||(F[we][Ae]=[]),F[we][Ae].push(he)});const ie=Object.keys(F).sort();for(const he of ie){const we=F[he];xe.setFontSize(14),xe.setFont("helvetica","bold"),xe.setTextColor(0,0,0),xe.text(`Year: ${he}`,20,ye),ye+=15;const Ae=Object.keys(we).sort();for(const Ie of Ae){const yt=we[Ie].sort((Ze,mt)=>{const it=new Date(Ze.date_of_birth||"1900-01-01"),$t=new Date(mt.date_of_birth||"1900-01-01");return it-$t});xe.setFontSize(12),xe.setFont("helvetica","bold"),xe.text(`Grade: ${Ie}`,30,ye),ye+=10;const Bt=yt.map(Ze=>[ae(Ze.last_name||""),ae(Ze.first_name||""),ae(Ze.date_of_birth||""),ae(Ze.place_of_birth||""),ae(Ze.blood_type||""),ae(Ze.nationality||""),ae(Ze.genres||""),ae(Ze.categories||""),ae(Ze.weight||""),ae(Ze.national_id_number||""),Ze.confirmation?"Yes":"No",ae(Ze.license_number||"")]);pr(xe,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Gender","Category","Weight","NID","Confirmation","License #"]],body:Bt,startY:ye,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10},didDrawPage:function(Ze){Ze.pageNumber>1&&Pe(xe,m,Pt,bt)}}),ye=xe.lastAutoTable.finalY+15,ye>xe.internal.pageSize.getHeight()-80&&(xe.addPage(),ye=Pe(xe,m,Pt,bt),ye+=20)}ye+=10}const P=new Date().getFullYear(),Q=Pt||bt||"athletes";xe.save(`${ae(Q)}_grade_role_athletes_${P}.pdf`)}catch(D){console.error("Error exporting grade role PDF:",D),alert("Error exporting PDF. Please try again.")}};return v.useEffect(()=>{Wt&&St&&nt()},[Wt,St]),a.jsxs("div",{className:"app-container",children:[N&&a.jsx(rn,{}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[d?a.jsx("img",{src:d,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:m||"Algerian Judo Federation"})]})})}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{children:"Welcome to the Federation Account"}),a.jsx("p",{children:"This is the Federation Account page."}),a.jsxs("div",{className:"form-table-wrapper",children:[a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx(oc,{"data-id":"1"}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:()=>e("/MemberListPageP"),children:"The Member List Add"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:D=>{br(D.currentTarget),e("/TheLeagueList-Add",{state:{...t,league_id:(t==null?void 0:t.league_id)??ot??"",league_name:(t==null?void 0:t.league_name)??"",league_logo:(t==null?void 0:t.league_logo)??""}})},children:"The League List Add"}),a.jsx("button",{className:"primary-btn","data-id":"4",onClick:D=>{br(D.currentTarget),e("/TheClubListAdd-Fed")},children:"The Club List Add"}),a.jsx("button",{className:"primary-btn","data-id":"5",onClick:D=>{br(D.currentTarget),e("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),a.jsx("h2",{className:"form-title",children:"Add Athlete"}),a.jsxs("form",{onSubmit:Mt,className:"form-grid",children:[a.jsxs("label",{children:["Last Name *",a.jsx("input",{value:Z,onChange:D=>V(D.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{value:T,onChange:D=>R(D.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:z,onChange:D=>I(D.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{value:G,onChange:D=>de(D.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:oe,onChange:D=>me(D.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),ze.map((D,xe)=>a.jsx("option",{value:D,children:D},xe))]})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:Ne,onChange:D=>Se(D.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Lt.map((D,xe)=>a.jsx("option",{value:D,children:D},xe))]})]}),a.jsxs("label",{children:["Genres *",a.jsxs("select",{value:Me,onChange:D=>Ue(D.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Men",children:"Men"}),a.jsx("option",{value:"Women",children:"Women"})]})]}),a.jsxs("label",{children:["Categories *",a.jsxs("select",{value:at,onChange:D=>Ve(D.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Benjamins",children:"Benjamins"}),a.jsx("option",{value:"Minimes",children:"Minimes"}),a.jsx("option",{value:"Cadets",children:"Cadets"}),a.jsx("option",{value:"Juniors",children:"Juniors"}),a.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),a.jsx("option",{value:"Seniors",children:"Seniors"}),a.jsx("option",{value:"Veterans",children:"Veterans"}),a.jsx("option",{value:"Cadets By Team",children:"Cadets By Team"}),a.jsx("option",{value:"Juniors By Team",children:"Juniors By Team"}),a.jsx("option",{value:"Seniors By Team",children:"Seniors By Team"}),a.jsx("option",{value:"Cadets By Mixed Team",children:"Cadets By Mixed Team"}),a.jsx("option",{value:"Juniors By Mixed Team",children:"Juniors By Mixed Team"}),a.jsx("option",{value:"Seniors By Mixed Team",children:"Seniors By Mixed Team"})]})]}),a.jsxs("label",{children:["Weight *",a.jsxs("select",{value:Oe,onChange:D=>le(D.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Ct.map((D,xe)=>a.jsx("option",{value:D,children:D},xe))]})]}),a.jsxs("label",{children:["National ID Number *",a.jsx("input",{value:Y,onChange:D=>se(D.target.value.replace(/\D/g,"")),maxLength:18,required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:ve,onChange:D=>ue(D.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:ke,onChange:D=>be(D.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:E,onChange:D=>q(D.target.value),required:!0})]}),a.jsxs("label",{children:["League *",a.jsxs("select",{value:ot,onChange:D=>{Rt(D.target.value),Ye("")},required:!0,children:[a.jsx("option",{value:"",children:"-- Select League --"}),jt.map(D=>a.jsx("option",{value:D.id,children:D.name_league},D.id))]})]}),a.jsxs("label",{children:["Club *",a.jsxs("select",{value:ht,onChange:D=>Ye(D.target.value),disabled:!ot,required:!0,children:[a.jsx("option",{value:"",children:"-- Select Club --"}),pt.map(D=>a.jsx("option",{value:D.id,children:D.name_club},D.id))]})]}),a.jsxs("label",{children:["Upload Athlete Photo *",a.jsx("input",{type:"file",onChange:D=>{var xe;return Le(((xe=D.target.files)==null?void 0:xe[0])??null)},required:!0})]}),a.jsx("div",{className:"btn-row",children:a.jsx("button",{type:"submit",className:"primary-b",children:"Save Athlete"})}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),a.jsx("h2",{className:"form-title",children:"List Of Athletes"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("label",{children:["League:",a.jsxs("select",{value:ot,onChange:D=>Rt(D.target.value),children:[a.jsx("option",{value:"",children:"-- All Leagues --"}),jt.map(D=>a.jsx("option",{value:D.id,children:D.name_league},D.id))]})]}),a.jsxs("label",{children:["Club:",a.jsxs("select",{value:ht,onChange:D=>Ye(D.target.value),disabled:!ot,children:[a.jsx("option",{value:"",children:"-- All Clubs --"}),pt.map(D=>a.jsx("option",{value:D.id,children:D.name_club},D.id))]})]}),a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"search Athlete"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:Je,onChange:D=>vt(D.target.value)})})]}),a.jsxs("div",{className:"table-container",ref:ce,children:[a.jsxs("div",{style:{marginBottom:8,fontSize:14},children:[a.jsx("strong",{children:"Selected:"}),ot?` League: ${Pt||"ID "+ot}`:" All Leagues",ot&&!ht?" | All Clubs in League":"",ht?` | Club: ${bt||"ID "+ht}`:""]}),a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{style:{backgroundColor:"#000",color:"#fff"},children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"Genres"}),a.jsx("th",{children:"Categories"}),a.jsx("th",{children:"Weight"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photos"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"conf_request"}),a.jsx("th",{children:"Club ID"}),a.jsx("th",{children:"League ID"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Xe.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:22,children:"No athletes found for this club/league."})}):Xe.map(D=>a.jsxs("tr",{onDoubleClick:()=>rr(D),style:{cursor:"pointer"},children:[a.jsx("td",{children:wt===D.id?a.jsx("input",{value:Te.last_name||"",onChange:xe=>handleChange(xe,"last_name")}):D.last_name}),a.jsx("td",{children:wt===D.id?a.jsx("input",{value:Te.first_name||"",onChange:xe=>It({...Te,first_name:xe.target.value})}):D.first_name}),a.jsx("td",{children:wt===D.id?a.jsx("input",{type:"date",value:Te.date_of_birth||"",onChange:xe=>It({...Te,date_of_birth:xe.target.value})}):D.date_of_birth}),a.jsx("td",{children:wt===D.id?a.jsx("input",{value:Te.place_of_birth||"",onChange:xe=>It({...Te,place_of_birth:xe.target.value})}):D.place_of_birth}),a.jsx("td",{children:wt===D.id?a.jsxs("select",{value:Te.role||"",onChange:xe=>It({...Te,role:xe.target.value}),children:[a.jsx("option",{value:"",children:"-- Select --"}),je.map((xe,ye)=>a.jsx("option",{value:typeof xe=="object"?xe.club_role??xe.name??"":xe,children:typeof xe=="object"?xe.club_role??xe.name??"":xe},ye))]}):D.role}),a.jsx("td",{children:wt===D.id?a.jsxs("select",{value:Te.blood_type||"",onChange:xe=>It({...Te,blood_type:xe.target.value}),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):D.blood_type}),a.jsx("td",{children:D.national_id_number}),a.jsx("td",{children:wt===D.id?a.jsxs("select",{value:Te.nationality||"",onChange:xe=>It({...Te,nationality:xe.target.value}),children:[a.jsx("option",{value:"",children:"-- Select --"}),ze.map((xe,ye)=>a.jsx("option",{value:xe,children:xe},ye))]}):D.nationality}),a.jsx("td",{children:wt===D.id?a.jsxs("select",{value:Te.grade||"",onChange:xe=>It({...Te,grade:xe.target.value}),children:[a.jsx("option",{value:"",children:"-- Select --"}),Lt.map((xe,ye)=>a.jsx("option",{value:xe,children:xe},ye))]}):D.grade}),a.jsx("td",{children:D.renewal}),a.jsx("td",{children:D.year}),a.jsx("td",{children:wt===D.id?a.jsxs("select",{value:Te.genres||"",onChange:xe=>{It({...Te,genres:xe.target.value,weight:""})},children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Men",children:"Men"}),a.jsx("option",{value:"Women",children:"Women"})]}):D.genres}),a.jsx("td",{children:wt===D.id?a.jsxs("select",{value:Te.categories||"",onChange:xe=>{It({...Te,categories:xe.target.value,weight:""})},children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"Benjamins",children:"Benjamins"}),a.jsx("option",{value:"Minimes",children:"Minimes"}),a.jsx("option",{value:"Cadets",children:"Cadets"}),a.jsx("option",{value:"Juniors",children:"Juniors"}),a.jsx("option",{value:"Hopefuls",children:"Hopefuls"}),a.jsx("option",{value:"Seniors",children:"Seniors"}),a.jsx("option",{value:"Veterans",children:"Veterans"})]}):D.categories}),a.jsx("td",{children:wt===D.id?a.jsxs("select",{value:Te.weight||"",onChange:xe=>It({...Te,weight:xe.target.value}),disabled:!Te.genres||!Te.categories,children:[a.jsx("option",{value:"",children:"-- Select --"}),Ct.map((xe,ye)=>a.jsx("option",{value:xe,children:xe},ye))]}):D.weight}),a.jsx("td",{children:D.license_number}),a.jsx("td",{children:D.registration_date}),a.jsx("td",{children:D.photos_url?a.jsx("img",{src:D.photos_url,alt:`${D.first_name} ${D.last_name}`,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"8px"}}):"No Photo"}),a.jsx("td",{children:D.confirmation?"":""}),a.jsx("td",{children:D.confirmation_request?"conf_request":"conf_Not_request"}),a.jsx("td",{children:D.club_id}),a.jsx("td",{children:D.league_id}),a.jsx("td",{children:wt===D.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-S",onClick:X,children:"Save"}),a.jsx("button",{className:"secondary-btn",onClick:kt,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-M",onClick:()=>ut(D),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>te(D.id),children:"Delete"}),a.jsx("button",{className:D.confirmation?"cancel-btn":"confirm-btn",disabled:(D.confirmation_request?"conf_request":"conf_Not_request")!="conf_request",onClick:()=>{if((D.confirmation_request?"conf_request":"conf_Not_request")!="conf_request"){n("you not confirme because is not requested");return}qt(D.id,D.confirmation)},children:D.confirmation?"Cancel Confirmation":"Confirm"})]})})]},D.id))})]})]}),a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:A,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:K,children:"Export by Category"}),a.jsx("button",{className:"primary-b",onClick:tt,children:"Export by Grade PDF"})]})]}),r&&a.jsx(An,{error:r.message||r,onClose:()=>n("")}),i&&a.jsx(In,{success:i,onClose:()=>s("")}),S&&a.jsx($i,{message:"Processing athlete data..."}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function s8(){v.useEffect(()=>{ei()},[]);const[t,e]=v.useState([]),[r,n]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,g]=v.useState(""),[m,f]=v.useState(""),[x,w]=v.useState(""),[N,b]=v.useState(""),[S,j]=v.useState(""),[C,$]=v.useState(null),[Z,V]=v.useState(null),[T,R]=v.useState(""),[z,I]=v.useState(""),[G,de]=v.useState(""),[M,U]=v.useState(""),[ve,ue]=v.useState(!1),[Y,se]=v.useState(!1),[ke,be]=v.useState(null),[E,q]=v.useState({}),[oe,me]=v.useState([]),[Ne,Se]=v.useState(null),[Ce,Le]=v.useState(!0),[Me,Ue]=v.useState(null),[at,Ve]=v.useState(""),[Oe,le]=v.useState(null),[Ct,Et]=v.useState("Algerian Judo Federation"),[He,$e]=v.useState([]),[pt,ct]=v.useState(""),jt=Ur(),At=Xn();v.useEffect(()=>{(async()=>{const{data:Ee,error:Ge}=await re.from("nameleague").select("*");!Ge&&Ee&&me(Ee),Le(!1)})()},[]),v.useEffect(()=>{(async()=>{const{data:Ee,error:Ge}=await re.from("leaguerole").select("*");!Ge&&Ee&&$e(Ee)})()},[]),v.useEffect(()=>{(async()=>{if(!M){Le(!1);return}const{data:Ee,error:Ge}=await re.from("league_members").select("*").eq("league_id",Number(M));Ge?Ue(`Error fetching members: ${Ge.message}`):e(Ee||[]),Le(!1)})()},[M]);const Wt=async()=>{try{Le(!0),Ue(null);const{data:W,error:Ee}=await re.from("league_members").select("*").order("id",{ascending:!1});Ee?Ue(Ee):e(W||[])}catch(W){Ue(W)}finally{Le(!1)}};v.useEffect(()=>{Wt()},[]),v.useEffect(()=>{(async()=>{const{data:Ee,error:Ge}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);!Ge&&Ee&&Ee.length>0&&le(st(Ee[0].logo_url)||Ee[0].logo_url)})()},[]);const st=W=>W?W.startsWith("http")?W:`${re.storageUrl}/object/public/logos/${W}`:null,St=(Array.isArray(t)?t:[]).filter(W=>{if(M&&String(W.league_id)!==String(M))return!1;const Ee=(pt||"").trim().toLowerCase();return Ee?[W.first_name,W.last_name,W.national_id_number,W.club_name,W.role,W.grade].filter(Be=>Be!=null).some(Be=>String(Be).toLowerCase().includes(Ee)):!0}),zt=W=>{const Ee=W.registration||W.registration_date||"";return[et(W.last_name||""),et(W.first_name||""),et(W.date_of_birth||""),et(W.place_of_birth||""),et(W.role||""),et(W.blood_type||""),et(W.nationality||""),et(W.grade||""),et(W.holder_of||""),et(W.national_id_number||""),et(W.renewal||""),et(W.license_number||""),et(Ee),W.confirmation?"Yes":"No",et(W.password||""),String(W.league_id||"")]},bt=W=>{const Ee=W.internal.pageSize.width;W.internal.pageSize.height;try{Oe?W.addImage(Oe,"PNG",Ee-50,10,30,30):Oi&&W.addImage(Oi,"PNG",Ee-50,10,30,30)}catch(Be){console.warn("Could not add logo to PDF header:",Be)}const Ge=new Date().toLocaleDateString();return W.setFontSize(10),W.setFont("helvetica","normal"),W.text(`Print Date: ${Ge}`,14,18),W.setFontSize(16),W.setFont("helvetica","bold"),W.text("Algerian Judo Federation",Ee/2,24,{align:"center"}),40},Dt=W=>[et(W.last_name||""),et(W.first_name||""),et(W.date_of_birth||""),et(W.place_of_birth||""),et(W.blood_type||""),et(W.nationality||""),et(W.grade||""),et(W.role||""),et(W.holder_of||""),et(W.national_id_number||""),et(W.renewal||""),W.confirmation?"Yes":"No",et(W.license_number||"")],Pt=async()=>{const W=Number(M);try{let Ee=Array.isArray(t)?t.slice():[];if(W&&!isNaN(W)&&(Ee=Ee.filter(te=>String(te.league_id)===String(W))),!Ee||Ee.length===0){alert("No members found");return}const Ge=new Tt("landscape"),Be=te=>{const je=oe.find(ze=>String(ze.id)===String(te));return et((je==null?void 0:je.name_league)||`League ${te}`)},nt=["Last","First","DOB","POB","Role","Blood","Nationality","Grade","Holder Of","NID","Renewal","License #","Registration","Confirmation","Password","League ID"],Mt={};Ee.forEach(te=>{const je=te.league_id||"Unknown League";Mt[je]||(Mt[je]=[]),Mt[je].push(te)});const ut=Object.keys(Mt);ut.forEach((te,je)=>{let ze=bt(Ge);Ge.setFontSize(14),Ge.setFont("helvetica","bold"),Ge.setTextColor(255,0,0),Ge.text("League Members - General Situation",Ge.internal.pageSize.getWidth()/2,ze,{align:"center"}),Ge.setTextColor(0,0,0),ze+=20;const Lt=Be(te);Ge.setFontSize(12),Ge.setFont("helvetica","bold"),Ge.text(`${Lt}`,14,ze),ze+=8;const qt=Mt[te],Xe={};qt.forEach(L=>{const A=L.year?String(L.year):"Unknown Year";Xe[A]||(Xe[A]=[]),Xe[A].push(L)});const rr=Object.keys(Xe).sort();rr.forEach((L,A)=>{Ge.setFontSize(11),Ge.setFont("helvetica","bold"),Ge.text(`Year: ${L}`,14,ze),ze+=8;const K=Xe[L];pr(Ge,{head:[nt],body:K.map(zt),startY:ze,styles:{fontSize:8},headStyles:{fillColor:[0,128,0],textColor:[255,255,255]},margin:{left:14,right:10}}),ze=Ge.lastAutoTable.finalY+10,ze>Ge.internal.pageSize.getHeight()-50&&A<rr.length-1&&(Ge.addPage(),ze=bt(Ge),Ge.setFontSize(14),Ge.setFont("helvetica","bold"),Ge.setTextColor(255,0,0),Ge.text("League Members - General Situation",Ge.internal.pageSize.getWidth()/2,ze,{align:"center"}),Ge.setTextColor(0,0,0),ze+=20,Ge.setFontSize(12),Ge.setFont("helvetica","bold"),Ge.text(`${Lt}`,14,ze),ze+=8)}),je<ut.length-1&&Ge.addPage()});const kt=new Date().getFullYear(),X=!W||isNaN(W)?`league_all_general_members_${kt}.pdf`:`league_general_members_${kt}.pdf`;Ge.save(X)}catch(Ee){console.error("Error exporting general PDF:",Ee),alert("Error exporting PDF. Please try again.")}},Ot=async()=>{Le(!0),Ue(null);try{const{data:W,error:Ee}=await re.from("league_members").select("*");if(Ee)throw Ee;if(!W||W.length===0){alert("No league members found"),Le(!1);return}const Ge={};W.forEach(X=>{const te=X.league_id||"Unknown League";Ge[te]||(Ge[te]=[]),Ge[te].push(X)});const Be=new Tt("landscape"),nt=X=>{const te=oe.find(je=>String(je.id)===String(X));return et((te==null?void 0:te.name_league)||`League ${X}`)},Mt=(X,te)=>{const je=nt(X);let ze=bt(Be);Be.setFontSize(14),Be.setFont("helvetica","bold"),Be.setTextColor(255,0,0),Be.text("League Members - Grade and Role Situation",Be.internal.pageSize.getWidth()/2,ze,{align:"center"}),Be.setTextColor(0,0,0),ze+=20,Be.setFontSize(12),Be.setFont("helvetica","bold"),Be.text(`${je}`,14,ze),ze+=12;const Lt={};te.forEach(Xe=>{const rr=Xe.club_name||"No Club";Lt[rr]||(Lt[rr]=[]),Lt[rr].push(Xe)});const qt=Object.keys(Lt).sort();qt.forEach((Xe,rr)=>{const L=Lt[Xe],A={};L.forEach(ae=>{const Pe=ae.year||"Unknown Year";A[Pe]||(A[Pe]=[]),A[Pe].push(ae)}),Object.keys(A).sort().forEach((ae,Pe)=>{Be.setFontSize(12),Be.setFont("helvetica","bold"),Be.text(`Year ${et(ae)}`,14,ze),ze+=10;const tt=A[ae],D={};tt.forEach(ye=>{const F=ye.role||"No Role";D[F]||(D[F]=[]),D[F].push(ye)}),Object.entries(D).forEach(([ye,F])=>{F.length&&(Be.setFontSize(11),Be.setFont("helvetica","bold"),Be.text(`Role: ${et(ye)}`,18,ze),ze+=6,pr(Be,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:F.map(Dt),startY:ze,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:10}}),ze=Be.lastAutoTable.finalY+12,ze>160&&(Be.addPage(),ze=bt(Be),Be.setFontSize(12),Be.setFont("helvetica","bold"),Be.text(`${je}`,14,ze),ze+=12,Be.setFontSize(12),Be.setFont("helvetica","bold"),Be.text(`Year ${et(ae)}`,14,ze),ze+=10))});const xe={};tt.forEach(ye=>{const F=ye.grade||"No Grade";xe[F]||(xe[F]=[]),xe[F].push(ye)}),Object.entries(xe).forEach(([ye,F])=>{F.length&&(Be.setFontSize(11),Be.setFont("helvetica","bold"),Be.text(`Grade: ${et(ye)}`,18,ze),ze+=6,pr(Be,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Role","Holder Of","NID","Renewal","Confirmation","License #"]],body:F.map(Dt),startY:ze,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:14,right:10}}),ze=Be.lastAutoTable.finalY+12,ze>160&&(Be.addPage(),ze=bt(Be),Be.setFontSize(12),Be.setFont("helvetica","bold"),Be.text(`${je}`,14,ze),ze+=12,Be.setFontSize(12),Be.setFont("helvetica","bold"),Be.text(`${et(Xe)}   Year ${et(ae)}`,14,ze),ze+=10))}),ze+=8}),ze+=10,ze>160&&rr<qt.length-1&&(Be.addPage(),ze=bt(Be),Be.setFontSize(12),Be.setFont("helvetica","bold"),Be.text(`${je}`,14,ze),ze+=12)})},ut=Object.keys(Ge);if(ut.length===0){alert("No league members found"),Le(!1);return}ut.forEach((X,te)=>{te>0&&Be.addPage(),Mt(X,Ge[X])});const kt=new Date().getFullYear();Be.save(`league_grade_role_all_leagues_${kt}.pdf`)}catch(W){Ue(`Error exporting grade role PDF: ${W.message}`)}finally{Le(!1)}},wt=W=>{if(!W||Object.keys(W).length===0){alert("No data available to export");return}Te(W)};function Xt(W){return new Promise((Ee,Ge)=>{Gi(W,Be=>{if(Be.type==="error")console.warn("EXIF processing failed, using original image:",W),Ee(W);else try{const nt=Be.toDataURL("image/png");Ee(nt)}catch(nt){console.warn("Canvas conversion failed, using original image:",nt),Ee(W)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const Te=async W=>{let Ee=null,Ge=null;try{W.club_id&&(Ee=(await Qn())[W.club_id]),W.league_id&&(Ge=(await bi())[W.league_id])}catch(je){console.error("Error fetching names:",je)}const Be=new Tt("portrait","mm","a4");Be.setFontSize(18),Be.setTextColor(40,40,40),Be.text("Algerian Judo Federation",14,15);const nt=`League Member Information - ${W.first_name} ${W.last_name}`;Be.setFontSize(16),Be.setTextColor(40,40,40),Be.text(nt,14,30),Be.setFontSize(10);const Mt=new Date().toLocaleString();if(Be.text(`Generated: ${Mt}`,14,37),Oe)try{Be.addImage(Oe,"PNG",170,10,25,25)}catch(je){console.error("Error adding logo to PDF:",je)}let ut=70;if(W.photo_url)try{const je=await Xt(W.photo_url),ze=je.startsWith("data:")?"PNG":"JPEG";Be.addImage(je,ze,14,45,25,20),ut=70}catch(je){console.error("Error adding photo to PDF:",je);try{Be.addImage(W.photo_url,"JPEG",14,45,25,20)}catch(ze){console.error("Fallback image addition also failed:",ze)}ut=70}Be.setFontSize(12),W.confirmation?Be.setTextColor(0,128,0):Be.setTextColor(255,0,0);const kt=W.confirmation?"CONFIRMED ":"NOT CONFIRMED ";Be.text(kt,160,50);const X=[["First Name",W.first_name||""],["Last Name",W.last_name||""],["Date of Birth",W.date_of_birth||""],["Place of Birth",W.place_of_birth||""],["National ID",W.national_id_number||""],["Nationality",W.nationality||""],["Blood Type",W.blood_type||""],["Grade",W.grade||""],["Role",W.role||""],["License Number",W.license_number||""],["Registration Date",W.registration_date||""],["Year",W.year||""],["Renewal",W.renewal||""]];pr(Be,{head:[["Field","Value"]],body:X,startY:ut,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const te=Be.lastAutoTable.finalY||200;if(Be.setFontSize(12),Be.setTextColor(0,0,0),Be.text("Medical certificate",14,te+20),Be.setDrawColor(0),Be.line(14,te+40,80,te+40),Be.setFontSize(10),W.league_id||Ge){const je=Ge||`ID: ${W.league_id}`;Be.text(`League: ${je}`,120,te+60),Be.text("League Visa: _________________",120,te+70)}try{const je=JSON.stringify({id:W.id,name:`${W.first_name||""} ${W.last_name||""}`.trim(),license:W.license_number||"",club_id:W.club_id||"",league_id:W.league_id||"",confirmation:W.confirmation||"Unconfirmed"}),ze=await Si.toDataURL(je,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});Be.addImage(ze,"PNG",175,te+75,15,15)}catch(je){console.error("Error generating QR code:",je)}Be.save(`member_${W.first_name}_${W.last_name}.pdf`)},It=async()=>{if(!C||C.size===0)return"";const W=C.name.split(".").pop(),Ee=`photo-${Date.now()}.${W}`,{error:Ge}=await re.storage.from("logos").upload(Ee,C);if(Ge)return Ue(`Photo upload failed: ${Ge.message}`),"";const{data:Be}=re.storage.from("logos").getPublicUrl(Ee);return(Be==null?void 0:Be.publicUrl)??""},ot=async()=>{if(!Z)return null;const W=Z.name.split(".").pop(),Ge=`${Date.now()}.${W}`,{error:Be}=await re.storage.from("logos").upload(Ge,Z);if(Be)return Ue(`Upload failed: ${Be.message}`),null;const{data:nt}=re.storage.from("logos").getPublicUrl(Ge);return(nt==null?void 0:nt.publicUrl)??null},Rt=async(W,Ee,Ge,Be,nt=null)=>{let Mt=re.from("league_members").select("id").eq("national_id_number",W).eq("league_id",Ee).eq("role",Ge).eq("year",Be);nt&&(Mt=Mt.neq("id",nt));const{data:ut}=await Mt;if(ut&&ut.length>0)throw new Error("This member is already registered for the current season with the same role and league.");let kt=re.from("league_members").select("*",{count:"exact",head:!0}).eq("national_id_number",W).eq("league_id",Ee).eq("role",Ge);nt&&(kt=kt.neq("id",nt));const{count:X}=await kt;return(X||0)+1},ht=async W=>{var X;if(W.preventDefault(),Ue(""),Ve(""),ue(!0),!i||!r||!o||!c||!d||!M||!N||!S||!C){const te=[];i||te.push("First Name"),r||te.push("Last Name"),o||te.push("Date of Birth"),c||te.push("Place of Birth"),d||te.push("League Role"),M||te.push("League (in the table is league_id)"),N||te.push("Password"),S||te.push("Confirm Password"),C||te.push("Member Photo"),Ue(`Please fill in the following required fields: ${te.join(", ")}`),ue(!1);return}const Ee=Number(M);if(!Ee||isNaN(Ee)){Ue("Please select a valid league."),ue(!1);return}if(x.length!==18){Ue("National ID must be exactly 18 digits."),ue(!1);return}if(N!==S){Ue("Passwords do not match."),ue(!1);return}const Ge=new Date(o),Be=new Date,nt=Be.getFullYear()-Ge.getFullYear(),Mt=Be.getMonth()-Ge.getMonth(),ut=Be.getDate()-Ge.getDate();if((Mt<0||Mt===0&&ut<0?nt-1:nt)<=21){Ue("Member must be more than 21 years old to register."),ue(!1);return}try{const{data:te,error:je}=await re.from("league_members").select("id, last_name, password").eq("last_name",r).eq("password",N);if(je){Ue(`Failed to validate member data: ${je.message}`),ue(!1);return}if(te&&te.length>0){Ue(`A member with the last name "${r}" and this password already exists. Please change the password.`),ue(!1);return}}catch(te){Ue(`Validation error: ${te.message}`),ue(!1);return}try{const te=await It(),je=await ot(),ze=new Date().getFullYear(),Lt=`${ze}/${ze+1}`,qt=((X=He.find(A=>A.id===parseInt(d)))==null?void 0:X.league_role)||"",Xe=await Rt(x,M,qt,Lt),rr={last_name:r,first_name:i,date_of_birth:o,place_of_birth:c,role:qt,blood_type:m,national_id_number:x,password:N,license_number:"LIC-"+Date.now(),registration_date:new Date().toISOString().split("T")[0],logo_url:je,league_id:Ee,photo_url:te,renewal:Xe,year:Lt,nationality:T,holder_of:z,grade:G,confirmation:!1},{error:L}=await re.from("league_members").insert([rr]);if(L){Ue(`Failed to save member: ${L.message}`),ue(!1);return}if(je&&M&&await re.from("nameleague").update({logo_url:je}).eq("id",M),Ve(`Member "${i} ${r}" has been successfully added to the League!`),n(""),s(""),l(""),u(""),w(""),b(""),j(""),g(""),f(""),U(""),$(null),R(""),I(""),de(""),M){const{data:A}=await re.from("league_members").select("*").eq("league_id",Number(M));e(A||[]);const{data:K}=await re.from("nameleague").select("logo_url").eq("id",M).single();K!=null&&K.logo_url&&Se(st(K.logo_url))}ue(!1)}catch(te){Ue(`Unexpected error: ${te.message}`),ue(!1)}},Ye=W=>{be(W.id),q({...W})},tr=()=>{be(null),q({})},_e=(W,Ee)=>{q({...E,[Ee]:W.target.value})},Je=async W=>{if(se(!0),Ue(""),Ve(""),!E.first_name||!E.last_name||!E.date_of_birth||!E.place_of_birth){const Ee=[];E.first_name||Ee.push("First Name"),E.last_name||Ee.push("Last Name"),E.date_of_birth||Ee.push("Date of Birth"),E.place_of_birth||Ee.push("Place of Birth"),Ue(`Please fill in the following required fields: ${Ee.join(", ")}`),se(!1);return}if(E.national_id_number&&E.national_id_number.length!==18){Ue("National ID must be exactly 18 digits."),se(!1);return}if(E.date_of_birth){const Ee=new Date(E.date_of_birth),Ge=new Date,Be=Ge.getFullYear()-Ee.getFullYear(),nt=Ge.getMonth()-Ee.getMonth(),Mt=Ge.getDate()-Ee.getDate();if((nt<0||nt===0&&Mt<0?Be-1:Be)<=21){Ue("Member must be more than 21 years old."),se(!1);return}}try{const Ee=new Date().getFullYear(),Ge=`${Ee}/${Ee+1}`,Be=E.league_id??M,nt=Number(Be);if(!nt||isNaN(nt)){Ue("Please select a valid league."),se(!1);return}const Mt=t.find(Xe=>Xe.id===Number(W??E.id)),ut=!!Mt&&Mt.national_id_number===E.national_id_number&&Number(Mt.league_id)===nt&&Mt.role===E.role&&Mt.year===Ge,kt=ut?Mt.renewal:await Rt(E.national_id_number,nt,E.role,Ge,Number(W??E.id)),{role_id:X,...te}=E,je={...te,renewal:kt,year:ut?Mt.year:Ge,league_id:nt},ze=W??E.id,Lt=Number(ze);if(!Lt||isNaN(Lt)){Ue("Invalid member id."),se(!1);return}const{error:qt}=await re.from("league_members").update(je).eq("id",Lt);if(qt){Ue(`Failed to save member: ${qt.message}`),se(!1);return}e(Xe=>Xe.map(rr=>rr.id===Lt?{...rr,...je}:rr)),be(null),Ve(`Member "${je.first_name} ${je.last_name}" has been successfully updated!`),se(!1)}catch(Ee){Ue(`Unexpected error: ${Ee.message}`),se(!1)}},vt=async W=>{try{e(t.filter(Ee=>Ee.id!==W.id)),Ve("Member removed.")}catch(Ee){Ue(Ee.message||String(Ee))}};async function ce(W,Ee){try{const{error:Ge}=await re.from("league_members").update({confirmation:!Ee}).eq("id",W);if(Ge){console.error("toggleConfirmation error:",Ge);return}e(Be=>Be.map(nt=>nt.id===W?{...nt,confirmation:!Ee}:nt))}catch(Ge){console.error(Ge)}}return a.jsxs("div",{className:"app-container",children:[Ce&&a.jsx(rn,{}),a.jsx("header",{className:"bg-white text-gray-800 p-6 shadow-lg border-b-4 border-red-500",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"federation-header",children:[Oe?a.jsx("img",{src:Oe,alt:"Logo Fdration",className:"federation-logo"}):a.jsx(ti,{className:"w-16 h-16 text-green-700"}),a.jsx("h1",{className:"federation-title",children:Ct})]})})}),a.jsxs("div",{className:"form-table-wrapper",children:[a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx(oc,{"data-id":"1"}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:W=>{br(W.currentTarget),jt("/MemberListPageP")},children:"The Member List Add"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:W=>{br(W.currentTarget),jt("/TheLeagueList-Add")},children:"The League List Add"}),a.jsx("button",{className:"primary-btn","data-id":"4",onClick:W=>{br(W.currentTarget),jt("/TheClubListAdd-Fed")},children:"The Club List Add"}),a.jsx("button",{className:"primary-btn","data-id":"5",onClick:W=>{br(W.currentTarget),jt("/TheAthleteList-Add")},children:"The Athlete List Add"})]}),a.jsx("h2",{className:"form-title",children:"Add League Member"}),a.jsxs("form",{onSubmit:ht,className:"form-grid",children:[a.jsxs("label",{children:["League Role *",a.jsxs("select",{value:d,onChange:W=>g(W.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Role"}),He.map(W=>a.jsx("option",{value:W.id,children:W.league_role},W.id))]})]}),a.jsxs("label",{children:["League *",a.jsxs("select",{value:M,onChange:W=>U(W.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select League"}),oe.map(W=>a.jsx("option",{value:W.id,children:W.name_league},W.id))]})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:m,onChange:W=>f(W.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Blood Type --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{type:"text",value:r,onChange:W=>n(W.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{type:"text",value:i,onChange:W=>s(W.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:o,onChange:W=>l(W.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{type:"text",value:c,onChange:W=>u(W.target.value),required:!0})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{type:"text",value:x,onChange:W=>w(W.target.value),maxLength:"18",minLength:"18",required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:N,onChange:W=>b(W.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:S,onChange:W=>j(W.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:T,onChange:W=>R(W.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"}),a.jsx("option",{children:"Moroccan"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:z,onChange:W=>I(W.target.value),placeholder:"Licences, Coach degree...",required:!0})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:G,onChange:W=>de(W.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",required:!0,onChange:W=>{var Ee;return $(((Ee=W.target.files)==null?void 0:Ee[0])??null)}})]}),a.jsxs("label",{children:["Upload League Logo *",a.jsx("input",{type:"file",onChange:W=>{var Ee;return V(((Ee=W.target.files)==null?void 0:Ee[0])??null)},required:!0})]}),a.jsxs("div",{className:"btn-row",children:[a.jsx("button",{type:"submit",className:"primary-b",disabled:ve,children:ve?"Adding...":"Add Member"}),ve&&a.jsx($i,{message:"Adding member..."})]}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{className:"form-title",children:"League Member List"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("label",{children:["League",a.jsxs("select",{value:M,onChange:W=>U(W.target.value),children:[a.jsx("option",{value:"",children:"Select League"}),oe.map(W=>a.jsx("option",{value:W.id,children:W.name_league},W.id))]})]}),a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"search Member"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:pt,onChange:W=>ct(W.target.value)})})]}),a.jsx("div",{className:"table-container",ref:At,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Holder Of"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photo"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"League ID"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:St.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:18,children:"No members found."})}):St.map(W=>a.jsxs("tr",{onDoubleClick:()=>wt(W),style:{cursor:"pointer"},children:[a.jsx("td",{children:ke===W.id?a.jsx("input",{value:E.last_name||"",onChange:Ee=>_e(Ee,"last_name")}):W.last_name}),a.jsx("td",{children:ke===W.id?a.jsx("input",{value:E.first_name||"",onChange:Ee=>_e(Ee,"first_name")}):W.first_name}),a.jsx("td",{children:ke===W.id?a.jsx("input",{type:"date",value:E.date_of_birth||"",onChange:Ee=>_e(Ee,"date_of_birth")}):W.date_of_birth}),a.jsx("td",{children:ke===W.id?a.jsx("input",{value:E.place_of_birth||"",onChange:Ee=>_e(Ee,"place_of_birth")}):W.place_of_birth}),a.jsx("td",{children:ke===W.id?a.jsxs("select",{value:E.role||"",onChange:Ee=>_e(Ee,"role"),children:[a.jsx("option",{value:"",children:"-- Select --"}),He.map(Ee=>a.jsx("option",{value:Ee.league_role??Ee.name??"",children:Ee.league_role??Ee.name??""},Ee.id))]}):W.role||"No Role"}),a.jsx("td",{children:ke===W.id?a.jsxs("select",{value:E.blood_type||"",onChange:Ee=>_e(Ee,"blood_type"),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):W.blood_type}),a.jsx("td",{children:ke===W.id?a.jsxs("select",{value:E.nationality||"",onChange:Ee=>_e(Ee,"nationality"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]}):W.nationality}),a.jsx("td",{children:ke===W.id?a.jsxs("select",{value:E.grade||"",onChange:Ee=>_e(Ee,"grade"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]}):W.grade}),a.jsx("td",{children:ke===W.id?a.jsx("input",{value:E.holder_of||"",onChange:Ee=>_e(Ee,"holder_of")}):W.holder_of}),a.jsx("td",{children:W.national_id_number}),a.jsx("td",{children:W.renewal}),a.jsx("td",{children:W.year}),a.jsx("td",{children:W.license_number}),a.jsx("td",{children:W.registration_date}),a.jsx("td",{children:W.photo_url?a.jsx("img",{src:st(W.photo_url),alt:"Member",style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),a.jsx("td",{children:W.confirmation?"":""}),a.jsx("td",{children:W.league_id}),a.jsx("td",{children:ke===W.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-S",onClick:()=>Je(W.id),disabled:Y,children:Y?"Saving...":"Save"}),a.jsx("button",{className:"secondary-btn",onClick:tr,disabled:Y,children:"Cancel"}),Y&&a.jsx($i,{message:"Saving changes..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-M",onClick:()=>Ye(W),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>vt(W),children:"Delete"}),a.jsx("button",{className:W.confirmation?"cancel-btn":"confirm-btn",onClick:()=>ce(W.id,W.confirmation),children:W.confirmation?"Cancel Confirmation":"Confirm"})]})})]},W.id))})]})}),a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"btn-row",children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:Pt,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:Ot,children:"Export Grade Role PDF"})]})})]})]}),Me&&a.jsx(An,{error:Me.message||Me,onClose:()=>Ue(null)}),at&&a.jsx(In,{success:at,onClose:()=>Ve("")}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function o8(){const{state:t}=di(),e=Ur(),[r,n]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(!1),[c,u]=v.useState(null),[d,g]=v.useState(null),[m,f]=v.useState(null),[x,w]=v.useState(null),[N,b]=v.useState(null),[S,j]=v.useState(null),[C,$]=v.useState({}),[Z,V]=v.useState(null),[T,R]=v.useState(null),[z,I]=v.useState(""),[G,de]=v.useState(null),[M,U]=v.useState(""),[ve,ue]=v.useState((t==null?void 0:t.club_id)||""),[Y,se]=v.useState((t==null?void 0:t.league_id)||""),ke="Algerian Judo Federation",be="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",[E,q]=v.useState([]),[oe,me]=v.useState([]),[Ne,Se]=v.useState([]),[Ce,Le]=v.useState(""),[Me,Ue]=v.useState(""),[at,Ve]=v.useState(""),[Oe,le]=v.useState(""),[Ct,Et]=v.useState(""),[He,$e]=v.useState(""),[pt,ct]=v.useState(""),[jt,At]=v.useState(""),[Wt,st]=v.useState(""),[St,zt]=v.useState(null),[bt,Dt]=v.useState(null),[Pt,Ot]=v.useState(""),[wt,Xt]=v.useState(""),[Te,It]=v.useState(""),[ot,Rt]=v.useState(""),ht=Xn(),Ye=L=>L?L.startsWith("http")?L:`${be}${L}`:null;v.useEffect(()=>{ei()},[]);function tr(L){return new Promise((A,K)=>{Gi(L,ae=>{if(ae.type==="error")console.warn("EXIF processing failed, using original image:",L),A(L);else try{const Pe=ae.toDataURL("image/png");A(Pe)}catch(Pe){console.warn("Canvas conversion failed, using original image:",Pe),A(L)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const _e=L=>{u(L),g(null)};v.useEffect(()=>{(async()=>{const{data:A,error:K}=await re.from("clubrole").select("id, club_role");K&&console.error("Error fetching roles:",K.message),A&&q(A)})()},[]);const Je=async()=>{try{s(!0),u(null);const{data:L}=await re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1);if(L!=null&&L.length&&V(Ye(L[0].logo_url)),t!=null&&t.league_id){const{data:K}=await re.from("nameleague").select("*").eq("id",t.league_id).single();K&&(w(K),I(K.name_league));const{data:ae}=await re.from("league_members").select("logo_url").eq("league_id",t.league_id).order("id",{ascending:!1}).limit(1);ae!=null&&ae.length&&R(Ye(ae[0].logo_url))}let A=t==null?void 0:t.club_id;if(!A&&(t!=null&&t.league_id)){const{data:K}=await re.from("nameclub").select("id").eq("league_id",t.league_id);if(K!=null&&K.length){const{data:ae}=await re.from("club_members").select("club_id").in("club_id",K.map(Pe=>Pe.id));if(ae!=null&&ae.length){const Pe=new Set(ae.map(D=>D.club_id)),tt=K.find(D=>Pe.has(D.id));tt&&(A=tt.id)}}}if(A){const{data:K}=await re.from("nameclub").select("name_club, id").eq("id",A).single();K&&(U(K.name_club),f(K));const{data:ae}=await re.from("club_members").select("logo_url").eq("club_id",A).order("id",{ascending:!1}).limit(1);ae!=null&&ae.length&&de(Ye(ae[0].logo_url))}if(t!=null&&t.member_id){const{data:K}=await re.from("club_members").select("*").eq("id",t.member_id).single();K&&b(K)}if(t!=null&&t.league_id){let K=re.from("club_members").select("*, nameclub!inner(league_i)").eq("nameclub.league_i",t.league_id);ve&&(K=K.eq("club_id",ve));const{data:ae,error:Pe}=await K;if(Pe)throw Pe;n(ae||[])}}catch(L){_e(`Error fetching data: ${L.message}`),console.error("Error fetching data:",L.message)}finally{s(!1)}};v.useEffect(()=>{(async()=>{if(console.log("fetchClubs called with state?.league_id:",t==null?void 0:t.league_id,"selectedLeagueId:",Y),!(t!=null&&t.league_id)&&!Y){console.log("No league_id available, returning early");return}const A=(t==null?void 0:t.league_id)||Y;console.log("Using league_id:",A);const{data:K,error:ae}=await re.from("nameclub").select("id, name_club, league_i").eq("league_i",A);ae?console.error("Error fetching clubs:",ae):(console.log("Fetched clubs:",K),me(K||[]))})()},[t==null?void 0:t.league_id,Y]),v.useEffect(()=>{Je()},[ve,Y]),v.useEffect(()=>()=>{u(""),g("")},[]);const vt=L=>{j(L.id),$({...L})},ce=()=>{j(null),$({})},W=(L,A)=>{$({...C,[A]:L.target.value})},Ee=async L=>{var xe;if(u(""),g(""),l(!0),!C.first_name||!C.last_name||!C.date_of_birth||!C.place_of_birth||!C.role_id){const ye=[];C.first_name||ye.push("First Name"),C.last_name||ye.push("Last Name"),C.date_of_birth||ye.push("Date of Birth"),C.place_of_birth||ye.push("Place of Birth"),C.role_id||ye.push("Role"),u(`Please fill in the following required fields: ${ye.join(", ")}`),l(!1);return}const A=new Date(C.date_of_birth),K=new Date,ae=K.getFullYear()-A.getFullYear(),Pe=K.getMonth()-A.getMonth(),tt=K.getDate()-A.getDate();if((Pe<0||Pe===0&&tt<0?ae-1:ae)<=21){u("Member must be more than 21 years old to register."),l(!1);return}if(C.last_name&&C.password){const{data:ye}=await re.from("club_members").select("*").eq("last_name",C.last_name).eq("password",C.password).neq("id",L);if(ye&&ye.length>0){u("Change your Password for this name because is already exist"),l(!1);return}}try{const ye=((xe=E.find(P=>P.id===parseInt(C.role_id)))==null?void 0:xe.club_role)||"",F={...C,role:ye};delete F.role_id;const{error:ie}=await re.from("club_members").update(F).eq("id",L);if(ie)throw ie;g(`Member "${C.first_name} ${C.last_name}" has been successfully updated!`),ce(),Je(),l(!1)}catch(ye){u(`Failed to update member: ${ye.message}`),l(!1)}},Ge=async L=>{try{const A=new Date(L.registration_date).toISOString().split("T")[0],K=new Date().toISOString().split("T")[0];if(A!==K){u("You can only delete members on the same day of registration.");return}const{error:ae}=await re.from("club_members").delete().eq("id",L.id);if(ae)throw ae;await Je()}catch(A){u(A.message)}},Be=async(L,A)=>{try{const{error:K}=await re.from("club_members").update({confirmation:!A}).eq("id",L);if(K)throw K;n(ae=>ae.map(Pe=>Pe.id===L?{...Pe,confirmation:!A}:Pe))}catch(K){_e(`Failed to update member confirmation: ${K.message}`)}},nt=r.filter(L=>{const A=ot.toLowerCase();return L.first_name.toLowerCase().includes(A)||L.last_name.toLowerCase().includes(A)||L.national_id_number.includes(A)}),Mt=L=>{console.log(" handleMemberDoubleClick called with member:",L),ut(L)},ut=L=>{if(console.log(" generateIndividualMemberPDF called with member:",L),!L||Object.keys(L).length===0){u("No member data available to export");return}kt(L)},kt=async L=>{try{console.log(" exportPDFWithAutoOrientation called with member:",L);const A=new Tt,K=A.internal.pageSize.width,ae=A.internal.pageSize.height;let Pe=M;if(console.log("Initial clubName:",M,"member.club_id:",L.club_id),L.club_id)try{const he=await Qn();console.log("Fetched clubNames:",he),he[L.club_id]?(Pe=he[L.club_id],console.log("Found memberClubName:",Pe)):console.log("Club ID not found in clubNames:",L.club_id)}catch(he){console.error("Error fetching club name:",he)}A.setFontSize(18),A.setTextColor(40,40,40),A.text(te(ke),14,15),A.setFontSize(16),A.setTextColor(40,40,40),A.text(`Club Member Information - ${te(L.first_name)} ${te(L.last_name)}`,14,30),A.setFontSize(10);const tt=new Date().toLocaleString();if(A.text(`Generated: ${tt}`,14,37),Z)try{A.addImage(Z,"PNG",170,10,25,25)}catch(he){console.error("Error adding federation logo to PDF:",he)}let D=70;if(L.photos_url||L.photo_url)try{const he=L.photos_url||L.photo_url,we=await tr(he),Ae=we.startsWith("data:")?"PNG":"JPEG";A.addImage(we,Ae,14,45,25,20),D=70}catch(he){console.error("Error adding photo to PDF:",he);try{const we=L.photos_url||L.photo_url;A.addImage(we,"JPEG",14,45,25,20),D=70}catch(we){console.error("Fallback image addition also failed:",we),D=70}}A.setFontSize(12),L.confirmation?A.setTextColor(0,128,0):A.setTextColor(255,0,0);const xe=L.confirmation?"CONFIRMED":"NOT CONFIRMED";A.text(xe,160,50),A.setTextColor(0,0,0);const ye=E.find(he=>he.id===L.role_id),F=(ye==null?void 0:ye.club_role)||"No Role",ie=[["Last Name",te(L.last_name)||""],["First Name",te(L.first_name)||""],["Date of Birth",te(L.date_of_birth)||""],["Place of Birth",te(L.place_of_birth)||""],["Role",te(F)],["Blood type",te(L.blood_type)||""],["National ID",te(L.national_id_number)||""],["Nationality",te(L.nationality)||""],["Grade",te(L.grade)||""],["License Number",te(L.license_number)||""],["Registration Date",te(L.registration_date)||""],["Year",te(L.year)||""],["Renewal",te(L.renewal)||""]];pr(A,{startY:D,head:[["Field","Value"]],body:ie,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const P=A.lastAutoTable.finalY||200;A.setFontSize(12),A.setTextColor(0,0,0),A.text("Medical certificate",14,P+20),A.setDrawColor(0),A.line(14,P+40,80,P+40),A.setFontSize(10),console.log("memberClubName:",Pe,"finalY:",P),Pe?(A.text(`Club: ${te(Pe)}`,14,P+60),A.text("Club Visa: _________________",14,P+70)):console.log("No memberClubName found, member.club_id:",L.club_id),z&&(A.text(`League: ${te(z)}`,120,P+60),A.text("League Visa: _________________",120,P+70));try{const he=JSON.stringify({id:L.id,name:`${L.first_name||""} ${L.last_name||""}`.trim(),license:L.license_number||"",club_id:L.club_id||"",league_id:L.league_id||""}),Ae=await(await va(async()=>{const{default:Ie}=await Promise.resolve().then(()=>Rm);return{default:Ie}},void 0)).default.toDataURL(he,{width:60,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});A.addImage(Ae,"PNG",180,P+75,15,15)}catch(he){console.error("Error generating QR code:",he)}const Q=`athlete_${te(L.first_name)}_${te(L.last_name)}_${L.id||"record"}.pdf`;console.log(" About to save PDF with filename:",Q),A.save(Q),console.log(" PDF save completed")}catch(A){console.error(" Error in exportPDFWithAutoOrientation:",A),u(`Error generating PDF: ${A.message}`)}},X=(L,A=1,K="",ae="")=>{const Pe=L.internal.pageSize.getWidth(),tt=L.internal.pageSize.getHeight();if(Z)try{L.addImage(Z,"PNG",Pe-40,15,25,25)}catch(xe){console.warn("Could not add federation logo:",xe)}const D=new Date().toLocaleDateString();return L.setFontSize(10),L.setFont("helvetica","normal"),L.text(`Print Date: ${D}`,15,20),L.setFontSize(16),L.setFont("helvetica","bold"),L.text(te("Algerian Judo Federation"),Pe/2,25,{align:"center"}),ae&&(L.setFontSize(12),L.setFont("helvetica","normal"),L.text(`League: ${te(ae)}`,Pe/2,40,{align:"center"})),K&&(L.setFontSize(12),L.setFont("helvetica","normal"),L.text(`Club: ${te(K)}`,Pe/2,53,{align:"center"})),L.setFontSize(10),L.text(`Page ${A}`,Pe-20,tt-10,{align:"right"}),K?70:ae?57:40},te=L=>L?String(L).replace(/=U/g,"").replace(/<a/g,"").replace(/=Ud/g,"").replace(/-/g,"").replace(/-d/g,"").replace(/<a/g,"").replace(/</g,"").replace(/%[0-9A-Fa-f]{2}/g,"").replace(/% % %/g,"").replace(/%%%/g,"").replace(/%%/g,"").replace(/%\s+%/g,"").replace(/%+/g,"").replace(/\s*%\s*/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\uFFFD/g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/ /g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").trim():"",je=async()=>{const L=(t==null?void 0:t.league_id)||Y;if(!L){_e("No league selected");return}try{const{data:A,error:K}=await re.from("nameclub").select("id, name_club").eq("league_i",L);if(K)throw K;if(!A||A.length===0){_e("No clubs found in this league");return}const ae=A.map(Q=>Q.id),{data:Pe,error:tt}=await re.from("club_members").select("*").in("club_id",ae);if(tt)throw tt;if(!Pe||Pe.length===0){_e("No members found in any clubs of this league");return}const D=new Tt("landscape");let ye=X(D,1,"",z||"Unknown League");D.setFontSize(14),D.setFont("helvetica","bold"),D.setTextColor(255,0,0),D.text("Club Members - General Situation",D.internal.pageSize.getWidth()/2,ye,{align:"center"}),D.setTextColor(0,0,0),ye+=20;const F={};Pe.forEach(Q=>{const he=Q.year||"Unknown Year";F[he]||(F[he]={});const we=A.find(Ie=>Ie.id===Q.club_id),Ae=we?te(we.name_club):"Unknown Club";F[he][Ae]||(F[he][Ae]=[]),F[he][Ae].push(Q)});const ie={};Pe.forEach(Q=>{const he=A.find(Ae=>Ae.id===Q.club_id),we=he?te(he.name_club):"Unknown Club";ie[we]||(ie[we]=[]),ie[we].push(Q)});for(const[Q,he]of Object.entries(ie)){if(he.length===0)continue;const we=he.sort((Ie,rt)=>{const yt=new Date(Ie.registration_date||"1900-01-01"),Bt=new Date(rt.registration_date||"1900-01-01");return yt-Bt});D.setFontSize(14),D.setFont("helvetica","bold"),D.text(`${te(Q)}`,20,ye),ye+=12;const Ae=we.map(Ie=>[te(Ie.last_name),te(Ie.first_name),te(Ie.date_of_birth),te(Ie.place_of_birth),te(Ie.blood_type),te(Ie.nationality),te(Ie.grade),te(Ie.holder_of),te(Ie.national_id_number),te(Ie.password),te(Ie.renewal),Ie.confirmation?"Yes":"No",te(Ie.license_number)]);pr(D,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:Ae,startY:ye,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ye=D.lastAutoTable.finalY+8,ye>180&&(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z||"Unknown League")+5),ye+=8,ye>160&&(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z)+5)}const P=new Date().getFullYear();D.save(`federation_league_club_members_general_${P}.pdf`)}catch(A){console.error("Error generating PDF:",A),u("Error generating PDF: "+A.message)}},ze=async()=>{const L=(t==null?void 0:t.league_id)||Y;if(!L){_e("No league selected");return}try{const{data:A,error:K}=await re.from("nameclub").select("id, name_club").eq("league_i",L);if(K)throw K;if(!A||A.length===0){_e("No clubs found in this league");return}const ae=A.map(he=>he.id),{data:Pe,error:tt}=await re.from("club_members").select("*").in("club_id",ae);if(tt)throw tt;if(!Pe||Pe.length===0){_e("No members found in any clubs of this league");return}const D=new Tt("landscape");let ye=X(D,1,"",z);const F={};Pe.forEach(he=>{const we=A.find(rt=>rt.id===he.club_id),Ae=we?te(we.name_club):"Unknown Club",Ie=he.year||"Unknown Year";F[Ie]||(F[Ie]={}),F[Ie][Ae]||(F[Ie][Ae]=[]),F[Ie][Ae].push(he)}),D.setFontSize(14),D.setFont("helvetica","bold"),D.setTextColor(255,0,0),D.text("Club Members - Grade & Role Report",D.internal.pageSize.getWidth()/2,ye,{align:"center"}),D.setTextColor(0,0,0),ye+=20;let ie=!0;for(const[he,we]of Object.entries(F)){ie||(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z||"Unknown League")+5),ie=!1,D.setFontSize(12),D.setFont("helvetica","bold"),D.text(te(`ROLES SECTION - ${he}`),20,ye),ye+=15;for(const[Ae,Ie]of Object.entries(we)){if(Ie.length===0)continue;D.setFontSize(12),D.setFont("helvetica","bold"),D.text(`Club: ${te(Ae)}`,35,ye),ye+=10;const rt={};Ie.forEach(yt=>{const Bt=E.find(mt=>mt.id===yt.role_id),Ze=(Bt==null?void 0:Bt.club_role)||"No Role";rt[Ze]||(rt[Ze]=[]),rt[Ze].push(yt)});for(const[yt,Bt]of Object.entries(rt)){if(Bt.length===0)continue;D.setFontSize(11),D.setFont("helvetica","bold"),D.text(`Role: ${te(yt)}`,30,ye),ye+=8;const Ze=Bt.map(mt=>[te(mt.last_name),te(mt.first_name),te(mt.date_of_birth),te(mt.place_of_birth),te(mt.blood_type),te(mt.nationality),te(mt.grade),te(mt.holder_of),te(mt.national_id_number),te(mt.password),te(mt.renewal),mt.confirmation?"Yes":"No",te(mt.license_number)]);pr(D,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Grade","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:Ze,startY:ye,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ye=D.lastAutoTable.finalY+8,ye>180&&(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z||"Unknown League")+5)}ye+=8,ye>160&&(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z||"Unknown League")+5)}ye+=10}D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z),D.setFontSize(14),D.setFont("helvetica","bold"),D.setTextColor(255,0,0),D.text("Club Members - Grade & Role Report",D.internal.pageSize.getWidth()/2,ye,{align:"center"}),D.setTextColor(0,0,0),ye+=20;let P=!0;for(const[he,we]of Object.entries(F)){P||(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z)+5),P=!1,D.setFontSize(12),D.setFont("helvetica","bold"),D.text(te(`GRADES SECTION - ${he}`),20,ye),ye+=15;for(const[Ae,Ie]of Object.entries(we)){if(Ie.length===0)continue;D.setFontSize(12),D.setFont("helvetica","bold"),D.text(`Club: ${te(Ae)}`,35,ye),ye+=10;const rt={};Ie.forEach(yt=>{const Bt=yt.grade||"No Grade";rt[Bt]||(rt[Bt]=[]),rt[Bt].push(yt)});for(const[yt,Bt]of Object.entries(rt)){if(Bt.length===0)continue;D.setFontSize(11),D.setFont("helvetica","bold"),D.text(`Grade: ${te(yt)}`,30,ye),ye+=8;const Ze=Bt.map(mt=>{const it=E.find(er=>er.id===mt.role_id),$t=(it==null?void 0:it.club_role)||"No Role";return[te(mt.last_name),te(mt.first_name),te(mt.date_of_birth),te(mt.place_of_birth),te(mt.blood_type),te(mt.nationality),te($t),te(mt.holder_of),te(mt.national_id_number),te(mt.password),te(mt.renewal),mt.confirmation?"Yes":"No",te(mt.license_number)]});pr(D,{head:[["Last Name","First Name","DOB","POB","Blood Type","Nationality","Role","Holder Of","NID","Password","Renewal","Confirmation","License #"]],body:Ze,startY:ye,styles:{fontSize:5,cellPadding:1},headStyles:{fillColor:[34,139,34],textColor:255,fontStyle:"bold",fontSize:5},alternateRowStyles:{fillColor:[245,245,245]},margin:{left:10,right:10}}),ye=D.lastAutoTable.finalY+8,ye>180&&(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z)+5)}ye+=8,ye>160&&(D.addPage(),ye=X(D,D.internal.getNumberOfPages(),"",z)+5)}ye+=10}const Q=new Date().getFullYear();D.save(`league_${te(z)}_complete_report_${Q}.pdf`)}catch(A){console.error("Error exporting complete league report PDF:",A),u("Error exporting PDF: "+A.message)}};v.useEffect(()=>{const L=setTimeout(()=>{},300);return()=>clearTimeout(L)},[ot]),v.useEffect(()=>{Je()},[ve,Y]);const Lt=async L=>{if(!L)return null;const A=L.name.split(".").pop(),K=`${Date.now()}-${Math.random()}.${A}`,{error:ae}=await re.storage.from("logos").upload(K,L);if(ae)return u(`Upload failed: ${ae.message}`),null;const{data:Pe}=re.storage.from("logos").getPublicUrl(K);return(Pe==null?void 0:Pe.publicUrl)??null},qt=async()=>{if(!St)return null;const L=St.name.split(".").pop(),A=`club_member-${Date.now()}.${L}`,{error:K}=await re.storage.from("logos").upload(A,St);if(K)return console.error("upload error",K),null;const{data:ae}=re.storage.from("logos").getPublicUrl(A);return(ae==null?void 0:ae.publicUrl)??null},Xe=async(L,A,K,ae)=>{const{data:Pe}=await re.from("club_members").select("*").eq("national_id_number",L).eq("club_id",A).eq("role",K).eq("year",ae);if(Pe&&Pe.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:tt}=await re.from("club_members").select("*",{count:"exact",head:!0}).eq("national_id_number",L).eq("club_id",A).eq("role",K);return(tt||0)+1},rr=async L=>{var he;if(L.preventDefault(),u(""),g(""),console.log("Setting submitLoading to true"),l(!0),await new Promise(we=>setTimeout(we,100)),!Me||!Ce||!at||!Oe||!Ct||!ve||!Y||!jt||!Wt){const we=[];Me||we.push("First Name"),Ce||we.push("Last Name"),at||we.push("Date of Birth"),Oe||we.push("Place of Birth"),Ct||we.push("Role"),ve||we.push("Club"),Y||we.push("League"),jt||we.push("Password"),Wt||we.push("Confirm Password"),u(`Please fill in the following required fields: ${we.join(", ")}`),console.log("Setting submitLoading to false - missing fields"),l(!1);return}const A=Number(ve),K=Number(Y);if(!A||isNaN(A)){u("Please select a valid club."),l(!1);return}if(!K||isNaN(K)){u("Please select a valid league."),l(!1);return}if(pt.length!==18){u("National ID must be exactly 18 digits."),l(!1);return}if(jt!==Wt){u("Passwords do not match."),l(!1);return}const ae=new Date(at),Pe=new Date,tt=Pe.getFullYear()-ae.getFullYear(),D=Pe.getMonth()-ae.getMonth(),xe=Pe.getDate()-ae.getDate();if((D<0||D===0&&xe<0?tt-1:tt)<=21){u("Member must be more than 21 years old to register."),l(!1);return}if(Ce&&jt){const{data:we}=await re.from("club_members").select("*").eq("last_name",Ce).eq("password",jt);if(we&&we.length>0){u("Change your Password for this name because is already exist"),l(!1);return}}const F=((he=E.find(we=>we.id===parseInt(Ct)))==null?void 0:he.club_role)||"",ie=new Date().getFullYear(),P=`${ie}/${ie+1}`;let Q;try{Q=await Xe(pt,A,F,P)}catch(we){u(we.message),l(!1);return}try{const we=await qt(),Ae=await Lt(bt),Ie={last_name:Ce,first_name:Me,date_of_birth:at,place_of_birth:Oe,role:F,blood_type:He,national_id_number:pt,password:jt,photo_url:we,logo_url:Ae,nationality:Pt,grade:wt,holder_of:Te,club_id:A,league_id:K,license_number:`LIC-${Date.now()}`,renewal:Q,year:P},{error:rt}=await re.from("club_members").insert([Ie]);rt?(console.error("insert club member error",rt),u("Error saving club member: "+rt.message),l(!1)):(g(`Member "${Me} ${Ce}" has been successfully added to the club!`),Le(""),Ue(""),Ve(""),le(""),Et(""),$e(""),ct(""),At(""),st(""),Ot(""),Xt(""),It(""),zt(null),Dt(null),await Je(),l(!1))}catch(we){console.error("handleSubmit error",we),u("Unexpected error: "+we.message),l(!1)}};return a.jsxs("div",{className:"app-container",children:[i&&a.jsx(rn,{}),o&&a.jsx($i,{}),a.jsx("header",{children:a.jsxs("div",{className:"federation-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Z?a.jsx("img",{src:Z,alt:"Federation Logo",className:"federation-logo"}):a.jsx("img",{src:Oi,alt:"Default Federation Logo",className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:ke})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.logo_url?a.jsx("img",{src:t.logo_url,alt:"League Logo",className:"member-logo"}):null,a.jsx("h2",{className:"federation-title",style:{fontSize:"1.5rem"},children:z||"League Name"})]})]})}),a.jsxs("section",{className:"app-container",children:[a.jsxs("h2",{children:["Welcome ",t.first_name," ",t.last_name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Role:"})," ",t.role]}),a.jsxs("div",{className:"form-table-wrapper",children:[a.jsxs("div",{className:"sticky-button-bar",children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-btn","data-id":"1",onClick:async L=>{if(br(L.currentTarget),c){alert("Please resolve the current error before navigating to another page.");return}if(!x||!x.id){alert("League data not loaded yet.");return}e("/member-list-l",{state:{...t,league_id:x.id,league_name:x.name_league||"",league_logo:(x==null?void 0:x.logo_url)||null}})},children:"The League Member List"}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:async L=>{if(br(L.currentTarget),c){alert("Please resolve the current error before navigating to another page.");return}if(!x||!x.id){alert("League data not loaded yet.");return}e("/TheClubListAddFed-League",{state:{...t,league_id:x.id,league_name:x.name_league||"",league_logo:(x==null?void 0:x.logo_url)||null}})},children:"The Club Member List"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:async L=>{if(br(L.currentTarget),c){alert("Please resolve the current error before navigating to another page.");return}if(!x||!x.id){alert("League data not loaded yet.");return}e("/TheAthleteListAdd-League",{state:{...t,league_id:x.id,league_name:x.name_league||"",league_logo:(x==null?void 0:x.logo_url)||null}})},children:"The Athlete List Add"})]}),a.jsxs("section",{children:[a.jsxs("section",{children:[a.jsx("h2",{className:"form-title",children:"Add Club Member"}),a.jsxs("form",{onSubmit:rr,className:"form-grid",children:[a.jsxs("label",{children:["Club Role *",a.jsxs("select",{value:Ct,onChange:L=>Et(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Role"}),E.map(L=>a.jsx("option",{value:L.id,children:L.club_role},L.id))]})]}),a.jsxs("label",{children:["League: *",a.jsx("select",{value:Y,onChange:L=>{se(L.target.value),ue("")},disabled:!!(t!=null&&t.league_id),required:!0,children:t!=null&&t.league_id?a.jsx("option",{value:t.league_id,children:z}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"-- Select League --"}),Ne.map(L=>a.jsx("option",{value:L.id,children:L.name_league},L.id))]})})]}),a.jsxs("label",{children:["Club: *",a.jsxs("select",{value:ve,onChange:L=>ue(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Club --"}),oe.map(L=>a.jsx("option",{value:L.id,children:L.name_club},L.id))]})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:Pt,onChange:L=>Ot(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:wt,onChange:L=>Xt(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]})]}),a.jsxs("label",{children:["Holder of *",a.jsx("input",{type:"text",value:Te,onChange:L=>It(L.target.value),required:!0})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:He,onChange:L=>$e(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["Last Name *",a.jsx("input",{value:Ce,onChange:L=>Le(L.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{value:Me,onChange:L=>Ue(L.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:at,onChange:L=>Ve(L.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{value:Oe,onChange:L=>le(L.target.value),required:!0})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{value:pt,onChange:L=>ct(L.target.value),maxLength:"18",required:!0}),a.jsx("small",{children:"18 digits required  must be unique. "})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:jt,onChange:L=>At(L.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:Wt,onChange:L=>st(L.target.value),required:!0})]}),a.jsxs("label",{children:["Upload Club Logo *",a.jsx("input",{type:"file",onChange:L=>{var A;return Dt(((A=L.target.files)==null?void 0:A[0])??null)},required:!0})]}),a.jsxs("label",{children:["Upload Member Photo *",a.jsx("input",{type:"file",onChange:L=>{var A;return zt(((A=L.target.files)==null?void 0:A[0])??null)},required:!0})]}),a.jsx("div",{className:"btn-row",children:a.jsx("button",{type:"submit",className:"primary-b",disabled:o,children:o?"Saving...":"Save Member"})}),a.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",textAlign:"center"},children:"All fields marked with an asterisk (*) must be filled in."})]})]}),a.jsx("h2",{className:"form-title",children:"List Of Club Members"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("label",{children:["League:",a.jsx("select",{value:Y,onChange:L=>{se(L.target.value),ue("")},disabled:!!(t!=null&&t.league_id),children:t!=null&&t.league_id?a.jsx("option",{value:t.league_id,children:z}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"-- Select League --"}),Ne.map(L=>a.jsx("option",{value:L.id,children:L.name_league},L.id))]})})]}),a.jsxs("label",{children:["Club:",a.jsxs("select",{value:ve,onChange:L=>ue(L.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Club --"}),oe.map(L=>a.jsx("option",{value:L.id,children:L.name_club},L.id))]})]}),a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"search Member"})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or NID...",value:ot,onChange:L=>Rt(L.target.value)})})]}),a.jsx("div",{className:"table-container",ref:ht,children:a.jsxs("table",{className:"athlete-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"holder_of"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photos"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"Club ID"}),a.jsx("th",{children:"League ID"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:19,children:"No members found."})}):nt.map(L=>a.jsxs("tr",{onDoubleClick:()=>Mt(L),style:{cursor:"pointer"},children:[a.jsx("td",{children:S===L.id?a.jsx("input",{value:C.last_name||"",onChange:A=>W(A,"last_name")}):L.last_name}),a.jsx("td",{children:S===L.id?a.jsx("input",{value:C.first_name||"",onChange:A=>W(A,"first_name")}):L.first_name}),a.jsx("td",{children:S===L.id?a.jsx("input",{type:"date",value:C.date_of_birth||"",onChange:A=>W(A,"date_of_birth")}):L.date_of_birth}),a.jsx("td",{children:S===L.id?a.jsx("input",{value:C.place_of_birth||"",onChange:A=>W(A,"place_of_birth")}):L.place_of_birth}),a.jsx("td",{children:S===L.id?a.jsxs("select",{value:C.role_id||"",onChange:A=>W(A,"role_id"),children:[a.jsx("option",{value:"",children:"-- Select --"}),E.map(A=>a.jsx("option",{value:A.id,children:A.club_role},A.id))]}):L.role||"No Role"}),a.jsx("td",{children:S===L.id?a.jsxs("select",{value:C.blood_type||"",onChange:A=>W(A,"blood_type"),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):L.blood_type}),a.jsx("td",{children:S===L.id?a.jsxs("select",{value:C.nationality||"",onChange:A=>W(A,"nationality"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Algerian"}),a.jsx("option",{children:"Tunisian"})]}):L.nationality}),a.jsx("td",{children:S===L.id?a.jsxs("select",{value:C.grade||"",onChange:A=>W(A,"grade"),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{children:"Brown Belt"}),a.jsx("option",{children:"Black Belt"})]}):L.grade}),a.jsx("td",{children:S===L.id?a.jsx("input",{value:C.holder_of||"",onChange:A=>W(A,"holder_of")}):L.holder_of}),a.jsx("td",{children:L.national_id_number}),a.jsx("td",{children:L.renewal}),a.jsx("td",{children:L.year}),a.jsx("td",{children:L.license_number}),a.jsx("td",{children:L.registration_date}),a.jsx("td",{children:L.photos_url||L.photo_url?a.jsx("img",{src:Ye(L.photos_url||L.photo_url),alt:"Member",style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"50%"}}):"No Photo"}),a.jsx("td",{children:L.confirmation?"":""}),a.jsx("td",{children:L.club_id}),a.jsx("td",{children:L.league_id}),a.jsx("td",{children:S===L.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-S",onClick:()=>Ee(L.id),children:"Save"}),a.jsx("button",{className:"secondary-btn",onClick:ce,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-M",onClick:()=>vt(L),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>Ge(L),children:"Delete"}),a.jsx("button",{className:L.confirmation?"cancel-btn":"confirm-btn",onClick:()=>Be(L.id,L.confirmation),children:L.confirmation?"Cancel Confirmation":"Confirm"})]})})]},L.id))})]})})]}),a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:je,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:ze,children:"Export Grade Role PDF"})]})]}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})}),c&&a.jsx(An,{error:c,onClose:()=>u(null)}),d&&a.jsx(In,{success:d,onClose:()=>g("")}),a.jsx("style",{jsx:!0,children:`
        @keyframes fadeInScale {
          from {
            opacity: 0;
            transform: scale(0.8);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
        
        @keyframes bounceIn {
          0% {
            transform: scale(0.3);
            opacity: 0;
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})}function l8(){const{state:t}=di(),e=Ur(),[r,n]=v.useState(!0),[i,s]=v.useState(!1),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,g]=v.useState(null),[m,f]=v.useState(null),[x,w]=v.useState(""),[N,b]=v.useState(null),[S,j]=v.useState(""),[C,$]=v.useState((t==null?void 0:t.club_id)??""),[Z,V]=v.useState((t==null?void 0:t.league_id)??""),[T,R]=v.useState((t==null?void 0:t.league_id)??""),[z,I]=v.useState((t==null?void 0:t.club_id)??""),[G,de]=v.useState([]),[M,U]=v.useState([]),[ve,ue]=v.useState([]),[Y,se]=v.useState([]),[ke,be]=v.useState([]),[E,q]=v.useState(""),[oe,me]=v.useState(""),[Ne,Se]=v.useState(""),[Ce,Le]=v.useState(""),[Me,Ue]=v.useState(""),[at,Ve]=v.useState(""),[Oe,le]=v.useState(""),[Ct,Et]=v.useState(""),[He,$e]=v.useState(""),[pt,ct]=v.useState(null),[jt,At]=v.useState(""),[Wt,st]=v.useState(""),[St,zt]=v.useState(""),[bt,Dt]=v.useState(""),[Pt,Ot]=v.useState(""),[wt,Xt]=v.useState(1),[Te,It]=v.useState(null),[ot,Rt]=v.useState({}),[ht,Ye]=v.useState(""),tr=Xn(),_e="https://aolsbxfulbvpiobqqsao.supabase.co/storage/v1/object/public/logos/",Je="Algerian Judo Federation",vt=["Admin","Coach","Athlete"],ce=["Algerian","Tunisian"],W=["brown belt","black belt"],Ee=["Poussins","Benjamins","Minimes","Cadets","Juniors","Hopefuls","Seniors","Veterans"],Ge=["Men","Women"],[Be,nt]=v.useState([]),Mt=P=>P?P.startsWith("http")?P:`${_e}${P}`:null,ut=async()=>{if(!pt)return null;try{const P=pt.name.split(".").pop(),Q=`athlete-${Date.now()}.${P}`,{error:he}=await re.storage.from("logos").upload(Q,pt);if(he)return console.error("upload error",he),null;const{data:we}=re.storage.from("logos").getPublicUrl(Q);return(we==null?void 0:we.publicUrl)??null}catch(P){return console.error("handlePhotoUpload error",P),null}};function kt(P){return new Promise((Q,he)=>{Gi(P,we=>{if(we.type==="error")console.warn("EXIF processing failed, using original image:",P),Q(P);else try{const Ae=we.toDataURL("image/png");Q(Ae)}catch(Ae){console.warn("Canvas conversion failed, using original image:",Ae),Q(P)}},{orientation:!0,canvas:!0,crossOrigin:"anonymous"})})}const X=async(P,Q)=>{const{data:he}=await re.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",P).eq("year",Q);if(he&&he.length>0)throw new Error("This member is already registered for the current season with the same role and club.");const{count:we}=await re.from("athletes").select("*",{count:"exact",head:!0}).eq("national_id_number",P);return(we||0)+1},te=async()=>{var P;try{l("");const[Q,he,we,Ae,Ie]=await Promise.all([re.from("logo").select("logo_url").order("created_at",{ascending:!1}).limit(1),re.from("nameleague").select("id, name_league"),re.from("roles").select("id, name"),T?re.from("nameclub").select("id, name_club").eq("league_i",T):re.from("nameclub").select("id, name_club"),re.from("athletes").select("*").order("id",{ascending:!1}).limit(1e3)]);if((P=Q.data)!=null&&P.length&&g(Mt(Q.data[0].logo_url)),ue(he.data||[]),we.data?de(we.data.map(Bt=>Bt.name)):de(vt),U(Ae.data||[]),Ie.error)throw Ie.error;const rt=Ie.data||[];be(rt);let yt=rt;z?yt=rt.filter(Bt=>String(Bt.club_id)===String(z)):T&&(yt=rt.filter(Bt=>String(Bt.league_id)===String(T))),se(yt),await Promise.all([t!=null&&t.league_id?je(t.league_id):Promise.resolve(),z||C?ze(z||C):Promise.resolve()])}catch(Q){console.error("fetchData error",Q),l((Q==null?void 0:Q.message)||String(Q))}finally{n(!1),s(!1)}};v.useEffect(()=>{ei()},[]);const je=async P=>{var Q;try{const[he,we]=await Promise.all([re.from("nameleague").select("*").eq("id",P).single(),re.from("league_members").select("logo_url").eq("league_id",P).order("id",{ascending:!1}).limit(1)]);he.data&&w(he.data.name_league||""),(Q=we.data)!=null&&Q.length&&f(Mt(we.data[0].logo_url))}catch(he){console.error("loadLeagueDetails error",he)}},ze=async P=>{var Q;try{const[he,we]=await Promise.all([re.from("nameclub").select("name_club, i").eq("id",P).single(),re.from("club_members").select("logo_url").eq("club_id",P).order("id",{ascending:!1}).limit(1)]);he.data&&j(he.data.name_club),(Q=we.data)!=null&&Q.length&&b(Mt(we.data[0].logo_url))}catch(he){console.error("loadClubDetails error",he)}};v.useEffect(()=>{te()},[]),v.useEffect(()=>{ei()},[]);const Lt=v.useMemo(()=>{let P=ke;return z?P=ke.filter(Q=>String(Q.club_id)===String(z)):T&&(P=ke.filter(Q=>String(Q.league_id)===String(T))),P},[ke,z,T]);v.useEffect(()=>{se(Lt)},[Lt]),v.useEffect(()=>{T&&(async()=>{try{const{data:Q}=await re.from("nameclub").select("id, name_club").eq("league_i",T);U(Q||[])}catch(Q){console.error("Error fetching clubs:",Q)}})()},[T]);const qt=v.useCallback(async(P,Q)=>{if(!(!P||!Q))try{const{data:he,error:we}=await re.from("categories").select("weight").eq("genres",P).eq("categories",Q);we?console.error("Erreur rcupration poids:",we.message):nt(he.map(Ae=>Ae.weight))}catch(he){console.error("Erreur inconnue:",he)}},[]);v.useEffect(()=>{const P=ot.genres||St,Q=ot.categories||bt;qt(P,Q)},[St,bt,ot.genres,ot.categories,qt]);const Xe=(P,Q)=>{if(!P||!Q)return{isValid:!1,message:"Date of birth and category are required."};const he=new Date(P),we=new Date,Ae=we.getFullYear()-he.getFullYear()-(we.getMonth()<he.getMonth()||we.getMonth()===he.getMonth()&&we.getDate()<he.getDate()?1:0),rt={Poussins:{min:9,max:10},Benjamins:{min:11,max:12},Minimes:{min:13,max:14},Cadets:{min:15,max:17},Juniors:{min:15,max:20},Hopefuls:{min:15,max:17},Seniors:{min:15,max:35},Veterans:{min:36,max:150}}[Q];return rt?Ae<rt.min||Ae>rt.max?Q==="Veterans"?{isValid:!1,message:`For ${Q} category, athlete must be more than 35 years old. Current age: ${Ae}`}:{isValid:!1,message:`For ${Q} category, athlete must be between ${rt.min} and ${rt.max} years old. Current age: ${Ae}`}:{isValid:!0,message:""}:{isValid:!1,message:`Unknown category: ${Q}`}},rr=async P=>{if(P.preventDefault(),l(""),u(""),s(!0),!oe||!E){l("First name and Last name are required."),s(!1);return}if(!/^\d{18}$/.test(Oe)){l("National ID (NID) must be exactly 18 digits."),s(!1);return}if(Ct!==He){l("Passwords do not match."),s(!1);return}if(!T&&!Z){l("League must be selected or provided in state."),s(!1);return}if(!z&&!C){l("Club must be selected or provided in state."),s(!1);return}const Q=Xe(Ne,bt);if(!Q.isValid){l(Q.message),s(!1);return}if(E&&Ct){const{data:Ae}=await re.from("athletes").select("*").eq("password",Ct);if(Ae&&Ae.length>0){l("Change your Password for this name because is already exist"),s(!1);return}}const he=new Date().getFullYear(),we=`${he}/${he+1}`;try{const{data:Ae,error:Ie}=await re.from("athletes").select("id, national_id_number").eq("national_id_number",Oe).eq("year",we);if(Ie)throw Ie;if(Ae&&Ae.length>0){l("An athlete with this National ID is already registered for this season."),s(!1);return}}catch(Ae){l(Ae.message||String(Ae)),s(!1);return}try{const Ae=await ut(),Ie=new Date().getFullYear(),rt=`${Ie}/${Ie+1}`;let yt;try{yt=await X(Oe,rt)}catch(mt){l(mt.message),setSubmitLoading(!1);return}const Bt={last_name:E,first_name:oe,date_of_birth:Ne,place_of_birth:Ce,role:Me,blood_type:at,national_id_number:Oe,password:Ct,license_number:`ATH-${Date.now()}`,registration_date:new Date().toISOString().split("T")[0],photos_url:Ae,nationality:jt,grade:Wt,renewal:yt,confirmation:!1,genres:St,categories:bt,weight:Pt,league_id:T||Z,club_id:z||C,year:rt},{error:Ze}=await re.from("athletes").insert([Bt]);if(Ze)throw Ze;u("Athlete added successfully."),q(""),me(""),Se(""),Le(""),Ue(""),Ve(""),le(""),Et(""),$e(""),ct(null),At(""),st(""),zt(""),Dt(""),Ot(""),await te()}catch(Ae){console.error("handleSubmit error",Ae),l((Ae==null?void 0:Ae.message)||String(Ae))}finally{n(!1)}},L=P=>{It(P.id),Rt({...P})},A=()=>{It(null),Rt({})},K=async()=>{s(!0);const P=Xe(ot.date_of_birth,ot.categories);if(!P.isValid){s(!1),l(P.message);return}const{error:Q}=await re.from("athletes").update({last_name:ot.last_name,first_name:ot.first_name,date_of_birth:ot.date_of_birth,place_of_birth:ot.place_of_birth,role:ot.role,blood_type:ot.blood_type,nationality:ot.nationality,grade:ot.grade,categories:ot.categories,weight:ot.weight,genres:ot.genres}).eq("id",Te);Q?(s(!1),l("Update failed: "+Q.message)):(await te(),A(),s(!1),u("Athlete updated successfully!"))},ae=async P=>{const Q=new Date().toISOString().split("T")[0];if(P.registration_date!==Q){l("You can only delete athletes the same day they were added.");return}if(window.confirm("Delete this athlete?"))try{const{error:he}=await re.from("athletes").delete().eq("id",P.id);if(he)throw he;await te()}catch(he){console.error("deleteAthlete error",he),l("Error deleting athlete: "+he.message)}},Pe=async(P,Q)=>{try{n(!0);const{error:he}=await re.from("athletes").update({confirmation:!Q}).eq("id",P);if(he)throw he;se(we=>we.map(Ae=>Ae.id===P?{...Ae,confirmation:!Q}:Ae))}catch(he){console.error("toggle confirmation error",he),l((he==null?void 0:he.message)||String(he))}finally{n(!1)}},tt=Y.filter(P=>{const Q=ht.trim().toLowerCase();return Q?String(P.first_name||"").toLowerCase().includes(Q)||String(P.last_name||"").toLowerCase().includes(Q)||String(P.national_id_number||"").includes(Q):!0}),D=P=>{if(!P||Object.keys(P).length===0){l("No data available to export");return}xe(P)},xe=async P=>{let Q=null,he=null;try{P.club_id&&(Q=(await Qn())[P.club_id]),P.league_id&&(he=(await bi())[P.league_id])}catch(mt){console.error("Error fetching names:",mt)}const we=new Tt("portrait","mm","a4");we.setFontSize(18),we.setTextColor(40,40,40),we.text("Algerian Judo Federation",14,15);const Ae=`Athlete Information - ${P.first_name} ${P.last_name}`;we.setFontSize(16),we.setTextColor(40,40,40),we.text(Ae,14,30),we.setFontSize(10);const Ie=new Date().toLocaleString();if(we.text(`Generated: ${Ie}`,14,37),d)try{we.addImage(d,"PNG",170,10,25,25)}catch(mt){console.error("Error adding logo to PDF:",mt)}let rt=70;if(P.photos_url)try{const mt=await kt(P.photos_url),it=mt.startsWith("data:")?"PNG":"JPEG";we.addImage(mt,it,14,45,25,20),rt=70}catch(mt){console.error("Error adding photo to PDF:",mt);try{we.addImage(P.photos_url,"JPEG",14,45,25,20)}catch(it){console.error("Fallback image addition also failed:",it)}rt=70}we.setFontSize(12),P.confirmation?we.setTextColor(0,128,0):we.setTextColor(255,0,0);const yt=P.confirmation?"CONFIRMED ":"NOT CONFIRMED ";we.text(yt,160,50);const Bt=[["First Name",P.first_name||""],["Last Name",P.last_name||""],["Date of Birth",P.date_of_birth||""],["Place of Birth",P.place_of_birth||""],["National ID",P.national_id_number||""],["Nationality",P.nationality||""],["Blood Type",P.blood_type||""],["Grade",P.grade||""],["Role",P.role||""],["Gender",P.genres||""],["Category",P.categories||""],["Weight",P.weight||""],["License Number",P.license_number||""],["Registration Date",P.registration_date||""],["Year",P.year||""],["Renewal",P.renewal||""]];pr(we,{head:[["Field","Value"]],body:Bt,startY:rt,theme:"grid",headStyles:{fillColor:[40,40,40]},styles:{overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}}});const Ze=we.lastAutoTable.finalY||200;if(we.setFontSize(12),we.setTextColor(0,0,0),we.text("Medical certificate",14,Ze+20),we.setDrawColor(0),we.line(14,Ze+40,80,Ze+40),we.setFontSize(10),P.club_id||Q){const mt=Q||`ID: ${P.club_id}`;we.text(`Club: ${mt}`,14,Ze+60),we.text("Club Visa: _________________",14,Ze+70)}if(P.league_id||he){const mt=he||`ID: ${P.league_id}`;we.text(`League: ${mt}`,120,Ze+60),we.text("League Visa: _________________",120,Ze+70)}try{const mt=JSON.stringify({id:P.id,name:`${P.first_name||""} ${P.last_name||""}`.trim(),license:P.license_number||"",club_id:P.club_id||"",league_id:P.league_id||"",confirmation:P.confirmation||"Unconfirmed"}),it=await Si.toDataURL(mt,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});we.addImage(it,"PNG",175,Ze+75,15,15)}catch(mt){console.error("Error generating QR code:",mt)}we.save(`athlete_${P.first_name}_${P.last_name}.pdf`)},ye=async()=>{if(!tt||tt.length===0){l("No athletes data available to export");return}const P=new Tt("landscape","mm","a4"),Q=P.internal.pageSize.getWidth(),he=new Date().getFullYear(),we=new Date().toLocaleDateString();if(P.setFontSize(10),P.setFont("helvetica","normal"),P.setTextColor(40,40,40),P.text(`Date: ${we}`,14,15),P.setFontSize(16),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text("Algerian Judo Federation",Q/2,15,{align:"center"}),d)try{P.addImage(d,"PNG",Q-40,5,25,25)}catch(Ze){console.error("Error adding logo to PDF:",Ze)}P.setFontSize(14),P.setFont("helvetica","normal"),P.setTextColor(40,40,40),P.text(`League: ${x||"Unknown League"}`,Q/2,30,{align:"center"}),P.setFont("helvetica","bold"),P.setTextColor(255,0,0),P.text("Athletes Members - General Situation",Q/2,40,{align:"center"});let Ae={},Ie={};try{Ae=await Qn(),Ie=await bi()}catch(Ze){console.error("Error fetching club/league names:",Ze)}const rt={};tt.forEach(Ze=>{const mt=Ze.year||he,it=Ze.club_id;rt[mt]||(rt[mt]={}),rt[mt][it]||(rt[mt][it]=[]),rt[mt][it].push(Ze)});const yt=Object.keys(rt).sort();let Bt=55;yt.forEach((Ze,mt)=>{const it=rt[Ze];P.setFontSize(14),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`Year ${Ze}`,14,Bt),Bt+=15,Object.keys(it).sort((er,nr)=>{const mr=Ae[er]||`Club ${er}`,sr=Ae[nr]||`Club ${nr}`;return mr.localeCompare(sr)}).forEach((er,nr)=>{const mr=it[er],sr=Ae[er]||`Club ${er}`;P.setFontSize(12),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`Club ${nr+1}: ${sr}`,14,Bt),Bt+=10;const jr=mr.sort((hr,wa)=>{const na=hr.categories||"",Wo=wa.categories||"";if(na!==Wo)return na.localeCompare(Wo);const Ni=hr.genres||"",io=wa.genres||"";if(Ni!==io)return Ni.localeCompare(io);const Ho=parseFloat(hr.weight)||0,Sa=parseFloat(wa.weight)||0;return Ho-Sa}).map(hr=>[hr.last_name||"",hr.first_name||"",hr.date_of_birth||"",hr.place_of_birth||"",hr.role||"",hr.blood_type||"",hr.national_id_number||"",hr.nationality||"",hr.grade||"",hr.renewal||"",hr.year||"",hr.genres||"",hr.categories||"",hr.weight||"",hr.license_number||"",hr.registration_date||"",hr.confirmation?"Yes":"No",Ae[hr.club_id]||`Club ID: ${hr.club_id}`,Ie[hr.league_id]||`League ID: ${hr.league_id}`]);pr(P,{head:[["Last","First","DOB","POB","Role","Blood","NID","Nationality","Grade","Renewal","Year","Gender","Category","Weight","License #","Registration","Confirmed","Club","League"]],body:jr,startY:Bt,theme:"grid",headStyles:{fillColor:[34,139,34]},styles:{fontSize:8},didParseCell:function(hr){if(hr.section==="body"){const na=jr[hr.row.index][11];na&&na.toLowerCase().includes("women")?hr.cell.styles.fillColor=[211,211,211]:hr.cell.styles.fillColor=[255,255,255]}},columnStyles:{0:{cellWidth:15},1:{cellWidth:15},2:{cellWidth:12},3:{cellWidth:15},4:{cellWidth:10},5:{cellWidth:8},6:{cellWidth:15},7:{cellWidth:12},8:{cellWidth:10},9:{cellWidth:12},10:{cellWidth:8},11:{cellWidth:10},12:{cellWidth:12},13:{cellWidth:10},14:{cellWidth:15},15:{cellWidth:15},16:{cellWidth:10},17:{cellWidth:20},18:{cellWidth:20}}}),Bt=P.lastAutoTable.finalY+15,Bt>160&&(P.addPage(),Bt=20)}),Bt+=10}),P.save(`athletes_members_general_situation_${he}.pdf`)},F=async()=>{if(!tt||tt.length===0){l("No athletes data available to export");return}const P=new Tt("landscape","mm","a4"),Q=P.internal.pageSize.getWidth(),he=new Date().getFullYear(),we=new Date().toLocaleDateString(),Ae=()=>{if(P.setFontSize(10),P.setFont("helvetica","normal"),P.setTextColor(40,40,40),P.text(`Date: ${we}`,14,15),P.setFontSize(16),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text("Algerian Judo Federation",Q/2,15,{align:"center"}),d)try{P.addImage(d,"PNG",Q-40,5,25,25)}catch(it){console.error("Error adding logo to PDF:",it)}P.setFontSize(14),P.setFont("helvetica","normal"),P.setTextColor(40,40,40),P.text(`League: ${x||"Unknown League"}`,Q/2,30,{align:"center"}),P.setFontSize(14),P.setFont("helvetica","bold"),P.setTextColor(220,53,69),P.text("Athletes Members - Category Situation",Q/2,40,{align:"center"})};Ae();let Ie={},rt={};try{Ie=await Qn(),rt=await bi()}catch(it){console.error("Error fetching club/league names:",it)}const yt=tt.reduce((it,$t)=>{const er=$t.year||"Unknown Year",nr=$t.club_id||"Unknown Club",mr=Ie[nr]||`Club ID: ${nr}`,sr=$t.categories||"Uncategorized",nn=$t.genres||"Unspecified",jr=$t.weight||"No Weight";return it[er]||(it[er]={}),it[er][mr]||(it[er][mr]={}),it[er][mr][sr]||(it[er][mr][sr]={}),it[er][mr][sr][nn]||(it[er][mr][sr][nn]={}),it[er][mr][sr][nn][jr]||(it[er][mr][sr][nn][jr]=[]),it[er][mr][sr][nn][jr].push($t),it},{}),Bt=(it,$t)=>[...it].sort((nr,mr)=>{const sr=new Date(nr.date_of_birth||"1900-01-01"),nn=new Date(mr.date_of_birth||"1900-01-01");return sr-nn}).map(nr=>[nr.last_name||"",nr.first_name||"",nr.date_of_birth||"",nr.national_id_number||"",nr.nationality||"",nr.grade||"",nr.license_number||"",nr.confirmation?"Yes":"No",Ie[nr.club_id]||`Club ID: ${nr.club_id}`]);let Ze=50,mt=!0;Object.entries(yt).sort().forEach(([it,$t])=>{mt||(P.addPage(),Ae(),Ze=50),mt=!1,P.setFontSize(13),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`Year: ${it}`,14,Ze),Ze+=15,Object.entries($t).sort().forEach(([er,nr])=>{Object.entries(nr).sort().forEach(([mr,sr])=>{Object.entries(sr).sort().forEach(([nn,jr])=>{Object.entries(jr).sort().forEach(([hr,wa])=>{Ze>200&&(P.addPage(),Ae(),Ze=50),P.setFontSize(11),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`  Club: ${er} - Category: ${mr}`,20,Ze),Ze+=10,P.setFontSize(10),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`    Gender: ${nn} - Weight: ${hr}`,30,Ze),Ze+=8,Ze>220&&(P.addPage(),Ae(),Ze=50,P.setFontSize(13),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`Year: ${it} (continued)`,14,Ze),Ze+=12,P.setFontSize(11),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`  Club: ${er} - Category: ${mr} (continued)`,20,Ze),Ze+=10,P.setFontSize(10),P.setFont("helvetica","bold"),P.setTextColor(40,40,40),P.text(`    Gender: ${nn} - Weight: ${hr} (continued)`,30,Ze),Ze+=8);const na=Bt(wa);pr(P,{head:[["Last Name","First Name","DOB","NID","Nationality","Grade","License #","Confirmed","Club"]],body:na,startY:Ze,margin:{left:14,right:14},theme:"grid",headStyles:{fillColor:[40,167,69],fontSize:9,textColor:[255,255,255]},styles:{fontSize:8,cellPadding:2,fillColor:[255,255,255]},columnStyles:{0:{cellWidth:25},1:{cellWidth:30},2:{cellWidth:20},3:{cellWidth:35},4:{cellWidth:20},5:{cellWidth:18},6:{cellWidth:35},7:{cellWidth:20},8:{cellWidth:50}}}),Ze=P.lastAutoTable.finalY+10})})})})}),P.save(`athletes_category_hierarchical_${he}.pdf`)},ie=async()=>{try{const P=tt||Y||[];if(!P||P.length===0){l("No athletes data available to export");return}const{clubNames:Q,leagueNames:he}=await Promise.all([Qn(),bi()]).then(([Ze,mt])=>({clubNames:Ze,leagueNames:mt})),we=new Date().getFullYear(),Ae={};P.forEach(Ze=>{const mt=we,it=Ze.grade||"No Grade";Ae[mt]||(Ae[mt]={}),Ae[mt][it]||(Ae[mt][it]=[]),Ae[mt][it].push(Ze)}),Object.keys(Ae).forEach(Ze=>{Object.keys(Ae[Ze]).forEach(mt=>{Ae[Ze][mt].sort((it,$t)=>new Date(it.date_of_birth)-new Date($t.date_of_birth))})});const Ie=new Tt("landscape","mm","a4");let rt=50;const yt=()=>{const Ze=new Date().toLocaleDateString("en-GB");if(Ie.setFontSize(8),Ie.setTextColor(100,100,100),Ie.text(`Print Date: ${Ze}`,14,10),Ie.setFontSize(16),Ie.setTextColor(0,0,0),Ie.setFont("helvetica","bold"),Ie.text("Algerian Judo Federation",Ie.internal.pageSize.width/2,20,{align:"center"}),d)try{Ie.addImage(d,"PNG",Ie.internal.pageSize.width-40,15,25,25)}catch(mt){console.warn("Could not add federation logo to PDF:",mt)}return Ie.setFontSize(12),Ie.setFont("helvetica","normal"),Ie.text(`League: ${x||"Unknown League"}`,Ie.internal.pageSize.width/2,30,{align:"center"}),Ie.setFontSize(14),Ie.setFont("helvetica","bold"),Ie.setTextColor(220,53,69),Ie.text("Athletes - Grade and Role Situation",Ie.internal.pageSize.width/2,40,{align:"center"}),50};rt=yt(),Object.keys(Ae).sort().forEach((Ze,mt)=>{Object.keys(Ae[Ze]).sort().forEach(($t,er)=>{const nr=Ae[Ze][$t];rt>180&&(Ie.addPage(),rt=yt()),Ie.setFontSize(12),Ie.setFont("helvetica","bold"),Ie.setTextColor(0,0,0),Ie.text(`Season Year: ${Ze} - Grade: ${$t}`,14,rt),rt+=10;const mr=nr.map(sr=>[sr.last_name||"",sr.first_name||"",sr.date_of_birth?new Date(sr.date_of_birth).toLocaleDateString("en-GB"):"",sr.national_id_number||"",sr.nationality||"",sr.grade||"",sr.license_number||"",sr.confirmation?"Yes":"No",Q[sr.club_id]||`Club ID: ${sr.club_id}`]);pr(Ie,{head:[["Last Name","First Name","DOB","NID","Nationality","Grade","License #","Confirmed","Club"]],body:mr,startY:rt,margin:{left:14,right:14},theme:"grid",headStyles:{fillColor:[40,167,69],fontSize:9,textColor:[255,255,255]},styles:{fontSize:8,cellPadding:2,fillColor:[255,255,255]},columnStyles:{0:{cellWidth:25},1:{cellWidth:30},2:{cellWidth:20},3:{cellWidth:35},4:{cellWidth:20},5:{cellWidth:18},6:{cellWidth:35},7:{cellWidth:20},8:{cellWidth:50}},didDrawPage:function(sr){sr.pageNumber>1&&(yt(),sr.settings.margin.top=80)}}),rt=Ie.lastAutoTable.finalY+10})}),Ie.save(`athletes_grade_role_${new Date().getFullYear()}.pdf`)}catch(P){console.error("Error exporting PDF:",P)}};return a.jsxs("div",{className:"app-container",children:[r&&a.jsx(rn,{}),a.jsx("header",{children:a.jsxs("div",{className:"federation-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[d?a.jsx("img",{src:d,alt:"Federation Logo",className:"federation-logo"}):a.jsx("img",{src:Oi,alt:"Default Federation Logo",className:"federation-logo"}),a.jsx("h1",{className:"federation-title",children:Je})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t!=null&&t.logo_url?a.jsx("img",{src:t.logo_url,alt:"League Logo",className:"member-logo",style:{width:"50px",height:"50px"}}):null,a.jsx("h2",{className:"federation-title",children:x||"League Name"})]})]})}),a.jsxs("section",{className:"app-container",children:[a.jsxs("h2",{children:["Welcome ",(t==null?void 0:t.first_name)||"User"," ",(t==null?void 0:t.last_name)||""]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Role:"})," ",(t==null?void 0:t.role)||"N/A"]}),a.jsxs("div",{className:"sticky-button-bar",style:{margin:"12px 0",display:"flex",gap:8},children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-btn","data-id":"1",onClick:async P=>{if(br(P.currentTarget),o){l("Please resolve the current error before navigating to another page.");return}e("/member-list-l",{state:{...t,league_id:Z,league_name:x,league_logo:m}})},children:"The League Member List"}),a.jsx("button",{className:"primary-btn","data-id":"2",onClick:async P=>{if(br(P.currentTarget),o){l("Please resolve the current error before navigating to another page.");return}e("/TheClubListAddFed-League",{state:{...t,league_id:Z,league_name:x,league_logo:m}})},children:"The Club Member List"}),a.jsx("button",{className:"primary-btn","data-id":"3",onClick:async P=>{if(br(P.currentTarget),o){l("Please resolve the current error before navigating to another page.");return}e("/TheAthleteListAdd-League",{state:{...t,league_id:Z,league_name:x,league_logo:m}})},children:"The Athlete List Add"})]}),a.jsx("div",{className:"form-table-wrapper"}),a.jsx("h2",{className:"form-title",children:"Add Athlete"}),c&&a.jsx("div",{style:{color:"green"},children:c}),a.jsxs("form",{onSubmit:rr,className:"form-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:12},children:[a.jsxs("label",{children:["Last Name *",a.jsx("input",{value:E,onChange:P=>q(P.target.value),required:!0})]}),a.jsxs("label",{children:["First Name *",a.jsx("input",{value:oe,onChange:P=>me(P.target.value),required:!0})]}),a.jsxs("label",{children:["Date of Birth *",a.jsx("input",{type:"date",value:Ne,onChange:P=>Se(P.target.value),required:!0})]}),a.jsxs("label",{children:["Place of Birth *",a.jsx("input",{value:Ce,onChange:P=>Le(P.target.value),required:!0})]}),a.jsxs("label",{children:["Role *",a.jsxs("select",{value:Me,onChange:P=>Ue(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),G.map((P,Q)=>a.jsx("option",{value:typeof P=="object"?P.club_role??P.name??"":P,children:typeof P=="object"?P.club_role??P.name??"":P},Q))]})]}),a.jsxs("label",{children:["Blood Type *",a.jsxs("select",{value:at,onChange:P=>Ve(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]})]}),a.jsxs("label",{children:["National Identity Number *",a.jsx("input",{value:Oe,onChange:P=>le(P.target.value.replace(/\D/g,"").slice(0,18)),maxLength:18,required:!0}),a.jsx("small",{children:"18 digits required  must be unique."})]}),a.jsxs("label",{children:["Password *",a.jsx("input",{type:"password",value:Ct,onChange:P=>Et(P.target.value),required:!0})]}),a.jsxs("label",{children:["Confirm Password *",a.jsx("input",{type:"password",value:He,onChange:P=>$e(P.target.value),required:!0})]}),a.jsxs("label",{children:["Nationality *",a.jsxs("select",{value:jt,onChange:P=>At(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),ce.map((P,Q)=>a.jsx("option",{value:P,children:P},Q))]})]}),a.jsxs("label",{children:["Grade *",a.jsxs("select",{value:Wt,onChange:P=>st(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"brown belt",children:"brown belt"}),a.jsx("option",{value:"black belt",children:"black belt"})]})]}),a.jsxs("label",{children:["Genres *",a.jsxs("select",{value:St,onChange:P=>zt(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Ge.map((P,Q)=>a.jsx("option",{value:P,children:P},Q))]})]}),a.jsxs("label",{children:["Categories *",a.jsxs("select",{value:bt,onChange:P=>Dt(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Ee.map((P,Q)=>a.jsx("option",{value:P,children:P},Q))]})]}),a.jsxs("label",{children:["Weight *",a.jsxs("select",{value:Pt,onChange:P=>Ot(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Be.map((P,Q)=>a.jsx("option",{value:P,children:P},Q))]})]}),a.jsxs("label",{children:["League *",a.jsxs("select",{value:T,onChange:P=>{R(P.target.value),I("")},disabled:!0,required:!0,children:[a.jsx("option",{value:"",children:"-- Select League --"}),ve.map(P=>a.jsx("option",{value:P.id,children:P.name_league},P.id))]})]}),a.jsxs("label",{children:["Club *",a.jsxs("select",{value:z,onChange:P=>I(P.target.value),disabled:!T&&!C,required:!0,children:[a.jsx("option",{value:"",children:"-- Select Club --"}),M.map(P=>a.jsx("option",{value:P.id,children:P.name_club},P.id))]})]}),a.jsxs("label",{children:["Upload Photo *",a.jsx("input",{type:"file",accept:"image/*",onChange:P=>{var Q;return ct(((Q=P.target.files)==null?void 0:Q[0])??null)},required:!0})]}),a.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",gap:8},children:a.jsx("button",{type:"submit",className:"primary-b",children:"Save Athlete"})}),a.jsx("p",{style:{gridColumn:"1 / -1",fontSize:"14px",color:"#666",marginTop:"10px"},children:"All fields marked with an asterisk (*) must be filled in."})]})]}),a.jsxs("section",{className:"app-container",children:[a.jsx("h2",{className:"form-title",children:"List of Athletes"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("label",{children:["League",a.jsxs("select",{value:T,onChange:P=>{R(P.target.value),I("")},disabled:!0,children:[a.jsx("option",{value:"",children:"-- Select League --"}),ve.map(P=>a.jsx("option",{value:P.id,children:P.name_league},P.id))]})]}),a.jsxs("label",{children:["Club:",a.jsxs("select",{value:z,onChange:P=>I(P.target.value),disabled:!T&&!C,children:[a.jsx("option",{value:"",children:"-- All Clubs --"}),M.map(P=>a.jsx("option",{value:P.id,children:P.name_club},P.id))]})]}),a.jsx("div",{children:a.jsx("div",{children:a.jsx("h2",{className:"form-title",children:"search Member"})})}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Search by First Name, Last Name, or License Number",value:ht,onChange:P=>Ye(P.target.value)})})]}),a.jsx("div",{className:"table-container",ref:tr,style:{overflow:"auto"},children:a.jsxs("table",{className:"athlete-table",style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Last"}),a.jsx("th",{children:"First"}),a.jsx("th",{children:"DOB"}),a.jsx("th",{children:"POB"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Blood"}),a.jsx("th",{children:"NID"}),a.jsx("th",{children:"Nationality"}),a.jsx("th",{children:"Grade"}),a.jsx("th",{children:"Renewal"}),a.jsx("th",{children:"Year"}),a.jsx("th",{children:"Genres"}),a.jsx("th",{children:"Categories"}),a.jsx("th",{children:"Weight"}),a.jsx("th",{children:"License #"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Photos"}),a.jsx("th",{children:"Confirmation"}),a.jsx("th",{children:"conf_request"}),a.jsx("th",{children:"Club ID"}),a.jsx("th",{children:"League ID"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:tt.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:22,children:"No athletes found."})}):tt.map(P=>a.jsxs("tr",{onDoubleClick:()=>D(P),style:{cursor:"pointer"},children:[a.jsx("td",{children:Te===P.id?a.jsx("input",{value:ot.last_name||"",onChange:Q=>Rt({...ot,last_name:Q.target.value})}):P.last_name}),a.jsx("td",{children:Te===P.id?a.jsx("input",{value:ot.first_name||"",onChange:Q=>Rt({...ot,first_name:Q.target.value})}):P.first_name}),a.jsx("td",{children:Te===P.id?a.jsx("input",{type:"date",value:ot.date_of_birth||"",onChange:Q=>Rt({...ot,date_of_birth:Q.target.value})}):P.date_of_birth}),a.jsx("td",{children:Te===P.id?a.jsx("input",{value:ot.place_of_birth||"",onChange:Q=>Rt({...ot,place_of_birth:Q.target.value})}):P.place_of_birth}),a.jsx("td",{children:Te===P.id?a.jsxs("select",{value:ot.role||"",onChange:Q=>Rt({...ot,role:Q.target.value}),children:[a.jsx("option",{value:"",children:"-- Select --"}),G.map((Q,he)=>a.jsx("option",{value:typeof Q=="object"?Q.club_role??Q.name??"":Q,children:typeof Q=="object"?Q.club_role??Q.name??"":Q},he))]}):P.role}),a.jsx("td",{children:Te===P.id?a.jsxs("select",{value:ot.blood_type||"",onChange:Q=>Rt({...ot,blood_type:Q.target.value}),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A-"}),a.jsx("option",{children:"B+"}),a.jsx("option",{children:"B-"}),a.jsx("option",{children:"AB+"}),a.jsx("option",{children:"AB-"}),a.jsx("option",{children:"O+"}),a.jsx("option",{children:"O-"})]}):P.blood_type}),a.jsx("td",{children:P.national_id_number}),a.jsx("td",{children:Te===P.id?a.jsxs("select",{value:ot.nationality||"",onChange:Q=>Rt({...ot,nationality:Q.target.value}),children:[a.jsx("option",{value:"",children:"--"}),ce.map((Q,he)=>a.jsx("option",{value:Q,children:Q},he))]}):P.nationality}),a.jsx("td",{children:Te===P.id?a.jsxs("select",{value:ot.grade||"",onChange:Q=>Rt({...ot,grade:Q.target.value}),children:[a.jsx("option",{value:"",children:"--"}),W.map((Q,he)=>a.jsx("option",{value:Q,children:Q},he))]}):P.grade}),a.jsx("td",{children:P.renewal}),a.jsx("td",{children:P.year}),a.jsx("td",{children:Te===P.id?a.jsxs("select",{value:ot.genres||"",onChange:Q=>Rt({...ot,genres:Q.target.value}),children:[a.jsx("option",{value:"",children:"--"}),Ge.map((Q,he)=>a.jsx("option",{value:Q,children:Q},he))]}):P.genres}),a.jsx("td",{children:Te===P.id?a.jsxs("select",{value:ot.categories||"",onChange:Q=>Rt({...ot,categories:Q.target.value}),children:[a.jsx("option",{value:"",children:"--"}),Ee.map((Q,he)=>a.jsx("option",{value:Q,children:Q},he))]}):P.categories}),a.jsx("td",{children:Te===P.id?a.jsxs("select",{value:ot.weight||"",onChange:Q=>Rt({...ot,weight:Q.target.value}),disabled:!ot.genres||!ot.categories,children:[a.jsx("option",{value:"",children:"-- Select --"}),Be.map((Q,he)=>a.jsx("option",{value:Q,children:Q},he))]}):P.weight}),a.jsx("td",{children:P.license_number}),a.jsx("td",{children:P.registration_date}),a.jsx("td",{children:P.photos_url?a.jsx("img",{src:P.photos_url,alt:`${P.first_name} ${P.last_name}`,style:{width:48,height:48,objectFit:"cover",borderRadius:6}}):"No Photo"}),a.jsx("td",{children:P.confirmation?"":""}),a.jsx("td",{children:P.confirmation_request?"conf_request":"conf_Not_request"}),a.jsx("td",{children:P.club_id}),a.jsx("td",{children:P.league_id}),a.jsx("td",{children:Te===P.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-S",onClick:K,children:"Save"}),a.jsx("button",{className:"secondary-btn",onClick:A,children:"Cancel "})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"primary-M",onClick:()=>L(P),children:"Modify"}),a.jsx("button",{className:"secondary-btn",onClick:()=>ae(P),children:"Delete"}),a.jsx("button",{className:P.confirmation?"cancel-btn":"confirm-btn",disabled:(P.confirmation_request?"conf_request":"conf_Not_request")!="conf_request",onClick:()=>{if((P.confirmation_request?"conf_request":"conf_Not_request")!="conf_request"){l("you not confirme because is not requested");return}Pe(P.id,P.confirmation)},children:P.confirmation?"Cancel Confirmation":"Confirm"})]})})]},P.id))})]})}),a.jsxs("div",{className:"export-buttons",style:{margin:"12px 0",display:"flex",gap:8},children:[a.jsx(Er,{}),a.jsx("button",{className:"primary-b",onClick:ye,children:"Export General PDF"}),a.jsx("button",{className:"primary-b",onClick:F,children:"Export by Category"}),a.jsx("button",{className:"primary-b",onClick:ie,children:"Export by Grade PDF"})]})]}),o&&a.jsx(An,{error:o,onClose:()=>l("")}),c&&a.jsx(In,{success:c,onClose:()=>u("")}),i&&a.jsx($i,{}),a.jsx(gn,{}),a.jsx("footer",{className:"footer",style:{backgroundColor:"red"},children:a.jsx("p",{children:" 2025 Algerian Judo Federation. All rights reserved."})})]})}function c8(){const t=Ur();return a.jsxs("div",{style:{padding:"50px",backgroundColor:"#f0f0f0",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",gap:"30px"},children:[a.jsx("h1",{children:"Button Comparison Test"}),a.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",padding:"20px",backgroundColor:"white",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("p",{style:{marginBottom:"10px",fontWeight:"bold"},children:"primary-btn class:"}),a.jsx("button",{className:"primary-btn",children:"Primary Button"})]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("p",{style:{marginBottom:"10px",fontWeight:"bold"},children:"primary-b class:"}),a.jsx("button",{className:"primary-b",children:"Primary B Button"})]})]}),a.jsx("div",{style:{display:"flex",gap:"20px",alignItems:"center",padding:"20px",backgroundColor:"white",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("p",{style:{marginBottom:"10px",fontWeight:"bold"},children:"primary-bt class (for comparison):"}),a.jsx("button",{className:"primary-bt",children:"Primary BT Button"})]})}),a.jsxs("p",{style:{maxWidth:"600px",textAlign:"center",backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:["The first two buttons (primary-btn and primary-b) should look ",a.jsx("strong",{children:"exactly identical"}),"with the same gradient, animations, and hover effects. The third button (primary-bt) has different enhanced styling for comparison."]}),a.jsx("button",{className:"secondary-btn",onClick:()=>t("/"),style:{marginTop:"20px"},children:"Back to Home"})]})}function u8(){return a.jsx(vN,{children:a.jsxs(gN,{children:[a.jsx(Vr,{path:"/",element:a.jsx(Hk,{})}),a.jsx(Vr,{path:"/FederationPage",element:a.jsx(pL,{})}),a.jsx(Vr,{path:"/LeaguePage",element:a.jsx(Gk,{})}),a.jsx(Vr,{path:"/AmateurSportsClubPage",element:a.jsx(Ok,{})}),a.jsx(Vr,{path:"/AddMemberPage",element:a.jsx(Jk,{})}),a.jsx(Vr,{path:"/AddMemberLeague",element:a.jsx(Kk,{})}),a.jsx(Vr,{path:"/AddMemberClub",element:a.jsx(Qk,{})}),a.jsx(Vr,{path:"/AthletePage",element:a.jsx(Rk,{})}),a.jsx(Vr,{path:"/Athlete",element:a.jsx(Mk,{})}),a.jsx(Vr,{path:"/MemberListPage",element:a.jsx(Yk,{})}),a.jsx(Vr,{path:"/member-list",element:a.jsx(Zk,{})}),a.jsx(Vr,{path:"/club-member-list",element:a.jsx(e8,{})}),a.jsx(Vr,{path:"/MemberListPageP",element:a.jsx(t8,{})}),a.jsx(Vr,{path:"/member-list-l",element:a.jsx(r8,{})}),a.jsx(Vr,{path:"/club-member-listC",element:a.jsx(n8,{})}),a.jsx(Vr,{path:"/photos-logo-publication",element:a.jsx(Xk,{})}),a.jsx(Vr,{path:"/TheClubListAdd-Fed",element:a.jsx(i8,{})}),a.jsx(Vr,{path:"/TheLeagueList-Add",element:a.jsx(s8,{})}),a.jsx(Vr,{path:"/TheAthleteList-Add",element:a.jsx(a8,{})}),a.jsx(Vr,{path:"/TheClubListAddFed-League",element:a.jsx(o8,{})}),a.jsx(Vr,{path:"/TheAthleteListAdd-League",element:a.jsx(l8,{})}),a.jsx(Vr,{path:"/button-test",element:a.jsx(c8,{})})]})})}rp.createRoot(document.getElementById("root")).render(a.jsx(u8,{}));export{Pr as _,Ui as c,Oy as g};
